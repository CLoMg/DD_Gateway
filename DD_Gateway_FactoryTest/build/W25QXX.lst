ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"W25QXX.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.BSP_W25Qx_Init,"ax",%progbits
  20              		.align	1
  21              		.global	BSP_W25Qx_Init
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	BSP_W25Qx_Init:
  27              	.LFB288:
  28              		.file 1 "FML/Src/W25QXX.c"
   1:FML/Src/W25QXX.c **** /**************************************************************************************************
   2:FML/Src/W25QXX.c **** *
   3:FML/Src/W25QXX.c **** * File                : ws_W25Qx.c
   4:FML/Src/W25QXX.c **** * Hardware Environment: 
   5:FML/Src/W25QXX.c **** * Build Environment   : RealView MDK-ARM  Version: 4.20
   6:FML/Src/W25QXX.c **** * Version             : V1.0
   7:FML/Src/W25QXX.c **** * By                  : 
   8:FML/Src/W25QXX.c **** *
   9:FML/Src/W25QXX.c **** *                                  (c) Copyright 2005-2011, WaveShare
  10:FML/Src/W25QXX.c **** *                                       http://www.waveshare.net
  11:FML/Src/W25QXX.c **** *                                          All Rights Reserved
  12:FML/Src/W25QXX.c **** *
  13:FML/Src/W25QXX.c **** ***************************************************************************************************
  14:FML/Src/W25QXX.c **** 
  15:FML/Src/W25QXX.c **** #include "W25QXX.h"
  16:FML/Src/W25QXX.c **** #include "shell_port.h"
  17:FML/Src/W25QXX.c **** #include <string.h>
  18:FML/Src/W25QXX.c **** /**
  19:FML/Src/W25QXX.c ****   * @brief  Initializes the W25Q128FV interface.
  20:FML/Src/W25QXX.c ****   * @retval None
  21:FML/Src/W25QXX.c ****   */
  22:FML/Src/W25QXX.c **** uint8_t BSP_W25Qx_Init(void)
  23:FML/Src/W25QXX.c **** { 
  29              		.loc 1 23 1
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 1, uses_anonymous_args = 0
  33 0000 80B5     		push	{r7, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 2


  36              		.cfi_offset 7, -8
  37              		.cfi_offset 14, -4
  38 0002 00AF     		add	r7, sp, #0
  39              	.LCFI1:
  40              		.cfi_def_cfa_register 7
  24:FML/Src/W25QXX.c **** 	/* Reset W25Qxxx */
  25:FML/Src/W25QXX.c **** 	BSP_W25Qx_Reset();
  41              		.loc 1 25 2
  42 0004 FFF7FEFF 		bl	BSP_W25Qx_Reset
  26:FML/Src/W25QXX.c **** 	
  27:FML/Src/W25QXX.c **** 	return BSP_W25Qx_GetStatus();
  43              		.loc 1 27 9
  44 0008 FFF7FEFF 		bl	BSP_W25Qx_GetStatus
  45 000c 0346     		mov	r3, r0
  28:FML/Src/W25QXX.c **** }
  46              		.loc 1 28 1
  47 000e 1846     		mov	r0, r3
  48 0010 80BD     		pop	{r7, pc}
  49              		.cfi_endproc
  50              	.LFE288:
  52              		.section	.text.BSP_W25Qx_Reset,"ax",%progbits
  53              		.align	1
  54              		.syntax unified
  55              		.thumb
  56              		.thumb_func
  58              	BSP_W25Qx_Reset:
  59              	.LFB289:
  29:FML/Src/W25QXX.c **** 
  30:FML/Src/W25QXX.c **** /**
  31:FML/Src/W25QXX.c ****   * @brief  This function reset the W25Qx.
  32:FML/Src/W25QXX.c ****   * @retval None
  33:FML/Src/W25QXX.c ****   */
  34:FML/Src/W25QXX.c **** static void	BSP_W25Qx_Reset(void)
  35:FML/Src/W25QXX.c **** {
  60              		.loc 1 35 1
  61              		.cfi_startproc
  62              		@ args = 0, pretend = 0, frame = 8
  63              		@ frame_needed = 1, uses_anonymous_args = 0
  64 0000 80B5     		push	{r7, lr}
  65              	.LCFI2:
  66              		.cfi_def_cfa_offset 8
  67              		.cfi_offset 7, -8
  68              		.cfi_offset 14, -4
  69 0002 82B0     		sub	sp, sp, #8
  70              	.LCFI3:
  71              		.cfi_def_cfa_offset 16
  72 0004 00AF     		add	r7, sp, #0
  73              	.LCFI4:
  74              		.cfi_def_cfa_register 7
  36:FML/Src/W25QXX.c **** 	uint8_t cmd[2] = {RESET_ENABLE_CMD,RESET_MEMORY_CMD};
  75              		.loc 1 36 10
  76 0006 49F66613 		movw	r3, #39270
  77 000a BB80     		strh	r3, [r7, #4]	@ movhi
  37:FML/Src/W25QXX.c **** 	
  38:FML/Src/W25QXX.c **** 	W25Qx_Enable();
  78              		.loc 1 38 2
  79 000c 0022     		movs	r2, #0
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 3


  80 000e 1021     		movs	r1, #16
  81 0010 4FF09040 		mov	r0, #1207959552
  82 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
  39:FML/Src/W25QXX.c **** 	/* Send the reset command */
  40:FML/Src/W25QXX.c **** 	HAL_SPI_Transmit(&hspi3, cmd, 2, W25Qx_TIMEOUT_VALUE);	
  83              		.loc 1 40 2
  84 0018 391D     		adds	r1, r7, #4
  85 001a 4FF47A73 		mov	r3, #1000
  86 001e 0222     		movs	r2, #2
  87 0020 0648     		ldr	r0, .L4
  88 0022 FFF7FEFF 		bl	HAL_SPI_Transmit
  41:FML/Src/W25QXX.c **** 	W25Qx_Disable();
  89              		.loc 1 41 2
  90 0026 0122     		movs	r2, #1
  91 0028 1021     		movs	r1, #16
  92 002a 4FF09040 		mov	r0, #1207959552
  93 002e FFF7FEFF 		bl	HAL_GPIO_WritePin
  42:FML/Src/W25QXX.c **** 
  43:FML/Src/W25QXX.c **** }
  94              		.loc 1 43 1
  95 0032 00BF     		nop
  96 0034 0837     		adds	r7, r7, #8
  97              	.LCFI5:
  98              		.cfi_def_cfa_offset 8
  99 0036 BD46     		mov	sp, r7
 100              	.LCFI6:
 101              		.cfi_def_cfa_register 13
 102              		@ sp needed
 103 0038 80BD     		pop	{r7, pc}
 104              	.L5:
 105 003a 00BF     		.align	2
 106              	.L4:
 107 003c 00000000 		.word	hspi3
 108              		.cfi_endproc
 109              	.LFE289:
 111              		.section	.text.BSP_W25Qx_GetStatus,"ax",%progbits
 112              		.align	1
 113              		.syntax unified
 114              		.thumb
 115              		.thumb_func
 117              	BSP_W25Qx_GetStatus:
 118              	.LFB290:
  44:FML/Src/W25QXX.c **** 
  45:FML/Src/W25QXX.c **** /**
  46:FML/Src/W25QXX.c ****   * @brief  Reads current status of the W25Q128FV.
  47:FML/Src/W25QXX.c ****   * @retval W25Q128FV memory status
  48:FML/Src/W25QXX.c ****   */
  49:FML/Src/W25QXX.c **** static uint8_t BSP_W25Qx_GetStatus(void)
  50:FML/Src/W25QXX.c **** {
 119              		.loc 1 50 1
 120              		.cfi_startproc
 121              		@ args = 0, pretend = 0, frame = 8
 122              		@ frame_needed = 1, uses_anonymous_args = 0
 123 0000 80B5     		push	{r7, lr}
 124              	.LCFI7:
 125              		.cfi_def_cfa_offset 8
 126              		.cfi_offset 7, -8
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 4


 127              		.cfi_offset 14, -4
 128 0002 82B0     		sub	sp, sp, #8
 129              	.LCFI8:
 130              		.cfi_def_cfa_offset 16
 131 0004 00AF     		add	r7, sp, #0
 132              	.LCFI9:
 133              		.cfi_def_cfa_register 7
  51:FML/Src/W25QXX.c **** 	uint8_t cmd[] = {READ_STATUS_REG1_CMD};
 134              		.loc 1 51 10
 135 0006 0523     		movs	r3, #5
 136 0008 3B71     		strb	r3, [r7, #4]
  52:FML/Src/W25QXX.c **** 	uint8_t status;
  53:FML/Src/W25QXX.c **** 	
  54:FML/Src/W25QXX.c **** 	W25Qx_Enable();
 137              		.loc 1 54 2
 138 000a 0022     		movs	r2, #0
 139 000c 1021     		movs	r1, #16
 140 000e 4FF09040 		mov	r0, #1207959552
 141 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
  55:FML/Src/W25QXX.c **** 	/* Send the read status command */
  56:FML/Src/W25QXX.c **** 	HAL_SPI_Transmit(&hspi3, cmd, 1, W25Qx_TIMEOUT_VALUE);	
 142              		.loc 1 56 2
 143 0016 391D     		adds	r1, r7, #4
 144 0018 4FF47A73 		mov	r3, #1000
 145 001c 0122     		movs	r2, #1
 146 001e 0E48     		ldr	r0, .L10
 147 0020 FFF7FEFF 		bl	HAL_SPI_Transmit
  57:FML/Src/W25QXX.c **** 	/* Reception of the data */
  58:FML/Src/W25QXX.c **** 	HAL_SPI_Receive(&hspi3,&status, 1, W25Qx_TIMEOUT_VALUE);
 148              		.loc 1 58 2
 149 0024 F91C     		adds	r1, r7, #3
 150 0026 4FF47A73 		mov	r3, #1000
 151 002a 0122     		movs	r2, #1
 152 002c 0A48     		ldr	r0, .L10
 153 002e FFF7FEFF 		bl	HAL_SPI_Receive
  59:FML/Src/W25QXX.c **** 	W25Qx_Disable();
 154              		.loc 1 59 2
 155 0032 0122     		movs	r2, #1
 156 0034 1021     		movs	r1, #16
 157 0036 4FF09040 		mov	r0, #1207959552
 158 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
  60:FML/Src/W25QXX.c **** 	
  61:FML/Src/W25QXX.c **** 	/* Check the value of the register */
  62:FML/Src/W25QXX.c ****   if((status & W25Q128FV_FSR_BUSY) != 0)
 159              		.loc 1 62 14
 160 003e FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 161 0040 03F00103 		and	r3, r3, #1
 162              		.loc 1 62 5
 163 0044 002B     		cmp	r3, #0
 164 0046 01D0     		beq	.L7
  63:FML/Src/W25QXX.c ****   {
  64:FML/Src/W25QXX.c ****     return W25Qx_BUSY;
 165              		.loc 1 64 12
 166 0048 0223     		movs	r3, #2
 167 004a 00E0     		b	.L9
 168              	.L7:
  65:FML/Src/W25QXX.c ****   }
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 5


  66:FML/Src/W25QXX.c **** 	else
  67:FML/Src/W25QXX.c **** 	{
  68:FML/Src/W25QXX.c **** 		return W25Qx_OK;
 169              		.loc 1 68 10
 170 004c 0023     		movs	r3, #0
 171              	.L9:
  69:FML/Src/W25QXX.c **** 	}		
  70:FML/Src/W25QXX.c **** }
 172              		.loc 1 70 1 discriminator 1
 173 004e 1846     		mov	r0, r3
 174 0050 0837     		adds	r7, r7, #8
 175              	.LCFI10:
 176              		.cfi_def_cfa_offset 8
 177 0052 BD46     		mov	sp, r7
 178              	.LCFI11:
 179              		.cfi_def_cfa_register 13
 180              		@ sp needed
 181 0054 80BD     		pop	{r7, pc}
 182              	.L11:
 183 0056 00BF     		.align	2
 184              	.L10:
 185 0058 00000000 		.word	hspi3
 186              		.cfi_endproc
 187              	.LFE290:
 189              		.section	.text.BSP_W25Qx_WriteEnable,"ax",%progbits
 190              		.align	1
 191              		.global	BSP_W25Qx_WriteEnable
 192              		.syntax unified
 193              		.thumb
 194              		.thumb_func
 196              	BSP_W25Qx_WriteEnable:
 197              	.LFB291:
  71:FML/Src/W25QXX.c **** 
  72:FML/Src/W25QXX.c **** /**
  73:FML/Src/W25QXX.c ****   * @brief  This function send a Write Enable and wait it is effective.
  74:FML/Src/W25QXX.c ****   * @retval None
  75:FML/Src/W25QXX.c ****   */
  76:FML/Src/W25QXX.c **** uint8_t BSP_W25Qx_WriteEnable(void)
  77:FML/Src/W25QXX.c **** {
 198              		.loc 1 77 1
 199              		.cfi_startproc
 200              		@ args = 0, pretend = 0, frame = 8
 201              		@ frame_needed = 1, uses_anonymous_args = 0
 202 0000 80B5     		push	{r7, lr}
 203              	.LCFI12:
 204              		.cfi_def_cfa_offset 8
 205              		.cfi_offset 7, -8
 206              		.cfi_offset 14, -4
 207 0002 82B0     		sub	sp, sp, #8
 208              	.LCFI13:
 209              		.cfi_def_cfa_offset 16
 210 0004 00AF     		add	r7, sp, #0
 211              	.LCFI14:
 212              		.cfi_def_cfa_register 7
  78:FML/Src/W25QXX.c **** 	uint8_t cmd[] = {WRITE_ENABLE_CMD};
 213              		.loc 1 78 10
 214 0006 0623     		movs	r3, #6
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 6


 215 0008 3B70     		strb	r3, [r7]
  79:FML/Src/W25QXX.c **** 	uint32_t tickstart = HAL_GetTick();
 216              		.loc 1 79 23
 217 000a FFF7FEFF 		bl	HAL_GetTick
 218 000e 7860     		str	r0, [r7, #4]
  80:FML/Src/W25QXX.c **** 
  81:FML/Src/W25QXX.c **** 	/*Select the FLASH: Chip Select low */
  82:FML/Src/W25QXX.c **** 	W25Qx_Enable();
 219              		.loc 1 82 2
 220 0010 0022     		movs	r2, #0
 221 0012 1021     		movs	r1, #16
 222 0014 4FF09040 		mov	r0, #1207959552
 223 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
  83:FML/Src/W25QXX.c **** 	/* Send the read ID command */
  84:FML/Src/W25QXX.c **** 	HAL_SPI_Transmit(&hspi3, cmd, 1, W25Qx_TIMEOUT_VALUE);	
 224              		.loc 1 84 2
 225 001c 3946     		mov	r1, r7
 226 001e 4FF47A73 		mov	r3, #1000
 227 0022 0122     		movs	r2, #1
 228 0024 0E48     		ldr	r0, .L17
 229 0026 FFF7FEFF 		bl	HAL_SPI_Transmit
  85:FML/Src/W25QXX.c **** 	/*Deselect the FLASH: Chip Select high */
  86:FML/Src/W25QXX.c **** 	W25Qx_Disable();
 230              		.loc 1 86 2
 231 002a 0122     		movs	r2, #1
 232 002c 1021     		movs	r1, #16
 233 002e 4FF09040 		mov	r0, #1207959552
 234 0032 FFF7FEFF 		bl	HAL_GPIO_WritePin
  87:FML/Src/W25QXX.c **** 	
  88:FML/Src/W25QXX.c **** 	/* Wait the end of Flash writing */
  89:FML/Src/W25QXX.c **** 	while(BSP_W25Qx_GetStatus() == W25Qx_BUSY);
 235              		.loc 1 89 7
 236 0036 00BF     		nop
 237              	.L13:
 238              		.loc 1 89 8 discriminator 1
 239 0038 FFF7FEFF 		bl	BSP_W25Qx_GetStatus
 240 003c 0346     		mov	r3, r0
 241              		.loc 1 89 7 discriminator 1
 242 003e 022B     		cmp	r3, #2
 243 0040 FAD0     		beq	.L13
  90:FML/Src/W25QXX.c **** 	{
  91:FML/Src/W25QXX.c **** 		/* Check for the Timeout */
  92:FML/Src/W25QXX.c ****     if((HAL_GetTick() - tickstart) > W25Qx_TIMEOUT_VALUE)
 244              		.loc 1 92 9
 245 0042 FFF7FEFF 		bl	HAL_GetTick
 246 0046 0246     		mov	r2, r0
 247              		.loc 1 92 23
 248 0048 7B68     		ldr	r3, [r7, #4]
 249 004a D31A     		subs	r3, r2, r3
 250              		.loc 1 92 7
 251 004c B3F57A7F 		cmp	r3, #1000
 252 0050 01D9     		bls	.L14
  93:FML/Src/W25QXX.c ****     {        
  94:FML/Src/W25QXX.c **** 			return W25Qx_TIMEOUT;
 253              		.loc 1 94 11
 254 0052 0323     		movs	r3, #3
 255 0054 00E0     		b	.L16
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 7


 256              	.L14:
  95:FML/Src/W25QXX.c ****     }
  96:FML/Src/W25QXX.c **** 	}
  97:FML/Src/W25QXX.c **** 	
  98:FML/Src/W25QXX.c **** 	return W25Qx_OK;
 257              		.loc 1 98 9
 258 0056 0023     		movs	r3, #0
 259              	.L16:
  99:FML/Src/W25QXX.c **** }
 260              		.loc 1 99 1 discriminator 1
 261 0058 1846     		mov	r0, r3
 262 005a 0837     		adds	r7, r7, #8
 263              	.LCFI15:
 264              		.cfi_def_cfa_offset 8
 265 005c BD46     		mov	sp, r7
 266              	.LCFI16:
 267              		.cfi_def_cfa_register 13
 268              		@ sp needed
 269 005e 80BD     		pop	{r7, pc}
 270              	.L18:
 271              		.align	2
 272              	.L17:
 273 0060 00000000 		.word	hspi3
 274              		.cfi_endproc
 275              	.LFE291:
 277              		.section	.text.BSP_W25Qx_Read_ID,"ax",%progbits
 278              		.align	1
 279              		.global	BSP_W25Qx_Read_ID
 280              		.syntax unified
 281              		.thumb
 282              		.thumb_func
 284              	BSP_W25Qx_Read_ID:
 285              	.LFB292:
 100:FML/Src/W25QXX.c **** 
 101:FML/Src/W25QXX.c **** /**
 102:FML/Src/W25QXX.c ****   * @brief  Read Manufacture/Device ID.
 103:FML/Src/W25QXX.c **** 	* @param  return value address
 104:FML/Src/W25QXX.c ****   * @retval None
 105:FML/Src/W25QXX.c ****   */
 106:FML/Src/W25QXX.c **** void BSP_W25Qx_Read_ID(uint8_t *ID)
 107:FML/Src/W25QXX.c **** {
 286              		.loc 1 107 1
 287              		.cfi_startproc
 288              		@ args = 0, pretend = 0, frame = 16
 289              		@ frame_needed = 1, uses_anonymous_args = 0
 290 0000 80B5     		push	{r7, lr}
 291              	.LCFI17:
 292              		.cfi_def_cfa_offset 8
 293              		.cfi_offset 7, -8
 294              		.cfi_offset 14, -4
 295 0002 84B0     		sub	sp, sp, #16
 296              	.LCFI18:
 297              		.cfi_def_cfa_offset 24
 298 0004 00AF     		add	r7, sp, #0
 299              	.LCFI19:
 300              		.cfi_def_cfa_register 7
 301 0006 7860     		str	r0, [r7, #4]
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 8


 108:FML/Src/W25QXX.c **** 	uint8_t cmd[4] = {READ_ID_CMD,0x00,0x00,0x00};
 302              		.loc 1 108 10
 303 0008 9023     		movs	r3, #144
 304 000a FB60     		str	r3, [r7, #12]
 109:FML/Src/W25QXX.c **** 	
 110:FML/Src/W25QXX.c **** 	W25Qx_Enable();
 305              		.loc 1 110 2
 306 000c 0022     		movs	r2, #0
 307 000e 1021     		movs	r1, #16
 308 0010 4FF09040 		mov	r0, #1207959552
 309 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 111:FML/Src/W25QXX.c **** 	/* Send the read ID command */
 112:FML/Src/W25QXX.c **** 	HAL_SPI_Transmit(&hspi3, cmd, 4, W25Qx_TIMEOUT_VALUE);	
 310              		.loc 1 112 2
 311 0018 07F10C01 		add	r1, r7, #12
 312 001c 4FF47A73 		mov	r3, #1000
 313 0020 0422     		movs	r2, #4
 314 0022 0A48     		ldr	r0, .L20
 315 0024 FFF7FEFF 		bl	HAL_SPI_Transmit
 113:FML/Src/W25QXX.c **** 	/* Reception of the data */
 114:FML/Src/W25QXX.c **** 	HAL_SPI_Receive(&hspi3,ID, 2, W25Qx_TIMEOUT_VALUE);
 316              		.loc 1 114 2
 317 0028 4FF47A73 		mov	r3, #1000
 318 002c 0222     		movs	r2, #2
 319 002e 7968     		ldr	r1, [r7, #4]
 320 0030 0648     		ldr	r0, .L20
 321 0032 FFF7FEFF 		bl	HAL_SPI_Receive
 115:FML/Src/W25QXX.c **** 	W25Qx_Disable();
 322              		.loc 1 115 2
 323 0036 0122     		movs	r2, #1
 324 0038 1021     		movs	r1, #16
 325 003a 4FF09040 		mov	r0, #1207959552
 326 003e FFF7FEFF 		bl	HAL_GPIO_WritePin
 116:FML/Src/W25QXX.c **** 		
 117:FML/Src/W25QXX.c **** }
 327              		.loc 1 117 1
 328 0042 00BF     		nop
 329 0044 1037     		adds	r7, r7, #16
 330              	.LCFI20:
 331              		.cfi_def_cfa_offset 8
 332 0046 BD46     		mov	sp, r7
 333              	.LCFI21:
 334              		.cfi_def_cfa_register 13
 335              		@ sp needed
 336 0048 80BD     		pop	{r7, pc}
 337              	.L21:
 338 004a 00BF     		.align	2
 339              	.L20:
 340 004c 00000000 		.word	hspi3
 341              		.cfi_endproc
 342              	.LFE292:
 344              		.section	.text.BSP_W25Qx_Read_JEDEC_ID,"ax",%progbits
 345              		.align	1
 346              		.global	BSP_W25Qx_Read_JEDEC_ID
 347              		.syntax unified
 348              		.thumb
 349              		.thumb_func
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 9


 351              	BSP_W25Qx_Read_JEDEC_ID:
 352              	.LFB293:
 118:FML/Src/W25QXX.c **** 
 119:FML/Src/W25QXX.c **** /**
 120:FML/Src/W25QXX.c ****   * @brief  Read JEDEC ID.
 121:FML/Src/W25QXX.c **** 	* @param  return value address
 122:FML/Src/W25QXX.c ****   * @retval None
 123:FML/Src/W25QXX.c ****   */
 124:FML/Src/W25QXX.c **** void BSP_W25Qx_Read_JEDEC_ID(uint8_t *JDEDC_ID)
 125:FML/Src/W25QXX.c **** {
 353              		.loc 1 125 1
 354              		.cfi_startproc
 355              		@ args = 0, pretend = 0, frame = 16
 356              		@ frame_needed = 1, uses_anonymous_args = 0
 357 0000 80B5     		push	{r7, lr}
 358              	.LCFI22:
 359              		.cfi_def_cfa_offset 8
 360              		.cfi_offset 7, -8
 361              		.cfi_offset 14, -4
 362 0002 84B0     		sub	sp, sp, #16
 363              	.LCFI23:
 364              		.cfi_def_cfa_offset 24
 365 0004 00AF     		add	r7, sp, #0
 366              	.LCFI24:
 367              		.cfi_def_cfa_register 7
 368 0006 7860     		str	r0, [r7, #4]
 126:FML/Src/W25QXX.c **** 	uint8_t cmd[4] = {READ_JEDEC_ID_CMD,0x00,0x00,0x00};
 369              		.loc 1 126 10
 370 0008 9F23     		movs	r3, #159
 371 000a FB60     		str	r3, [r7, #12]
 127:FML/Src/W25QXX.c **** 	
 128:FML/Src/W25QXX.c **** 	W25Qx_Enable();
 372              		.loc 1 128 2
 373 000c 0022     		movs	r2, #0
 374 000e 1021     		movs	r1, #16
 375 0010 4FF09040 		mov	r0, #1207959552
 376 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 129:FML/Src/W25QXX.c **** 	/* Send the read ID command */
 130:FML/Src/W25QXX.c **** 	HAL_SPI_Transmit(&hspi3, cmd, 1, W25Qx_TIMEOUT_VALUE);	
 377              		.loc 1 130 2
 378 0018 07F10C01 		add	r1, r7, #12
 379 001c 4FF47A73 		mov	r3, #1000
 380 0020 0122     		movs	r2, #1
 381 0022 0A48     		ldr	r0, .L23
 382 0024 FFF7FEFF 		bl	HAL_SPI_Transmit
 131:FML/Src/W25QXX.c **** 	/* Reception of the data */
 132:FML/Src/W25QXX.c **** 	HAL_SPI_Receive(&hspi3,JDEDC_ID, 3, W25Qx_TIMEOUT_VALUE);
 383              		.loc 1 132 2
 384 0028 4FF47A73 		mov	r3, #1000
 385 002c 0322     		movs	r2, #3
 386 002e 7968     		ldr	r1, [r7, #4]
 387 0030 0648     		ldr	r0, .L23
 388 0032 FFF7FEFF 		bl	HAL_SPI_Receive
 133:FML/Src/W25QXX.c **** 	W25Qx_Disable();
 389              		.loc 1 133 2
 390 0036 0122     		movs	r2, #1
 391 0038 1021     		movs	r1, #16
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 10


 392 003a 4FF09040 		mov	r0, #1207959552
 393 003e FFF7FEFF 		bl	HAL_GPIO_WritePin
 134:FML/Src/W25QXX.c **** 		
 135:FML/Src/W25QXX.c **** }
 394              		.loc 1 135 1
 395 0042 00BF     		nop
 396 0044 1037     		adds	r7, r7, #16
 397              	.LCFI25:
 398              		.cfi_def_cfa_offset 8
 399 0046 BD46     		mov	sp, r7
 400              	.LCFI26:
 401              		.cfi_def_cfa_register 13
 402              		@ sp needed
 403 0048 80BD     		pop	{r7, pc}
 404              	.L24:
 405 004a 00BF     		.align	2
 406              	.L23:
 407 004c 00000000 		.word	hspi3
 408              		.cfi_endproc
 409              	.LFE293:
 411              		.section	.text.BSP_W25Qx_Read,"ax",%progbits
 412              		.align	1
 413              		.global	BSP_W25Qx_Read
 414              		.syntax unified
 415              		.thumb
 416              		.thumb_func
 418              	BSP_W25Qx_Read:
 419              	.LFB294:
 136:FML/Src/W25QXX.c **** 
 137:FML/Src/W25QXX.c **** /**
 138:FML/Src/W25QXX.c ****   * @brief  Reads an amount of data from the QSPI memory.
 139:FML/Src/W25QXX.c ****   * @param  pData: Pointer to data to be read
 140:FML/Src/W25QXX.c ****   * @param  ReadAddr: Read start address
 141:FML/Src/W25QXX.c ****   * @param  Size: Size of data to read    
 142:FML/Src/W25QXX.c ****   * @retval QSPI memory status
 143:FML/Src/W25QXX.c ****   */
 144:FML/Src/W25QXX.c **** uint8_t BSP_W25Qx_Read(uint8_t* pData, uint32_t ReadAddr, uint32_t Size)
 145:FML/Src/W25QXX.c **** {
 420              		.loc 1 145 1
 421              		.cfi_startproc
 422              		@ args = 0, pretend = 0, frame = 24
 423              		@ frame_needed = 1, uses_anonymous_args = 0
 424 0000 80B5     		push	{r7, lr}
 425              	.LCFI27:
 426              		.cfi_def_cfa_offset 8
 427              		.cfi_offset 7, -8
 428              		.cfi_offset 14, -4
 429 0002 86B0     		sub	sp, sp, #24
 430              	.LCFI28:
 431              		.cfi_def_cfa_offset 32
 432 0004 00AF     		add	r7, sp, #0
 433              	.LCFI29:
 434              		.cfi_def_cfa_register 7
 435 0006 F860     		str	r0, [r7, #12]
 436 0008 B960     		str	r1, [r7, #8]
 437 000a 7A60     		str	r2, [r7, #4]
 146:FML/Src/W25QXX.c **** 	uint8_t cmd[4];
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 11


 147:FML/Src/W25QXX.c **** 
 148:FML/Src/W25QXX.c **** 	/* Configure the command */
 149:FML/Src/W25QXX.c **** 	cmd[0] = READ_CMD;
 438              		.loc 1 149 9
 439 000c 0323     		movs	r3, #3
 440 000e 3B75     		strb	r3, [r7, #20]
 150:FML/Src/W25QXX.c **** 	cmd[1] = (uint8_t)(ReadAddr >> 16);
 441              		.loc 1 150 30
 442 0010 BB68     		ldr	r3, [r7, #8]
 443 0012 1B0C     		lsrs	r3, r3, #16
 444              		.loc 1 150 11
 445 0014 DBB2     		uxtb	r3, r3
 446              		.loc 1 150 9
 447 0016 7B75     		strb	r3, [r7, #21]
 151:FML/Src/W25QXX.c **** 	cmd[2] = (uint8_t)(ReadAddr >> 8);
 448              		.loc 1 151 30
 449 0018 BB68     		ldr	r3, [r7, #8]
 450 001a 1B0A     		lsrs	r3, r3, #8
 451              		.loc 1 151 11
 452 001c DBB2     		uxtb	r3, r3
 453              		.loc 1 151 9
 454 001e BB75     		strb	r3, [r7, #22]
 152:FML/Src/W25QXX.c **** 	cmd[3] = (uint8_t)(ReadAddr);
 455              		.loc 1 152 11
 456 0020 BB68     		ldr	r3, [r7, #8]
 457 0022 DBB2     		uxtb	r3, r3
 458              		.loc 1 152 9
 459 0024 FB75     		strb	r3, [r7, #23]
 153:FML/Src/W25QXX.c **** 	
 154:FML/Src/W25QXX.c **** 	W25Qx_Enable();
 460              		.loc 1 154 2
 461 0026 0022     		movs	r2, #0
 462 0028 1021     		movs	r1, #16
 463 002a 4FF09040 		mov	r0, #1207959552
 464 002e FFF7FEFF 		bl	HAL_GPIO_WritePin
 155:FML/Src/W25QXX.c **** 	/* Send the read ID command */
 156:FML/Src/W25QXX.c **** 	HAL_SPI_Transmit(&hspi3, cmd, 4, W25Qx_TIMEOUT_VALUE);	
 465              		.loc 1 156 2
 466 0032 07F11401 		add	r1, r7, #20
 467 0036 4FF47A73 		mov	r3, #1000
 468 003a 0422     		movs	r2, #4
 469 003c 0D48     		ldr	r0, .L29
 470 003e FFF7FEFF 		bl	HAL_SPI_Transmit
 157:FML/Src/W25QXX.c **** 	/* Reception of the data */
 158:FML/Src/W25QXX.c **** 	if (HAL_SPI_Receive(&hspi3, pData,Size,W25Qx_TIMEOUT_VALUE) != HAL_OK)
 471              		.loc 1 158 6
 472 0042 7B68     		ldr	r3, [r7, #4]
 473 0044 9AB2     		uxth	r2, r3
 474 0046 4FF47A73 		mov	r3, #1000
 475 004a F968     		ldr	r1, [r7, #12]
 476 004c 0948     		ldr	r0, .L29
 477 004e FFF7FEFF 		bl	HAL_SPI_Receive
 478 0052 0346     		mov	r3, r0
 479              		.loc 1 158 5
 480 0054 002B     		cmp	r3, #0
 481 0056 01D0     		beq	.L26
 159:FML/Src/W25QXX.c ****   {
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 12


 160:FML/Src/W25QXX.c ****     return W25Qx_ERROR;
 482              		.loc 1 160 12
 483 0058 0123     		movs	r3, #1
 484 005a 06E0     		b	.L28
 485              	.L26:
 161:FML/Src/W25QXX.c ****   }
 162:FML/Src/W25QXX.c **** 	W25Qx_Disable();
 486              		.loc 1 162 2
 487 005c 0122     		movs	r2, #1
 488 005e 1021     		movs	r1, #16
 489 0060 4FF09040 		mov	r0, #1207959552
 490 0064 FFF7FEFF 		bl	HAL_GPIO_WritePin
 163:FML/Src/W25QXX.c **** 	return W25Qx_OK;
 491              		.loc 1 163 9
 492 0068 0023     		movs	r3, #0
 493              	.L28:
 164:FML/Src/W25QXX.c **** }
 494              		.loc 1 164 1 discriminator 1
 495 006a 1846     		mov	r0, r3
 496 006c 1837     		adds	r7, r7, #24
 497              	.LCFI30:
 498              		.cfi_def_cfa_offset 8
 499 006e BD46     		mov	sp, r7
 500              	.LCFI31:
 501              		.cfi_def_cfa_register 13
 502              		@ sp needed
 503 0070 80BD     		pop	{r7, pc}
 504              	.L30:
 505 0072 00BF     		.align	2
 506              	.L29:
 507 0074 00000000 		.word	hspi3
 508              		.cfi_endproc
 509              	.LFE294:
 511              		.section	.text.BSP_W25Qx_Write,"ax",%progbits
 512              		.align	1
 513              		.global	BSP_W25Qx_Write
 514              		.syntax unified
 515              		.thumb
 516              		.thumb_func
 518              	BSP_W25Qx_Write:
 519              	.LFB295:
 165:FML/Src/W25QXX.c **** 
 166:FML/Src/W25QXX.c **** /**
 167:FML/Src/W25QXX.c ****   * @brief  Writes an amount of data to the QSPI memory.
 168:FML/Src/W25QXX.c ****   * @param  pData: Pointer to data to be written
 169:FML/Src/W25QXX.c ****   * @param  WriteAddr: Write start address
 170:FML/Src/W25QXX.c ****   * @param  Size: Size of data to write,No more than 256byte.    
 171:FML/Src/W25QXX.c ****   * @retval QSPI memory status
 172:FML/Src/W25QXX.c ****   */
 173:FML/Src/W25QXX.c **** uint8_t BSP_W25Qx_Write(uint8_t* pData, uint32_t WriteAddr, uint32_t Size)
 174:FML/Src/W25QXX.c **** {
 520              		.loc 1 174 1
 521              		.cfi_startproc
 522              		@ args = 0, pretend = 0, frame = 40
 523              		@ frame_needed = 1, uses_anonymous_args = 0
 524 0000 80B5     		push	{r7, lr}
 525              	.LCFI32:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 13


 526              		.cfi_def_cfa_offset 8
 527              		.cfi_offset 7, -8
 528              		.cfi_offset 14, -4
 529 0002 8AB0     		sub	sp, sp, #40
 530              	.LCFI33:
 531              		.cfi_def_cfa_offset 48
 532 0004 00AF     		add	r7, sp, #0
 533              	.LCFI34:
 534              		.cfi_def_cfa_register 7
 535 0006 F860     		str	r0, [r7, #12]
 536 0008 B960     		str	r1, [r7, #8]
 537 000a 7A60     		str	r2, [r7, #4]
 175:FML/Src/W25QXX.c **** 	uint8_t cmd[4];
 176:FML/Src/W25QXX.c **** 	uint32_t end_addr, current_size, current_addr;
 177:FML/Src/W25QXX.c **** 	uint32_t tickstart = HAL_GetTick();
 538              		.loc 1 177 23
 539 000c FFF7FEFF 		bl	HAL_GetTick
 540 0010 F861     		str	r0, [r7, #28]
 178:FML/Src/W25QXX.c **** 	
 179:FML/Src/W25QXX.c **** 	/* Calculation of the size between the write address and the end of the page */
 180:FML/Src/W25QXX.c ****   current_addr = 0;
 541              		.loc 1 180 16
 542 0012 0023     		movs	r3, #0
 543 0014 3B62     		str	r3, [r7, #32]
 181:FML/Src/W25QXX.c **** 
 182:FML/Src/W25QXX.c ****   while (current_addr <= WriteAddr)
 544              		.loc 1 182 9
 545 0016 03E0     		b	.L32
 546              	.L33:
 183:FML/Src/W25QXX.c ****   {
 184:FML/Src/W25QXX.c ****     current_addr += W25Q128FV_PAGE_SIZE;
 547              		.loc 1 184 18
 548 0018 3B6A     		ldr	r3, [r7, #32]
 549 001a 03F58073 		add	r3, r3, #256
 550 001e 3B62     		str	r3, [r7, #32]
 551              	.L32:
 182:FML/Src/W25QXX.c ****   {
 552              		.loc 1 182 9
 553 0020 3A6A     		ldr	r2, [r7, #32]
 554 0022 BB68     		ldr	r3, [r7, #8]
 555 0024 9A42     		cmp	r2, r3
 556 0026 F7D9     		bls	.L33
 185:FML/Src/W25QXX.c ****   }
 186:FML/Src/W25QXX.c ****   current_size = current_addr - WriteAddr;
 557              		.loc 1 186 16
 558 0028 3A6A     		ldr	r2, [r7, #32]
 559 002a BB68     		ldr	r3, [r7, #8]
 560 002c D31A     		subs	r3, r2, r3
 561 002e 7B62     		str	r3, [r7, #36]
 187:FML/Src/W25QXX.c **** 
 188:FML/Src/W25QXX.c ****   /* Check if the size of the data is less than the remaining place in the page */
 189:FML/Src/W25QXX.c ****   if (current_size > Size)
 562              		.loc 1 189 6
 563 0030 7A6A     		ldr	r2, [r7, #36]
 564 0032 7B68     		ldr	r3, [r7, #4]
 565 0034 9A42     		cmp	r2, r3
 566 0036 01D9     		bls	.L34
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 14


 190:FML/Src/W25QXX.c ****   {
 191:FML/Src/W25QXX.c ****     current_size = Size;
 567              		.loc 1 191 18
 568 0038 7B68     		ldr	r3, [r7, #4]
 569 003a 7B62     		str	r3, [r7, #36]
 570              	.L34:
 192:FML/Src/W25QXX.c ****   }
 193:FML/Src/W25QXX.c **** 
 194:FML/Src/W25QXX.c ****   /* Initialize the adress variables */
 195:FML/Src/W25QXX.c ****   current_addr = WriteAddr;
 571              		.loc 1 195 16
 572 003c BB68     		ldr	r3, [r7, #8]
 573 003e 3B62     		str	r3, [r7, #32]
 196:FML/Src/W25QXX.c ****   end_addr = WriteAddr + Size;
 574              		.loc 1 196 12
 575 0040 BA68     		ldr	r2, [r7, #8]
 576 0042 7B68     		ldr	r3, [r7, #4]
 577 0044 1344     		add	r3, r3, r2
 578 0046 BB61     		str	r3, [r7, #24]
 579              	.L42:
 197:FML/Src/W25QXX.c **** 	
 198:FML/Src/W25QXX.c ****   /* Perform the write page by page */
 199:FML/Src/W25QXX.c ****   do
 200:FML/Src/W25QXX.c ****   {
 201:FML/Src/W25QXX.c **** 		/* Configure the command */
 202:FML/Src/W25QXX.c **** 		cmd[0] = PAGE_PROG_CMD;
 580              		.loc 1 202 10
 581 0048 0223     		movs	r3, #2
 582 004a 3B75     		strb	r3, [r7, #20]
 203:FML/Src/W25QXX.c **** 		cmd[1] = (uint8_t)(current_addr >> 16);
 583              		.loc 1 203 35
 584 004c 3B6A     		ldr	r3, [r7, #32]
 585 004e 1B0C     		lsrs	r3, r3, #16
 586              		.loc 1 203 12
 587 0050 DBB2     		uxtb	r3, r3
 588              		.loc 1 203 10
 589 0052 7B75     		strb	r3, [r7, #21]
 204:FML/Src/W25QXX.c **** 		cmd[2] = (uint8_t)(current_addr >> 8);
 590              		.loc 1 204 35
 591 0054 3B6A     		ldr	r3, [r7, #32]
 592 0056 1B0A     		lsrs	r3, r3, #8
 593              		.loc 1 204 12
 594 0058 DBB2     		uxtb	r3, r3
 595              		.loc 1 204 10
 596 005a BB75     		strb	r3, [r7, #22]
 205:FML/Src/W25QXX.c **** 		cmd[3] = (uint8_t)(current_addr);
 597              		.loc 1 205 12
 598 005c 3B6A     		ldr	r3, [r7, #32]
 599 005e DBB2     		uxtb	r3, r3
 600              		.loc 1 205 10
 601 0060 FB75     		strb	r3, [r7, #23]
 206:FML/Src/W25QXX.c **** 
 207:FML/Src/W25QXX.c **** 		/* Enable write operations */
 208:FML/Src/W25QXX.c **** 		BSP_W25Qx_WriteEnable();
 602              		.loc 1 208 3
 603 0062 FFF7FEFF 		bl	BSP_W25Qx_WriteEnable
 209:FML/Src/W25QXX.c **** 	
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 15


 210:FML/Src/W25QXX.c **** 		W25Qx_Enable();
 604              		.loc 1 210 3
 605 0066 0022     		movs	r2, #0
 606 0068 1021     		movs	r1, #16
 607 006a 4FF09040 		mov	r0, #1207959552
 608 006e FFF7FEFF 		bl	HAL_GPIO_WritePin
 211:FML/Src/W25QXX.c ****     /* Send the command */
 212:FML/Src/W25QXX.c ****     if (HAL_SPI_Transmit(&hspi3,cmd, 4, W25Qx_TIMEOUT_VALUE) != HAL_OK)
 609              		.loc 1 212 9
 610 0072 07F11401 		add	r1, r7, #20
 611 0076 4FF47A73 		mov	r3, #1000
 612 007a 0422     		movs	r2, #4
 613 007c 2448     		ldr	r0, .L44
 614 007e FFF7FEFF 		bl	HAL_SPI_Transmit
 615 0082 0346     		mov	r3, r0
 616              		.loc 1 212 8
 617 0084 002B     		cmp	r3, #0
 618 0086 01D0     		beq	.L35
 213:FML/Src/W25QXX.c ****     {
 214:FML/Src/W25QXX.c ****       return W25Qx_ERROR;
 619              		.loc 1 214 14
 620 0088 0123     		movs	r3, #1
 621 008a 3CE0     		b	.L43
 622              	.L35:
 215:FML/Src/W25QXX.c ****     }
 216:FML/Src/W25QXX.c ****     
 217:FML/Src/W25QXX.c ****     /* Transmission of the data */
 218:FML/Src/W25QXX.c ****     if (HAL_SPI_Transmit(&hspi3, pData,current_size, W25Qx_TIMEOUT_VALUE) != HAL_OK)
 623              		.loc 1 218 9
 624 008c 7B6A     		ldr	r3, [r7, #36]
 625 008e 9AB2     		uxth	r2, r3
 626 0090 4FF47A73 		mov	r3, #1000
 627 0094 F968     		ldr	r1, [r7, #12]
 628 0096 1E48     		ldr	r0, .L44
 629 0098 FFF7FEFF 		bl	HAL_SPI_Transmit
 630 009c 0346     		mov	r3, r0
 631              		.loc 1 218 8
 632 009e 002B     		cmp	r3, #0
 633 00a0 01D0     		beq	.L37
 219:FML/Src/W25QXX.c ****     {
 220:FML/Src/W25QXX.c ****       return W25Qx_ERROR;
 634              		.loc 1 220 14
 635 00a2 0123     		movs	r3, #1
 636 00a4 2FE0     		b	.L43
 637              	.L37:
 221:FML/Src/W25QXX.c ****     }
 222:FML/Src/W25QXX.c **** 			W25Qx_Disable();
 638              		.loc 1 222 4
 639 00a6 0122     		movs	r2, #1
 640 00a8 1021     		movs	r1, #16
 641 00aa 4FF09040 		mov	r0, #1207959552
 642 00ae FFF7FEFF 		bl	HAL_GPIO_WritePin
 223:FML/Src/W25QXX.c ****     	/* Wait the end of Flash writing */
 224:FML/Src/W25QXX.c **** 		while(BSP_W25Qx_GetStatus() == W25Qx_BUSY);
 643              		.loc 1 224 8
 644 00b2 00BF     		nop
 645              	.L38:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 16


 646              		.loc 1 224 9 discriminator 1
 647 00b4 FFF7FEFF 		bl	BSP_W25Qx_GetStatus
 648 00b8 0346     		mov	r3, r0
 649              		.loc 1 224 8 discriminator 1
 650 00ba 022B     		cmp	r3, #2
 651 00bc FAD0     		beq	.L38
 225:FML/Src/W25QXX.c **** 		{
 226:FML/Src/W25QXX.c **** 			/* Check for the Timeout */
 227:FML/Src/W25QXX.c **** 			if((HAL_GetTick() - tickstart) > W25Qx_TIMEOUT_VALUE)
 652              		.loc 1 227 8
 653 00be FFF7FEFF 		bl	HAL_GetTick
 654 00c2 0246     		mov	r2, r0
 655              		.loc 1 227 22
 656 00c4 FB69     		ldr	r3, [r7, #28]
 657 00c6 D31A     		subs	r3, r2, r3
 658              		.loc 1 227 6
 659 00c8 B3F57A7F 		cmp	r3, #1000
 660 00cc 01D9     		bls	.L39
 228:FML/Src/W25QXX.c **** 			{        
 229:FML/Src/W25QXX.c **** 				return W25Qx_TIMEOUT;
 661              		.loc 1 229 12
 662 00ce 0323     		movs	r3, #3
 663 00d0 19E0     		b	.L43
 664              	.L39:
 230:FML/Src/W25QXX.c **** 			}
 231:FML/Src/W25QXX.c **** 		}
 232:FML/Src/W25QXX.c ****     
 233:FML/Src/W25QXX.c ****     /* Update the address and size variables for next page programming */
 234:FML/Src/W25QXX.c ****     current_addr += current_size;
 665              		.loc 1 234 18
 666 00d2 3A6A     		ldr	r2, [r7, #32]
 667 00d4 7B6A     		ldr	r3, [r7, #36]
 668 00d6 1344     		add	r3, r3, r2
 669 00d8 3B62     		str	r3, [r7, #32]
 235:FML/Src/W25QXX.c ****     pData += current_size;
 670              		.loc 1 235 11
 671 00da FA68     		ldr	r2, [r7, #12]
 672 00dc 7B6A     		ldr	r3, [r7, #36]
 673 00de 1344     		add	r3, r3, r2
 674 00e0 FB60     		str	r3, [r7, #12]
 236:FML/Src/W25QXX.c ****     current_size = ((current_addr + W25Q128FV_PAGE_SIZE) > end_addr) ? (end_addr - current_addr) : 
 675              		.loc 1 236 35
 676 00e2 3B6A     		ldr	r3, [r7, #32]
 677 00e4 03F58073 		add	r3, r3, #256
 678              		.loc 1 236 98
 679 00e8 BA69     		ldr	r2, [r7, #24]
 680 00ea 9A42     		cmp	r2, r3
 681 00ec 03D2     		bcs	.L40
 682              		.loc 1 236 98 is_stmt 0 discriminator 1
 683 00ee BA69     		ldr	r2, [r7, #24]
 684 00f0 3B6A     		ldr	r3, [r7, #32]
 685 00f2 D31A     		subs	r3, r2, r3
 686 00f4 01E0     		b	.L41
 687              	.L40:
 688              		.loc 1 236 98 discriminator 2
 689 00f6 4FF48073 		mov	r3, #256
 690              	.L41:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 17


 691              		.loc 1 236 18 is_stmt 1 discriminator 4
 692 00fa 7B62     		str	r3, [r7, #36]
 237:FML/Src/W25QXX.c ****   } while (current_addr < end_addr);
 693              		.loc 1 237 3 discriminator 4
 694 00fc 3A6A     		ldr	r2, [r7, #32]
 695 00fe BB69     		ldr	r3, [r7, #24]
 696 0100 9A42     		cmp	r2, r3
 697 0102 A1D3     		bcc	.L42
 238:FML/Src/W25QXX.c **** 
 239:FML/Src/W25QXX.c **** 	
 240:FML/Src/W25QXX.c **** 	return W25Qx_OK;
 698              		.loc 1 240 9
 699 0104 0023     		movs	r3, #0
 700              	.L43:
 241:FML/Src/W25QXX.c **** }
 701              		.loc 1 241 1 discriminator 1
 702 0106 1846     		mov	r0, r3
 703 0108 2837     		adds	r7, r7, #40
 704              	.LCFI35:
 705              		.cfi_def_cfa_offset 8
 706 010a BD46     		mov	sp, r7
 707              	.LCFI36:
 708              		.cfi_def_cfa_register 13
 709              		@ sp needed
 710 010c 80BD     		pop	{r7, pc}
 711              	.L45:
 712 010e 00BF     		.align	2
 713              	.L44:
 714 0110 00000000 		.word	hspi3
 715              		.cfi_endproc
 716              	.LFE295:
 718              		.section	.text.BSP_W25Qx_Erase_Page,"ax",%progbits
 719              		.align	1
 720              		.global	BSP_W25Qx_Erase_Page
 721              		.syntax unified
 722              		.thumb
 723              		.thumb_func
 725              	BSP_W25Qx_Erase_Page:
 726              	.LFB296:
 242:FML/Src/W25QXX.c **** /**
 243:FML/Src/W25QXX.c ****   * @brief  Erases the specified Page of the QSPI memory. 
 244:FML/Src/W25QXX.c ****   * @param  BlockAddress: Page address to erase  
 245:FML/Src/W25QXX.c ****   * @retval QSPI memory status
 246:FML/Src/W25QXX.c ****   */
 247:FML/Src/W25QXX.c **** uint8_t BSP_W25Qx_Erase_Page(uint32_t Address)
 248:FML/Src/W25QXX.c **** {
 727              		.loc 1 248 1
 728              		.cfi_startproc
 729              		@ args = 0, pretend = 0, frame = 16
 730              		@ frame_needed = 1, uses_anonymous_args = 0
 731 0000 80B5     		push	{r7, lr}
 732              	.LCFI37:
 733              		.cfi_def_cfa_offset 8
 734              		.cfi_offset 7, -8
 735              		.cfi_offset 14, -4
 736 0002 84B0     		sub	sp, sp, #16
 737              	.LCFI38:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 18


 738              		.cfi_def_cfa_offset 24
 739 0004 00AF     		add	r7, sp, #0
 740              	.LCFI39:
 741              		.cfi_def_cfa_register 7
 742 0006 7860     		str	r0, [r7, #4]
 249:FML/Src/W25QXX.c **** 	uint8_t cmd[4];
 250:FML/Src/W25QXX.c **** 	uint32_t tickstart = HAL_GetTick();
 743              		.loc 1 250 23
 744 0008 FFF7FEFF 		bl	HAL_GetTick
 745 000c F860     		str	r0, [r7, #12]
 251:FML/Src/W25QXX.c **** 	cmd[0] = PAGE_ERASE_CMD;
 746              		.loc 1 251 9
 747 000e 8123     		movs	r3, #129
 748 0010 3B72     		strb	r3, [r7, #8]
 252:FML/Src/W25QXX.c **** 	cmd[1] = (uint8_t)(Address >> 16);
 749              		.loc 1 252 29
 750 0012 7B68     		ldr	r3, [r7, #4]
 751 0014 1B0C     		lsrs	r3, r3, #16
 752              		.loc 1 252 11
 753 0016 DBB2     		uxtb	r3, r3
 754              		.loc 1 252 9
 755 0018 7B72     		strb	r3, [r7, #9]
 253:FML/Src/W25QXX.c **** 	cmd[2] = (uint8_t)(Address >> 8);
 756              		.loc 1 253 29
 757 001a 7B68     		ldr	r3, [r7, #4]
 758 001c 1B0A     		lsrs	r3, r3, #8
 759              		.loc 1 253 11
 760 001e DBB2     		uxtb	r3, r3
 761              		.loc 1 253 9
 762 0020 BB72     		strb	r3, [r7, #10]
 254:FML/Src/W25QXX.c **** 	cmd[3] = (uint8_t)(Address);
 763              		.loc 1 254 11
 764 0022 7B68     		ldr	r3, [r7, #4]
 765 0024 DBB2     		uxtb	r3, r3
 766              		.loc 1 254 9
 767 0026 FB72     		strb	r3, [r7, #11]
 255:FML/Src/W25QXX.c **** 	
 256:FML/Src/W25QXX.c **** 	/* Enable write operations */
 257:FML/Src/W25QXX.c **** 	BSP_W25Qx_WriteEnable();
 768              		.loc 1 257 2
 769 0028 FFF7FEFF 		bl	BSP_W25Qx_WriteEnable
 258:FML/Src/W25QXX.c **** 	
 259:FML/Src/W25QXX.c **** 	/*Select the FLASH: Chip Select low */
 260:FML/Src/W25QXX.c **** 	W25Qx_Enable();
 770              		.loc 1 260 2
 771 002c 0022     		movs	r2, #0
 772 002e 1021     		movs	r1, #16
 773 0030 4FF09040 		mov	r0, #1207959552
 774 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 261:FML/Src/W25QXX.c **** 	/* Send the read ID command */
 262:FML/Src/W25QXX.c **** 	HAL_SPI_Transmit(&hspi3, cmd, 4, W25Qx_TIMEOUT_VALUE);	
 775              		.loc 1 262 2
 776 0038 07F10801 		add	r1, r7, #8
 777 003c 4FF47A73 		mov	r3, #1000
 778 0040 0422     		movs	r2, #4
 779 0042 0F48     		ldr	r0, .L51
 780 0044 FFF7FEFF 		bl	HAL_SPI_Transmit
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 19


 263:FML/Src/W25QXX.c **** 	/*Deselect the FLASH: Chip Select high */
 264:FML/Src/W25QXX.c **** 	W25Qx_Disable();
 781              		.loc 1 264 2
 782 0048 0122     		movs	r2, #1
 783 004a 1021     		movs	r1, #16
 784 004c 4FF09040 		mov	r0, #1207959552
 785 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 265:FML/Src/W25QXX.c **** 	
 266:FML/Src/W25QXX.c **** 	/* Wait the end of Flash writing */
 267:FML/Src/W25QXX.c **** 	while(BSP_W25Qx_GetStatus() == W25Qx_BUSY);
 786              		.loc 1 267 7
 787 0054 00BF     		nop
 788              	.L47:
 789              		.loc 1 267 8 discriminator 1
 790 0056 FFF7FEFF 		bl	BSP_W25Qx_GetStatus
 791 005a 0346     		mov	r3, r0
 792              		.loc 1 267 7 discriminator 1
 793 005c 022B     		cmp	r3, #2
 794 005e FAD0     		beq	.L47
 268:FML/Src/W25QXX.c **** 	{
 269:FML/Src/W25QXX.c **** 		/* Check for the Timeout */
 270:FML/Src/W25QXX.c ****     if((HAL_GetTick() - tickstart) > W25Q128FV_SECTOR_ERASE_MAX_TIME)
 795              		.loc 1 270 9
 796 0060 FFF7FEFF 		bl	HAL_GetTick
 797 0064 0246     		mov	r2, r0
 798              		.loc 1 270 23
 799 0066 FB68     		ldr	r3, [r7, #12]
 800 0068 D31A     		subs	r3, r2, r3
 801              		.loc 1 270 7
 802 006a 40F6B832 		movw	r2, #3000
 803 006e 9342     		cmp	r3, r2
 804 0070 01D9     		bls	.L48
 271:FML/Src/W25QXX.c ****     {        
 272:FML/Src/W25QXX.c **** 			return W25Qx_TIMEOUT;
 805              		.loc 1 272 11
 806 0072 0323     		movs	r3, #3
 807 0074 00E0     		b	.L50
 808              	.L48:
 273:FML/Src/W25QXX.c ****     }
 274:FML/Src/W25QXX.c **** 	}
 275:FML/Src/W25QXX.c **** 	return W25Qx_OK;
 809              		.loc 1 275 9
 810 0076 0023     		movs	r3, #0
 811              	.L50:
 276:FML/Src/W25QXX.c **** }
 812              		.loc 1 276 1 discriminator 1
 813 0078 1846     		mov	r0, r3
 814 007a 1037     		adds	r7, r7, #16
 815              	.LCFI40:
 816              		.cfi_def_cfa_offset 8
 817 007c BD46     		mov	sp, r7
 818              	.LCFI41:
 819              		.cfi_def_cfa_register 13
 820              		@ sp needed
 821 007e 80BD     		pop	{r7, pc}
 822              	.L52:
 823              		.align	2
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 20


 824              	.L51:
 825 0080 00000000 		.word	hspi3
 826              		.cfi_endproc
 827              	.LFE296:
 829              		.section	.text.BSP_W25Qx_Erase_Block,"ax",%progbits
 830              		.align	1
 831              		.global	BSP_W25Qx_Erase_Block
 832              		.syntax unified
 833              		.thumb
 834              		.thumb_func
 836              	BSP_W25Qx_Erase_Block:
 837              	.LFB297:
 277:FML/Src/W25QXX.c **** /**
 278:FML/Src/W25QXX.c ****   * @brief  Erases the specified block of the QSPI memory. 
 279:FML/Src/W25QXX.c ****   * @param  BlockAddress: Block address to erase  
 280:FML/Src/W25QXX.c ****   * @retval QSPI memory status
 281:FML/Src/W25QXX.c ****   */
 282:FML/Src/W25QXX.c **** uint8_t BSP_W25Qx_Erase_Block(uint32_t Address)
 283:FML/Src/W25QXX.c **** {
 838              		.loc 1 283 1
 839              		.cfi_startproc
 840              		@ args = 0, pretend = 0, frame = 16
 841              		@ frame_needed = 1, uses_anonymous_args = 0
 842 0000 80B5     		push	{r7, lr}
 843              	.LCFI42:
 844              		.cfi_def_cfa_offset 8
 845              		.cfi_offset 7, -8
 846              		.cfi_offset 14, -4
 847 0002 84B0     		sub	sp, sp, #16
 848              	.LCFI43:
 849              		.cfi_def_cfa_offset 24
 850 0004 00AF     		add	r7, sp, #0
 851              	.LCFI44:
 852              		.cfi_def_cfa_register 7
 853 0006 7860     		str	r0, [r7, #4]
 284:FML/Src/W25QXX.c **** 	uint8_t cmd[4];
 285:FML/Src/W25QXX.c **** 	uint32_t tickstart = HAL_GetTick();
 854              		.loc 1 285 23
 855 0008 FFF7FEFF 		bl	HAL_GetTick
 856 000c F860     		str	r0, [r7, #12]
 286:FML/Src/W25QXX.c **** 	cmd[0] = SECTOR_ERASE_CMD;
 857              		.loc 1 286 9
 858 000e 2023     		movs	r3, #32
 859 0010 3B72     		strb	r3, [r7, #8]
 287:FML/Src/W25QXX.c **** 	cmd[1] = (uint8_t)(Address >> 16);
 860              		.loc 1 287 29
 861 0012 7B68     		ldr	r3, [r7, #4]
 862 0014 1B0C     		lsrs	r3, r3, #16
 863              		.loc 1 287 11
 864 0016 DBB2     		uxtb	r3, r3
 865              		.loc 1 287 9
 866 0018 7B72     		strb	r3, [r7, #9]
 288:FML/Src/W25QXX.c **** 	cmd[2] = (uint8_t)(Address >> 8);
 867              		.loc 1 288 29
 868 001a 7B68     		ldr	r3, [r7, #4]
 869 001c 1B0A     		lsrs	r3, r3, #8
 870              		.loc 1 288 11
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 21


 871 001e DBB2     		uxtb	r3, r3
 872              		.loc 1 288 9
 873 0020 BB72     		strb	r3, [r7, #10]
 289:FML/Src/W25QXX.c **** 	cmd[3] = (uint8_t)(Address);
 874              		.loc 1 289 11
 875 0022 7B68     		ldr	r3, [r7, #4]
 876 0024 DBB2     		uxtb	r3, r3
 877              		.loc 1 289 9
 878 0026 FB72     		strb	r3, [r7, #11]
 290:FML/Src/W25QXX.c **** 	
 291:FML/Src/W25QXX.c **** 	/* Enable write operations */
 292:FML/Src/W25QXX.c **** 	BSP_W25Qx_WriteEnable();
 879              		.loc 1 292 2
 880 0028 FFF7FEFF 		bl	BSP_W25Qx_WriteEnable
 293:FML/Src/W25QXX.c **** 	
 294:FML/Src/W25QXX.c **** 	/*Select the FLASH: Chip Select low */
 295:FML/Src/W25QXX.c **** 	W25Qx_Enable();
 881              		.loc 1 295 2
 882 002c 0022     		movs	r2, #0
 883 002e 1021     		movs	r1, #16
 884 0030 4FF09040 		mov	r0, #1207959552
 885 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 296:FML/Src/W25QXX.c **** 	/* Send the read ID command */
 297:FML/Src/W25QXX.c **** 	HAL_SPI_Transmit(&hspi3, cmd, 4, W25Qx_TIMEOUT_VALUE);	
 886              		.loc 1 297 2
 887 0038 07F10801 		add	r1, r7, #8
 888 003c 4FF47A73 		mov	r3, #1000
 889 0040 0422     		movs	r2, #4
 890 0042 0F48     		ldr	r0, .L58
 891 0044 FFF7FEFF 		bl	HAL_SPI_Transmit
 298:FML/Src/W25QXX.c **** 	/*Deselect the FLASH: Chip Select high */
 299:FML/Src/W25QXX.c **** 	W25Qx_Disable();
 892              		.loc 1 299 2
 893 0048 0122     		movs	r2, #1
 894 004a 1021     		movs	r1, #16
 895 004c 4FF09040 		mov	r0, #1207959552
 896 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 300:FML/Src/W25QXX.c **** 	
 301:FML/Src/W25QXX.c **** 	/* Wait the end of Flash writing */
 302:FML/Src/W25QXX.c **** 	while(BSP_W25Qx_GetStatus() == W25Qx_BUSY);
 897              		.loc 1 302 7
 898 0054 00BF     		nop
 899              	.L54:
 900              		.loc 1 302 8 discriminator 1
 901 0056 FFF7FEFF 		bl	BSP_W25Qx_GetStatus
 902 005a 0346     		mov	r3, r0
 903              		.loc 1 302 7 discriminator 1
 904 005c 022B     		cmp	r3, #2
 905 005e FAD0     		beq	.L54
 303:FML/Src/W25QXX.c **** 	{
 304:FML/Src/W25QXX.c **** 		/* Check for the Timeout */
 305:FML/Src/W25QXX.c ****     if((HAL_GetTick() - tickstart) > W25Q128FV_SECTOR_ERASE_MAX_TIME)
 906              		.loc 1 305 9
 907 0060 FFF7FEFF 		bl	HAL_GetTick
 908 0064 0246     		mov	r2, r0
 909              		.loc 1 305 23
 910 0066 FB68     		ldr	r3, [r7, #12]
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 22


 911 0068 D31A     		subs	r3, r2, r3
 912              		.loc 1 305 7
 913 006a 40F6B832 		movw	r2, #3000
 914 006e 9342     		cmp	r3, r2
 915 0070 01D9     		bls	.L55
 306:FML/Src/W25QXX.c ****     {        
 307:FML/Src/W25QXX.c **** 			return W25Qx_TIMEOUT;
 916              		.loc 1 307 11
 917 0072 0323     		movs	r3, #3
 918 0074 00E0     		b	.L57
 919              	.L55:
 308:FML/Src/W25QXX.c ****     }
 309:FML/Src/W25QXX.c **** 	}
 310:FML/Src/W25QXX.c **** 	return W25Qx_OK;
 920              		.loc 1 310 9
 921 0076 0023     		movs	r3, #0
 922              	.L57:
 311:FML/Src/W25QXX.c **** }
 923              		.loc 1 311 1 discriminator 1
 924 0078 1846     		mov	r0, r3
 925 007a 1037     		adds	r7, r7, #16
 926              	.LCFI45:
 927              		.cfi_def_cfa_offset 8
 928 007c BD46     		mov	sp, r7
 929              	.LCFI46:
 930              		.cfi_def_cfa_register 13
 931              		@ sp needed
 932 007e 80BD     		pop	{r7, pc}
 933              	.L59:
 934              		.align	2
 935              	.L58:
 936 0080 00000000 		.word	hspi3
 937              		.cfi_endproc
 938              	.LFE297:
 940              		.section	.text.BSP_W25Qx_Erase_Chip,"ax",%progbits
 941              		.align	1
 942              		.global	BSP_W25Qx_Erase_Chip
 943              		.syntax unified
 944              		.thumb
 945              		.thumb_func
 947              	BSP_W25Qx_Erase_Chip:
 948              	.LFB298:
 312:FML/Src/W25QXX.c **** 
 313:FML/Src/W25QXX.c **** /**
 314:FML/Src/W25QXX.c ****   * @brief  Erases the entire QSPI memory.This function will take a very long time.
 315:FML/Src/W25QXX.c ****   * @retval QSPI memory status
 316:FML/Src/W25QXX.c ****   */
 317:FML/Src/W25QXX.c **** uint8_t BSP_W25Qx_Erase_Chip(void)
 318:FML/Src/W25QXX.c **** {
 949              		.loc 1 318 1
 950              		.cfi_startproc
 951              		@ args = 0, pretend = 0, frame = 8
 952              		@ frame_needed = 1, uses_anonymous_args = 0
 953 0000 80B5     		push	{r7, lr}
 954              	.LCFI47:
 955              		.cfi_def_cfa_offset 8
 956              		.cfi_offset 7, -8
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 23


 957              		.cfi_offset 14, -4
 958 0002 82B0     		sub	sp, sp, #8
 959              	.LCFI48:
 960              		.cfi_def_cfa_offset 16
 961 0004 00AF     		add	r7, sp, #0
 962              	.LCFI49:
 963              		.cfi_def_cfa_register 7
 319:FML/Src/W25QXX.c **** 	uint8_t cmd[4];
 320:FML/Src/W25QXX.c **** 	uint32_t tickstart = HAL_GetTick();
 964              		.loc 1 320 23
 965 0006 FFF7FEFF 		bl	HAL_GetTick
 966 000a 7860     		str	r0, [r7, #4]
 321:FML/Src/W25QXX.c **** 	cmd[0] = SECTOR_ERASE_CMD;
 967              		.loc 1 321 9
 968 000c 2023     		movs	r3, #32
 969 000e 3B70     		strb	r3, [r7]
 322:FML/Src/W25QXX.c **** 	
 323:FML/Src/W25QXX.c **** 	/* Enable write operations */
 324:FML/Src/W25QXX.c **** 	BSP_W25Qx_WriteEnable();
 970              		.loc 1 324 2
 971 0010 FFF7FEFF 		bl	BSP_W25Qx_WriteEnable
 325:FML/Src/W25QXX.c **** 	
 326:FML/Src/W25QXX.c **** 	/*Select the FLASH: Chip Select low */
 327:FML/Src/W25QXX.c **** 	W25Qx_Enable();
 972              		.loc 1 327 2
 973 0014 0022     		movs	r2, #0
 974 0016 1021     		movs	r1, #16
 975 0018 4FF09040 		mov	r0, #1207959552
 976 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
 328:FML/Src/W25QXX.c **** 	/* Send the read ID command */
 329:FML/Src/W25QXX.c **** 	HAL_SPI_Transmit(&hspi3, cmd, 1, W25Qx_TIMEOUT_VALUE);	
 977              		.loc 1 329 2
 978 0020 3946     		mov	r1, r7
 979 0022 4FF47A73 		mov	r3, #1000
 980 0026 0122     		movs	r2, #1
 981 0028 0E48     		ldr	r0, .L65
 982 002a FFF7FEFF 		bl	HAL_SPI_Transmit
 330:FML/Src/W25QXX.c **** 	/*Deselect the FLASH: Chip Select high */
 331:FML/Src/W25QXX.c **** 	W25Qx_Disable();
 983              		.loc 1 331 2
 984 002e 0122     		movs	r2, #1
 985 0030 1021     		movs	r1, #16
 986 0032 4FF09040 		mov	r0, #1207959552
 987 0036 FFF7FEFF 		bl	HAL_GPIO_WritePin
 332:FML/Src/W25QXX.c **** 	
 333:FML/Src/W25QXX.c **** 	/* Wait the end of Flash writing */
 334:FML/Src/W25QXX.c **** 	while(BSP_W25Qx_GetStatus() != W25Qx_BUSY);
 988              		.loc 1 334 7
 989 003a 00BF     		nop
 990              	.L61:
 991              		.loc 1 334 8 discriminator 1
 992 003c FFF7FEFF 		bl	BSP_W25Qx_GetStatus
 993 0040 0346     		mov	r3, r0
 994              		.loc 1 334 7 discriminator 1
 995 0042 022B     		cmp	r3, #2
 996 0044 FAD1     		bne	.L61
 335:FML/Src/W25QXX.c **** 	{
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 24


 336:FML/Src/W25QXX.c **** 		/* Check for the Timeout */
 337:FML/Src/W25QXX.c ****     if((HAL_GetTick() - tickstart) > W25Q128FV_BULK_ERASE_MAX_TIME)
 997              		.loc 1 337 9
 998 0046 FFF7FEFF 		bl	HAL_GetTick
 999 004a 0246     		mov	r2, r0
 1000              		.loc 1 337 23
 1001 004c 7B68     		ldr	r3, [r7, #4]
 1002 004e D31A     		subs	r3, r2, r3
 1003              		.loc 1 337 7
 1004 0050 054A     		ldr	r2, .L65+4
 1005 0052 9342     		cmp	r3, r2
 1006 0054 01D9     		bls	.L62
 338:FML/Src/W25QXX.c ****     {        
 339:FML/Src/W25QXX.c **** 			return W25Qx_TIMEOUT;
 1007              		.loc 1 339 11
 1008 0056 0323     		movs	r3, #3
 1009 0058 00E0     		b	.L64
 1010              	.L62:
 340:FML/Src/W25QXX.c ****     }
 341:FML/Src/W25QXX.c **** 	}
 342:FML/Src/W25QXX.c **** 	return W25Qx_OK;
 1011              		.loc 1 342 9
 1012 005a 0023     		movs	r3, #0
 1013              	.L64:
 343:FML/Src/W25QXX.c **** }
 1014              		.loc 1 343 1 discriminator 1
 1015 005c 1846     		mov	r0, r3
 1016 005e 0837     		adds	r7, r7, #8
 1017              	.LCFI50:
 1018              		.cfi_def_cfa_offset 8
 1019 0060 BD46     		mov	sp, r7
 1020              	.LCFI51:
 1021              		.cfi_def_cfa_register 13
 1022              		@ sp needed
 1023 0062 80BD     		pop	{r7, pc}
 1024              	.L66:
 1025              		.align	2
 1026              	.L65:
 1027 0064 00000000 		.word	hspi3
 1028 0068 90D00300 		.word	250000
 1029              		.cfi_endproc
 1030              	.LFE298:
 1032              		.global	__aeabi_i2d
 1033              		.global	__aeabi_dmul
 1034              		.global	__aeabi_d2uiz
 1035              		.global	__aeabi_f2d
 1036              		.section	.rodata
 1037              		.align	2
 1038              	.LC2:
 1039 0000 4D616E75 		.ascii	"Manu_ID:0x%02x,Dev_ID:0x%02x\015\012Manu_Identi:0x%"
 1039      5F49443A 
 1039      30782530 
 1039      32782C44 
 1039      65765F49 
 1040 002d 3032782C 		.ascii	"02x,Memory_Type:0x%02x\015\012Capacity:0x%02x = %dK"
 1040      4D656D6F 
 1040      72795F54 
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 25


 1040      7970653A 
 1040      30782530 
 1041 005a 2D426974 		.ascii	"-Bit = %.2fM-Bit\015\012\000"
 1041      203D2025 
 1041      2E32664D 
 1041      2D426974 
 1041      0D0A00
 1042 006d 000000   		.align	2
 1043              	.LC3:
 1044 0070 466C6173 		.ascii	"Flash Test OK\015\012\000"
 1044      68205465 
 1044      7374204F 
 1044      4B0D0A00 
 1045              		.align	2
 1046              	.LC4:
 1047 0080 466C6173 		.ascii	"Flash Test Failed\015\012\000"
 1047      68205465 
 1047      73742046 
 1047      61696C65 
 1047      640D0A00 
 1048              		.align	2
 1049              	.LC0:
 1050 0094 0000     		.ascii	"\000\000"
 1051 0096 00       		.space	1
 1052 0097 00       		.align	2
 1053              	.LC1:
 1054 0098 68656C6C 		.ascii	"helloflash\000"
 1054      6F666C61 
 1054      736800
 1055              		.section	.text.Flash_Test,"ax",%progbits
 1056              		.align	1
 1057              		.global	Flash_Test
 1058              		.syntax unified
 1059              		.thumb
 1060              		.thumb_func
 1062              	Flash_Test:
 1063              	.LFB299:
 344:FML/Src/W25QXX.c **** 
 345:FML/Src/W25QXX.c **** /**
 346:FML/Src/W25QXX.c ****  * @brief Flash测试函数
 347:FML/Src/W25QXX.c ****  * 		  1）读取并打印Flash芯片ID 参数 容量等信息
 348:FML/Src/W25QXX.c ****  *        2）朝flash指定位置写入0x55
 349:FML/Src/W25QXX.c ****  * 		  3）读取指定位置，判断是否是0x55,以此判断是否能正常读写
 350:FML/Src/W25QXX.c ****  * 
 351:FML/Src/W25QXX.c ****  * @param str 
 352:FML/Src/W25QXX.c ****  */
 353:FML/Src/W25QXX.c **** void Flash_Test(void)
 354:FML/Src/W25QXX.c **** {
 1064              		.loc 1 354 1
 1065              		.cfi_startproc
 1066              		@ args = 0, pretend = 0, frame = 40
 1067              		@ frame_needed = 1, uses_anonymous_args = 0
 1068 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1069              	.LCFI52:
 1070              		.cfi_def_cfa_offset 28
 1071              		.cfi_offset 4, -28
 1072              		.cfi_offset 5, -24
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 26


 1073              		.cfi_offset 6, -20
 1074              		.cfi_offset 7, -16
 1075              		.cfi_offset 8, -12
 1076              		.cfi_offset 9, -8
 1077              		.cfi_offset 14, -4
 1078 0004 91B0     		sub	sp, sp, #68
 1079              	.LCFI53:
 1080              		.cfi_def_cfa_offset 96
 1081 0006 06AF     		add	r7, sp, #24
 1082              	.LCFI54:
 1083              		.cfi_def_cfa 7, 72
 355:FML/Src/W25QXX.c ****   uint8_t flash_id[2] = {0x00,};
 1084              		.loc 1 355 11
 1085 0008 0023     		movs	r3, #0
 1086 000a BB83     		strh	r3, [r7, #28]	@ movhi
 356:FML/Src/W25QXX.c ****   uint8_t JEDEC_id[3] = {0x00,};
 1087              		.loc 1 356 11
 1088 000c 4E4B     		ldr	r3, .L70+8
 1089 000e 1B88     		ldrh	r3, [r3]	@ movhi
 1090 0010 3B83     		strh	r3, [r7, #24]	@ movhi
 1091 0012 0023     		movs	r3, #0
 1092 0014 BB76     		strb	r3, [r7, #26]
 357:FML/Src/W25QXX.c ****   char test_buff[] = "helloflash";
 1093              		.loc 1 357 8
 1094 0016 4D4A     		ldr	r2, .L70+12
 1095 0018 07F10C03 		add	r3, r7, #12
 1096 001c 07CA     		ldm	r2, {r0, r1, r2}
 1097 001e 03C3     		stmia	r3!, {r0, r1}
 1098 0020 1A80     		strh	r2, [r3]	@ movhi
 1099 0022 0233     		adds	r3, r3, #2
 1100 0024 120C     		lsrs	r2, r2, #16
 1101 0026 1A70     		strb	r2, [r3]
 358:FML/Src/W25QXX.c ****   char read_buff[10] = {0x00,};
 1102              		.loc 1 358 8
 1103 0028 0023     		movs	r3, #0
 1104 002a 3B60     		str	r3, [r7]
 1105 002c 3B1D     		adds	r3, r7, #4
 1106 002e 0022     		movs	r2, #0
 1107 0030 1A60     		str	r2, [r3]
 1108 0032 9A80     		strh	r2, [r3, #4]	@ movhi
 359:FML/Src/W25QXX.c ****   uint32_t cap_kb = 0;
 1109              		.loc 1 359 12
 1110 0034 0023     		movs	r3, #0
 1111 0036 7B62     		str	r3, [r7, #36]
 360:FML/Src/W25QXX.c ****   float cap_mb = 0.0f;
 1112              		.loc 1 360 9
 1113 0038 4FF00003 		mov	r3, #0
 1114 003c 3B62     		str	r3, [r7, #32]	@ float
 361:FML/Src/W25QXX.c ****   /*读取Flash 芯片信息 并打印*/
 362:FML/Src/W25QXX.c ****   BSP_W25Qx_Read_ID(flash_id);
 1115              		.loc 1 362 3
 1116 003e 07F11C03 		add	r3, r7, #28
 1117 0042 1846     		mov	r0, r3
 1118 0044 FFF7FEFF 		bl	BSP_W25Qx_Read_ID
 363:FML/Src/W25QXX.c ****   BSP_W25Qx_Read_JEDEC_ID(JEDEC_id);
 1119              		.loc 1 363 3
 1120 0048 07F11803 		add	r3, r7, #24
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 27


 1121 004c 1846     		mov	r0, r3
 1122 004e FFF7FEFF 		bl	BSP_W25Qx_Read_JEDEC_ID
 364:FML/Src/W25QXX.c ****   cap_kb = pow(2 , (JEDEC_id[2] - 10)) *8 ;
 1123              		.loc 1 364 29
 1124 0052 BB7E     		ldrb	r3, [r7, #26]	@ zero_extendqisi2
 1125              		.loc 1 364 33
 1126 0054 0A3B     		subs	r3, r3, #10
 1127              		.loc 1 364 12
 1128 0056 1846     		mov	r0, r3
 1129 0058 FFF7FEFF 		bl	__aeabi_i2d
 1130 005c 0246     		mov	r2, r0
 1131 005e 0B46     		mov	r3, r1
 1132 0060 43EC112B 		vmov	d1, r2, r3
 1133 0064 9FED360B 		vldr.64	d0, .L70
 1134 0068 FFF7FEFF 		bl	pow
 1135 006c 51EC100B 		vmov	r0, r1, d0
 1136              		.loc 1 364 40
 1137 0070 4FF00002 		mov	r2, #0
 1138 0074 364B     		ldr	r3, .L70+16
 1139 0076 FFF7FEFF 		bl	__aeabi_dmul
 1140 007a 0246     		mov	r2, r0
 1141 007c 0B46     		mov	r3, r1
 1142              		.loc 1 364 10
 1143 007e 1046     		mov	r0, r2
 1144 0080 1946     		mov	r1, r3
 1145 0082 FFF7FEFF 		bl	__aeabi_d2uiz
 1146 0086 0346     		mov	r3, r0
 1147 0088 7B62     		str	r3, [r7, #36]
 365:FML/Src/W25QXX.c ****   cap_mb = (float)cap_kb / 1024.0;
 1148              		.loc 1 365 12
 1149 008a 7B6A     		ldr	r3, [r7, #36]
 1150 008c 07EE903A 		vmov	s15, r3	@ int
 1151 0090 B8EE677A 		vcvt.f32.u32	s14, s15
 1152              		.loc 1 365 10
 1153 0094 DFED2F6A 		vldr.32	s13, .L70+20
 1154 0098 C7EE267A 		vdiv.f32	s15, s14, s13
 1155 009c C7ED087A 		vstr.32	s15, [r7, #32]
 366:FML/Src/W25QXX.c **** 
 367:FML/Src/W25QXX.c ****   shellPrint(&shell,"Manu_ID:0x%02x,Dev_ID:0x%02x\r\nManu_Identi:0x%02x,Memory_Type:0x%02x\r\n\
 368:FML/Src/W25QXX.c **** Capacity:0x%02x = %dK-Bit = %.2fM-Bit\r\n",flash_id[0],flash_id[1],JEDEC_id[0],JEDEC_id[1],JEDEC_id
 1156              		.loc 1 368 52
 1157 00a0 3B7F     		ldrb	r3, [r7, #28]	@ zero_extendqisi2
 367:FML/Src/W25QXX.c **** Capacity:0x%02x = %dK-Bit = %.2fM-Bit\r\n",flash_id[0],flash_id[1],JEDEC_id[0],JEDEC_id[1],JEDEC_id
 1158              		.loc 1 367 3
 1159 00a2 9846     		mov	r8, r3
 1160              		.loc 1 368 64
 1161 00a4 7B7F     		ldrb	r3, [r7, #29]	@ zero_extendqisi2
 367:FML/Src/W25QXX.c **** Capacity:0x%02x = %dK-Bit = %.2fM-Bit\r\n",flash_id[0],flash_id[1],JEDEC_id[0],JEDEC_id[1],JEDEC_id
 1162              		.loc 1 367 3
 1163 00a6 9946     		mov	r9, r3
 1164              		.loc 1 368 76
 1165 00a8 3B7E     		ldrb	r3, [r7, #24]	@ zero_extendqisi2
 367:FML/Src/W25QXX.c **** Capacity:0x%02x = %dK-Bit = %.2fM-Bit\r\n",flash_id[0],flash_id[1],JEDEC_id[0],JEDEC_id[1],JEDEC_id
 1166              		.loc 1 367 3
 1167 00aa 1C46     		mov	r4, r3
 1168              		.loc 1 368 88
 1169 00ac 7B7E     		ldrb	r3, [r7, #25]	@ zero_extendqisi2
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 28


 367:FML/Src/W25QXX.c **** Capacity:0x%02x = %dK-Bit = %.2fM-Bit\r\n",flash_id[0],flash_id[1],JEDEC_id[0],JEDEC_id[1],JEDEC_id
 1170              		.loc 1 367 3
 1171 00ae 1D46     		mov	r5, r3
 1172              		.loc 1 368 100
 1173 00b0 BB7E     		ldrb	r3, [r7, #26]	@ zero_extendqisi2
 367:FML/Src/W25QXX.c **** Capacity:0x%02x = %dK-Bit = %.2fM-Bit\r\n",flash_id[0],flash_id[1],JEDEC_id[0],JEDEC_id[1],JEDEC_id
 1174              		.loc 1 367 3
 1175 00b2 1E46     		mov	r6, r3
 1176 00b4 386A     		ldr	r0, [r7, #32]	@ float
 1177 00b6 FFF7FEFF 		bl	__aeabi_f2d
 1178 00ba 0246     		mov	r2, r0
 1179 00bc 0B46     		mov	r3, r1
 1180 00be CDE90423 		strd	r2, [sp, #16]
 1181 00c2 7B6A     		ldr	r3, [r7, #36]
 1182 00c4 0393     		str	r3, [sp, #12]
 1183 00c6 0296     		str	r6, [sp, #8]
 1184 00c8 0195     		str	r5, [sp, #4]
 1185 00ca 0094     		str	r4, [sp]
 1186 00cc 4B46     		mov	r3, r9
 1187 00ce 4246     		mov	r2, r8
 1188 00d0 2149     		ldr	r1, .L70+24
 1189 00d2 2248     		ldr	r0, .L70+28
 1190 00d4 FFF7FEFF 		bl	shellPrint
 369:FML/Src/W25QXX.c ****   
 370:FML/Src/W25QXX.c ****   /**/
 371:FML/Src/W25QXX.c ****   BSP_W25Qx_Write(test_buff,cap_kb*1024-10,10);
 1191              		.loc 1 371 35
 1192 00d8 7B6A     		ldr	r3, [r7, #36]
 1193 00da 9B02     		lsls	r3, r3, #10
 1194              		.loc 1 371 3
 1195 00dc A3F10A01 		sub	r1, r3, #10
 1196 00e0 07F10C03 		add	r3, r7, #12
 1197 00e4 0A22     		movs	r2, #10
 1198 00e6 1846     		mov	r0, r3
 1199 00e8 FFF7FEFF 		bl	BSP_W25Qx_Write
 372:FML/Src/W25QXX.c ****   Delay_ms(50);
 1200              		.loc 1 372 3
 1201 00ec 3220     		movs	r0, #50
 1202 00ee FFF7FEFF 		bl	Delay_ms
 373:FML/Src/W25QXX.c ****   BSP_W25Qx_Read(read_buff,cap_kb*1024-10,10);
 1203              		.loc 1 373 34
 1204 00f2 7B6A     		ldr	r3, [r7, #36]
 1205 00f4 9B02     		lsls	r3, r3, #10
 1206              		.loc 1 373 3
 1207 00f6 A3F10A01 		sub	r1, r3, #10
 1208 00fa 3B46     		mov	r3, r7
 1209 00fc 0A22     		movs	r2, #10
 1210 00fe 1846     		mov	r0, r3
 1211 0100 FFF7FEFF 		bl	BSP_W25Qx_Read
 374:FML/Src/W25QXX.c ****   if(strcmp(read_buff,test_buff) == 0)
 1212              		.loc 1 374 6
 1213 0104 07F10C02 		add	r2, r7, #12
 1214 0108 3B46     		mov	r3, r7
 1215 010a 1146     		mov	r1, r2
 1216 010c 1846     		mov	r0, r3
 1217 010e FFF7FEFF 		bl	strcmp
 1218 0112 0346     		mov	r3, r0
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 29


 1219              		.loc 1 374 5
 1220 0114 002B     		cmp	r3, #0
 1221 0116 04D1     		bne	.L68
 375:FML/Src/W25QXX.c **** 	shellPrint(&shell,"Flash Test OK\r\n");
 1222              		.loc 1 375 2
 1223 0118 1149     		ldr	r1, .L70+32
 1224 011a 1048     		ldr	r0, .L70+28
 1225 011c FFF7FEFF 		bl	shellPrint
 1226 0120 03E0     		b	.L69
 1227              	.L68:
 376:FML/Src/W25QXX.c ****   else
 377:FML/Src/W25QXX.c **** 	shellPrint(&shell,"Flash Test Failed\r\n");
 1228              		.loc 1 377 2
 1229 0122 1049     		ldr	r1, .L70+36
 1230 0124 0D48     		ldr	r0, .L70+28
 1231 0126 FFF7FEFF 		bl	shellPrint
 1232              	.L69:
 378:FML/Src/W25QXX.c ****   Delay_ms(10);
 1233              		.loc 1 378 3
 1234 012a 0A20     		movs	r0, #10
 1235 012c FFF7FEFF 		bl	Delay_ms
 379:FML/Src/W25QXX.c **** 
 380:FML/Src/W25QXX.c **** }
 1236              		.loc 1 380 1
 1237 0130 00BF     		nop
 1238 0132 2C37     		adds	r7, r7, #44
 1239              	.LCFI55:
 1240              		.cfi_def_cfa_offset 28
 1241 0134 BD46     		mov	sp, r7
 1242              	.LCFI56:
 1243              		.cfi_def_cfa_register 13
 1244              		@ sp needed
 1245 0136 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1246              	.L71:
 1247 013a 00BFAFF3 		.align	3
 1247      0080
 1248              	.L70:
 1249 0140 00000000 		.word	0
 1250 0144 00000040 		.word	1073741824
 1251 0148 94000000 		.word	.LC0
 1252 014c 98000000 		.word	.LC1
 1253 0150 00002040 		.word	1075838976
 1254 0154 00008044 		.word	1149239296
 1255 0158 00000000 		.word	.LC2
 1256 015c 00000000 		.word	shell
 1257 0160 70000000 		.word	.LC3
 1258 0164 80000000 		.word	.LC4
 1259              		.cfi_endproc
 1260              	.LFE299:
 1262              		.global	shellCmdflash_test
 1263              		.section	.rodata.shellCmdflash_test,"a"
 1264              		.align	2
 1267              	shellCmdflash_test:
 1268 0000 666C6173 		.ascii	"flash_test\000"
 1268      685F7465 
 1268      737400
 1269              		.global	shellDescflash_test
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 30


 1270              		.section	.rodata.shellDescflash_test,"a"
 1271              		.align	2
 1274              	shellDescflash_test:
 1275 0000 72733438 		.ascii	"rs485 send test\000"
 1275      35207365 
 1275      6E642074 
 1275      65737400 
 1276              		.global	shellCommandflash_test
 1277              		.section	shellCommand,"a"
 1280              	shellCommandflash_test:
 1281 0000 00210000 		.4byte	8448
 1282 0004 00000000 		.4byte	shellCmdflash_test
 1283 0008 00000000 		.4byte	Flash_Test
 1284 000c 00000000 		.4byte	shellDescflash_test
 1285              		.text
 1286              	.Letext0:
 1287              		.file 2 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\
 1288              		.file 3 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\
 1289              		.file 4 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l431xx.h"
 1290              		.file 5 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 1291              		.file 6 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_gpio.h"
 1292              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 1293              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_spi.h"
 1294              		.file 9 "ThirdParty/Letter-shell/Inc/shell.h"
 1295              		.file 10 "HAL/Inc/spi.h"
 1296              		.file 11 "ThirdParty/Letter-shell/Inc/shell_port.h"
 1297              		.file 12 "<built-in>"
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 31


DEFINED SYMBOLS
                            *ABS*:00000000 W25QXX.c
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:20     .text.BSP_W25Qx_Init:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:26     .text.BSP_W25Qx_Init:00000000 BSP_W25Qx_Init
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:58     .text.BSP_W25Qx_Reset:00000000 BSP_W25Qx_Reset
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:117    .text.BSP_W25Qx_GetStatus:00000000 BSP_W25Qx_GetStatus
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:53     .text.BSP_W25Qx_Reset:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:107    .text.BSP_W25Qx_Reset:0000003c $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:112    .text.BSP_W25Qx_GetStatus:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:185    .text.BSP_W25Qx_GetStatus:00000058 $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:190    .text.BSP_W25Qx_WriteEnable:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:196    .text.BSP_W25Qx_WriteEnable:00000000 BSP_W25Qx_WriteEnable
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:273    .text.BSP_W25Qx_WriteEnable:00000060 $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:278    .text.BSP_W25Qx_Read_ID:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:284    .text.BSP_W25Qx_Read_ID:00000000 BSP_W25Qx_Read_ID
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:340    .text.BSP_W25Qx_Read_ID:0000004c $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:345    .text.BSP_W25Qx_Read_JEDEC_ID:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:351    .text.BSP_W25Qx_Read_JEDEC_ID:00000000 BSP_W25Qx_Read_JEDEC_ID
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:407    .text.BSP_W25Qx_Read_JEDEC_ID:0000004c $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:412    .text.BSP_W25Qx_Read:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:418    .text.BSP_W25Qx_Read:00000000 BSP_W25Qx_Read
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:507    .text.BSP_W25Qx_Read:00000074 $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:512    .text.BSP_W25Qx_Write:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:518    .text.BSP_W25Qx_Write:00000000 BSP_W25Qx_Write
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:714    .text.BSP_W25Qx_Write:00000110 $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:719    .text.BSP_W25Qx_Erase_Page:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:725    .text.BSP_W25Qx_Erase_Page:00000000 BSP_W25Qx_Erase_Page
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:825    .text.BSP_W25Qx_Erase_Page:00000080 $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:830    .text.BSP_W25Qx_Erase_Block:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:836    .text.BSP_W25Qx_Erase_Block:00000000 BSP_W25Qx_Erase_Block
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:936    .text.BSP_W25Qx_Erase_Block:00000080 $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:941    .text.BSP_W25Qx_Erase_Chip:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:947    .text.BSP_W25Qx_Erase_Chip:00000000 BSP_W25Qx_Erase_Chip
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:1027   .text.BSP_W25Qx_Erase_Chip:00000064 $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:1037   .rodata:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:1056   .text.Flash_Test:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:1062   .text.Flash_Test:00000000 Flash_Test
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:1249   .text.Flash_Test:00000140 $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:1267   .rodata.shellCmdflash_test:00000000 shellCmdflash_test
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:1264   .rodata.shellCmdflash_test:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:1274   .rodata.shellDescflash_test:00000000 shellDescflash_test
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:1271   .rodata.shellDescflash_test:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s:1280   shellCommand:00000000 shellCommandflash_test

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_SPI_Transmit
hspi3
HAL_SPI_Receive
HAL_GetTick
__aeabi_i2d
__aeabi_dmul
__aeabi_d2uiz
__aeabi_f2d
pow
shellPrint
Delay_ms
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc9ARyYq.s 			page 32


strcmp
shell
