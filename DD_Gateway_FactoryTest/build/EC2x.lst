ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"EC2x.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.ec2x_io_init,"ax",%progbits
  20              		.align	1
  21              		.global	ec2x_io_init
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	ec2x_io_init:
  27              	.LVL0:
  28              	.LFB291:
  29              		.file 1 "FML/Src/EC2x.c"
   1:FML/Src/EC2x.c **** /**
   2:FML/Src/EC2x.c ****  ******************************************************************************
   3:FML/Src/EC2x.c **** *
   4:FML/Src/EC2x.c **** * @file   
   5:FML/Src/EC2x.c **** *
   6:FML/Src/EC2x.c **** * @brief   
   7:FML/Src/EC2x.c **** *
   8:FML/Src/EC2x.c **** * @attention
   9:FML/Src/EC2x.c **** *
  10:FML/Src/EC2x.c **** *Copyright (c) 2023 STMicroelectronics.
  11:FML/Src/EC2x.c **** *
  12:FML/Src/EC2x.c **** *All rights reserved.
  13:FML/Src/EC2x.c ****  ******************************************************************************
  14:FML/Src/EC2x.c **** */
  15:FML/Src/EC2x.c **** 
  16:FML/Src/EC2x.c **** 
  17:FML/Src/EC2x.c **** /*----------------------------------include-----------------------------------*/
  18:FML/Src/EC2x.c **** #include "EC2x.h"
  19:FML/Src/EC2x.c **** #include "usart.h"
  20:FML/Src/EC2x.c **** #include "timer.h"
  21:FML/Src/EC2x.c **** #include "shell_port.h"
  22:FML/Src/EC2x.c **** #include <stdio.h>
  23:FML/Src/EC2x.c **** #include <string.h>
  24:FML/Src/EC2x.c **** #include <stdlib.h>
  25:FML/Src/EC2x.c **** #include "fsm.h"
  26:FML/Src/EC2x.c **** #include "queue.h"
  27:FML/Src/EC2x.c **** /*-----------------------------------macro------------------------------------*/
  28:FML/Src/EC2x.c **** #define BUFF_LEN 200
  29:FML/Src/EC2x.c **** /*----------------------------------typedef-----------------------------------*/
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 2


  30:FML/Src/EC2x.c **** 
  31:FML/Src/EC2x.c **** 
  32:FML/Src/EC2x.c **** /*----------------------------------variable----------------------------------*/
  33:FML/Src/EC2x.c **** uint8_t ec2x_buff[BUFF_LEN]={0xff,};
  34:FML/Src/EC2x.c **** 
  35:FML/Src/EC2x.c **** //定义tcp连接字符串
  36:FML/Src/EC2x.c **** uint8_t tcp_connect[]="AT+QIOPEN=1,0,\"TCP\",\"115.236.153.170\",52894,0,2\r\n";
  37:FML/Src/EC2x.c **** 
  38:FML/Src/EC2x.c **** //定义tcp连接指令队列
  39:FML/Src/EC2x.c **** uint8_t tcpconnct_step = 0;
  40:FML/Src/EC2x.c **** ATMsg_TypeDef connectmsg_queue[] = {
  41:FML/Src/EC2x.c ****     {"AT\r\n","OK",100,5},
  42:FML/Src/EC2x.c ****     {"AT+CPIN?\r\n","READY",100,5},
  43:FML/Src/EC2x.c ****     {"AT+CREG?\r\n","+CREG: 0,1", 100, 5},
  44:FML/Src/EC2x.c ****     {"AT+CGREG?\r\n","+CGREG: 0,1", 100, 5},
  45:FML/Src/EC2x.c ****     {"AT+QICSGP=1,1,\"CMNET\",\"\",\"\",1\r\n","OK", 100, 5},
  46:FML/Src/EC2x.c ****     {"AT+QIDEACT=1\r\n", "OK", 100, 5},
  47:FML/Src/EC2x.c ****     {"AT+QIACT=1\r\n", "OK", 100, 5},
  48:FML/Src/EC2x.c ****     {tcp_connect, "CONNECT", 100, 5},
  49:FML/Src/EC2x.c **** };
  50:FML/Src/EC2x.c **** 
  51:FML/Src/EC2x.c **** 
  52:FML/Src/EC2x.c **** /*----------------------------------typedef-----------------------------------*/
  53:FML/Src/EC2x.c **** 
  54:FML/Src/EC2x.c **** EC2x_HandleTypeDef ec2x_dev[]=
  55:FML/Src/EC2x.c **** {
  56:FML/Src/EC2x.c ****     {
  57:FML/Src/EC2x.c ****         "uart1/ec200s",
  58:FML/Src/EC2x.c ****         &huart1,
  59:FML/Src/EC2x.c ****         GPIOA,
  60:FML/Src/EC2x.c ****         GPIO_PIN_12,
  61:FML/Src/EC2x.c ****         GPIOA,
  62:FML/Src/EC2x.c ****         GPIO_PIN_8,
  63:FML/Src/EC2x.c ****         GPIOA,
  64:FML/Src/EC2x.c ****         GPIO_PIN_11,
  65:FML/Src/EC2x.c ****         {
  66:FML/Src/EC2x.c ****             0,
  67:FML/Src/EC2x.c ****            ec2x_buff,
  68:FML/Src/EC2x.c ****             0,
  69:FML/Src/EC2x.c ****             0,
  70:FML/Src/EC2x.c ****             0,
  71:FML/Src/EC2x.c ****             BUFF_LEN 
  72:FML/Src/EC2x.c ****         }
  73:FML/Src/EC2x.c ****     }
  74:FML/Src/EC2x.c **** };
  75:FML/Src/EC2x.c **** /*-------------------------------------os-------------------------------------*/
  76:FML/Src/EC2x.c **** 
  77:FML/Src/EC2x.c **** /*----------------------------------function----------------------------------*/
  78:FML/Src/EC2x.c **** 
  79:FML/Src/EC2x.c **** /**
  80:FML/Src/EC2x.c ****  * @brief 设备初始化函数
  81:FML/Src/EC2x.c ****  * 
  82:FML/Src/EC2x.c ****  */
  83:FML/Src/EC2x.c **** void ec2x_io_init(EC2x_HandleTypeDef *device)
  84:FML/Src/EC2x.c **** {
  30              		.loc 1 84 1 view -0
  31              		.cfi_startproc
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 3


  32              		@ args = 0, pretend = 0, frame = 24
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 84 1 is_stmt 0 view .LVU1
  35 0000 70B5     		push	{r4, r5, r6, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 16
  38              		.cfi_offset 4, -16
  39              		.cfi_offset 5, -12
  40              		.cfi_offset 6, -8
  41              		.cfi_offset 14, -4
  42 0002 86B0     		sub	sp, sp, #24
  43              	.LCFI1:
  44              		.cfi_def_cfa_offset 40
  45 0004 0446     		mov	r4, r0
  85:FML/Src/EC2x.c ****      GPIO_InitTypeDef GPIO_InitStruct = {0};
  46              		.loc 1 85 6 is_stmt 1 view .LVU2
  47              		.loc 1 85 23 is_stmt 0 view .LVU3
  48 0006 0025     		movs	r5, #0
  49 0008 0195     		str	r5, [sp, #4]
  50 000a 0295     		str	r5, [sp, #8]
  51 000c 0395     		str	r5, [sp, #12]
  52 000e 0495     		str	r5, [sp, #16]
  53 0010 0595     		str	r5, [sp, #20]
  86:FML/Src/EC2x.c ****     
  87:FML/Src/EC2x.c ****     // 使能UART和GPIO时钟
  88:FML/Src/EC2x.c ****     //__HAL_RCC_UARTX_CLK_ENABLE(); // 替换为实际的UART时钟
  89:FML/Src/EC2x.c ****     __HAL_RCC_GPIOA_CLK_ENABLE(); // 替换为实际的GPIO时钟
  54              		.loc 1 89 5 is_stmt 1 view .LVU4
  55              	.LBB2:
  56              		.loc 1 89 5 view .LVU5
  57              		.loc 1 89 5 view .LVU6
  58 0012 1F4B     		ldr	r3, .L3
  59 0014 DA6C     		ldr	r2, [r3, #76]
  60 0016 42F00102 		orr	r2, r2, #1
  61 001a DA64     		str	r2, [r3, #76]
  62              		.loc 1 89 5 view .LVU7
  63 001c DB6C     		ldr	r3, [r3, #76]
  64 001e 03F00103 		and	r3, r3, #1
  65 0022 0093     		str	r3, [sp]
  66              		.loc 1 89 5 view .LVU8
  67 0024 009B     		ldr	r3, [sp]
  68              	.LBE2:
  69              		.loc 1 89 5 view .LVU9
  90:FML/Src/EC2x.c ****     
  91:FML/Src/EC2x.c ****     // 配置GPIO引脚
  92:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->reset_pin;
  70              		.loc 1 92 5 view .LVU10
  71              		.loc 1 92 33 is_stmt 0 view .LVU11
  72 0026 038C     		ldrh	r3, [r0, #32]
  73              		.loc 1 92 25 view .LVU12
  74 0028 0193     		str	r3, [sp, #4]
  93:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  75              		.loc 1 93 5 is_stmt 1 view .LVU13
  76              		.loc 1 93 26 is_stmt 0 view .LVU14
  77 002a 0126     		movs	r6, #1
  78 002c 0296     		str	r6, [sp, #8]
  94:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 4


  79              		.loc 1 94 5 is_stmt 1 view .LVU15
  95:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  80              		.loc 1 95 5 view .LVU16
  96:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->reset_port, &GPIO_InitStruct);
  81              		.loc 1 96 5 view .LVU17
  82 002e 01A9     		add	r1, sp, #4
  83 0030 C069     		ldr	r0, [r0, #28]
  84              	.LVL1:
  85              		.loc 1 96 5 is_stmt 0 view .LVU18
  86 0032 FFF7FEFF 		bl	HAL_GPIO_Init
  87              	.LVL2:
  97:FML/Src/EC2x.c **** 
  98:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->wake_pin;
  88              		.loc 1 98 5 is_stmt 1 view .LVU19
  89              		.loc 1 98 33 is_stmt 0 view .LVU20
  90 0036 238D     		ldrh	r3, [r4, #40]
  91              		.loc 1 98 25 view .LVU21
  92 0038 0193     		str	r3, [sp, #4]
  99:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  93              		.loc 1 99 5 is_stmt 1 view .LVU22
  94              		.loc 1 99 26 is_stmt 0 view .LVU23
  95 003a 0296     		str	r6, [sp, #8]
 100:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
  96              		.loc 1 100 5 is_stmt 1 view .LVU24
  97              		.loc 1 100 26 is_stmt 0 view .LVU25
  98 003c 0395     		str	r5, [sp, #12]
 101:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  99              		.loc 1 101 5 is_stmt 1 view .LVU26
 100              		.loc 1 101 27 is_stmt 0 view .LVU27
 101 003e 0495     		str	r5, [sp, #16]
 102:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->wake_port, &GPIO_InitStruct);
 102              		.loc 1 102 5 is_stmt 1 view .LVU28
 103 0040 01A9     		add	r1, sp, #4
 104 0042 606A     		ldr	r0, [r4, #36]
 105 0044 FFF7FEFF 		bl	HAL_GPIO_Init
 106              	.LVL3:
 103:FML/Src/EC2x.c **** 
 104:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->pwren_pin;
 107              		.loc 1 104 5 view .LVU29
 108              		.loc 1 104 33 is_stmt 0 view .LVU30
 109 0048 238B     		ldrh	r3, [r4, #24]
 110              		.loc 1 104 25 view .LVU31
 111 004a 0193     		str	r3, [sp, #4]
 105:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 112              		.loc 1 105 5 is_stmt 1 view .LVU32
 113              		.loc 1 105 26 is_stmt 0 view .LVU33
 114 004c 0296     		str	r6, [sp, #8]
 106:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 115              		.loc 1 106 5 is_stmt 1 view .LVU34
 116              		.loc 1 106 26 is_stmt 0 view .LVU35
 117 004e 0395     		str	r5, [sp, #12]
 107:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 118              		.loc 1 107 5 is_stmt 1 view .LVU36
 119              		.loc 1 107 27 is_stmt 0 view .LVU37
 120 0050 0495     		str	r5, [sp, #16]
 108:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->pwren_port, &GPIO_InitStruct);
 121              		.loc 1 108 5 is_stmt 1 view .LVU38
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 5


 122 0052 01A9     		add	r1, sp, #4
 123 0054 6069     		ldr	r0, [r4, #20]
 124 0056 FFF7FEFF 		bl	HAL_GPIO_Init
 125              	.LVL4:
 109:FML/Src/EC2x.c ****     
 110:FML/Src/EC2x.c ****     
 111:FML/Src/EC2x.c ****     // 初始化复位引脚为高电平
 112:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->reset_port, device->reset_pin, GPIO_PIN_SET);
 126              		.loc 1 112 5 view .LVU39
 127 005a 3246     		mov	r2, r6
 128 005c 218C     		ldrh	r1, [r4, #32]
 129 005e E069     		ldr	r0, [r4, #28]
 130 0060 FFF7FEFF 		bl	HAL_GPIO_WritePin
 131              	.LVL5:
 113:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->wake_port, device->wake_pin, GPIO_PIN_SET);
 132              		.loc 1 113 5 view .LVU40
 133 0064 3246     		mov	r2, r6
 134 0066 218D     		ldrh	r1, [r4, #40]
 135 0068 606A     		ldr	r0, [r4, #36]
 136 006a FFF7FEFF 		bl	HAL_GPIO_WritePin
 137              	.LVL6:
 114:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_SET);
 138              		.loc 1 114 5 view .LVU41
 139 006e 3246     		mov	r2, r6
 140 0070 218B     		ldrh	r1, [r4, #24]
 141 0072 6069     		ldr	r0, [r4, #20]
 142 0074 FFF7FEFF 		bl	HAL_GPIO_WritePin
 143              	.LVL7:
 115:FML/Src/EC2x.c ****     Delay_ms(1000);
 144              		.loc 1 115 5 view .LVU42
 145 0078 4FF47A70 		mov	r0, #1000
 146 007c FFF7FEFF 		bl	Delay_ms
 147              	.LVL8:
 116:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_RESET);
 148              		.loc 1 116 5 view .LVU43
 149 0080 2A46     		mov	r2, r5
 150 0082 218B     		ldrh	r1, [r4, #24]
 151 0084 6069     		ldr	r0, [r4, #20]
 152 0086 FFF7FEFF 		bl	HAL_GPIO_WritePin
 153              	.LVL9:
 117:FML/Src/EC2x.c **** }
 154              		.loc 1 117 1 is_stmt 0 view .LVU44
 155 008a 06B0     		add	sp, sp, #24
 156              	.LCFI2:
 157              		.cfi_def_cfa_offset 16
 158              		@ sp needed
 159 008c 70BD     		pop	{r4, r5, r6, pc}
 160              	.LVL10:
 161              	.L4:
 162              		.loc 1 117 1 view .LVU45
 163 008e 00BF     		.align	2
 164              	.L3:
 165 0090 00100240 		.word	1073876992
 166              		.cfi_endproc
 167              	.LFE291:
 169              		.section	.text.ec2x_open,"ax",%progbits
 170              		.align	1
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 6


 171              		.global	ec2x_open
 172              		.syntax unified
 173              		.thumb
 174              		.thumb_func
 176              	ec2x_open:
 177              	.LVL11:
 178              	.LFB293:
 118:FML/Src/EC2x.c **** /**
 119:FML/Src/EC2x.c ****  * @brief 通过POWEREN引脚，对模块进行掉电复位
 120:FML/Src/EC2x.c ****  * 
 121:FML/Src/EC2x.c ****  * @param fd 
 122:FML/Src/EC2x.c ****  * @return int 
 123:FML/Src/EC2x.c ****  */
 124:FML/Src/EC2x.c **** int ec2x_reset(int fd){
 125:FML/Src/EC2x.c ****     fd = 0;
 126:FML/Src/EC2x.c ****     int err_code = 0;
 127:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 128:FML/Src/EC2x.c ****         return (err_code = -1);
 129:FML/Src/EC2x.c ****     else{
 130:FML/Src/EC2x.c ****         EC2x_HandleTypeDef *device = &ec2x_dev[fd];
 131:FML/Src/EC2x.c ****         HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_SET);
 132:FML/Src/EC2x.c ****         Delay_ms(500);
 133:FML/Src/EC2x.c ****         HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_RESET);
 134:FML/Src/EC2x.c ****     }
 135:FML/Src/EC2x.c ****     return(ec2x_cmd_send(fd,NULL,0,"RDY/r/n",10000));
 136:FML/Src/EC2x.c **** }
 137:FML/Src/EC2x.c **** 
 138:FML/Src/EC2x.c **** /**
 139:FML/Src/EC2x.c ****  * @brief 设备文件open函数
 140:FML/Src/EC2x.c ****  * 
 141:FML/Src/EC2x.c ****  * @param dev_name 
 142:FML/Src/EC2x.c ****  * @return int 
 143:FML/Src/EC2x.c ****  *         返回设备文件索引，未查找到则返回-1
 144:FML/Src/EC2x.c ****  */
 145:FML/Src/EC2x.c **** int ec2x_open(char *dev_name)
 146:FML/Src/EC2x.c **** {
 179              		.loc 1 146 1 is_stmt 1 view -0
 180              		.cfi_startproc
 181              		@ args = 0, pretend = 0, frame = 0
 182              		@ frame_needed = 0, uses_anonymous_args = 0
 183              		.loc 1 146 1 is_stmt 0 view .LVU47
 184 0000 70B5     		push	{r4, r5, r6, lr}
 185              	.LCFI3:
 186              		.cfi_def_cfa_offset 16
 187              		.cfi_offset 4, -16
 188              		.cfi_offset 5, -12
 189              		.cfi_offset 6, -8
 190              		.cfi_offset 14, -4
 191 0002 0546     		mov	r5, r0
 147:FML/Src/EC2x.c ****     uint8_t i = 0;
 192              		.loc 1 147 5 is_stmt 1 view .LVU48
 193              	.LVL12:
 148:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 194              		.loc 1 148 5 view .LVU49
 195              		.loc 1 148 11 is_stmt 0 view .LVU50
 196 0004 0024     		movs	r4, #0
 197              	.LVL13:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 7


 198              	.L6:
 199              		.loc 1 148 15 is_stmt 1 discriminator 1 view .LVU51
 200              		.loc 1 148 5 is_stmt 0 discriminator 1 view .LVU52
 201 0006 1CB1     		cbz	r4, .L9
 149:FML/Src/EC2x.c ****     {
 150:FML/Src/EC2x.c ****         if(strcmp(dev_name,ec2x_dev[i].dev_name) == 0)
 151:FML/Src/EC2x.c ****         {
 152:FML/Src/EC2x.c ****             ec2x_io_init(&ec2x_dev[i]);
 153:FML/Src/EC2x.c ****             return i;
 154:FML/Src/EC2x.c ****         }
 155:FML/Src/EC2x.c ****     }
 156:FML/Src/EC2x.c ****     return -1;
 202              		.loc 1 156 12 view .LVU53
 203 0008 4FF0FF36 		mov	r6, #-1
 204              	.L5:
 157:FML/Src/EC2x.c **** };
 205              		.loc 1 157 1 view .LVU54
 206 000c 3046     		mov	r0, r6
 207 000e 70BD     		pop	{r4, r5, r6, pc}
 208              	.LVL14:
 209              	.L9:
 150:FML/Src/EC2x.c ****         {
 210              		.loc 1 150 9 is_stmt 1 view .LVU55
 150:FML/Src/EC2x.c ****         {
 211              		.loc 1 150 39 is_stmt 0 view .LVU56
 212 0010 2646     		mov	r6, r4
 213 0012 C4EB0413 		rsb	r3, r4, r4, lsl #4
 150:FML/Src/EC2x.c ****         {
 214              		.loc 1 150 12 view .LVU57
 215 0016 0949     		ldr	r1, .L12
 216 0018 01EB8301 		add	r1, r1, r3, lsl #2
 217 001c 2846     		mov	r0, r5
 218 001e FFF7FEFF 		bl	strcmp
 219              	.LVL15:
 150:FML/Src/EC2x.c ****         {
 220              		.loc 1 150 11 view .LVU58
 221 0022 10B1     		cbz	r0, .L11
 148:FML/Src/EC2x.c ****     {
 222              		.loc 1 148 64 is_stmt 1 discriminator 2 view .LVU59
 148:FML/Src/EC2x.c ****     {
 223              		.loc 1 148 65 is_stmt 0 discriminator 2 view .LVU60
 224 0024 0134     		adds	r4, r4, #1
 225              	.LVL16:
 148:FML/Src/EC2x.c ****     {
 226              		.loc 1 148 65 discriminator 2 view .LVU61
 227 0026 E4B2     		uxtb	r4, r4
 228              	.LVL17:
 148:FML/Src/EC2x.c ****     {
 229              		.loc 1 148 65 discriminator 2 view .LVU62
 230 0028 EDE7     		b	.L6
 231              	.L11:
 152:FML/Src/EC2x.c ****             return i;
 232              		.loc 1 152 13 is_stmt 1 view .LVU63
 233 002a C4EB0413 		rsb	r3, r4, r4, lsl #4
 234 002e 0348     		ldr	r0, .L12
 235 0030 00EB8300 		add	r0, r0, r3, lsl #2
 236 0034 FFF7FEFF 		bl	ec2x_io_init
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 8


 237              	.LVL18:
 153:FML/Src/EC2x.c ****         }
 238              		.loc 1 153 13 view .LVU64
 153:FML/Src/EC2x.c ****         }
 239              		.loc 1 153 20 is_stmt 0 view .LVU65
 240 0038 E8E7     		b	.L5
 241              	.L13:
 242 003a 00BF     		.align	2
 243              	.L12:
 244 003c 00000000 		.word	.LANCHOR0
 245              		.cfi_endproc
 246              	.LFE293:
 248              		.section	.text.ec2x_write,"ax",%progbits
 249              		.align	1
 250              		.global	ec2x_write
 251              		.syntax unified
 252              		.thumb
 253              		.thumb_func
 255              	ec2x_write:
 256              	.LVL19:
 257              	.LFB294:
 158:FML/Src/EC2x.c **** 
 159:FML/Src/EC2x.c **** /**
 160:FML/Src/EC2x.c ****  * @brief 设备文件close函数
 161:FML/Src/EC2x.c ****  * 
 162:FML/Src/EC2x.c ****  * @param fd 
 163:FML/Src/EC2x.c ****  * @return int 
 164:FML/Src/EC2x.c ****  */
 165:FML/Src/EC2x.c **** int ec2x_close(int fd);
 166:FML/Src/EC2x.c **** 
 167:FML/Src/EC2x.c **** /**
 168:FML/Src/EC2x.c ****  * @brief 设备文件写入函数
 169:FML/Src/EC2x.c ****  * 
 170:FML/Src/EC2x.c ****  * @param fd 
 171:FML/Src/EC2x.c ****  * @param tx_buff 
 172:FML/Src/EC2x.c ****  * @param len 
 173:FML/Src/EC2x.c ****  * @return int 
 174:FML/Src/EC2x.c ****  *         设备号无效返回-1
 175:FML/Src/EC2x.c ****  *         写入失败返回 0
 176:FML/Src/EC2x.c ****  *          写入成功返回1
 177:FML/Src/EC2x.c ****  *         
 178:FML/Src/EC2x.c ****  */
 179:FML/Src/EC2x.c **** int ec2x_write(int fd,uint8_t *tx_buff,uint16_t len){
 258              		.loc 1 179 53 is_stmt 1 view -0
 259              		.cfi_startproc
 260              		@ args = 0, pretend = 0, frame = 0
 261              		@ frame_needed = 0, uses_anonymous_args = 0
 180:FML/Src/EC2x.c ****     int err_code = 0;
 262              		.loc 1 180 5 view .LVU67
 181:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 263              		.loc 1 181 5 view .LVU68
 264              		.loc 1 181 7 is_stmt 0 view .LVU69
 265 0000 10B1     		cbz	r0, .L22
 182:FML/Src/EC2x.c ****         return (err_code = -1);
 266              		.loc 1 182 26 view .LVU70
 267 0002 4FF0FF30 		mov	r0, #-1
 268              	.LVL20:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 9


 183:FML/Src/EC2x.c ****     else{
 184:FML/Src/EC2x.c ****         err_code =  HAL_UART_Transmit_IT(ec2x_dev[fd].huart, tx_buff,len);
 185:FML/Src/EC2x.c ****         while(__HAL_UART_GET_FLAG(ec2x_dev[fd].huart,UART_FLAG_TC) != SET);
 186:FML/Src/EC2x.c ****         return(!err_code);
 187:FML/Src/EC2x.c ****     }
 188:FML/Src/EC2x.c **** };
 269              		.loc 1 188 1 view .LVU71
 270 0006 7047     		bx	lr
 271              	.LVL21:
 272              	.L22:
 179:FML/Src/EC2x.c ****     int err_code = 0;
 273              		.loc 1 179 53 view .LVU72
 274 0008 10B5     		push	{r4, lr}
 275              	.LCFI4:
 276              		.cfi_def_cfa_offset 8
 277              		.cfi_offset 4, -8
 278              		.cfi_offset 14, -4
 279 000a 0446     		mov	r4, r0
 184:FML/Src/EC2x.c ****         while(__HAL_UART_GET_FLAG(ec2x_dev[fd].huart,UART_FLAG_TC) != SET);
 280              		.loc 1 184 9 is_stmt 1 view .LVU73
 184:FML/Src/EC2x.c ****         while(__HAL_UART_GET_FLAG(ec2x_dev[fd].huart,UART_FLAG_TC) != SET);
 281              		.loc 1 184 21 is_stmt 0 view .LVU74
 282 000c C0EB0013 		rsb	r3, r0, r0, lsl #4
 283 0010 0A48     		ldr	r0, .L23
 284              	.LVL22:
 184:FML/Src/EC2x.c ****         while(__HAL_UART_GET_FLAG(ec2x_dev[fd].huart,UART_FLAG_TC) != SET);
 285              		.loc 1 184 21 view .LVU75
 286 0012 00EB8303 		add	r3, r0, r3, lsl #2
 287 0016 1869     		ldr	r0, [r3, #16]
 288 0018 FFF7FEFF 		bl	HAL_UART_Transmit_IT
 289              	.LVL23:
 185:FML/Src/EC2x.c ****         return(!err_code);
 290              		.loc 1 185 9 is_stmt 1 view .LVU76
 291              	.L16:
 185:FML/Src/EC2x.c ****         return(!err_code);
 292              		.loc 1 185 75 discriminator 1 view .LVU77
 185:FML/Src/EC2x.c ****         return(!err_code);
 293              		.loc 1 185 14 discriminator 1 view .LVU78
 185:FML/Src/EC2x.c ****         return(!err_code);
 294              		.loc 1 185 15 is_stmt 0 discriminator 1 view .LVU79
 295 001c C4EB0413 		rsb	r3, r4, r4, lsl #4
 296 0020 064A     		ldr	r2, .L23
 297 0022 02EB8303 		add	r3, r2, r3, lsl #2
 298 0026 1B69     		ldr	r3, [r3, #16]
 299 0028 1B68     		ldr	r3, [r3]
 300 002a DB69     		ldr	r3, [r3, #28]
 185:FML/Src/EC2x.c ****         return(!err_code);
 301              		.loc 1 185 14 discriminator 1 view .LVU80
 302 002c 13F0400F 		tst	r3, #64
 303 0030 F4D0     		beq	.L16
 186:FML/Src/EC2x.c ****     }
 304              		.loc 1 186 9 is_stmt 1 view .LVU81
 186:FML/Src/EC2x.c ****     }
 305              		.loc 1 186 16 is_stmt 0 view .LVU82
 306 0032 B0FA80F0 		clz	r0, r0
 307              	.LVL24:
 186:FML/Src/EC2x.c ****     }
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 10


 308              		.loc 1 186 16 view .LVU83
 309 0036 4009     		lsrs	r0, r0, #5
 310              		.loc 1 188 1 view .LVU84
 311 0038 10BD     		pop	{r4, pc}
 312              	.LVL25:
 313              	.L24:
 314              		.loc 1 188 1 view .LVU85
 315 003a 00BF     		.align	2
 316              	.L23:
 317 003c 00000000 		.word	.LANCHOR0
 318              		.cfi_endproc
 319              	.LFE294:
 321              		.section	.text.ec2x_read,"ax",%progbits
 322              		.align	1
 323              		.global	ec2x_read
 324              		.syntax unified
 325              		.thumb
 326              		.thumb_func
 328              	ec2x_read:
 329              	.LVL26:
 330              	.LFB295:
 189:FML/Src/EC2x.c **** /**
 190:FML/Src/EC2x.c ****  * @brief 设备文件读取函数
 191:FML/Src/EC2x.c ****  *        读取环形缓冲区指定长度数据
 192:FML/Src/EC2x.c ****  * 
 193:FML/Src/EC2x.c ****  * @param fd 
 194:FML/Src/EC2x.c ****  * @param rx_buff 
 195:FML/Src/EC2x.c ****  * @param len 
 196:FML/Src/EC2x.c ****  * @return int 
 197:FML/Src/EC2x.c ****  *         -1 接口错误
 198:FML/Src/EC2x.c ****  *          0 读取失败
 199:FML/Src/EC2x.c ****  *          n 读取成功字节数
 200:FML/Src/EC2x.c ****  */
 201:FML/Src/EC2x.c **** int ec2x_read(int fd,uint8_t *rx_buff,uint16_t len){
 331              		.loc 1 201 52 is_stmt 1 view -0
 332              		.cfi_startproc
 333              		@ args = 0, pretend = 0, frame = 0
 334              		@ frame_needed = 0, uses_anonymous_args = 0
 202:FML/Src/EC2x.c ****     uint8_t *dest = rx_buff;
 335              		.loc 1 202 5 view .LVU87
 203:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 336              		.loc 1 203 5 view .LVU88
 337              		.loc 1 203 7 is_stmt 0 view .LVU89
 338 0000 0028     		cmp	r0, #0
 339 0002 4BD1     		bne	.L32
 201:FML/Src/EC2x.c ****     uint8_t *dest = rx_buff;
 340              		.loc 1 201 52 view .LVU90
 341 0004 38B5     		push	{r3, r4, r5, lr}
 342              	.LCFI5:
 343              		.cfi_def_cfa_offset 16
 344              		.cfi_offset 3, -16
 345              		.cfi_offset 4, -12
 346              		.cfi_offset 5, -8
 347              		.cfi_offset 14, -4
 348 0006 1546     		mov	r5, r2
 349 0008 0446     		mov	r4, r0
 350              	.LBB3:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 11


 204:FML/Src/EC2x.c ****         return -1;
 205:FML/Src/EC2x.c ****     else{
 206:FML/Src/EC2x.c ****         uint16_t j = 0;
 351              		.loc 1 206 9 is_stmt 1 view .LVU91
 352              	.LVL27:
 207:FML/Src/EC2x.c ****         
 208:FML/Src/EC2x.c ****         RingBuffer_TypeDef *src = &ec2x_dev[fd].msg;
 353              		.loc 1 208 9 view .LVU92
 209:FML/Src/EC2x.c ****         //如果队列被上锁了，则等待100ms
 210:FML/Src/EC2x.c ****         if(src->block == 1)
 354              		.loc 1 210 9 view .LVU93
 355              		.loc 1 210 15 is_stmt 0 view .LVU94
 356 000a C0EB0013 		rsb	r3, r0, r0, lsl #4
 357 000e 264A     		ldr	r2, .L39
 358              	.LVL28:
 359              		.loc 1 210 15 view .LVU95
 360 0010 02EB8303 		add	r3, r2, r3, lsl #2
 361 0014 93F82C30 		ldrb	r3, [r3, #44]	@ zero_extendqisi2
 362              		.loc 1 210 11 view .LVU96
 363 0018 73B9     		cbnz	r3, .L38
 211:FML/Src/EC2x.c ****         {
 212:FML/Src/EC2x.c ****             Delay_ms(100);
 213:FML/Src/EC2x.c ****             if(src->block == 1)
 214:FML/Src/EC2x.c ****                 return 0;
 215:FML/Src/EC2x.c ****         }
 216:FML/Src/EC2x.c ****         else{
 217:FML/Src/EC2x.c ****             src->block = 1;
 364              		.loc 1 217 13 is_stmt 1 view .LVU97
 365              		.loc 1 217 24 is_stmt 0 view .LVU98
 366 001a C0EB0013 		rsb	r3, r0, r0, lsl #4
 367 001e 224A     		ldr	r2, .L39
 368 0020 02EB8303 		add	r3, r2, r3, lsl #2
 369 0024 0122     		movs	r2, #1
 370 0026 83F82C20 		strb	r2, [r3, #44]
 218:FML/Src/EC2x.c ****             if(len > src->size)
 371              		.loc 1 218 13 is_stmt 1 view .LVU99
 372              		.loc 1 218 25 is_stmt 0 view .LVU100
 373 002a 188F     		ldrh	r0, [r3, #56]
 374              	.LVL29:
 375              		.loc 1 218 15 view .LVU101
 376 002c A842     		cmp	r0, r5
 377 002e 00D3     		bcc	.L29
 378 0030 2846     		mov	r0, r5
 379              	.L29:
 380              	.LVL30:
 219:FML/Src/EC2x.c ****                 len = src->size;
 220:FML/Src/EC2x.c ****             for(j = 0 ; j < len; j++){
 381              		.loc 1 220 13 is_stmt 1 view .LVU102
 382              		.loc 1 220 19 is_stmt 0 view .LVU103
 383 0032 4FF0000C 		mov	ip, #0
 384              		.loc 1 220 13 view .LVU104
 385 0036 26E0     		b	.L30
 386              	.LVL31:
 387              	.L38:
 212:FML/Src/EC2x.c ****             if(src->block == 1)
 388              		.loc 1 212 13 is_stmt 1 view .LVU105
 389 0038 6420     		movs	r0, #100
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 12


 390              	.LVL32:
 212:FML/Src/EC2x.c ****             if(src->block == 1)
 391              		.loc 1 212 13 is_stmt 0 view .LVU106
 392 003a FFF7FEFF 		bl	Delay_ms
 393              	.LVL33:
 213:FML/Src/EC2x.c ****                 return 0;
 394              		.loc 1 213 13 is_stmt 1 view .LVU107
 213:FML/Src/EC2x.c ****                 return 0;
 395              		.loc 1 213 19 is_stmt 0 view .LVU108
 396 003e C4EB0413 		rsb	r3, r4, r4, lsl #4
 397 0042 194A     		ldr	r2, .L39
 398 0044 02EB8303 		add	r3, r2, r3, lsl #2
 399 0048 93F82C30 		ldrb	r3, [r3, #44]	@ zero_extendqisi2
 213:FML/Src/EC2x.c ****                 return 0;
 400              		.loc 1 213 15 view .LVU109
 401 004c 4BBB     		cbnz	r3, .L33
 402 004e 2846     		mov	r0, r5
 403 0050 23E0     		b	.L25
 404              	.LVL34:
 405              	.L31:
 221:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 406              		.loc 1 221 17 is_stmt 1 discriminator 3 view .LVU110
 407              		.loc 1 221 30 is_stmt 0 discriminator 3 view .LVU111
 408 0052 C4EB0413 		rsb	r3, r4, r4, lsl #4
 409 0056 144A     		ldr	r2, .L39
 410 0058 02EB8303 		add	r3, r2, r3, lsl #2
 411 005c 1D6B     		ldr	r5, [r3, #48]
 412              		.loc 1 221 40 discriminator 3 view .LVU112
 413 005e 9A8E     		ldrh	r2, [r3, #52]
 414              		.loc 1 221 36 discriminator 3 view .LVU113
 415 0060 AA5C     		ldrb	r2, [r5, r2]	@ zero_extendqisi2
 416              		.loc 1 221 25 discriminator 3 view .LVU114
 417 0062 01F80C20 		strb	r2, [r1, ip]
 222:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 418              		.loc 1 222 17 is_stmt 1 discriminator 3 view .LVU115
 419              		.loc 1 222 33 is_stmt 0 discriminator 3 view .LVU116
 420 0066 9A8E     		ldrh	r2, [r3, #52]
 421              		.loc 1 222 40 discriminator 3 view .LVU117
 422 0068 0132     		adds	r2, r2, #1
 423              		.loc 1 222 50 discriminator 3 view .LVU118
 424 006a B3F83AE0 		ldrh	lr, [r3, #58]
 425              		.loc 1 222 45 discriminator 3 view .LVU119
 426 006e 92FBFEF5 		sdiv	r5, r2, lr
 427 0072 0EFB1522 		mls	r2, lr, r5, r2
 428              		.loc 1 222 27 discriminator 3 view .LVU120
 429 0076 9A86     		strh	r2, [r3, #52]	@ movhi
 223:FML/Src/EC2x.c ****                 src->size--;
 430              		.loc 1 223 17 is_stmt 1 discriminator 3 view .LVU121
 431              		.loc 1 223 20 is_stmt 0 discriminator 3 view .LVU122
 432 0078 1A8F     		ldrh	r2, [r3, #56]
 433              		.loc 1 223 26 discriminator 3 view .LVU123
 434 007a 013A     		subs	r2, r2, #1
 435 007c 1A87     		strh	r2, [r3, #56]	@ movhi
 220:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 436              		.loc 1 220 34 is_stmt 1 discriminator 3 view .LVU124
 220:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 437              		.loc 1 220 35 is_stmt 0 discriminator 3 view .LVU125
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 13


 438 007e 0CF1010C 		add	ip, ip, #1
 439              	.LVL35:
 220:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 440              		.loc 1 220 35 discriminator 3 view .LVU126
 441 0082 1FFA8CFC 		uxth	ip, ip
 442              	.LVL36:
 443              	.L30:
 220:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 444              		.loc 1 220 25 is_stmt 1 discriminator 1 view .LVU127
 220:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 445              		.loc 1 220 13 is_stmt 0 discriminator 1 view .LVU128
 446 0086 6045     		cmp	r0, ip
 447 0088 E3D8     		bhi	.L31
 224:FML/Src/EC2x.c ****             }
 225:FML/Src/EC2x.c ****             src->block = 0;
 448              		.loc 1 225 13 is_stmt 1 view .LVU129
 449              		.loc 1 225 24 is_stmt 0 view .LVU130
 450 008a C4EB0414 		rsb	r4, r4, r4, lsl #4
 451              	.LVL37:
 452              		.loc 1 225 24 view .LVU131
 453 008e 064B     		ldr	r3, .L39
 454 0090 03EB8404 		add	r4, r3, r4, lsl #2
 455 0094 0023     		movs	r3, #0
 456 0096 84F82C30 		strb	r3, [r4, #44]
 226:FML/Src/EC2x.c ****         }
 227:FML/Src/EC2x.c ****         return len;
 457              		.loc 1 227 9 is_stmt 1 view .LVU132
 458              	.LVL38:
 459              	.L25:
 460              		.loc 1 227 9 is_stmt 0 view .LVU133
 461              	.LBE3:
 228:FML/Src/EC2x.c ****     }
 229:FML/Src/EC2x.c **** };
 462              		.loc 1 229 1 view .LVU134
 463 009a 38BD     		pop	{r3, r4, r5, pc}
 464              	.LVL39:
 465              	.L32:
 466              	.LCFI6:
 467              		.cfi_def_cfa_offset 0
 468              		.cfi_restore 3
 469              		.cfi_restore 4
 470              		.cfi_restore 5
 471              		.cfi_restore 14
 204:FML/Src/EC2x.c ****     else{
 472              		.loc 1 204 16 view .LVU135
 473 009c 4FF0FF30 		mov	r0, #-1
 474              	.LVL40:
 475              		.loc 1 229 1 view .LVU136
 476 00a0 7047     		bx	lr
 477              	.LVL41:
 478              	.L33:
 479              	.LCFI7:
 480              		.cfi_def_cfa_offset 16
 481              		.cfi_offset 3, -16
 482              		.cfi_offset 4, -12
 483              		.cfi_offset 5, -8
 484              		.cfi_offset 14, -4
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 14


 485              	.LBB4:
 214:FML/Src/EC2x.c ****         }
 486              		.loc 1 214 24 view .LVU137
 487 00a2 2046     		mov	r0, r4
 488 00a4 F9E7     		b	.L25
 489              	.L40:
 490 00a6 00BF     		.align	2
 491              	.L39:
 492 00a8 00000000 		.word	.LANCHOR0
 493              	.LBE4:
 494              		.cfi_endproc
 495              	.LFE295:
 497              		.section	.rodata.ec2x_handler.str1.4,"aMS",%progbits,1
 498              		.align	2
 499              	.LC0:
 500 0000 257300   		.ascii	"%s\000"
 501              		.section	.text.ec2x_handler,"ax",%progbits
 502              		.align	1
 503              		.global	ec2x_handler
 504              		.syntax unified
 505              		.thumb
 506              		.thumb_func
 508              	ec2x_handler:
 509              	.LVL42:
 510              	.LFB296:
 230:FML/Src/EC2x.c **** int ec2x_ioctl(int fd);
 231:FML/Src/EC2x.c **** 
 232:FML/Src/EC2x.c **** /**
 233:FML/Src/EC2x.c ****  * @brief 将串口接收数据copy到环形缓冲区，并更新缓冲区状态
 234:FML/Src/EC2x.c ****  * 
 235:FML/Src/EC2x.c ****  * @param huart 
 236:FML/Src/EC2x.c ****  * @param data 
 237:FML/Src/EC2x.c ****  * @param len 
 238:FML/Src/EC2x.c ****  */
 239:FML/Src/EC2x.c **** void ec2x_handler(UART_HandleTypeDef *huart,uint8_t *data,uint16_t len)
 240:FML/Src/EC2x.c **** {
 511              		.loc 1 240 1 is_stmt 1 view -0
 512              		.cfi_startproc
 513              		@ args = 0, pretend = 0, frame = 0
 514              		@ frame_needed = 0, uses_anonymous_args = 0
 515              		.loc 1 240 1 is_stmt 0 view .LVU139
 516 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 517              	.LCFI8:
 518              		.cfi_def_cfa_offset 24
 519              		.cfi_offset 3, -24
 520              		.cfi_offset 4, -20
 521              		.cfi_offset 5, -16
 522              		.cfi_offset 6, -12
 523              		.cfi_offset 7, -8
 524              		.cfi_offset 14, -4
 525 0002 0546     		mov	r5, r0
 526 0004 0C46     		mov	r4, r1
 527 0006 1646     		mov	r6, r2
 241:FML/Src/EC2x.c ****     uint8_t i = 0,j = 0;
 528              		.loc 1 241 5 is_stmt 1 view .LVU140
 529              	.LVL43:
 242:FML/Src/EC2x.c ****     shellPrint(&shell,"%s",data);
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 15


 530              		.loc 1 242 5 view .LVU141
 531 0008 0A46     		mov	r2, r1
 532              	.LVL44:
 533              		.loc 1 242 5 is_stmt 0 view .LVU142
 534 000a 3549     		ldr	r1, .L51
 535              	.LVL45:
 536              		.loc 1 242 5 view .LVU143
 537 000c 3548     		ldr	r0, .L51+4
 538              	.LVL46:
 539              		.loc 1 242 5 view .LVU144
 540 000e FFF7FEFF 		bl	shellPrint
 541              	.LVL47:
 243:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 542              		.loc 1 243 5 is_stmt 1 view .LVU145
 543              		.loc 1 243 11 is_stmt 0 view .LVU146
 544 0012 0023     		movs	r3, #0
 545              	.LVL48:
 546              	.L42:
 547              		.loc 1 243 15 is_stmt 1 discriminator 1 view .LVU147
 548              		.loc 1 243 5 is_stmt 0 discriminator 1 view .LVU148
 549 0014 03B1     		cbz	r3, .L47
 244:FML/Src/EC2x.c ****     {
 245:FML/Src/EC2x.c ****         if(huart == ec2x_dev[i].huart)
 246:FML/Src/EC2x.c ****         {
 247:FML/Src/EC2x.c ****             RingBuffer_TypeDef *dest = &ec2x_dev[i].msg;
 248:FML/Src/EC2x.c ****             if(dest->block  == 0){
 249:FML/Src/EC2x.c ****                 dest->block = 1;
 250:FML/Src/EC2x.c ****                 for(j = 0 ; j < len; j++){
 251:FML/Src/EC2x.c ****                    
 252:FML/Src/EC2x.c ****                     dest->data[dest->tail] = data[j];
 253:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 254:FML/Src/EC2x.c ****                     dest->size++;
 255:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 256:FML/Src/EC2x.c ****                 }
 257:FML/Src/EC2x.c ****                 if((dest->tail > dest->head)&&(dest->size == dest->capacity))
 258:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 259:FML/Src/EC2x.c ****                 dest->block = 0;
 260:FML/Src/EC2x.c ****             }
 261:FML/Src/EC2x.c ****         }
 262:FML/Src/EC2x.c ****     }
 263:FML/Src/EC2x.c **** }
 550              		.loc 1 263 1 view .LVU149
 551 0016 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 552              	.LVL49:
 553              	.L47:
 245:FML/Src/EC2x.c ****         {
 554              		.loc 1 245 9 is_stmt 1 view .LVU150
 245:FML/Src/EC2x.c ****         {
 555              		.loc 1 245 32 is_stmt 0 view .LVU151
 556 0018 9E46     		mov	lr, r3
 557 001a C3EB0312 		rsb	r2, r3, r3, lsl #4
 558 001e 3249     		ldr	r1, .L51+8
 559 0020 01EB8202 		add	r2, r1, r2, lsl #2
 560 0024 1269     		ldr	r2, [r2, #16]
 245:FML/Src/EC2x.c ****         {
 561              		.loc 1 245 11 view .LVU152
 562 0026 AA42     		cmp	r2, r5
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 16


 563 0028 02D0     		beq	.L49
 564              	.L43:
 243:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 565              		.loc 1 243 64 is_stmt 1 discriminator 2 view .LVU153
 243:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 566              		.loc 1 243 65 is_stmt 0 discriminator 2 view .LVU154
 567 002a 0133     		adds	r3, r3, #1
 568              	.LVL50:
 243:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 569              		.loc 1 243 65 discriminator 2 view .LVU155
 570 002c DBB2     		uxtb	r3, r3
 571              	.LVL51:
 243:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 572              		.loc 1 243 65 discriminator 2 view .LVU156
 573 002e F1E7     		b	.L42
 574              	.L49:
 575              	.LBB5:
 247:FML/Src/EC2x.c ****             if(dest->block  == 0){
 576              		.loc 1 247 13 is_stmt 1 view .LVU157
 577              	.LVL52:
 248:FML/Src/EC2x.c ****                 dest->block = 1;
 578              		.loc 1 248 13 view .LVU158
 248:FML/Src/EC2x.c ****                 dest->block = 1;
 579              		.loc 1 248 20 is_stmt 0 view .LVU159
 580 0030 C3EB0312 		rsb	r2, r3, r3, lsl #4
 581 0034 01EB8202 		add	r2, r1, r2, lsl #2
 582 0038 92F82C20 		ldrb	r2, [r2, #44]	@ zero_extendqisi2
 248:FML/Src/EC2x.c ****                 dest->block = 1;
 583              		.loc 1 248 15 view .LVU160
 584 003c 002A     		cmp	r2, #0
 585 003e F4D1     		bne	.L43
 249:FML/Src/EC2x.c ****                 for(j = 0 ; j < len; j++){
 586              		.loc 1 249 17 is_stmt 1 view .LVU161
 249:FML/Src/EC2x.c ****                 for(j = 0 ; j < len; j++){
 587              		.loc 1 249 29 is_stmt 0 view .LVU162
 588 0040 C3EB0312 		rsb	r2, r3, r3, lsl #4
 589 0044 01EB8202 		add	r2, r1, r2, lsl #2
 590 0048 0121     		movs	r1, #1
 591 004a 82F82C10 		strb	r1, [r2, #44]
 250:FML/Src/EC2x.c ****                    
 592              		.loc 1 250 17 is_stmt 1 view .LVU163
 593              	.LVL53:
 250:FML/Src/EC2x.c ****                    
 594              		.loc 1 250 23 is_stmt 0 view .LVU164
 595 004e 1846     		mov	r0, r3
 250:FML/Src/EC2x.c ****                    
 596              		.loc 1 250 17 view .LVU165
 597 0050 22E0     		b	.L44
 598              	.LVL54:
 599              	.L45:
 252:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 600              		.loc 1 252 21 is_stmt 1 discriminator 3 view .LVU166
 252:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 601              		.loc 1 252 25 is_stmt 0 discriminator 3 view .LVU167
 602 0052 CEEB0E1C 		rsb	ip, lr, lr, lsl #4
 603 0056 244A     		ldr	r2, .L51+8
 604 0058 02EB8C0C 		add	ip, r2, ip, lsl #2
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 17


 605 005c DCF83020 		ldr	r2, [ip, #48]
 252:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 606              		.loc 1 252 36 discriminator 3 view .LVU168
 607 0060 BCF83610 		ldrh	r1, [ip, #54]
 252:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 608              		.loc 1 252 50 discriminator 3 view .LVU169
 609 0064 275C     		ldrb	r7, [r4, r0]	@ zero_extendqisi2
 252:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 610              		.loc 1 252 44 discriminator 3 view .LVU170
 611 0066 5754     		strb	r7, [r2, r1]
 253:FML/Src/EC2x.c ****                     dest->size++;
 612              		.loc 1 253 21 is_stmt 1 discriminator 3 view .LVU171
 253:FML/Src/EC2x.c ****                     dest->size++;
 613              		.loc 1 253 39 is_stmt 0 discriminator 3 view .LVU172
 614 0068 BCF83620 		ldrh	r2, [ip, #54]
 253:FML/Src/EC2x.c ****                     dest->size++;
 615              		.loc 1 253 46 discriminator 3 view .LVU173
 616 006c 0132     		adds	r2, r2, #1
 253:FML/Src/EC2x.c ****                     dest->size++;
 617              		.loc 1 253 56 discriminator 3 view .LVU174
 618 006e BCF83A70 		ldrh	r7, [ip, #58]
 253:FML/Src/EC2x.c ****                     dest->size++;
 619              		.loc 1 253 50 discriminator 3 view .LVU175
 620 0072 92FBF7F1 		sdiv	r1, r2, r7
 621 0076 07FB1122 		mls	r2, r7, r1, r2
 253:FML/Src/EC2x.c ****                     dest->size++;
 622              		.loc 1 253 32 discriminator 3 view .LVU176
 623 007a ACF83620 		strh	r2, [ip, #54]	@ movhi
 254:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 624              		.loc 1 254 21 is_stmt 1 discriminator 3 view .LVU177
 254:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 625              		.loc 1 254 25 is_stmt 0 discriminator 3 view .LVU178
 626 007e BCF83810 		ldrh	r1, [ip, #56]
 254:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 627              		.loc 1 254 31 discriminator 3 view .LVU179
 628 0082 0131     		adds	r1, r1, #1
 629 0084 89B2     		uxth	r1, r1
 630 0086 ACF83810 		strh	r1, [ip, #56]	@ movhi
 255:FML/Src/EC2x.c ****                 }
 631              		.loc 1 255 21 is_stmt 1 discriminator 3 view .LVU180
 255:FML/Src/EC2x.c ****                 }
 632              		.loc 1 255 79 is_stmt 0 discriminator 3 view .LVU181
 633 008a B942     		cmp	r1, r7
 634 008c 28BF     		it	cs
 635 008e 3946     		movcs	r1, r7
 255:FML/Src/EC2x.c ****                 }
 636              		.loc 1 255 32 discriminator 3 view .LVU182
 637 0090 ACF83810 		strh	r1, [ip, #56]	@ movhi
 250:FML/Src/EC2x.c ****                    
 638              		.loc 1 250 38 is_stmt 1 discriminator 3 view .LVU183
 250:FML/Src/EC2x.c ****                    
 639              		.loc 1 250 39 is_stmt 0 discriminator 3 view .LVU184
 640 0094 0130     		adds	r0, r0, #1
 641              	.LVL55:
 250:FML/Src/EC2x.c ****                    
 642              		.loc 1 250 39 discriminator 3 view .LVU185
 643 0096 C0B2     		uxtb	r0, r0
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 18


 644              	.LVL56:
 645              	.L44:
 250:FML/Src/EC2x.c ****                    
 646              		.loc 1 250 29 is_stmt 1 discriminator 1 view .LVU186
 250:FML/Src/EC2x.c ****                    
 647              		.loc 1 250 31 is_stmt 0 discriminator 1 view .LVU187
 648 0098 82B2     		uxth	r2, r0
 250:FML/Src/EC2x.c ****                    
 649              		.loc 1 250 17 discriminator 1 view .LVU188
 650 009a B242     		cmp	r2, r6
 651 009c D9D3     		bcc	.L45
 257:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 652              		.loc 1 257 17 is_stmt 1 view .LVU189
 257:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 653              		.loc 1 257 25 is_stmt 0 view .LVU190
 654 009e CEEB0E12 		rsb	r2, lr, lr, lsl #4
 655 00a2 1149     		ldr	r1, .L51+8
 656 00a4 01EB8202 		add	r2, r1, r2, lsl #2
 657 00a8 D08E     		ldrh	r0, [r2, #54]
 658              	.LVL57:
 257:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 659              		.loc 1 257 38 view .LVU191
 660 00aa 928E     		ldrh	r2, [r2, #52]
 257:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 661              		.loc 1 257 19 view .LVU192
 662 00ac 9042     		cmp	r0, r2
 663 00ae 07D9     		bls	.L46
 257:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 664              		.loc 1 257 52 discriminator 1 view .LVU193
 665 00b0 CEEB0E12 		rsb	r2, lr, lr, lsl #4
 666 00b4 01EB8202 		add	r2, r1, r2, lsl #2
 667 00b8 118F     		ldrh	r1, [r2, #56]
 257:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 668              		.loc 1 257 66 discriminator 1 view .LVU194
 669 00ba 528F     		ldrh	r2, [r2, #58]
 257:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 670              		.loc 1 257 45 discriminator 1 view .LVU195
 671 00bc 9142     		cmp	r1, r2
 672 00be 08D0     		beq	.L50
 673              	.L46:
 259:FML/Src/EC2x.c ****             }
 674              		.loc 1 259 17 is_stmt 1 view .LVU196
 259:FML/Src/EC2x.c ****             }
 675              		.loc 1 259 29 is_stmt 0 view .LVU197
 676 00c0 CEEB0E1E 		rsb	lr, lr, lr, lsl #4
 677 00c4 084A     		ldr	r2, .L51+8
 678 00c6 02EB8E0E 		add	lr, r2, lr, lsl #2
 679 00ca 0022     		movs	r2, #0
 680 00cc 8EF82C20 		strb	r2, [lr, #44]
 681 00d0 ABE7     		b	.L43
 682              	.L50:
 258:FML/Src/EC2x.c ****                 dest->block = 0;
 683              		.loc 1 258 21 is_stmt 1 view .LVU198
 258:FML/Src/EC2x.c ****                 dest->block = 0;
 684              		.loc 1 258 32 is_stmt 0 view .LVU199
 685 00d2 CEEB0E12 		rsb	r2, lr, lr, lsl #4
 686 00d6 0449     		ldr	r1, .L51+8
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 19


 687 00d8 01EB8202 		add	r2, r1, r2, lsl #2
 688 00dc 9086     		strh	r0, [r2, #52]	@ movhi
 689 00de EFE7     		b	.L46
 690              	.L52:
 691              		.align	2
 692              	.L51:
 693 00e0 00000000 		.word	.LC0
 694 00e4 00000000 		.word	shell
 695 00e8 00000000 		.word	.LANCHOR0
 696              	.LBE5:
 697              		.cfi_endproc
 698              	.LFE296:
 700              		.section	.text.ec2x_replymatch,"ax",%progbits
 701              		.align	1
 702              		.global	ec2x_replymatch
 703              		.syntax unified
 704              		.thumb
 705              		.thumb_func
 707              	ec2x_replymatch:
 708              	.LVL58:
 709              	.LFB297:
 264:FML/Src/EC2x.c **** 
 265:FML/Src/EC2x.c **** 
 266:FML/Src/EC2x.c **** /**
 267:FML/Src/EC2x.c ****  * @brief 回复匹配函数
 268:FML/Src/EC2x.c ****  *        1）匹配成功，则插入回复成功事件
 269:FML/Src/EC2x.c ****  *        2.1）匹配失败，超时次数-1
 270:FML/Src/EC2x.c ****  *        2.2）匹配失败，超时次数=0，插入超时事件消息
 271:FML/Src/EC2x.c ****  * 
 272:FML/Src/EC2x.c ****  * @param expect 
 273:FML/Src/EC2x.c ****  * @return int 
 274:FML/Src/EC2x.c ****  */
 275:FML/Src/EC2x.c **** int ec2x_replymatch(uint8_t* expect){
 710              		.loc 1 275 37 is_stmt 1 view -0
 711              		.cfi_startproc
 712              		@ args = 0, pretend = 0, frame = 200
 713              		@ frame_needed = 0, uses_anonymous_args = 0
 714              		.loc 1 275 37 is_stmt 0 view .LVU201
 715 0000 30B5     		push	{r4, r5, lr}
 716              	.LCFI9:
 717              		.cfi_def_cfa_offset 12
 718              		.cfi_offset 4, -12
 719              		.cfi_offset 5, -8
 720              		.cfi_offset 14, -4
 721 0002 B3B0     		sub	sp, sp, #204
 722              	.LCFI10:
 723              		.cfi_def_cfa_offset 216
 724 0004 0546     		mov	r5, r0
 276:FML/Src/EC2x.c ****     uint8_t rx_buff[200]  = {0x00};
 725              		.loc 1 276 5 is_stmt 1 view .LVU202
 726              		.loc 1 276 13 is_stmt 0 view .LVU203
 727 0006 0024     		movs	r4, #0
 728 0008 0094     		str	r4, [sp]
 729 000a C422     		movs	r2, #196
 730 000c 2146     		mov	r1, r4
 731 000e 01A8     		add	r0, sp, #4
 732              	.LVL59:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 20


 733              		.loc 1 276 13 view .LVU204
 734 0010 FFF7FEFF 		bl	memset
 735              	.LVL60:
 277:FML/Src/EC2x.c ****     int bytes_num = 0;
 736              		.loc 1 277 5 is_stmt 1 view .LVU205
 278:FML/Src/EC2x.c ****     bytes_num =  ec2x_read(0,rx_buff,200);
 737              		.loc 1 278 5 view .LVU206
 738              		.loc 1 278 18 is_stmt 0 view .LVU207
 739 0014 C822     		movs	r2, #200
 740 0016 6946     		mov	r1, sp
 741 0018 2046     		mov	r0, r4
 742 001a FFF7FEFF 		bl	ec2x_read
 743              	.LVL61:
 279:FML/Src/EC2x.c ****     if(bytes_num > 0)
 744              		.loc 1 279 5 is_stmt 1 view .LVU208
 745              		.loc 1 279 7 is_stmt 0 view .LVU209
 746 001e A042     		cmp	r0, r4
 747 0020 08DD     		ble	.L55
 280:FML/Src/EC2x.c ****     {
 281:FML/Src/EC2x.c ****         if(strstr((const char*)rx_buff,(const char*)expect) != NULL){
 748              		.loc 1 281 9 is_stmt 1 view .LVU210
 749              		.loc 1 281 12 is_stmt 0 view .LVU211
 750 0022 2946     		mov	r1, r5
 751 0024 6846     		mov	r0, sp
 752              	.LVL62:
 753              		.loc 1 281 12 view .LVU212
 754 0026 FFF7FEFF 		bl	strstr
 755              	.LVL63:
 756              		.loc 1 281 11 view .LVU213
 757 002a 08B1     		cbz	r0, .L58
 282:FML/Src/EC2x.c ****             return 1;
 758              		.loc 1 282 20 view .LVU214
 759 002c 0120     		movs	r0, #1
 760 002e 02E0     		b	.L53
 761              	.L58:
 283:FML/Src/EC2x.c ****         }
 284:FML/Src/EC2x.c ****     }
 285:FML/Src/EC2x.c ****     return 0;
 762              		.loc 1 285 12 view .LVU215
 763 0030 2046     		mov	r0, r4
 764 0032 00E0     		b	.L53
 765              	.LVL64:
 766              	.L55:
 767              		.loc 1 285 12 view .LVU216
 768 0034 0020     		movs	r0, #0
 769              	.LVL65:
 770              	.L53:
 286:FML/Src/EC2x.c **** }
 771              		.loc 1 286 1 view .LVU217
 772 0036 33B0     		add	sp, sp, #204
 773              	.LCFI11:
 774              		.cfi_def_cfa_offset 12
 775              		@ sp needed
 776 0038 30BD     		pop	{r4, r5, pc}
 777              		.loc 1 286 1 view .LVU218
 778              		.cfi_endproc
 779              	.LFE297:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 21


 781              		.section	.text.ec2x_cmd_send,"ax",%progbits
 782              		.align	1
 783              		.syntax unified
 784              		.thumb
 785              		.thumb_func
 787              	ec2x_cmd_send:
 788              	.LVL66:
 789              	.LFB298:
 287:FML/Src/EC2x.c **** 
 288:FML/Src/EC2x.c **** 
 289:FML/Src/EC2x.c **** /**
 290:FML/Src/EC2x.c ****  * @brief ec2x指令发送函数
 291:FML/Src/EC2x.c ****  *        1）发送指令
 292:FML/Src/EC2x.c ****  *        2）进入等待回复状态
 293:FML/Src/EC2x.c ****  * @param fd 
 294:FML/Src/EC2x.c ****  * @param tx_buff 
 295:FML/Src/EC2x.c ****  * @param len 
 296:FML/Src/EC2x.c ****  * @param expect_reply 
 297:FML/Src/EC2x.c ****  * @param timeout 
 298:FML/Src/EC2x.c ****  */
 299:FML/Src/EC2x.c **** int ec2x_cmd_send(int fd,uint8_t *tx_buff,uint16_t len,uint8_t *expect_reply,uint16_t timeout)
 300:FML/Src/EC2x.c **** {
 790              		.loc 1 300 1 is_stmt 1 view -0
 791              		.cfi_startproc
 792              		@ args = 4, pretend = 0, frame = 0
 793              		@ frame_needed = 0, uses_anonymous_args = 0
 794              		.loc 1 300 1 is_stmt 0 view .LVU220
 795 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 796              	.LCFI12:
 797              		.cfi_def_cfa_offset 32
 798              		.cfi_offset 3, -32
 799              		.cfi_offset 4, -28
 800              		.cfi_offset 5, -24
 801              		.cfi_offset 6, -20
 802              		.cfi_offset 7, -16
 803              		.cfi_offset 8, -12
 804              		.cfi_offset 9, -8
 805              		.cfi_offset 14, -4
 806 0004 1D46     		mov	r5, r3
 301:FML/Src/EC2x.c ****     if(tx_buff !=NULL){
 807              		.loc 1 301 5 is_stmt 1 view .LVU221
 808              		.loc 1 301 7 is_stmt 0 view .LVU222
 809 0006 D9B1     		cbz	r1, .L60
 810 0008 0646     		mov	r6, r0
 811 000a 9046     		mov	r8, r2
 812 000c 8946     		mov	r9, r1
 302:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.block = 1;
 813              		.loc 1 302 9 is_stmt 1 view .LVU223
 814              		.loc 1 302 32 is_stmt 0 view .LVU224
 815 000e C0EB0013 		rsb	r3, r0, r0, lsl #4
 816              	.LVL67:
 817              		.loc 1 302 32 view .LVU225
 818 0012 184C     		ldr	r4, .L67
 819 0014 04EB8304 		add	r4, r4, r3, lsl #2
 820 0018 0123     		movs	r3, #1
 821 001a 84F82C30 		strb	r3, [r4, #44]
 303:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.head = 0;
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 22


 822              		.loc 1 303 9 is_stmt 1 view .LVU226
 823              		.loc 1 303 31 is_stmt 0 view .LVU227
 824 001e 0027     		movs	r7, #0
 825 0020 A786     		strh	r7, [r4, #52]	@ movhi
 304:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.tail = 0;
 826              		.loc 1 304 9 is_stmt 1 view .LVU228
 827              		.loc 1 304 31 is_stmt 0 view .LVU229
 828 0022 E786     		strh	r7, [r4, #54]	@ movhi
 305:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.size = 0;
 829              		.loc 1 305 9 is_stmt 1 view .LVU230
 830              		.loc 1 305 31 is_stmt 0 view .LVU231
 831 0024 2787     		strh	r7, [r4, #56]	@ movhi
 306:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.capacity = BUFF_LEN;
 832              		.loc 1 306 9 is_stmt 1 view .LVU232
 833              		.loc 1 306 35 is_stmt 0 view .LVU233
 834 0026 C822     		movs	r2, #200
 835              	.LVL68:
 836              		.loc 1 306 35 view .LVU234
 837 0028 6287     		strh	r2, [r4, #58]	@ movhi
 307:FML/Src/EC2x.c ****         memset(ec2x_dev[fd].msg.data,0x00,BUFF_LEN);
 838              		.loc 1 307 9 is_stmt 1 view .LVU235
 839 002a 3946     		mov	r1, r7
 840              	.LVL69:
 841              		.loc 1 307 9 is_stmt 0 view .LVU236
 842 002c 206B     		ldr	r0, [r4, #48]
 843              	.LVL70:
 844              		.loc 1 307 9 view .LVU237
 845 002e FFF7FEFF 		bl	memset
 846              	.LVL71:
 308:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.block = 0;
 847              		.loc 1 308 9 is_stmt 1 view .LVU238
 848              		.loc 1 308 32 is_stmt 0 view .LVU239
 849 0032 84F82C70 		strb	r7, [r4, #44]
 309:FML/Src/EC2x.c ****         ec2x_write(fd,tx_buff,len);
 850              		.loc 1 309 9 is_stmt 1 view .LVU240
 851 0036 4246     		mov	r2, r8
 852 0038 4946     		mov	r1, r9
 853 003a 3046     		mov	r0, r6
 854 003c FFF7FEFF 		bl	ec2x_write
 855              	.LVL72:
 856              	.L60:
 310:FML/Src/EC2x.c ****     }
 311:FML/Src/EC2x.c ****     if(expect_reply != NULL){
 857              		.loc 1 311 5 view .LVU241
 858              		.loc 1 311 7 is_stmt 0 view .LVU242
 859 0040 ADB1     		cbz	r5, .L64
 860              	.LBB6:
 312:FML/Src/EC2x.c ****         uint16_t retry_times = timeout / 100;
 861              		.loc 1 312 9 is_stmt 1 view .LVU243
 862              		.loc 1 312 18 is_stmt 0 view .LVU244
 863 0042 BDF82040 		ldrh	r4, [sp, #32]
 864 0046 0C4B     		ldr	r3, .L67+4
 865 0048 A3FB0434 		umull	r3, r4, r3, r4
 866 004c 6409     		lsrs	r4, r4, #5
 867              	.LVL73:
 313:FML/Src/EC2x.c ****         while(retry_times--){
 868              		.loc 1 313 9 is_stmt 1 view .LVU245
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 23


 869              	.L62:
 870              		.loc 1 313 14 view .LVU246
 871 004e 2246     		mov	r2, r4
 872              		.loc 1 313 26 is_stmt 0 view .LVU247
 873 0050 013C     		subs	r4, r4, #1
 874              	.LVL74:
 875              		.loc 1 313 26 view .LVU248
 876 0052 A4B2     		uxth	r4, r4
 877              	.LVL75:
 878              		.loc 1 313 14 view .LVU249
 879 0054 42B1     		cbz	r2, .L66
 314:FML/Src/EC2x.c ****             Delay_ms(100);
 880              		.loc 1 314 13 is_stmt 1 view .LVU250
 881 0056 6420     		movs	r0, #100
 882 0058 FFF7FEFF 		bl	Delay_ms
 883              	.LVL76:
 315:FML/Src/EC2x.c ****             if(ec2x_replymatch(expect_reply) == 1)
 884              		.loc 1 315 13 view .LVU251
 885              		.loc 1 315 16 is_stmt 0 view .LVU252
 886 005c 2846     		mov	r0, r5
 887 005e FFF7FEFF 		bl	ec2x_replymatch
 888              	.LVL77:
 889              		.loc 1 315 15 view .LVU253
 890 0062 0128     		cmp	r0, #1
 891 0064 F3D1     		bne	.L62
 892 0066 00E0     		b	.L59
 893              	.L66:
 894              		.loc 1 315 15 view .LVU254
 895              	.LBE6:
 316:FML/Src/EC2x.c ****                 return  1;
 317:FML/Src/EC2x.c ****         }
 318:FML/Src/EC2x.c ****     }
 319:FML/Src/EC2x.c ****     return 0;
 896              		.loc 1 319 12 view .LVU255
 897 0068 0020     		movs	r0, #0
 898              	.LVL78:
 899              	.L59:
 320:FML/Src/EC2x.c **** }
 900              		.loc 1 320 1 view .LVU256
 901 006a BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 902              	.LVL79:
 903              	.L64:
 319:FML/Src/EC2x.c **** }
 904              		.loc 1 319 12 view .LVU257
 905 006e 0020     		movs	r0, #0
 906 0070 FBE7     		b	.L59
 907              	.L68:
 908 0072 00BF     		.align	2
 909              	.L67:
 910 0074 00000000 		.word	.LANCHOR0
 911 0078 1F85EB51 		.word	1374389535
 912              		.cfi_endproc
 913              	.LFE298:
 915              		.section	.rodata.ec2x_reset.str1.4,"aMS",%progbits,1
 916              		.align	2
 917              	.LC1:
 918 0000 5244592F 		.ascii	"RDY/r/n\000"
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 24


 918      722F6E00 
 919              		.section	.text.ec2x_reset,"ax",%progbits
 920              		.align	1
 921              		.syntax unified
 922              		.thumb
 923              		.thumb_func
 925              	ec2x_reset:
 926              	.LVL80:
 927              	.LFB292:
 124:FML/Src/EC2x.c ****     fd = 0;
 928              		.loc 1 124 23 is_stmt 1 view -0
 929              		.cfi_startproc
 930              		@ args = 0, pretend = 0, frame = 0
 931              		@ frame_needed = 0, uses_anonymous_args = 0
 124:FML/Src/EC2x.c ****     fd = 0;
 932              		.loc 1 124 23 is_stmt 0 view .LVU259
 933 0000 10B5     		push	{r4, lr}
 934              	.LCFI13:
 935              		.cfi_def_cfa_offset 8
 936              		.cfi_offset 4, -8
 937              		.cfi_offset 14, -4
 938 0002 82B0     		sub	sp, sp, #8
 939              	.LCFI14:
 940              		.cfi_def_cfa_offset 16
 125:FML/Src/EC2x.c ****     int err_code = 0;
 941              		.loc 1 125 5 is_stmt 1 view .LVU260
 942              	.LVL81:
 126:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 943              		.loc 1 126 5 view .LVU261
 127:FML/Src/EC2x.c ****         return (err_code = -1);
 944              		.loc 1 127 5 view .LVU262
 945              	.LBB7:
 130:FML/Src/EC2x.c ****         HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_SET);
 946              		.loc 1 130 9 view .LVU263
 131:FML/Src/EC2x.c ****         Delay_ms(500);
 947              		.loc 1 131 9 view .LVU264
 948 0004 0C4C     		ldr	r4, .L71
 949 0006 0122     		movs	r2, #1
 950 0008 218B     		ldrh	r1, [r4, #24]
 951 000a 6069     		ldr	r0, [r4, #20]
 952 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 953              	.LVL82:
 132:FML/Src/EC2x.c ****         HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_RESET);
 954              		.loc 1 132 9 view .LVU265
 955 0010 4FF4FA70 		mov	r0, #500
 956 0014 FFF7FEFF 		bl	Delay_ms
 957              	.LVL83:
 133:FML/Src/EC2x.c ****     }
 958              		.loc 1 133 9 view .LVU266
 959 0018 0022     		movs	r2, #0
 960 001a 218B     		ldrh	r1, [r4, #24]
 961 001c 6069     		ldr	r0, [r4, #20]
 962 001e FFF7FEFF 		bl	HAL_GPIO_WritePin
 963              	.LVL84:
 964              	.LBE7:
 135:FML/Src/EC2x.c **** }
 965              		.loc 1 135 5 view .LVU267
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 25


 135:FML/Src/EC2x.c **** }
 966              		.loc 1 135 12 is_stmt 0 view .LVU268
 967 0022 42F21073 		movw	r3, #10000
 968 0026 0093     		str	r3, [sp]
 969 0028 044B     		ldr	r3, .L71+4
 970 002a 0022     		movs	r2, #0
 971 002c 1146     		mov	r1, r2
 972 002e 1046     		mov	r0, r2
 973 0030 FFF7FEFF 		bl	ec2x_cmd_send
 974              	.LVL85:
 136:FML/Src/EC2x.c **** 
 975              		.loc 1 136 1 view .LVU269
 976 0034 02B0     		add	sp, sp, #8
 977              	.LCFI15:
 978              		.cfi_def_cfa_offset 8
 979              		@ sp needed
 980 0036 10BD     		pop	{r4, pc}
 981              	.L72:
 982              		.align	2
 983              	.L71:
 984 0038 00000000 		.word	.LANCHOR0
 985 003c 00000000 		.word	.LC1
 986              		.cfi_endproc
 987              	.LFE292:
 989              		.section	.rodata.ec2x_tcp_connect.str1.4,"aMS",%progbits,1
 990              		.align	2
 991              	.LC2:
 992 0000 25732065 		.ascii	"%s err\015\012\000"
 992      72720D0A 
 992      00
 993 0009 000000   		.align	2
 994              	.LC3:
 995 000c 74637020 		.ascii	"tcp is connected\015\012\000"
 995      69732063 
 995      6F6E6E65 
 995      63746564 
 995      0D0A00
 996              		.section	.text.ec2x_tcp_connect,"ax",%progbits
 997              		.align	1
 998              		.global	ec2x_tcp_connect
 999              		.syntax unified
 1000              		.thumb
 1001              		.thumb_func
 1003              	ec2x_tcp_connect:
 1004              	.LVL86:
 1005              	.LFB299:
 321:FML/Src/EC2x.c **** 
 322:FML/Src/EC2x.c **** /**
 323:FML/Src/EC2x.c ****  * @brief tcp 连接流程
 324:FML/Src/EC2x.c ****  * 
 325:FML/Src/EC2x.c ****  * @param fd 
 326:FML/Src/EC2x.c ****  * @return uint8_t 
 327:FML/Src/EC2x.c ****  */
 328:FML/Src/EC2x.c **** uint8_t ec2x_tcp_connect(int fd){
 1006              		.loc 1 328 33 is_stmt 1 view -0
 1007              		.cfi_startproc
 1008              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 26


 1009              		@ frame_needed = 0, uses_anonymous_args = 0
 1010              		.loc 1 328 33 is_stmt 0 view .LVU271
 1011 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1012              	.LCFI16:
 1013              		.cfi_def_cfa_offset 24
 1014              		.cfi_offset 4, -24
 1015              		.cfi_offset 5, -20
 1016              		.cfi_offset 6, -16
 1017              		.cfi_offset 7, -12
 1018              		.cfi_offset 8, -8
 1019              		.cfi_offset 14, -4
 1020 0004 82B0     		sub	sp, sp, #8
 1021              	.LCFI17:
 1022              		.cfi_def_cfa_offset 32
 1023 0006 0546     		mov	r5, r0
 329:FML/Src/EC2x.c ****     static uint8_t step = 0,retry =0;
 1024              		.loc 1 329 5 is_stmt 1 view .LVU272
 330:FML/Src/EC2x.c ****     while(step < 9){
 1025              		.loc 1 330 5 view .LVU273
 1026              	.LVL87:
 1027              	.L75:
 1028              		.loc 1 330 10 view .LVU274
 1029              		.loc 1 330 16 is_stmt 0 view .LVU275
 1030 0008 A14B     		ldr	r3, .L113
 1031 000a 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 1032              		.loc 1 330 10 view .LVU276
 1033 000c 082C     		cmp	r4, #8
 1034 000e 00F20582 		bhi	.L73
 331:FML/Src/EC2x.c ****         switch (step)
 1035              		.loc 1 331 9 is_stmt 1 view .LVU277
 1036 0012 082C     		cmp	r4, #8
 1037 0014 F8D8     		bhi	.L75
 1038 0016 DFE814F0 		tbh	[pc, r4, lsl #1]
 1039              	.L77:
 1040 001a 0900     		.2byte	(.L85-.L77)/2
 1041 001c 4600     		.2byte	(.L84-.L77)/2
 1042 001e 8300     		.2byte	(.L83-.L77)/2
 1043 0020 C000     		.2byte	(.L82-.L77)/2
 1044 0022 FD00     		.2byte	(.L81-.L77)/2
 1045 0024 4501     		.2byte	(.L80-.L77)/2
 1046 0026 8201     		.2byte	(.L79-.L77)/2
 1047 0028 BF01     		.2byte	(.L78-.L77)/2
 1048 002a FC01     		.2byte	(.L76-.L77)/2
 1049              		.p2align 1
 1050              	.L85:
 332:FML/Src/EC2x.c ****         {
 333:FML/Src/EC2x.c ****             case 0: 
 334:FML/Src/EC2x.c ****             {
 335:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1051              		.loc 1 335 17 view .LVU278
 1052              		.loc 1 335 20 is_stmt 0 view .LVU279
 1053 002c 994F     		ldr	r7, .L113+4
 1054 002e 6600     		lsls	r6, r4, #1
 1055 0030 04EB4403 		add	r3, r4, r4, lsl #1
 1056 0034 57F82380 		ldr	r8, [r7, r3, lsl #2]
 1057              		.loc 1 335 66 view .LVU280
 1058 0038 4046     		mov	r0, r8
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 27


 1059 003a FFF7FEFF 		bl	strlen
 1060              	.LVL88:
 1061              		.loc 1 335 20 view .LVU281
 1062 003e 3444     		add	r4, r4, r6
 1063 0040 07EB8404 		add	r4, r7, r4, lsl #2
 1064 0044 3B89     		ldrh	r3, [r7, #8]
 1065 0046 0093     		str	r3, [sp]
 1066 0048 6368     		ldr	r3, [r4, #4]
 1067 004a 82B2     		uxth	r2, r0
 1068 004c 4146     		mov	r1, r8
 1069 004e 2846     		mov	r0, r5
 1070 0050 FFF7FEFF 		bl	ec2x_cmd_send
 1071              	.LVL89:
 1072              		.loc 1 335 19 view .LVU282
 1073 0054 38B1     		cbz	r0, .L86
 336:FML/Src/EC2x.c ****                 {    
 337:FML/Src/EC2x.c ****                     step++;
 1074              		.loc 1 337 21 is_stmt 1 view .LVU283
 1075              		.loc 1 337 25 is_stmt 0 view .LVU284
 1076 0056 8E4A     		ldr	r2, .L113
 1077 0058 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1078 005a 0133     		adds	r3, r3, #1
 1079 005c 1370     		strb	r3, [r2]
 338:FML/Src/EC2x.c ****                     retry = 0;
 1080              		.loc 1 338 21 is_stmt 1 view .LVU285
 1081              		.loc 1 338 27 is_stmt 0 view .LVU286
 1082 005e 8E4B     		ldr	r3, .L113+8
 1083 0060 0022     		movs	r2, #0
 1084 0062 1A70     		strb	r2, [r3]
 1085 0064 D0E7     		b	.L75
 1086              	.L86:
 339:FML/Src/EC2x.c ****                 }
 340:FML/Src/EC2x.c ****                 else
 341:FML/Src/EC2x.c ****                 {
 342:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry)
 1087              		.loc 1 342 21 is_stmt 1 view .LVU287
 1088              		.loc 1 342 46 is_stmt 0 view .LVU288
 1089 0066 8A4B     		ldr	r3, .L113
 1090 0068 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1091 006a 03EB4301 		add	r1, r3, r3, lsl #1
 1092 006e 894A     		ldr	r2, .L113+4
 1093 0070 02EB8102 		add	r2, r2, r1, lsl #2
 1094 0074 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 1095              		.loc 1 342 59 view .LVU289
 1096 0076 884A     		ldr	r2, .L113+8
 1097 0078 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1098              		.loc 1 342 23 view .LVU290
 1099 007a 9142     		cmp	r1, r2
 1100 007c 03D3     		bcc	.L105
 343:FML/Src/EC2x.c ****                     {
 344:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 345:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 346:FML/Src/EC2x.c ****                         step = 0;
 347:FML/Src/EC2x.c ****                     }
 348:FML/Src/EC2x.c ****                     else
 349:FML/Src/EC2x.c ****                         retry++;
 1101              		.loc 1 349 25 is_stmt 1 view .LVU291
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 28


 1102              		.loc 1 349 30 is_stmt 0 view .LVU292
 1103 007e 0132     		adds	r2, r2, #1
 1104 0080 854B     		ldr	r3, .L113+8
 1105 0082 1A70     		strb	r2, [r3]
 1106 0084 C0E7     		b	.L75
 1107              	.L105:
 344:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 1108              		.loc 1 344 25 is_stmt 1 view .LVU293
 1109 0086 03EB4303 		add	r3, r3, r3, lsl #1
 1110 008a 824A     		ldr	r2, .L113+4
 1111 008c 52F82320 		ldr	r2, [r2, r3, lsl #2]
 1112 0090 8249     		ldr	r1, .L113+12
 1113 0092 8348     		ldr	r0, .L113+16
 1114 0094 FFF7FEFF 		bl	shellPrint
 1115              	.LVL90:
 345:FML/Src/EC2x.c ****                         step = 0;
 1116              		.loc 1 345 25 view .LVU294
 1117 0098 2846     		mov	r0, r5
 1118 009a FFF7FEFF 		bl	ec2x_reset
 1119              	.LVL91:
 346:FML/Src/EC2x.c ****                     }
 1120              		.loc 1 346 25 view .LVU295
 346:FML/Src/EC2x.c ****                     }
 1121              		.loc 1 346 30 is_stmt 0 view .LVU296
 1122 009e 7C4B     		ldr	r3, .L113
 1123 00a0 0022     		movs	r2, #0
 1124 00a2 1A70     		strb	r2, [r3]
 1125 00a4 B0E7     		b	.L75
 1126              	.L84:
 350:FML/Src/EC2x.c ****                 }
 351:FML/Src/EC2x.c ****             }
 352:FML/Src/EC2x.c ****             break;
 353:FML/Src/EC2x.c ****             case 1:
 354:FML/Src/EC2x.c ****             {
 355:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1127              		.loc 1 355 17 is_stmt 1 view .LVU297
 1128              		.loc 1 355 20 is_stmt 0 view .LVU298
 1129 00a6 7B4F     		ldr	r7, .L113+4
 1130 00a8 6600     		lsls	r6, r4, #1
 1131 00aa 04EB4403 		add	r3, r4, r4, lsl #1
 1132 00ae 57F82380 		ldr	r8, [r7, r3, lsl #2]
 1133              		.loc 1 355 66 view .LVU299
 1134 00b2 4046     		mov	r0, r8
 1135 00b4 FFF7FEFF 		bl	strlen
 1136              	.LVL92:
 1137              		.loc 1 355 20 view .LVU300
 1138 00b8 3444     		add	r4, r4, r6
 1139 00ba 07EB8404 		add	r4, r7, r4, lsl #2
 1140 00be 3B89     		ldrh	r3, [r7, #8]
 1141 00c0 0093     		str	r3, [sp]
 1142 00c2 6368     		ldr	r3, [r4, #4]
 1143 00c4 82B2     		uxth	r2, r0
 1144 00c6 4146     		mov	r1, r8
 1145 00c8 2846     		mov	r0, r5
 1146 00ca FFF7FEFF 		bl	ec2x_cmd_send
 1147              	.LVL93:
 1148              		.loc 1 355 19 view .LVU301
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 29


 1149 00ce 38B1     		cbz	r0, .L89
 356:FML/Src/EC2x.c ****                 {    
 357:FML/Src/EC2x.c ****                     step++;
 1150              		.loc 1 357 21 is_stmt 1 view .LVU302
 1151              		.loc 1 357 25 is_stmt 0 view .LVU303
 1152 00d0 6F4A     		ldr	r2, .L113
 1153 00d2 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1154 00d4 0133     		adds	r3, r3, #1
 1155 00d6 1370     		strb	r3, [r2]
 358:FML/Src/EC2x.c ****                     retry = 0;
 1156              		.loc 1 358 21 is_stmt 1 view .LVU304
 1157              		.loc 1 358 27 is_stmt 0 view .LVU305
 1158 00d8 6F4B     		ldr	r3, .L113+8
 1159 00da 0022     		movs	r2, #0
 1160 00dc 1A70     		strb	r2, [r3]
 1161 00de 93E7     		b	.L75
 1162              	.L89:
 359:FML/Src/EC2x.c ****                 }
 360:FML/Src/EC2x.c ****                 else
 361:FML/Src/EC2x.c ****                 {
 362:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 1163              		.loc 1 362 21 is_stmt 1 view .LVU306
 1164              		.loc 1 362 46 is_stmt 0 view .LVU307
 1165 00e0 6B4B     		ldr	r3, .L113
 1166 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1167 00e4 03EB4301 		add	r1, r3, r3, lsl #1
 1168 00e8 6A4A     		ldr	r2, .L113+4
 1169 00ea 02EB8102 		add	r2, r2, r1, lsl #2
 1170 00ee 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 1171              		.loc 1 362 59 view .LVU308
 1172 00f0 694A     		ldr	r2, .L113+8
 1173 00f2 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1174              		.loc 1 362 23 view .LVU309
 1175 00f4 9142     		cmp	r1, r2
 1176 00f6 03D3     		bcc	.L106
 363:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 364:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 365:FML/Src/EC2x.c ****                         step = 0;
 366:FML/Src/EC2x.c ****                     }
 367:FML/Src/EC2x.c ****                     else
 368:FML/Src/EC2x.c ****                         retry++;;
 1177              		.loc 1 368 25 is_stmt 1 view .LVU310
 1178              		.loc 1 368 30 is_stmt 0 view .LVU311
 1179 00f8 0132     		adds	r2, r2, #1
 1180 00fa 674B     		ldr	r3, .L113+8
 1181 00fc 1A70     		strb	r2, [r3]
 1182 00fe 83E7     		b	.L75
 1183              	.L106:
 363:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1184              		.loc 1 363 25 is_stmt 1 view .LVU312
 1185 0100 03EB4303 		add	r3, r3, r3, lsl #1
 1186 0104 634A     		ldr	r2, .L113+4
 1187 0106 52F82320 		ldr	r2, [r2, r3, lsl #2]
 1188 010a 6449     		ldr	r1, .L113+12
 1189 010c 6448     		ldr	r0, .L113+16
 1190 010e FFF7FEFF 		bl	shellPrint
 1191              	.LVL94:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 30


 364:FML/Src/EC2x.c ****                         step = 0;
 1192              		.loc 1 364 25 view .LVU313
 1193 0112 2846     		mov	r0, r5
 1194 0114 FFF7FEFF 		bl	ec2x_reset
 1195              	.LVL95:
 365:FML/Src/EC2x.c ****                     }
 1196              		.loc 1 365 25 view .LVU314
 365:FML/Src/EC2x.c ****                     }
 1197              		.loc 1 365 30 is_stmt 0 view .LVU315
 1198 0118 5D4B     		ldr	r3, .L113
 1199 011a 0022     		movs	r2, #0
 1200 011c 1A70     		strb	r2, [r3]
 1201 011e 73E7     		b	.L75
 1202              	.L83:
 369:FML/Src/EC2x.c ****                 }
 370:FML/Src/EC2x.c ****             }
 371:FML/Src/EC2x.c ****             break;
 372:FML/Src/EC2x.c ****             case 2:
 373:FML/Src/EC2x.c ****             {
 374:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1203              		.loc 1 374 17 is_stmt 1 view .LVU316
 1204              		.loc 1 374 20 is_stmt 0 view .LVU317
 1205 0120 5C4F     		ldr	r7, .L113+4
 1206 0122 6600     		lsls	r6, r4, #1
 1207 0124 04EB4403 		add	r3, r4, r4, lsl #1
 1208 0128 57F82380 		ldr	r8, [r7, r3, lsl #2]
 1209              		.loc 1 374 66 view .LVU318
 1210 012c 4046     		mov	r0, r8
 1211 012e FFF7FEFF 		bl	strlen
 1212              	.LVL96:
 1213              		.loc 1 374 20 view .LVU319
 1214 0132 3444     		add	r4, r4, r6
 1215 0134 07EB8404 		add	r4, r7, r4, lsl #2
 1216 0138 3B89     		ldrh	r3, [r7, #8]
 1217 013a 0093     		str	r3, [sp]
 1218 013c 6368     		ldr	r3, [r4, #4]
 1219 013e 82B2     		uxth	r2, r0
 1220 0140 4146     		mov	r1, r8
 1221 0142 2846     		mov	r0, r5
 1222 0144 FFF7FEFF 		bl	ec2x_cmd_send
 1223              	.LVL97:
 1224              		.loc 1 374 19 view .LVU320
 1225 0148 38B1     		cbz	r0, .L91
 375:FML/Src/EC2x.c ****                 {    
 376:FML/Src/EC2x.c ****                     step++;
 1226              		.loc 1 376 21 is_stmt 1 view .LVU321
 1227              		.loc 1 376 25 is_stmt 0 view .LVU322
 1228 014a 514A     		ldr	r2, .L113
 1229 014c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1230 014e 0133     		adds	r3, r3, #1
 1231 0150 1370     		strb	r3, [r2]
 377:FML/Src/EC2x.c ****                     retry = 0;
 1232              		.loc 1 377 21 is_stmt 1 view .LVU323
 1233              		.loc 1 377 27 is_stmt 0 view .LVU324
 1234 0152 514B     		ldr	r3, .L113+8
 1235 0154 0022     		movs	r2, #0
 1236 0156 1A70     		strb	r2, [r3]
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 31


 1237 0158 56E7     		b	.L75
 1238              	.L91:
 378:FML/Src/EC2x.c ****                 }
 379:FML/Src/EC2x.c ****                 else
 380:FML/Src/EC2x.c ****                 {
 381:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 1239              		.loc 1 381 21 is_stmt 1 view .LVU325
 1240              		.loc 1 381 46 is_stmt 0 view .LVU326
 1241 015a 4D4B     		ldr	r3, .L113
 1242 015c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1243 015e 03EB4301 		add	r1, r3, r3, lsl #1
 1244 0162 4C4A     		ldr	r2, .L113+4
 1245 0164 02EB8102 		add	r2, r2, r1, lsl #2
 1246 0168 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 1247              		.loc 1 381 59 view .LVU327
 1248 016a 4B4A     		ldr	r2, .L113+8
 1249 016c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1250              		.loc 1 381 23 view .LVU328
 1251 016e 9142     		cmp	r1, r2
 1252 0170 03D3     		bcc	.L107
 382:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 383:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 384:FML/Src/EC2x.c ****                         step = 0;
 385:FML/Src/EC2x.c ****                     }
 386:FML/Src/EC2x.c ****                     else
 387:FML/Src/EC2x.c ****                         retry++;;
 1253              		.loc 1 387 25 is_stmt 1 view .LVU329
 1254              		.loc 1 387 30 is_stmt 0 view .LVU330
 1255 0172 0132     		adds	r2, r2, #1
 1256 0174 484B     		ldr	r3, .L113+8
 1257 0176 1A70     		strb	r2, [r3]
 1258 0178 46E7     		b	.L75
 1259              	.L107:
 382:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1260              		.loc 1 382 25 is_stmt 1 view .LVU331
 1261 017a 03EB4303 		add	r3, r3, r3, lsl #1
 1262 017e 454A     		ldr	r2, .L113+4
 1263 0180 52F82320 		ldr	r2, [r2, r3, lsl #2]
 1264 0184 4549     		ldr	r1, .L113+12
 1265 0186 4648     		ldr	r0, .L113+16
 1266 0188 FFF7FEFF 		bl	shellPrint
 1267              	.LVL98:
 383:FML/Src/EC2x.c ****                         step = 0;
 1268              		.loc 1 383 25 view .LVU332
 1269 018c 2846     		mov	r0, r5
 1270 018e FFF7FEFF 		bl	ec2x_reset
 1271              	.LVL99:
 384:FML/Src/EC2x.c ****                     }
 1272              		.loc 1 384 25 view .LVU333
 384:FML/Src/EC2x.c ****                     }
 1273              		.loc 1 384 30 is_stmt 0 view .LVU334
 1274 0192 3F4B     		ldr	r3, .L113
 1275 0194 0022     		movs	r2, #0
 1276 0196 1A70     		strb	r2, [r3]
 1277 0198 36E7     		b	.L75
 1278              	.L82:
 388:FML/Src/EC2x.c ****                 }
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 32


 389:FML/Src/EC2x.c ****             }
 390:FML/Src/EC2x.c ****             break;
 391:FML/Src/EC2x.c ****             case 3:
 392:FML/Src/EC2x.c ****             {
 393:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1279              		.loc 1 393 17 is_stmt 1 view .LVU335
 1280              		.loc 1 393 20 is_stmt 0 view .LVU336
 1281 019a 3E4F     		ldr	r7, .L113+4
 1282 019c 6600     		lsls	r6, r4, #1
 1283 019e 04EB4403 		add	r3, r4, r4, lsl #1
 1284 01a2 57F82380 		ldr	r8, [r7, r3, lsl #2]
 1285              		.loc 1 393 66 view .LVU337
 1286 01a6 4046     		mov	r0, r8
 1287 01a8 FFF7FEFF 		bl	strlen
 1288              	.LVL100:
 1289              		.loc 1 393 20 view .LVU338
 1290 01ac 3444     		add	r4, r4, r6
 1291 01ae 07EB8404 		add	r4, r7, r4, lsl #2
 1292 01b2 3B89     		ldrh	r3, [r7, #8]
 1293 01b4 0093     		str	r3, [sp]
 1294 01b6 6368     		ldr	r3, [r4, #4]
 1295 01b8 82B2     		uxth	r2, r0
 1296 01ba 4146     		mov	r1, r8
 1297 01bc 2846     		mov	r0, r5
 1298 01be FFF7FEFF 		bl	ec2x_cmd_send
 1299              	.LVL101:
 1300              		.loc 1 393 19 view .LVU339
 1301 01c2 38B1     		cbz	r0, .L93
 394:FML/Src/EC2x.c ****                 {    
 395:FML/Src/EC2x.c ****                     step++;
 1302              		.loc 1 395 21 is_stmt 1 view .LVU340
 1303              		.loc 1 395 25 is_stmt 0 view .LVU341
 1304 01c4 324A     		ldr	r2, .L113
 1305 01c6 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1306 01c8 0133     		adds	r3, r3, #1
 1307 01ca 1370     		strb	r3, [r2]
 396:FML/Src/EC2x.c ****                     retry = 0;
 1308              		.loc 1 396 21 is_stmt 1 view .LVU342
 1309              		.loc 1 396 27 is_stmt 0 view .LVU343
 1310 01cc 324B     		ldr	r3, .L113+8
 1311 01ce 0022     		movs	r2, #0
 1312 01d0 1A70     		strb	r2, [r3]
 1313 01d2 19E7     		b	.L75
 1314              	.L93:
 397:FML/Src/EC2x.c ****                 }
 398:FML/Src/EC2x.c ****                 else
 399:FML/Src/EC2x.c ****                 {
 400:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 1315              		.loc 1 400 21 is_stmt 1 view .LVU344
 1316              		.loc 1 400 46 is_stmt 0 view .LVU345
 1317 01d4 2E4B     		ldr	r3, .L113
 1318 01d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1319 01d8 03EB4301 		add	r1, r3, r3, lsl #1
 1320 01dc 2D4A     		ldr	r2, .L113+4
 1321 01de 02EB8102 		add	r2, r2, r1, lsl #2
 1322 01e2 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 1323              		.loc 1 400 59 view .LVU346
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 33


 1324 01e4 2C4A     		ldr	r2, .L113+8
 1325 01e6 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1326              		.loc 1 400 23 view .LVU347
 1327 01e8 9142     		cmp	r1, r2
 1328 01ea 03D3     		bcc	.L108
 401:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 402:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 403:FML/Src/EC2x.c ****                         step = 0;
 404:FML/Src/EC2x.c ****                     }
 405:FML/Src/EC2x.c ****                     else
 406:FML/Src/EC2x.c ****                         retry++;;
 1329              		.loc 1 406 25 is_stmt 1 view .LVU348
 1330              		.loc 1 406 30 is_stmt 0 view .LVU349
 1331 01ec 0132     		adds	r2, r2, #1
 1332 01ee 2A4B     		ldr	r3, .L113+8
 1333 01f0 1A70     		strb	r2, [r3]
 1334 01f2 09E7     		b	.L75
 1335              	.L108:
 401:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1336              		.loc 1 401 25 is_stmt 1 view .LVU350
 1337 01f4 03EB4303 		add	r3, r3, r3, lsl #1
 1338 01f8 264A     		ldr	r2, .L113+4
 1339 01fa 52F82320 		ldr	r2, [r2, r3, lsl #2]
 1340 01fe 2749     		ldr	r1, .L113+12
 1341 0200 2748     		ldr	r0, .L113+16
 1342 0202 FFF7FEFF 		bl	shellPrint
 1343              	.LVL102:
 402:FML/Src/EC2x.c ****                         step = 0;
 1344              		.loc 1 402 25 view .LVU351
 1345 0206 2846     		mov	r0, r5
 1346 0208 FFF7FEFF 		bl	ec2x_reset
 1347              	.LVL103:
 403:FML/Src/EC2x.c ****                     }
 1348              		.loc 1 403 25 view .LVU352
 403:FML/Src/EC2x.c ****                     }
 1349              		.loc 1 403 30 is_stmt 0 view .LVU353
 1350 020c 204B     		ldr	r3, .L113
 1351 020e 0022     		movs	r2, #0
 1352 0210 1A70     		strb	r2, [r3]
 1353 0212 F9E6     		b	.L75
 1354              	.L81:
 407:FML/Src/EC2x.c ****                 }
 408:FML/Src/EC2x.c ****             }
 409:FML/Src/EC2x.c ****             break;
 410:FML/Src/EC2x.c ****             case 4:
 411:FML/Src/EC2x.c ****             {
 412:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1355              		.loc 1 412 17 is_stmt 1 view .LVU354
 1356              		.loc 1 412 20 is_stmt 0 view .LVU355
 1357 0214 1F4F     		ldr	r7, .L113+4
 1358 0216 6600     		lsls	r6, r4, #1
 1359 0218 04EB4403 		add	r3, r4, r4, lsl #1
 1360 021c 57F82380 		ldr	r8, [r7, r3, lsl #2]
 1361              		.loc 1 412 66 view .LVU356
 1362 0220 4046     		mov	r0, r8
 1363 0222 FFF7FEFF 		bl	strlen
 1364              	.LVL104:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 34


 1365              		.loc 1 412 20 view .LVU357
 1366 0226 3444     		add	r4, r4, r6
 1367 0228 07EB8404 		add	r4, r7, r4, lsl #2
 1368 022c 3B89     		ldrh	r3, [r7, #8]
 1369 022e 0093     		str	r3, [sp]
 1370 0230 6368     		ldr	r3, [r4, #4]
 1371 0232 82B2     		uxth	r2, r0
 1372 0234 4146     		mov	r1, r8
 1373 0236 2846     		mov	r0, r5
 1374 0238 FFF7FEFF 		bl	ec2x_cmd_send
 1375              	.LVL105:
 1376              		.loc 1 412 19 view .LVU358
 1377 023c 38B1     		cbz	r0, .L95
 413:FML/Src/EC2x.c ****                 {    
 414:FML/Src/EC2x.c ****                     step++;
 1378              		.loc 1 414 21 is_stmt 1 view .LVU359
 1379              		.loc 1 414 25 is_stmt 0 view .LVU360
 1380 023e 144A     		ldr	r2, .L113
 1381 0240 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1382 0242 0133     		adds	r3, r3, #1
 1383 0244 1370     		strb	r3, [r2]
 415:FML/Src/EC2x.c ****                     retry = 0;
 1384              		.loc 1 415 21 is_stmt 1 view .LVU361
 1385              		.loc 1 415 27 is_stmt 0 view .LVU362
 1386 0246 144B     		ldr	r3, .L113+8
 1387 0248 0022     		movs	r2, #0
 1388 024a 1A70     		strb	r2, [r3]
 1389 024c DCE6     		b	.L75
 1390              	.L95:
 416:FML/Src/EC2x.c ****                 }
 417:FML/Src/EC2x.c ****                 else
 418:FML/Src/EC2x.c ****                 {
 419:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 1391              		.loc 1 419 21 is_stmt 1 view .LVU363
 1392              		.loc 1 419 46 is_stmt 0 view .LVU364
 1393 024e 104B     		ldr	r3, .L113
 1394 0250 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1395 0252 03EB4301 		add	r1, r3, r3, lsl #1
 1396 0256 0F4A     		ldr	r2, .L113+4
 1397 0258 02EB8102 		add	r2, r2, r1, lsl #2
 1398 025c 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 1399              		.loc 1 419 59 view .LVU365
 1400 025e 0E4A     		ldr	r2, .L113+8
 1401 0260 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1402              		.loc 1 419 23 view .LVU366
 1403 0262 9142     		cmp	r1, r2
 1404 0264 03D3     		bcc	.L109
 420:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 421:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 422:FML/Src/EC2x.c ****                         step = 0;
 423:FML/Src/EC2x.c ****                     }
 424:FML/Src/EC2x.c ****                     else
 425:FML/Src/EC2x.c ****                         retry++;;
 1405              		.loc 1 425 25 is_stmt 1 view .LVU367
 1406              		.loc 1 425 30 is_stmt 0 view .LVU368
 1407 0266 0132     		adds	r2, r2, #1
 1408 0268 0B4B     		ldr	r3, .L113+8
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 35


 1409 026a 1A70     		strb	r2, [r3]
 1410 026c CCE6     		b	.L75
 1411              	.L109:
 420:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1412              		.loc 1 420 25 is_stmt 1 view .LVU369
 1413 026e 03EB4303 		add	r3, r3, r3, lsl #1
 1414 0272 084A     		ldr	r2, .L113+4
 1415 0274 52F82320 		ldr	r2, [r2, r3, lsl #2]
 1416 0278 0849     		ldr	r1, .L113+12
 1417 027a 0948     		ldr	r0, .L113+16
 1418 027c FFF7FEFF 		bl	shellPrint
 1419              	.LVL106:
 421:FML/Src/EC2x.c ****                         step = 0;
 1420              		.loc 1 421 25 view .LVU370
 1421 0280 2846     		mov	r0, r5
 1422 0282 FFF7FEFF 		bl	ec2x_reset
 1423              	.LVL107:
 422:FML/Src/EC2x.c ****                     }
 1424              		.loc 1 422 25 view .LVU371
 422:FML/Src/EC2x.c ****                     }
 1425              		.loc 1 422 30 is_stmt 0 view .LVU372
 1426 0286 024B     		ldr	r3, .L113
 1427 0288 0022     		movs	r2, #0
 1428 028a 1A70     		strb	r2, [r3]
 1429 028c BCE6     		b	.L75
 1430              	.L114:
 1431 028e 00BF     		.align	2
 1432              	.L113:
 1433 0290 00000000 		.word	.LANCHOR2
 1434 0294 00000000 		.word	.LANCHOR1
 1435 0298 00000000 		.word	.LANCHOR3
 1436 029c 00000000 		.word	.LC2
 1437 02a0 00000000 		.word	shell
 1438              	.L80:
 426:FML/Src/EC2x.c ****                 }
 427:FML/Src/EC2x.c ****             }
 428:FML/Src/EC2x.c ****             break;
 429:FML/Src/EC2x.c ****             case 5:
 430:FML/Src/EC2x.c ****             {
 431:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1439              		.loc 1 431 17 is_stmt 1 view .LVU373
 1440              		.loc 1 431 20 is_stmt 0 view .LVU374
 1441 02a4 5F4F     		ldr	r7, .L115
 1442 02a6 6600     		lsls	r6, r4, #1
 1443 02a8 04EB4403 		add	r3, r4, r4, lsl #1
 1444 02ac 57F82380 		ldr	r8, [r7, r3, lsl #2]
 1445              		.loc 1 431 66 view .LVU375
 1446 02b0 4046     		mov	r0, r8
 1447 02b2 FFF7FEFF 		bl	strlen
 1448              	.LVL108:
 1449              		.loc 1 431 20 view .LVU376
 1450 02b6 3444     		add	r4, r4, r6
 1451 02b8 07EB8404 		add	r4, r7, r4, lsl #2
 1452 02bc 3B89     		ldrh	r3, [r7, #8]
 1453 02be 0093     		str	r3, [sp]
 1454 02c0 6368     		ldr	r3, [r4, #4]
 1455 02c2 82B2     		uxth	r2, r0
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 36


 1456 02c4 4146     		mov	r1, r8
 1457 02c6 2846     		mov	r0, r5
 1458 02c8 FFF7FEFF 		bl	ec2x_cmd_send
 1459              	.LVL109:
 1460              		.loc 1 431 19 view .LVU377
 1461 02cc 38B1     		cbz	r0, .L97
 432:FML/Src/EC2x.c ****                 {    
 433:FML/Src/EC2x.c ****                     step++;
 1462              		.loc 1 433 21 is_stmt 1 view .LVU378
 1463              		.loc 1 433 25 is_stmt 0 view .LVU379
 1464 02ce 564A     		ldr	r2, .L115+4
 1465 02d0 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1466 02d2 0133     		adds	r3, r3, #1
 1467 02d4 1370     		strb	r3, [r2]
 434:FML/Src/EC2x.c ****                     retry = 0;
 1468              		.loc 1 434 21 is_stmt 1 view .LVU380
 1469              		.loc 1 434 27 is_stmt 0 view .LVU381
 1470 02d6 554B     		ldr	r3, .L115+8
 1471 02d8 0022     		movs	r2, #0
 1472 02da 1A70     		strb	r2, [r3]
 1473 02dc 94E6     		b	.L75
 1474              	.L97:
 435:FML/Src/EC2x.c ****                 }
 436:FML/Src/EC2x.c ****                 else
 437:FML/Src/EC2x.c ****                 {
 438:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 1475              		.loc 1 438 21 is_stmt 1 view .LVU382
 1476              		.loc 1 438 46 is_stmt 0 view .LVU383
 1477 02de 524B     		ldr	r3, .L115+4
 1478 02e0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1479 02e2 03EB4301 		add	r1, r3, r3, lsl #1
 1480 02e6 4F4A     		ldr	r2, .L115
 1481 02e8 02EB8102 		add	r2, r2, r1, lsl #2
 1482 02ec 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 1483              		.loc 1 438 59 view .LVU384
 1484 02ee 4F4A     		ldr	r2, .L115+8
 1485 02f0 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1486              		.loc 1 438 23 view .LVU385
 1487 02f2 9142     		cmp	r1, r2
 1488 02f4 03D3     		bcc	.L110
 439:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 440:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 441:FML/Src/EC2x.c ****                         step = 0;
 442:FML/Src/EC2x.c ****                     }
 443:FML/Src/EC2x.c ****                     else
 444:FML/Src/EC2x.c ****                         retry++;;
 1489              		.loc 1 444 25 is_stmt 1 view .LVU386
 1490              		.loc 1 444 30 is_stmt 0 view .LVU387
 1491 02f6 0132     		adds	r2, r2, #1
 1492 02f8 4C4B     		ldr	r3, .L115+8
 1493 02fa 1A70     		strb	r2, [r3]
 1494 02fc 84E6     		b	.L75
 1495              	.L110:
 439:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1496              		.loc 1 439 25 is_stmt 1 view .LVU388
 1497 02fe 03EB4303 		add	r3, r3, r3, lsl #1
 1498 0302 484A     		ldr	r2, .L115
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 37


 1499 0304 52F82320 		ldr	r2, [r2, r3, lsl #2]
 1500 0308 4949     		ldr	r1, .L115+12
 1501 030a 4A48     		ldr	r0, .L115+16
 1502 030c FFF7FEFF 		bl	shellPrint
 1503              	.LVL110:
 440:FML/Src/EC2x.c ****                         step = 0;
 1504              		.loc 1 440 25 view .LVU389
 1505 0310 2846     		mov	r0, r5
 1506 0312 FFF7FEFF 		bl	ec2x_reset
 1507              	.LVL111:
 441:FML/Src/EC2x.c ****                     }
 1508              		.loc 1 441 25 view .LVU390
 441:FML/Src/EC2x.c ****                     }
 1509              		.loc 1 441 30 is_stmt 0 view .LVU391
 1510 0316 444B     		ldr	r3, .L115+4
 1511 0318 0022     		movs	r2, #0
 1512 031a 1A70     		strb	r2, [r3]
 1513 031c 74E6     		b	.L75
 1514              	.L79:
 445:FML/Src/EC2x.c ****                 }
 446:FML/Src/EC2x.c ****             }
 447:FML/Src/EC2x.c ****             break; 
 448:FML/Src/EC2x.c ****             case 6:
 449:FML/Src/EC2x.c ****             {
 450:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1515              		.loc 1 450 17 is_stmt 1 view .LVU392
 1516              		.loc 1 450 20 is_stmt 0 view .LVU393
 1517 031e 414F     		ldr	r7, .L115
 1518 0320 6600     		lsls	r6, r4, #1
 1519 0322 04EB4403 		add	r3, r4, r4, lsl #1
 1520 0326 57F82380 		ldr	r8, [r7, r3, lsl #2]
 1521              		.loc 1 450 66 view .LVU394
 1522 032a 4046     		mov	r0, r8
 1523 032c FFF7FEFF 		bl	strlen
 1524              	.LVL112:
 1525              		.loc 1 450 20 view .LVU395
 1526 0330 3444     		add	r4, r4, r6
 1527 0332 07EB8404 		add	r4, r7, r4, lsl #2
 1528 0336 3B89     		ldrh	r3, [r7, #8]
 1529 0338 0093     		str	r3, [sp]
 1530 033a 6368     		ldr	r3, [r4, #4]
 1531 033c 82B2     		uxth	r2, r0
 1532 033e 4146     		mov	r1, r8
 1533 0340 2846     		mov	r0, r5
 1534 0342 FFF7FEFF 		bl	ec2x_cmd_send
 1535              	.LVL113:
 1536              		.loc 1 450 19 view .LVU396
 1537 0346 38B1     		cbz	r0, .L99
 451:FML/Src/EC2x.c ****                 {    
 452:FML/Src/EC2x.c ****                     step++;
 1538              		.loc 1 452 21 is_stmt 1 view .LVU397
 1539              		.loc 1 452 25 is_stmt 0 view .LVU398
 1540 0348 374A     		ldr	r2, .L115+4
 1541 034a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1542 034c 0133     		adds	r3, r3, #1
 1543 034e 1370     		strb	r3, [r2]
 453:FML/Src/EC2x.c ****                     retry = 0;
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 38


 1544              		.loc 1 453 21 is_stmt 1 view .LVU399
 1545              		.loc 1 453 27 is_stmt 0 view .LVU400
 1546 0350 364B     		ldr	r3, .L115+8
 1547 0352 0022     		movs	r2, #0
 1548 0354 1A70     		strb	r2, [r3]
 1549 0356 57E6     		b	.L75
 1550              	.L99:
 454:FML/Src/EC2x.c ****                 }
 455:FML/Src/EC2x.c ****                 else
 456:FML/Src/EC2x.c ****                 {
 457:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 1551              		.loc 1 457 21 is_stmt 1 view .LVU401
 1552              		.loc 1 457 46 is_stmt 0 view .LVU402
 1553 0358 334B     		ldr	r3, .L115+4
 1554 035a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1555 035c 03EB4301 		add	r1, r3, r3, lsl #1
 1556 0360 304A     		ldr	r2, .L115
 1557 0362 02EB8102 		add	r2, r2, r1, lsl #2
 1558 0366 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 1559              		.loc 1 457 59 view .LVU403
 1560 0368 304A     		ldr	r2, .L115+8
 1561 036a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1562              		.loc 1 457 23 view .LVU404
 1563 036c 9142     		cmp	r1, r2
 1564 036e 03D3     		bcc	.L111
 458:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 459:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 460:FML/Src/EC2x.c ****                         step = 0;
 461:FML/Src/EC2x.c ****                     }
 462:FML/Src/EC2x.c ****                     else
 463:FML/Src/EC2x.c ****                         retry++;
 1565              		.loc 1 463 25 is_stmt 1 view .LVU405
 1566              		.loc 1 463 30 is_stmt 0 view .LVU406
 1567 0370 0132     		adds	r2, r2, #1
 1568 0372 2E4B     		ldr	r3, .L115+8
 1569 0374 1A70     		strb	r2, [r3]
 1570 0376 47E6     		b	.L75
 1571              	.L111:
 458:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1572              		.loc 1 458 25 is_stmt 1 view .LVU407
 1573 0378 03EB4303 		add	r3, r3, r3, lsl #1
 1574 037c 294A     		ldr	r2, .L115
 1575 037e 52F82320 		ldr	r2, [r2, r3, lsl #2]
 1576 0382 2B49     		ldr	r1, .L115+12
 1577 0384 2B48     		ldr	r0, .L115+16
 1578 0386 FFF7FEFF 		bl	shellPrint
 1579              	.LVL114:
 459:FML/Src/EC2x.c ****                         step = 0;
 1580              		.loc 1 459 25 view .LVU408
 1581 038a 2846     		mov	r0, r5
 1582 038c FFF7FEFF 		bl	ec2x_reset
 1583              	.LVL115:
 460:FML/Src/EC2x.c ****                     }
 1584              		.loc 1 460 25 view .LVU409
 460:FML/Src/EC2x.c ****                     }
 1585              		.loc 1 460 30 is_stmt 0 view .LVU410
 1586 0390 254B     		ldr	r3, .L115+4
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 39


 1587 0392 0022     		movs	r2, #0
 1588 0394 1A70     		strb	r2, [r3]
 1589 0396 37E6     		b	.L75
 1590              	.L78:
 464:FML/Src/EC2x.c ****                 }
 465:FML/Src/EC2x.c ****             }
 466:FML/Src/EC2x.c ****             break; 
 467:FML/Src/EC2x.c ****             case 7:
 468:FML/Src/EC2x.c ****             {
 469:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1591              		.loc 1 469 17 is_stmt 1 view .LVU411
 1592              		.loc 1 469 20 is_stmt 0 view .LVU412
 1593 0398 224F     		ldr	r7, .L115
 1594 039a 6600     		lsls	r6, r4, #1
 1595 039c 04EB4403 		add	r3, r4, r4, lsl #1
 1596 03a0 57F82380 		ldr	r8, [r7, r3, lsl #2]
 1597              		.loc 1 469 66 view .LVU413
 1598 03a4 4046     		mov	r0, r8
 1599 03a6 FFF7FEFF 		bl	strlen
 1600              	.LVL116:
 1601              		.loc 1 469 20 view .LVU414
 1602 03aa 3444     		add	r4, r4, r6
 1603 03ac 07EB8404 		add	r4, r7, r4, lsl #2
 1604 03b0 3B89     		ldrh	r3, [r7, #8]
 1605 03b2 0093     		str	r3, [sp]
 1606 03b4 6368     		ldr	r3, [r4, #4]
 1607 03b6 82B2     		uxth	r2, r0
 1608 03b8 4146     		mov	r1, r8
 1609 03ba 2846     		mov	r0, r5
 1610 03bc FFF7FEFF 		bl	ec2x_cmd_send
 1611              	.LVL117:
 1612              		.loc 1 469 19 view .LVU415
 1613 03c0 38B1     		cbz	r0, .L101
 470:FML/Src/EC2x.c ****                 {    
 471:FML/Src/EC2x.c ****                     step++;
 1614              		.loc 1 471 21 is_stmt 1 view .LVU416
 1615              		.loc 1 471 25 is_stmt 0 view .LVU417
 1616 03c2 194A     		ldr	r2, .L115+4
 1617 03c4 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1618 03c6 0133     		adds	r3, r3, #1
 1619 03c8 1370     		strb	r3, [r2]
 472:FML/Src/EC2x.c ****                     retry = 0;
 1620              		.loc 1 472 21 is_stmt 1 view .LVU418
 1621              		.loc 1 472 27 is_stmt 0 view .LVU419
 1622 03ca 184B     		ldr	r3, .L115+8
 1623 03cc 0022     		movs	r2, #0
 1624 03ce 1A70     		strb	r2, [r3]
 1625 03d0 1AE6     		b	.L75
 1626              	.L101:
 473:FML/Src/EC2x.c ****                 }
 474:FML/Src/EC2x.c ****                 else
 475:FML/Src/EC2x.c ****                 {
 476:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 1627              		.loc 1 476 21 is_stmt 1 view .LVU420
 1628              		.loc 1 476 46 is_stmt 0 view .LVU421
 1629 03d2 154B     		ldr	r3, .L115+4
 1630 03d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 40


 1631 03d6 03EB4301 		add	r1, r3, r3, lsl #1
 1632 03da 124A     		ldr	r2, .L115
 1633 03dc 02EB8102 		add	r2, r2, r1, lsl #2
 1634 03e0 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 1635              		.loc 1 476 59 view .LVU422
 1636 03e2 124A     		ldr	r2, .L115+8
 1637 03e4 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1638              		.loc 1 476 23 view .LVU423
 1639 03e6 9142     		cmp	r1, r2
 1640 03e8 03D3     		bcc	.L112
 477:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 478:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 479:FML/Src/EC2x.c ****                         step = 0;
 480:FML/Src/EC2x.c ****                     }
 481:FML/Src/EC2x.c ****                     else
 482:FML/Src/EC2x.c ****                         retry++;
 1641              		.loc 1 482 25 is_stmt 1 view .LVU424
 1642              		.loc 1 482 30 is_stmt 0 view .LVU425
 1643 03ea 0132     		adds	r2, r2, #1
 1644 03ec 0F4B     		ldr	r3, .L115+8
 1645 03ee 1A70     		strb	r2, [r3]
 1646 03f0 0AE6     		b	.L75
 1647              	.L112:
 477:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1648              		.loc 1 477 25 is_stmt 1 view .LVU426
 1649 03f2 03EB4303 		add	r3, r3, r3, lsl #1
 1650 03f6 0B4A     		ldr	r2, .L115
 1651 03f8 52F82320 		ldr	r2, [r2, r3, lsl #2]
 1652 03fc 0C49     		ldr	r1, .L115+12
 1653 03fe 0D48     		ldr	r0, .L115+16
 1654 0400 FFF7FEFF 		bl	shellPrint
 1655              	.LVL118:
 478:FML/Src/EC2x.c ****                         step = 0;
 1656              		.loc 1 478 25 view .LVU427
 1657 0404 2846     		mov	r0, r5
 1658 0406 FFF7FEFF 		bl	ec2x_reset
 1659              	.LVL119:
 479:FML/Src/EC2x.c ****                     }
 1660              		.loc 1 479 25 view .LVU428
 479:FML/Src/EC2x.c ****                     }
 1661              		.loc 1 479 30 is_stmt 0 view .LVU429
 1662 040a 074B     		ldr	r3, .L115+4
 1663 040c 0022     		movs	r2, #0
 1664 040e 1A70     		strb	r2, [r3]
 1665 0410 FAE5     		b	.L75
 1666              	.L76:
 483:FML/Src/EC2x.c ****                 }
 484:FML/Src/EC2x.c ****             }
 485:FML/Src/EC2x.c ****             break;  
 486:FML/Src/EC2x.c ****             case 8:
 487:FML/Src/EC2x.c ****             {
 488:FML/Src/EC2x.c ****                 shellPrint(&shell,"tcp is connected\r\n");
 1667              		.loc 1 488 17 is_stmt 1 view .LVU430
 1668 0412 0949     		ldr	r1, .L115+20
 1669 0414 0748     		ldr	r0, .L115+16
 1670 0416 FFF7FEFF 		bl	shellPrint
 1671              	.LVL120:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 41


 489:FML/Src/EC2x.c ****                 return 0;
 1672              		.loc 1 489 17 view .LVU431
 1673              		.loc 1 489 24 is_stmt 0 view .LVU432
 1674 041a 0020     		movs	r0, #0
 1675              	.L73:
 490:FML/Src/EC2x.c ****             }
 491:FML/Src/EC2x.c ****             break; 
 492:FML/Src/EC2x.c ****             default:
 493:FML/Src/EC2x.c ****                 break;
 494:FML/Src/EC2x.c ****         }
 495:FML/Src/EC2x.c ****     }
 496:FML/Src/EC2x.c **** }
 1676              		.loc 1 496 1 view .LVU433
 1677 041c 02B0     		add	sp, sp, #8
 1678              	.LCFI18:
 1679              		.cfi_def_cfa_offset 24
 1680              		@ sp needed
 1681 041e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1682              	.LVL121:
 1683              	.L116:
 1684              		.loc 1 496 1 view .LVU434
 1685 0422 00BF     		.align	2
 1686              	.L115:
 1687 0424 00000000 		.word	.LANCHOR1
 1688 0428 00000000 		.word	.LANCHOR2
 1689 042c 00000000 		.word	.LANCHOR3
 1690 0430 00000000 		.word	.LC2
 1691 0434 00000000 		.word	shell
 1692 0438 0C000000 		.word	.LC3
 1693              		.cfi_endproc
 1694              	.LFE299:
 1696              		.section	.rodata.EC2x_Test.str1.4,"aMS",%progbits,1
 1697              		.align	2
 1698              	.LC4:
 1699 0000 7463705F 		.ascii	"tcp_connect\000"
 1699      636F6E6E 
 1699      65637400 
 1700              		.align	2
 1701              	.LC5:
 1702 000c 73756363 		.ascii	"success\015\012\000"
 1702      6573730D 
 1702      0A00
 1703 0016 0000     		.align	2
 1704              	.LC6:
 1705 0018 6661696C 		.ascii	"failed\015\012\000"
 1705      65640D0A 
 1705      00
 1706              		.section	.text.EC2x_Test,"ax",%progbits
 1707              		.align	1
 1708              		.global	EC2x_Test
 1709              		.syntax unified
 1710              		.thumb
 1711              		.thumb_func
 1713              	EC2x_Test:
 1714              	.LVL122:
 1715              	.LFB300:
 497:FML/Src/EC2x.c **** /*------------------------------------test------------------------------------*/
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 42


 498:FML/Src/EC2x.c **** 
 499:FML/Src/EC2x.c **** /**
 500:FML/Src/EC2x.c ****  * @brief 
 501:FML/Src/EC2x.c ****  * 
 502:FML/Src/EC2x.c ****  * @param fd 
 503:FML/Src/EC2x.c ****  * @param tx_buff 
 504:FML/Src/EC2x.c ****  * @param expect_reply 
 505:FML/Src/EC2x.c ****  * @param timeout 
 506:FML/Src/EC2x.c ****  */
 507:FML/Src/EC2x.c **** void EC2x_Test(int fd,char *tx_buff,char *expect_reply,uint16_t timeout)
 508:FML/Src/EC2x.c **** {
 1716              		.loc 1 508 1 is_stmt 1 view -0
 1717              		.cfi_startproc
 1718              		@ args = 0, pretend = 0, frame = 40
 1719              		@ frame_needed = 0, uses_anonymous_args = 0
 1720              		.loc 1 508 1 is_stmt 0 view .LVU436
 1721 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1722              	.LCFI19:
 1723              		.cfi_def_cfa_offset 32
 1724              		.cfi_offset 4, -32
 1725              		.cfi_offset 5, -28
 1726              		.cfi_offset 6, -24
 1727              		.cfi_offset 7, -20
 1728              		.cfi_offset 8, -16
 1729              		.cfi_offset 9, -12
 1730              		.cfi_offset 10, -8
 1731              		.cfi_offset 14, -4
 1732 0004 8CB0     		sub	sp, sp, #48
 1733              	.LCFI20:
 1734              		.cfi_def_cfa_offset 80
 1735 0006 0746     		mov	r7, r0
 1736 0008 0D46     		mov	r5, r1
 1737 000a 1646     		mov	r6, r2
 1738 000c 9946     		mov	r9, r3
 509:FML/Src/EC2x.c ****     uint8_t tx_data[20] = {0xff,};
 1739              		.loc 1 509 5 is_stmt 1 view .LVU437
 1740              		.loc 1 509 13 is_stmt 0 view .LVU438
 1741 000e FF23     		movs	r3, #255
 1742              	.LVL123:
 1743              		.loc 1 509 13 view .LVU439
 1744 0010 0793     		str	r3, [sp, #28]
 1745 0012 0024     		movs	r4, #0
 1746 0014 0894     		str	r4, [sp, #32]
 1747 0016 0994     		str	r4, [sp, #36]
 1748 0018 0A94     		str	r4, [sp, #40]
 1749 001a 0B94     		str	r4, [sp, #44]
 510:FML/Src/EC2x.c ****     uint8_t reply_data[20] = {0xff,};
 1750              		.loc 1 510 5 is_stmt 1 view .LVU440
 1751              		.loc 1 510 13 is_stmt 0 view .LVU441
 1752 001c 0293     		str	r3, [sp, #8]
 1753 001e 0394     		str	r4, [sp, #12]
 1754 0020 0494     		str	r4, [sp, #16]
 1755 0022 0594     		str	r4, [sp, #20]
 1756 0024 0694     		str	r4, [sp, #24]
 511:FML/Src/EC2x.c ****     uint8_t tx_len = 0,reply_len = 0;
 1757              		.loc 1 511 5 is_stmt 1 view .LVU442
 1758              	.LVL124:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 43


 512:FML/Src/EC2x.c ****     tx_len = strlen(tx_buff);
 1759              		.loc 1 512 5 view .LVU443
 1760              		.loc 1 512 14 is_stmt 0 view .LVU444
 1761 0026 0846     		mov	r0, r1
 1762              	.LVL125:
 1763              		.loc 1 512 14 view .LVU445
 1764 0028 FFF7FEFF 		bl	strlen
 1765              	.LVL126:
 1766              		.loc 1 512 14 view .LVU446
 1767 002c 0446     		mov	r4, r0
 1768              		.loc 1 512 12 view .LVU447
 1769 002e 5FFA80F8 		uxtb	r8, r0
 1770              	.LVL127:
 513:FML/Src/EC2x.c ****     reply_len = strlen(expect_reply);
 1771              		.loc 1 513 5 is_stmt 1 view .LVU448
 1772              		.loc 1 513 17 is_stmt 0 view .LVU449
 1773 0032 3046     		mov	r0, r6
 1774 0034 FFF7FEFF 		bl	strlen
 1775              	.LVL128:
 1776 0038 8246     		mov	r10, r0
 1777              	.LVL129:
 514:FML/Src/EC2x.c ****     if(strcmp(tx_buff,"tcp_connect")==0){
 1778              		.loc 1 514 5 is_stmt 1 view .LVU450
 1779              		.loc 1 514 8 is_stmt 0 view .LVU451
 1780 003a 1D49     		ldr	r1, .L122
 1781 003c 2846     		mov	r0, r5
 1782 003e FFF7FEFF 		bl	strcmp
 1783              	.LVL130:
 1784              		.loc 1 514 7 view .LVU452
 1785 0042 28B9     		cbnz	r0, .L118
 515:FML/Src/EC2x.c ****         ec2x_tcp_connect(fd);
 1786              		.loc 1 515 9 is_stmt 1 view .LVU453
 1787 0044 3846     		mov	r0, r7
 1788 0046 FFF7FEFF 		bl	ec2x_tcp_connect
 1789              	.LVL131:
 1790              	.L117:
 516:FML/Src/EC2x.c ****     }
 517:FML/Src/EC2x.c ****     else{
 518:FML/Src/EC2x.c ****         memcpy(tx_data,tx_buff,tx_len);
 519:FML/Src/EC2x.c ****         tx_data[tx_len] = 0x0D;
 520:FML/Src/EC2x.c ****         tx_data[tx_len+1] = 0x0A;
 521:FML/Src/EC2x.c ****         tx_len += 2;
 522:FML/Src/EC2x.c ****         memcpy(reply_data,expect_reply,reply_len);
 523:FML/Src/EC2x.c **** 
 524:FML/Src/EC2x.c ****         if(ec2x_cmd_send(fd,tx_data,tx_len,reply_data,timeout))
 525:FML/Src/EC2x.c ****             shellPrint(&shell,"success\r\n");
 526:FML/Src/EC2x.c ****         else
 527:FML/Src/EC2x.c ****             shellPrint(&shell,"failed\r\n");
 528:FML/Src/EC2x.c ****     }
 529:FML/Src/EC2x.c **** }
 1791              		.loc 1 529 1 is_stmt 0 view .LVU454
 1792 004a 0CB0     		add	sp, sp, #48
 1793              	.LCFI21:
 1794              		.cfi_remember_state
 1795              		.cfi_def_cfa_offset 32
 1796              		@ sp needed
 1797 004c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 44


 1798              	.LVL132:
 1799              	.L118:
 1800              	.LCFI22:
 1801              		.cfi_restore_state
 518:FML/Src/EC2x.c ****         tx_data[tx_len] = 0x0D;
 1802              		.loc 1 518 9 is_stmt 1 view .LVU455
 1803 0050 E4B2     		uxtb	r4, r4
 1804 0052 2246     		mov	r2, r4
 1805 0054 2946     		mov	r1, r5
 1806 0056 07A8     		add	r0, sp, #28
 1807 0058 FFF7FEFF 		bl	memcpy
 1808              	.LVL133:
 519:FML/Src/EC2x.c ****         tx_data[tx_len+1] = 0x0A;
 1809              		.loc 1 519 9 view .LVU456
 519:FML/Src/EC2x.c ****         tx_data[tx_len+1] = 0x0A;
 1810              		.loc 1 519 25 is_stmt 0 view .LVU457
 1811 005c 04F13003 		add	r3, r4, #48
 1812 0060 6B44     		add	r3, sp, r3
 1813 0062 0D22     		movs	r2, #13
 1814 0064 03F8142C 		strb	r2, [r3, #-20]
 520:FML/Src/EC2x.c ****         tx_len += 2;
 1815              		.loc 1 520 9 is_stmt 1 view .LVU458
 520:FML/Src/EC2x.c ****         tx_len += 2;
 1816              		.loc 1 520 27 is_stmt 0 view .LVU459
 1817 0068 04F13103 		add	r3, r4, #49
 1818 006c 0DEB0304 		add	r4, sp, r3
 1819 0070 0A23     		movs	r3, #10
 1820 0072 04F8143C 		strb	r3, [r4, #-20]
 521:FML/Src/EC2x.c ****         memcpy(reply_data,expect_reply,reply_len);
 1821              		.loc 1 521 9 is_stmt 1 view .LVU460
 521:FML/Src/EC2x.c ****         memcpy(reply_data,expect_reply,reply_len);
 1822              		.loc 1 521 16 is_stmt 0 view .LVU461
 1823 0076 08F10208 		add	r8, r8, #2
 1824              	.LVL134:
 521:FML/Src/EC2x.c ****         memcpy(reply_data,expect_reply,reply_len);
 1825              		.loc 1 521 16 view .LVU462
 1826 007a 5FFA88F8 		uxtb	r8, r8
 1827              	.LVL135:
 522:FML/Src/EC2x.c **** 
 1828              		.loc 1 522 9 is_stmt 1 view .LVU463
 1829 007e 5FFA8AF2 		uxtb	r2, r10
 1830 0082 3146     		mov	r1, r6
 1831 0084 02A8     		add	r0, sp, #8
 1832 0086 FFF7FEFF 		bl	memcpy
 1833              	.LVL136:
 524:FML/Src/EC2x.c ****             shellPrint(&shell,"success\r\n");
 1834              		.loc 1 524 9 view .LVU464
 524:FML/Src/EC2x.c ****             shellPrint(&shell,"success\r\n");
 1835              		.loc 1 524 12 is_stmt 0 view .LVU465
 1836 008a CDF80090 		str	r9, [sp]
 1837 008e 02AB     		add	r3, sp, #8
 1838 0090 4246     		mov	r2, r8
 1839 0092 07A9     		add	r1, sp, #28
 1840 0094 3846     		mov	r0, r7
 1841 0096 FFF7FEFF 		bl	ec2x_cmd_send
 1842              	.LVL137:
 524:FML/Src/EC2x.c ****             shellPrint(&shell,"success\r\n");
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 45


 1843              		.loc 1 524 11 view .LVU466
 1844 009a 20B1     		cbz	r0, .L120
 525:FML/Src/EC2x.c ****         else
 1845              		.loc 1 525 13 is_stmt 1 view .LVU467
 1846 009c 0549     		ldr	r1, .L122+4
 1847 009e 0648     		ldr	r0, .L122+8
 1848 00a0 FFF7FEFF 		bl	shellPrint
 1849              	.LVL138:
 1850 00a4 D1E7     		b	.L117
 1851              	.L120:
 527:FML/Src/EC2x.c ****     }
 1852              		.loc 1 527 13 view .LVU468
 1853 00a6 0549     		ldr	r1, .L122+12
 1854 00a8 0348     		ldr	r0, .L122+8
 1855 00aa FFF7FEFF 		bl	shellPrint
 1856              	.LVL139:
 1857              		.loc 1 529 1 is_stmt 0 view .LVU469
 1858 00ae CCE7     		b	.L117
 1859              	.L123:
 1860              		.align	2
 1861              	.L122:
 1862 00b0 00000000 		.word	.LC4
 1863 00b4 0C000000 		.word	.LC5
 1864 00b8 00000000 		.word	shell
 1865 00bc 18000000 		.word	.LC6
 1866              		.cfi_endproc
 1867              	.LFE300:
 1869              		.global	shellCommandec2x_send
 1870              		.global	shellDescec2x_send
 1871              		.global	shellCmdec2x_send
 1872              		.global	ec2x_dev
 1873              		.global	connectmsg_queue
 1874              		.section	.rodata.str1.4,"aMS",%progbits,1
 1875              		.align	2
 1876              	.LC7:
 1877 0000 41540D0A 		.ascii	"AT\015\012\000"
 1877      00
 1878 0005 000000   		.align	2
 1879              	.LC8:
 1880 0008 4F4B00   		.ascii	"OK\000"
 1881 000b 00       		.align	2
 1882              	.LC9:
 1883 000c 41542B43 		.ascii	"AT+CPIN?\015\012\000"
 1883      50494E3F 
 1883      0D0A00
 1884 0017 00       		.align	2
 1885              	.LC10:
 1886 0018 52454144 		.ascii	"READY\000"
 1886      5900
 1887 001e 0000     		.align	2
 1888              	.LC11:
 1889 0020 41542B43 		.ascii	"AT+CREG?\015\012\000"
 1889      5245473F 
 1889      0D0A00
 1890 002b 00       		.align	2
 1891              	.LC12:
 1892 002c 2B435245 		.ascii	"+CREG: 0,1\000"
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 46


 1892      473A2030 
 1892      2C3100
 1893 0037 00       		.align	2
 1894              	.LC13:
 1895 0038 41542B43 		.ascii	"AT+CGREG?\015\012\000"
 1895      47524547 
 1895      3F0D0A00 
 1896              		.align	2
 1897              	.LC14:
 1898 0044 2B434752 		.ascii	"+CGREG: 0,1\000"
 1898      45473A20 
 1898      302C3100 
 1899              		.align	2
 1900              	.LC15:
 1901 0050 41542B51 		.ascii	"AT+QICSGP=1,1,\"CMNET\",\"\",\"\",1\015\012\000"
 1901      49435347 
 1901      503D312C 
 1901      312C2243 
 1901      4D4E4554 
 1902              		.align	2
 1903              	.LC16:
 1904 0070 41542B51 		.ascii	"AT+QIDEACT=1\015\012\000"
 1904      49444541 
 1904      43543D31 
 1904      0D0A00
 1905 007f 00       		.align	2
 1906              	.LC17:
 1907 0080 41542B51 		.ascii	"AT+QIACT=1\015\012\000"
 1907      49414354 
 1907      3D310D0A 
 1907      00
 1908 008d 000000   		.align	2
 1909              	.LC18:
 1910 0090 434F4E4E 		.ascii	"CONNECT\000"
 1910      45435400 
 1911              		.global	tcpconnct_step
 1912              		.global	tcp_connect
 1913              		.global	ec2x_buff
 1914              		.section	.bss.retry.0,"aw",%nobits
 1915              		.set	.LANCHOR3,. + 0
 1918              	retry.0:
 1919 0000 00       		.space	1
 1920              		.section	.bss.step.1,"aw",%nobits
 1921              		.set	.LANCHOR2,. + 0
 1924              	step.1:
 1925 0000 00       		.space	1
 1926              		.section	.bss.tcpconnct_step,"aw",%nobits
 1929              	tcpconnct_step:
 1930 0000 00       		.space	1
 1931              		.section	.data.connectmsg_queue,"aw"
 1932              		.align	2
 1933              		.set	.LANCHOR1,. + 0
 1936              	connectmsg_queue:
 1937 0000 00000000 		.word	.LC7
 1938 0004 08000000 		.word	.LC8
 1939 0008 6400     		.short	100
 1940 000a 05       		.byte	5
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 47


 1941 000b 00       		.space	1
 1942 000c 0C000000 		.word	.LC9
 1943 0010 18000000 		.word	.LC10
 1944 0014 6400     		.short	100
 1945 0016 05       		.byte	5
 1946 0017 00       		.space	1
 1947 0018 20000000 		.word	.LC11
 1948 001c 2C000000 		.word	.LC12
 1949 0020 6400     		.short	100
 1950 0022 05       		.byte	5
 1951 0023 00       		.space	1
 1952 0024 38000000 		.word	.LC13
 1953 0028 44000000 		.word	.LC14
 1954 002c 6400     		.short	100
 1955 002e 05       		.byte	5
 1956 002f 00       		.space	1
 1957 0030 50000000 		.word	.LC15
 1958 0034 08000000 		.word	.LC8
 1959 0038 6400     		.short	100
 1960 003a 05       		.byte	5
 1961 003b 00       		.space	1
 1962 003c 70000000 		.word	.LC16
 1963 0040 08000000 		.word	.LC8
 1964 0044 6400     		.short	100
 1965 0046 05       		.byte	5
 1966 0047 00       		.space	1
 1967 0048 80000000 		.word	.LC17
 1968 004c 08000000 		.word	.LC8
 1969 0050 6400     		.short	100
 1970 0052 05       		.byte	5
 1971 0053 00       		.space	1
 1972 0054 00000000 		.word	tcp_connect
 1973 0058 90000000 		.word	.LC18
 1974 005c 6400     		.short	100
 1975 005e 05       		.byte	5
 1976 005f 00       		.space	1
 1977              		.section	.data.ec2x_buff,"aw"
 1978              		.align	2
 1981              	ec2x_buff:
 1982 0000 FF00     		.ascii	"\377\000"
 1983 0002 00000000 		.space	198
 1983      00000000 
 1983      00000000 
 1983      00000000 
 1983      00000000 
 1984              		.section	.data.ec2x_dev,"aw"
 1985              		.align	2
 1986              		.set	.LANCHOR0,. + 0
 1989              	ec2x_dev:
 1990 0000 75617274 		.ascii	"uart1/ec200s\000"
 1990      312F6563 
 1990      32303073 
 1990      00
 1991 000d 0000     		.space	2
 1992 000f 00       		.space	1
 1993 0010 00000000 		.word	huart1
 1994 0014 00000048 		.word	1207959552
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 48


 1995 0018 0010     		.short	4096
 1996 001a 0000     		.space	2
 1997 001c 00000048 		.word	1207959552
 1998 0020 0001     		.short	256
 1999 0022 0000     		.space	2
 2000 0024 00000048 		.word	1207959552
 2001 0028 0008     		.short	2048
 2002 002a 0000     		.space	2
 2003 002c 00       		.byte	0
 2004 002d 000000   		.space	3
 2005 0030 00000000 		.word	ec2x_buff
 2006 0034 0000     		.short	0
 2007 0036 0000     		.short	0
 2008 0038 0000     		.short	0
 2009 003a C800     		.short	200
 2010              		.section	.data.tcp_connect,"aw"
 2011              		.align	2
 2014              	tcp_connect:
 2015 0000 41542B51 		.ascii	"AT+QIOPEN=1,0,\"TCP\",\"115.236.153.170\",52894,0,2"
 2015      494F5045 
 2015      4E3D312C 
 2015      302C2254 
 2015      4350222C 
 2016 002f 0D0A00   		.ascii	"\015\012\000"
 2017              		.section	.rodata.shellCmdec2x_send,"a"
 2018              		.align	2
 2021              	shellCmdec2x_send:
 2022 0000 65633278 		.ascii	"ec2x_send\000"
 2022      5F73656E 
 2022      6400
 2023              		.section	.rodata.shellDescec2x_send,"a"
 2024              		.align	2
 2027              	shellDescec2x_send:
 2028 0000 65633278 		.ascii	"ec2x test\000"
 2028      20746573 
 2028      7400
 2029              		.section	shellCommand,"a"
 2032              	shellCommandec2x_send:
 2033 0000 00210000 		.4byte	8448
 2034 0004 00000000 		.4byte	shellCmdec2x_send
 2035 0008 00000000 		.4byte	EC2x_Test
 2036 000c 00000000 		.4byte	shellDescec2x_send
 2037              		.text
 2038              	.Letext0:
 2039              		.file 2 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\
 2040              		.file 3 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\
 2041              		.file 4 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l431xx.h"
 2042              		.file 5 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l4xx.h"
 2043              		.file 6 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 2044              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_gpio.h"
 2045              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 2046              		.file 9 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_uart.h"
 2047              		.file 10 "FML/Inc/EC2x.h"
 2048              		.file 11 "ThirdParty/Letter-shell/Inc/shell.h"
 2049              		.file 12 "HAL/Inc/usart.h"
 2050              		.file 13 "ThirdParty/Letter-shell/Inc/shell_port.h"
 2051              		.file 14 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 49


 2052              		.file 15 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
 2053              		.file 16 "<built-in>"
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 50


DEFINED SYMBOLS
                            *ABS*:00000000 EC2x.c
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:20     .text.ec2x_io_init:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:26     .text.ec2x_io_init:00000000 ec2x_io_init
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:165    .text.ec2x_io_init:00000090 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:170    .text.ec2x_open:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:176    .text.ec2x_open:00000000 ec2x_open
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:244    .text.ec2x_open:0000003c $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:249    .text.ec2x_write:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:255    .text.ec2x_write:00000000 ec2x_write
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:317    .text.ec2x_write:0000003c $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:322    .text.ec2x_read:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:328    .text.ec2x_read:00000000 ec2x_read
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:492    .text.ec2x_read:000000a8 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:498    .rodata.ec2x_handler.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:502    .text.ec2x_handler:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:508    .text.ec2x_handler:00000000 ec2x_handler
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:693    .text.ec2x_handler:000000e0 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:701    .text.ec2x_replymatch:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:707    .text.ec2x_replymatch:00000000 ec2x_replymatch
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:782    .text.ec2x_cmd_send:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:787    .text.ec2x_cmd_send:00000000 ec2x_cmd_send
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:910    .text.ec2x_cmd_send:00000074 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:916    .rodata.ec2x_reset.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:920    .text.ec2x_reset:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:925    .text.ec2x_reset:00000000 ec2x_reset
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:984    .text.ec2x_reset:00000038 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:990    .rodata.ec2x_tcp_connect.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:997    .text.ec2x_tcp_connect:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1003   .text.ec2x_tcp_connect:00000000 ec2x_tcp_connect
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1040   .text.ec2x_tcp_connect:0000001a $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1049   .text.ec2x_tcp_connect:0000002c $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1433   .text.ec2x_tcp_connect:00000290 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1441   .text.ec2x_tcp_connect:000002a4 $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1687   .text.ec2x_tcp_connect:00000424 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1697   .rodata.EC2x_Test.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1707   .text.EC2x_Test:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1713   .text.EC2x_Test:00000000 EC2x_Test
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1862   .text.EC2x_Test:000000b0 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:2032   shellCommand:00000000 shellCommandec2x_send
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:2027   .rodata.shellDescec2x_send:00000000 shellDescec2x_send
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:2021   .rodata.shellCmdec2x_send:00000000 shellCmdec2x_send
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1989   .data.ec2x_dev:00000000 ec2x_dev
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1936   .data.connectmsg_queue:00000000 connectmsg_queue
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1875   .rodata.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1929   .bss.tcpconnct_step:00000000 tcpconnct_step
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:2014   .data.tcp_connect:00000000 tcp_connect
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1981   .data.ec2x_buff:00000000 ec2x_buff
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1918   .bss.retry.0:00000000 retry.0
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1919   .bss.retry.0:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1924   .bss.step.1:00000000 step.1
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1925   .bss.step.1:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1930   .bss.tcpconnct_step:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1932   .data.connectmsg_queue:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1978   .data.ec2x_buff:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:1985   .data.ec2x_dev:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:2011   .data.tcp_connect:00000000 $d
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s 			page 51


C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:2018   .rodata.shellCmdec2x_send:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc6bOEyf.s:2024   .rodata.shellDescec2x_send:00000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_Init
HAL_GPIO_WritePin
Delay_ms
strcmp
HAL_UART_Transmit_IT
shellPrint
shell
memset
strstr
strlen
memcpy
huart1
