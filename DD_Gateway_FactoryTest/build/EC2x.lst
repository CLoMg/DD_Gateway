ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 4
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"EC2x.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.ec2x_io_init,"ax",%progbits
  20              		.align	1
  21              		.global	ec2x_io_init
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	ec2x_io_init:
  27              	.LVL0:
  28              	.LFB291:
  29              		.file 1 "FML/Src/EC2x.c"
   1:FML/Src/EC2x.c **** /**
   2:FML/Src/EC2x.c ****  ******************************************************************************
   3:FML/Src/EC2x.c **** *
   4:FML/Src/EC2x.c **** * @file   
   5:FML/Src/EC2x.c **** *
   6:FML/Src/EC2x.c **** * @brief   
   7:FML/Src/EC2x.c **** *
   8:FML/Src/EC2x.c **** * @attention
   9:FML/Src/EC2x.c **** *
  10:FML/Src/EC2x.c **** *Copyright (c) 2023 STMicroelectronics.
  11:FML/Src/EC2x.c **** *
  12:FML/Src/EC2x.c **** *All rights reserved.
  13:FML/Src/EC2x.c ****  ******************************************************************************
  14:FML/Src/EC2x.c **** */
  15:FML/Src/EC2x.c **** 
  16:FML/Src/EC2x.c **** 
  17:FML/Src/EC2x.c **** /*----------------------------------include-----------------------------------*/
  18:FML/Src/EC2x.c **** #include "EC2x.h"
  19:FML/Src/EC2x.c **** #include "usart.h"
  20:FML/Src/EC2x.c **** #include "timer.h"
  21:FML/Src/EC2x.c **** #include "shell_port.h"
  22:FML/Src/EC2x.c **** #include <stdio.h>
  23:FML/Src/EC2x.c **** #include <string.h>
  24:FML/Src/EC2x.c **** #include <stdlib.h>
  25:FML/Src/EC2x.c **** #include "fsm.h"
  26:FML/Src/EC2x.c **** #include "queue.h"
  27:FML/Src/EC2x.c **** /*-----------------------------------macro------------------------------------*/
  28:FML/Src/EC2x.c **** #define BUFF_LEN 200
  29:FML/Src/EC2x.c **** /*----------------------------------typedef-----------------------------------*/
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 2


  30:FML/Src/EC2x.c **** 
  31:FML/Src/EC2x.c **** 
  32:FML/Src/EC2x.c **** /*----------------------------------variable----------------------------------*/
  33:FML/Src/EC2x.c **** uint8_t ec2x_buff[BUFF_LEN]={0xff,};
  34:FML/Src/EC2x.c **** 
  35:FML/Src/EC2x.c **** //定义tcp连接字符串
  36:FML/Src/EC2x.c **** //uint8_t tcp_connect[]="AT+QIOPEN=1,0,\"TCP\",\"115.236.153.170\",52894,0,0\r\n";
  37:FML/Src/EC2x.c **** uint8_t tcp_connect[]="AT+QIOPEN=1,0,\"TCP\",\"47.108.254.101\",7002,0,0\r\n";
  38:FML/Src/EC2x.c **** //定义tcp连接指令队列
  39:FML/Src/EC2x.c **** uint8_t tcpconnct_step = 0;
  40:FML/Src/EC2x.c **** ATMsg_TypeDef connectmsg_queue[] = {
  41:FML/Src/EC2x.c ****     {"AT\r\n","OK",200,5},
  42:FML/Src/EC2x.c ****     {"ATE0\r\n","OK",200,5},
  43:FML/Src/EC2x.c ****     {"AT+CPIN?\r\n","READY",500,5},
  44:FML/Src/EC2x.c ****     {"AT+CREG?\r\n","+CREG: 0,1", 500, 5},
  45:FML/Src/EC2x.c ****     {"AT+CGREG?\r\n","+CGREG: 0,1", 500, 5},
  46:FML/Src/EC2x.c ****     {"AT+QICSGP=1,1,\"CMNET\",\"\",\"\",1\r\n","OK", 500, 5},
  47:FML/Src/EC2x.c ****     {"AT+QIDEACT=1\r\n", "OK", 500, 5},
  48:FML/Src/EC2x.c ****     {"AT+QIACT=1\r\n", "OK", 500, 5},
  49:FML/Src/EC2x.c ****     {tcp_connect, "OK", 500, 5},
  50:FML/Src/EC2x.c **** };
  51:FML/Src/EC2x.c **** 
  52:FML/Src/EC2x.c **** static uint8_t reset_times = 0;
  53:FML/Src/EC2x.c **** 
  54:FML/Src/EC2x.c **** /*----------------------------------typedef-----------------------------------*/
  55:FML/Src/EC2x.c **** 
  56:FML/Src/EC2x.c **** EC2x_HandleTypeDef ec2x_dev[]=
  57:FML/Src/EC2x.c **** {
  58:FML/Src/EC2x.c ****     {
  59:FML/Src/EC2x.c ****         "uart1/ec200s",
  60:FML/Src/EC2x.c ****         &huart1,
  61:FML/Src/EC2x.c ****         GPIOA,
  62:FML/Src/EC2x.c ****         GPIO_PIN_12,
  63:FML/Src/EC2x.c ****         GPIOA,
  64:FML/Src/EC2x.c ****         GPIO_PIN_8,
  65:FML/Src/EC2x.c ****         GPIOA,
  66:FML/Src/EC2x.c ****         GPIO_PIN_11,
  67:FML/Src/EC2x.c ****         {
  68:FML/Src/EC2x.c ****             0,
  69:FML/Src/EC2x.c ****            ec2x_buff,
  70:FML/Src/EC2x.c ****             0,
  71:FML/Src/EC2x.c ****             0,
  72:FML/Src/EC2x.c ****             0,
  73:FML/Src/EC2x.c ****             BUFF_LEN 
  74:FML/Src/EC2x.c ****         }
  75:FML/Src/EC2x.c ****     }
  76:FML/Src/EC2x.c **** };
  77:FML/Src/EC2x.c **** /*-------------------------------------os-------------------------------------*/
  78:FML/Src/EC2x.c **** 
  79:FML/Src/EC2x.c **** /*----------------------------------function----------------------------------*/
  80:FML/Src/EC2x.c **** 
  81:FML/Src/EC2x.c **** /**
  82:FML/Src/EC2x.c ****  * @brief 设备初始化函数
  83:FML/Src/EC2x.c ****  * 
  84:FML/Src/EC2x.c ****  */
  85:FML/Src/EC2x.c **** void ec2x_io_init(EC2x_HandleTypeDef *device)
  86:FML/Src/EC2x.c **** {
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 3


  30              		.loc 1 86 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 24
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  87:FML/Src/EC2x.c ****      GPIO_InitTypeDef GPIO_InitStruct = {0};
  34              		.loc 1 87 6 view .LVU1
  86:FML/Src/EC2x.c ****      GPIO_InitTypeDef GPIO_InitStruct = {0};
  35              		.loc 1 86 1 is_stmt 0 view .LVU2
  36 0000 70B5     		push	{r4, r5, r6, lr}
  37              	.LCFI0:
  38              		.cfi_def_cfa_offset 16
  39              		.cfi_offset 4, -16
  40              		.cfi_offset 5, -12
  41              		.cfi_offset 6, -8
  42              		.cfi_offset 14, -4
  43              		.loc 1 87 23 view .LVU3
  44 0002 0025     		movs	r5, #0
  86:FML/Src/EC2x.c ****      GPIO_InitTypeDef GPIO_InitStruct = {0};
  45              		.loc 1 86 1 view .LVU4
  46 0004 86B0     		sub	sp, sp, #24
  47              	.LCFI1:
  48              		.cfi_def_cfa_offset 40
  49              		.loc 1 87 23 view .LVU5
  50 0006 CDE90355 		strd	r5, r5, [sp, #12]
  51              	.LBB3:
  88:FML/Src/EC2x.c ****     
  89:FML/Src/EC2x.c ****     // 使能UART和GPIO时钟
  90:FML/Src/EC2x.c ****     //__HAL_RCC_UARTX_CLK_ENABLE(); // 替换为实际的UART时钟
  91:FML/Src/EC2x.c ****     __HAL_RCC_GPIOA_CLK_ENABLE(); // 替换为实际的GPIO时钟
  52              		.loc 1 91 5 view .LVU6
  53 000a 204B     		ldr	r3, .L2
  54              	.LBE3:
  87:FML/Src/EC2x.c ****     
  55              		.loc 1 87 23 view .LVU7
  56 000c 0595     		str	r5, [sp, #20]
  57              		.loc 1 91 5 is_stmt 1 view .LVU8
  58              	.LBB4:
  59              		.loc 1 91 5 view .LVU9
  60              		.loc 1 91 5 view .LVU10
  61 000e DA6C     		ldr	r2, [r3, #76]
  62 0010 42F00102 		orr	r2, r2, #1
  63 0014 DA64     		str	r2, [r3, #76]
  64              		.loc 1 91 5 view .LVU11
  65 0016 DB6C     		ldr	r3, [r3, #76]
  66 0018 03F00103 		and	r3, r3, #1
  67              	.LBE4:
  86:FML/Src/EC2x.c ****      GPIO_InitTypeDef GPIO_InitStruct = {0};
  68              		.loc 1 86 1 is_stmt 0 view .LVU12
  69 001c 0446     		mov	r4, r0
  70              	.LBB5:
  71              		.loc 1 91 5 view .LVU13
  72 001e 0093     		str	r3, [sp]
  73              		.loc 1 91 5 is_stmt 1 view .LVU14
  74              	.LBE5:
  92:FML/Src/EC2x.c ****     
  93:FML/Src/EC2x.c ****     // 配置GPIO引脚
  94:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->reset_pin;
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 4


  95:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  75              		.loc 1 95 26 is_stmt 0 view .LVU15
  76 0020 0126     		movs	r6, #1
  77              	.LBB6:
  91:FML/Src/EC2x.c ****     
  78              		.loc 1 91 5 view .LVU16
  79 0022 009B     		ldr	r3, [sp]
  80              	.LBE6:
  91:FML/Src/EC2x.c ****     
  81              		.loc 1 91 5 is_stmt 1 view .LVU17
  94:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  82              		.loc 1 94 5 view .LVU18
  94:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  83              		.loc 1 94 33 is_stmt 0 view .LVU19
  84 0024 038C     		ldrh	r3, [r0, #32]
  96:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
  97:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  98:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->reset_port, &GPIO_InitStruct);
  85              		.loc 1 98 5 view .LVU20
  86 0026 C069     		ldr	r0, [r0, #28]
  87              	.LVL1:
  94:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  88              		.loc 1 94 33 view .LVU21
  89 0028 0193     		str	r3, [sp, #4]
  95:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
  90              		.loc 1 95 5 is_stmt 1 view .LVU22
  91              		.loc 1 98 5 is_stmt 0 view .LVU23
  92 002a 01A9     		add	r1, sp, #4
  95:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
  93              		.loc 1 95 26 view .LVU24
  94 002c 0296     		str	r6, [sp, #8]
  96:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
  95              		.loc 1 96 5 is_stmt 1 view .LVU25
  97:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->reset_port, &GPIO_InitStruct);
  96              		.loc 1 97 5 view .LVU26
  97              		.loc 1 98 5 view .LVU27
  98 002e FFF7FEFF 		bl	HAL_GPIO_Init
  99              	.LVL2:
  99:FML/Src/EC2x.c **** 
 100:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->wake_pin;
 100              		.loc 1 100 5 view .LVU28
 101              		.loc 1 100 33 is_stmt 0 view .LVU29
 102 0032 238D     		ldrh	r3, [r4, #40]
 101:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 102:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 103:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 104:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->wake_port, &GPIO_InitStruct);
 103              		.loc 1 104 5 view .LVU30
 104 0034 606A     		ldr	r0, [r4, #36]
 105 0036 01A9     		add	r1, sp, #4
 101:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 106              		.loc 1 101 26 view .LVU31
 107 0038 CDE90136 		strd	r3, r6, [sp, #4]
 102:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 108              		.loc 1 102 5 is_stmt 1 view .LVU32
 103:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->wake_port, &GPIO_InitStruct);
 109              		.loc 1 103 27 is_stmt 0 view .LVU33
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 5


 110 003c CDE90355 		strd	r5, r5, [sp, #12]
 111              		.loc 1 104 5 is_stmt 1 view .LVU34
 112 0040 FFF7FEFF 		bl	HAL_GPIO_Init
 113              	.LVL3:
 105:FML/Src/EC2x.c **** 
 106:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->pwren_pin;
 114              		.loc 1 106 5 view .LVU35
 115              		.loc 1 106 33 is_stmt 0 view .LVU36
 116 0044 238B     		ldrh	r3, [r4, #24]
 107:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 108:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 109:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 110:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->pwren_port, &GPIO_InitStruct);
 117              		.loc 1 110 5 view .LVU37
 118 0046 6069     		ldr	r0, [r4, #20]
 119 0048 01A9     		add	r1, sp, #4
 107:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 120              		.loc 1 107 26 view .LVU38
 121 004a CDE90136 		strd	r3, r6, [sp, #4]
 108:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 122              		.loc 1 108 5 is_stmt 1 view .LVU39
 109:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->pwren_port, &GPIO_InitStruct);
 123              		.loc 1 109 27 is_stmt 0 view .LVU40
 124 004e CDE90355 		strd	r5, r5, [sp, #12]
 125              		.loc 1 110 5 is_stmt 1 view .LVU41
 126 0052 FFF7FEFF 		bl	HAL_GPIO_Init
 127              	.LVL4:
 111:FML/Src/EC2x.c ****     
 112:FML/Src/EC2x.c ****     
 113:FML/Src/EC2x.c ****     // 初始化复位引脚为高电平
 114:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->reset_port, device->reset_pin, GPIO_PIN_SET);
 128              		.loc 1 114 5 view .LVU42
 129 0056 218C     		ldrh	r1, [r4, #32]
 130 0058 E069     		ldr	r0, [r4, #28]
 131 005a 3246     		mov	r2, r6
 132 005c FFF7FEFF 		bl	HAL_GPIO_WritePin
 133              	.LVL5:
 115:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->wake_port, device->wake_pin, GPIO_PIN_SET);
 134              		.loc 1 115 5 view .LVU43
 135 0060 218D     		ldrh	r1, [r4, #40]
 136 0062 606A     		ldr	r0, [r4, #36]
 137 0064 3246     		mov	r2, r6
 138 0066 FFF7FEFF 		bl	HAL_GPIO_WritePin
 139              	.LVL6:
 116:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_SET);
 140              		.loc 1 116 5 view .LVU44
 141 006a 218B     		ldrh	r1, [r4, #24]
 142 006c 6069     		ldr	r0, [r4, #20]
 143 006e 3246     		mov	r2, r6
 144 0070 FFF7FEFF 		bl	HAL_GPIO_WritePin
 145              	.LVL7:
 117:FML/Src/EC2x.c ****     Delay_ms(1000);
 146              		.loc 1 117 5 view .LVU45
 147 0074 4FF47A70 		mov	r0, #1000
 148 0078 FFF7FEFF 		bl	Delay_ms
 149              	.LVL8:
 118:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_RESET);
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 6


 150              		.loc 1 118 5 view .LVU46
 151 007c 218B     		ldrh	r1, [r4, #24]
 152 007e 6069     		ldr	r0, [r4, #20]
 153 0080 2A46     		mov	r2, r5
 154 0082 FFF7FEFF 		bl	HAL_GPIO_WritePin
 155              	.LVL9:
 119:FML/Src/EC2x.c **** }
 156              		.loc 1 119 1 is_stmt 0 view .LVU47
 157 0086 06B0     		add	sp, sp, #24
 158              	.LCFI2:
 159              		.cfi_def_cfa_offset 16
 160              		@ sp needed
 161 0088 70BD     		pop	{r4, r5, r6, pc}
 162              	.LVL10:
 163              	.L3:
 164              		.loc 1 119 1 view .LVU48
 165 008a 00BF     		.align	2
 166              	.L2:
 167 008c 00100240 		.word	1073876992
 168              		.cfi_endproc
 169              	.LFE291:
 171              		.section	.text.ec2x_write,"ax",%progbits
 172              		.align	1
 173              		.global	ec2x_write
 174              		.syntax unified
 175              		.thumb
 176              		.thumb_func
 178              	ec2x_write:
 179              	.LVL11:
 180              	.LFB294:
 120:FML/Src/EC2x.c **** /**
 121:FML/Src/EC2x.c ****  * @brief 通过POWEREN引脚，对模块进行掉电复位
 122:FML/Src/EC2x.c ****  * 
 123:FML/Src/EC2x.c ****  * @param fd 
 124:FML/Src/EC2x.c ****  * @return int 
 125:FML/Src/EC2x.c ****  */
 126:FML/Src/EC2x.c **** int ec2x_reset(int fd){
 127:FML/Src/EC2x.c ****     fd = 0;
 128:FML/Src/EC2x.c ****     int err_code = 0;
 129:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 130:FML/Src/EC2x.c ****         return (err_code = -1);
 131:FML/Src/EC2x.c ****     else{
 132:FML/Src/EC2x.c ****         EC2x_HandleTypeDef *device = &ec2x_dev[fd];
 133:FML/Src/EC2x.c ****         HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_SET);
 134:FML/Src/EC2x.c ****         Delay_ms(500);
 135:FML/Src/EC2x.c ****         HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_RESET);
 136:FML/Src/EC2x.c ****     }
 137:FML/Src/EC2x.c ****     reset_times++;
 138:FML/Src/EC2x.c ****     return(ec2x_cmd_send(fd,NULL,0,"RDY\r\n",20000));
 139:FML/Src/EC2x.c **** }
 140:FML/Src/EC2x.c **** 
 141:FML/Src/EC2x.c **** /**
 142:FML/Src/EC2x.c ****  * @brief 设备文件open函数
 143:FML/Src/EC2x.c ****  * 
 144:FML/Src/EC2x.c ****  * @param dev_name 
 145:FML/Src/EC2x.c ****  * @return int 
 146:FML/Src/EC2x.c ****  *         返回设备文件索引，未查找到则返回-1
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 7


 147:FML/Src/EC2x.c ****  */
 148:FML/Src/EC2x.c **** int ec2x_open(char *dev_name)
 149:FML/Src/EC2x.c **** {
 150:FML/Src/EC2x.c ****     uint8_t i = 0;
 151:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 152:FML/Src/EC2x.c ****     {
 153:FML/Src/EC2x.c ****         if(strcmp(dev_name,ec2x_dev[i].dev_name) == 0)
 154:FML/Src/EC2x.c ****         {
 155:FML/Src/EC2x.c ****             ec2x_io_init(&ec2x_dev[i]);
 156:FML/Src/EC2x.c ****             if(ec2x_reset(i))
 157:FML/Src/EC2x.c ****                 shellPrint(&shell,"ec2x initial OK\r\n");
 158:FML/Src/EC2x.c ****             else
 159:FML/Src/EC2x.c ****                 shellPrint(&shell,"ec2x initial not Failed\r\n");
 160:FML/Src/EC2x.c ****             return i;
 161:FML/Src/EC2x.c ****         }
 162:FML/Src/EC2x.c ****     }
 163:FML/Src/EC2x.c ****     return -1;
 164:FML/Src/EC2x.c **** };
 165:FML/Src/EC2x.c **** 
 166:FML/Src/EC2x.c **** /**
 167:FML/Src/EC2x.c ****  * @brief 设备文件close函数
 168:FML/Src/EC2x.c ****  * 
 169:FML/Src/EC2x.c ****  * @param fd 
 170:FML/Src/EC2x.c ****  * @return int 
 171:FML/Src/EC2x.c ****  */
 172:FML/Src/EC2x.c **** int ec2x_close(int fd);
 173:FML/Src/EC2x.c **** 
 174:FML/Src/EC2x.c **** /**
 175:FML/Src/EC2x.c ****  * @brief 设备文件写入函数
 176:FML/Src/EC2x.c ****  * 
 177:FML/Src/EC2x.c ****  * @param fd 
 178:FML/Src/EC2x.c ****  * @param tx_buff 
 179:FML/Src/EC2x.c ****  * @param len 
 180:FML/Src/EC2x.c ****  * @return int 
 181:FML/Src/EC2x.c ****  *         设备号无效返回-1
 182:FML/Src/EC2x.c ****  *         写入失败返回 0
 183:FML/Src/EC2x.c ****  *          写入成功返回1
 184:FML/Src/EC2x.c ****  *         
 185:FML/Src/EC2x.c ****  */
 186:FML/Src/EC2x.c **** int ec2x_write(int fd,uint8_t *tx_buff,uint16_t len){
 181              		.loc 1 186 53 is_stmt 1 view -0
 182              		.cfi_startproc
 183              		@ args = 0, pretend = 0, frame = 0
 184              		@ frame_needed = 0, uses_anonymous_args = 0
 187:FML/Src/EC2x.c ****     int err_code = 0;
 185              		.loc 1 187 5 view .LVU50
 188:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 186              		.loc 1 188 5 view .LVU51
 186:FML/Src/EC2x.c ****     int err_code = 0;
 187              		.loc 1 186 53 is_stmt 0 view .LVU52
 188 0000 10B5     		push	{r4, lr}
 189              	.LCFI3:
 190              		.cfi_def_cfa_offset 8
 191              		.cfi_offset 4, -8
 192              		.cfi_offset 14, -4
 193              		.loc 1 188 7 view .LVU53
 194 0002 60B9     		cbnz	r0, .L7
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 8


 195              	.LBB9:
 196              	.LBI9:
 186:FML/Src/EC2x.c ****     int err_code = 0;
 197              		.loc 1 186 5 is_stmt 1 view .LVU54
 198              	.LVL12:
 199              	.LBB10:
 189:FML/Src/EC2x.c ****         return (err_code = -1);
 190:FML/Src/EC2x.c ****     else{
 191:FML/Src/EC2x.c ****         err_code =  HAL_UART_Transmit_IT(ec2x_dev[fd].huart, tx_buff,len);
 200              		.loc 1 191 9 view .LVU55
 201              		.loc 1 191 21 is_stmt 0 view .LVU56
 202 0004 074C     		ldr	r4, .L10
 203 0006 2069     		ldr	r0, [r4, #16]
 204              	.LVL13:
 205              		.loc 1 191 21 view .LVU57
 206 0008 FFF7FEFF 		bl	HAL_UART_Transmit_IT
 207              	.LVL14:
 192:FML/Src/EC2x.c ****         while(__HAL_UART_GET_FLAG(ec2x_dev[fd].huart,UART_FLAG_TC) != SET);
 208              		.loc 1 192 9 is_stmt 1 view .LVU58
 209              		.loc 1 192 15 is_stmt 0 view .LVU59
 210 000c 2369     		ldr	r3, [r4, #16]
 211 000e 1A68     		ldr	r2, [r3]
 212              	.L6:
 213              		.loc 1 192 75 is_stmt 1 view .LVU60
 214              		.loc 1 192 14 view .LVU61
 215              		.loc 1 192 15 is_stmt 0 view .LVU62
 216 0010 D369     		ldr	r3, [r2, #28]
 217              		.loc 1 192 14 view .LVU63
 218 0012 5B06     		lsls	r3, r3, #25
 219 0014 FCD5     		bpl	.L6
 193:FML/Src/EC2x.c ****         return(!err_code);
 220              		.loc 1 193 9 is_stmt 1 view .LVU64
 221              		.loc 1 193 16 is_stmt 0 view .LVU65
 222 0016 B0FA80F0 		clz	r0, r0
 223              	.LVL15:
 224              		.loc 1 193 16 view .LVU66
 225 001a 4009     		lsrs	r0, r0, #5
 226              	.LVL16:
 227              	.L4:
 228              		.loc 1 193 16 view .LVU67
 229              	.LBE10:
 230              	.LBE9:
 194:FML/Src/EC2x.c ****     }
 195:FML/Src/EC2x.c **** };
 231              		.loc 1 195 1 view .LVU68
 232 001c 10BD     		pop	{r4, pc}
 233              	.LVL17:
 234              	.L7:
 189:FML/Src/EC2x.c ****     else{
 235              		.loc 1 189 26 view .LVU69
 236 001e 4FF0FF30 		mov	r0, #-1
 237              	.LVL18:
 189:FML/Src/EC2x.c ****     else{
 238              		.loc 1 189 26 view .LVU70
 239 0022 FBE7     		b	.L4
 240              	.L11:
 241              		.align	2
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 9


 242              	.L10:
 243 0024 00000000 		.word	.LANCHOR0
 244              		.cfi_endproc
 245              	.LFE294:
 247              		.section	.text.ec2x_read,"ax",%progbits
 248              		.align	1
 249              		.global	ec2x_read
 250              		.syntax unified
 251              		.thumb
 252              		.thumb_func
 254              	ec2x_read:
 255              	.LVL19:
 256              	.LFB295:
 196:FML/Src/EC2x.c **** /**
 197:FML/Src/EC2x.c ****  * @brief 设备文件读取函数
 198:FML/Src/EC2x.c ****  *        读取环形缓冲区指定长度数据
 199:FML/Src/EC2x.c ****  * 
 200:FML/Src/EC2x.c ****  * @param fd 
 201:FML/Src/EC2x.c ****  * @param rx_buff 
 202:FML/Src/EC2x.c ****  * @param len 
 203:FML/Src/EC2x.c ****  * @return int 
 204:FML/Src/EC2x.c ****  *         -1 接口错误
 205:FML/Src/EC2x.c ****  *          0 读取失败
 206:FML/Src/EC2x.c ****  *          n 读取成功字节数
 207:FML/Src/EC2x.c ****  */
 208:FML/Src/EC2x.c **** int ec2x_read(int fd,uint8_t *rx_buff,uint16_t len){
 257              		.loc 1 208 52 is_stmt 1 view -0
 258              		.cfi_startproc
 259              		@ args = 0, pretend = 0, frame = 0
 260              		@ frame_needed = 0, uses_anonymous_args = 0
 209:FML/Src/EC2x.c ****     uint8_t *dest = rx_buff;
 261              		.loc 1 209 5 view .LVU72
 210:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 262              		.loc 1 210 5 view .LVU73
 208:FML/Src/EC2x.c ****     uint8_t *dest = rx_buff;
 263              		.loc 1 208 52 is_stmt 0 view .LVU74
 264 0000 70B5     		push	{r4, r5, r6, lr}
 265              	.LCFI4:
 266              		.cfi_def_cfa_offset 16
 267              		.cfi_offset 4, -16
 268              		.cfi_offset 5, -12
 269              		.cfi_offset 6, -8
 270              		.cfi_offset 14, -4
 208:FML/Src/EC2x.c ****     uint8_t *dest = rx_buff;
 271              		.loc 1 208 52 view .LVU75
 272 0002 1646     		mov	r6, r2
 273              		.loc 1 210 7 view .LVU76
 274 0004 0546     		mov	r5, r0
 275 0006 58BB     		cbnz	r0, .L18
 276              	.LBB11:
 211:FML/Src/EC2x.c ****         return -1;
 212:FML/Src/EC2x.c ****     else{
 213:FML/Src/EC2x.c ****         uint16_t j = 0;
 277              		.loc 1 213 9 is_stmt 1 view .LVU77
 278              	.LVL20:
 214:FML/Src/EC2x.c ****         
 215:FML/Src/EC2x.c ****         RingBuffer_TypeDef *src = &ec2x_dev[fd].msg;
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 10


 279              		.loc 1 215 9 view .LVU78
 216:FML/Src/EC2x.c ****         //如果队列被上锁了，则等待100ms
 217:FML/Src/EC2x.c ****         if(src->block == 1)
 280              		.loc 1 217 9 view .LVU79
 281              		.loc 1 217 15 is_stmt 0 view .LVU80
 282 0008 174C     		ldr	r4, .L19
 283              		.loc 1 217 11 view .LVU81
 284 000a 94F82C30 		ldrb	r3, [r4, #44]	@ zero_extendqisi2
 285 000e 43B1     		cbz	r3, .L14
 218:FML/Src/EC2x.c ****         {
 219:FML/Src/EC2x.c ****             Delay_ms(100);
 286              		.loc 1 219 13 is_stmt 1 view .LVU82
 287 0010 6420     		movs	r0, #100
 288              	.LVL21:
 289              		.loc 1 219 13 is_stmt 0 view .LVU83
 290 0012 FFF7FEFF 		bl	Delay_ms
 291              	.LVL22:
 220:FML/Src/EC2x.c ****             if(src->block == 1)
 292              		.loc 1 220 13 is_stmt 1 view .LVU84
 293              		.loc 1 220 15 is_stmt 0 view .LVU85
 294 0016 94F82C30 		ldrb	r3, [r4, #44]	@ zero_extendqisi2
 295 001a 03B9     		cbnz	r3, .L13
 296              	.LVL23:
 297              	.L15:
 221:FML/Src/EC2x.c ****                 return 0;
 222:FML/Src/EC2x.c ****         }
 223:FML/Src/EC2x.c ****         else{
 224:FML/Src/EC2x.c ****             src->block = 1;
 225:FML/Src/EC2x.c ****             if(len > src->size)
 226:FML/Src/EC2x.c ****                 len = src->size;
 227:FML/Src/EC2x.c ****             for(j = 0 ; j < len; j++){
 228:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 229:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 230:FML/Src/EC2x.c ****                 src->size--;
 231:FML/Src/EC2x.c ****             }
 232:FML/Src/EC2x.c ****             src->block = 0;
 233:FML/Src/EC2x.c ****         }
 234:FML/Src/EC2x.c ****         return len;
 298              		.loc 1 234 9 is_stmt 1 view .LVU86
 299              		.loc 1 234 16 is_stmt 0 view .LVU87
 300 001c 3546     		mov	r5, r6
 301              	.LVL24:
 302              	.L13:
 303              		.loc 1 234 16 view .LVU88
 304              	.LBE11:
 235:FML/Src/EC2x.c ****     }
 236:FML/Src/EC2x.c **** };
 305              		.loc 1 236 1 view .LVU89
 306 001e 2846     		mov	r0, r5
 307 0020 70BD     		pop	{r4, r5, r6, pc}
 308              	.LVL25:
 309              	.L14:
 310              	.LBB12:
 224:FML/Src/EC2x.c ****             if(len > src->size)
 311              		.loc 1 224 13 is_stmt 1 view .LVU90
 224:FML/Src/EC2x.c ****             if(len > src->size)
 312              		.loc 1 224 24 is_stmt 0 view .LVU91
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 11


 313 0022 0123     		movs	r3, #1
 314 0024 84F82C30 		strb	r3, [r4, #44]
 225:FML/Src/EC2x.c ****                 len = src->size;
 315              		.loc 1 225 13 is_stmt 1 view .LVU92
 316 0028 238F     		ldrh	r3, [r4, #56]
 317 002a 9A42     		cmp	r2, r3
 318 002c 28BF     		it	cs
 319 002e 1E46     		movcs	r6, r3
 320              	.LVL26:
 227:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 321              		.loc 1 227 13 view .LVU93
 227:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 322              		.loc 1 227 13 is_stmt 0 view .LVU94
 323 0030 8819     		adds	r0, r1, r6
 324              	.LVL27:
 325              	.L16:
 227:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 326              		.loc 1 227 25 is_stmt 1 discriminator 1 view .LVU95
 227:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 327              		.loc 1 227 13 is_stmt 0 discriminator 1 view .LVU96
 328 0032 8142     		cmp	r1, r0
 329 0034 03D1     		bne	.L17
 232:FML/Src/EC2x.c ****         }
 330              		.loc 1 232 13 is_stmt 1 view .LVU97
 232:FML/Src/EC2x.c ****         }
 331              		.loc 1 232 24 is_stmt 0 view .LVU98
 332 0036 0023     		movs	r3, #0
 333 0038 84F82C30 		strb	r3, [r4, #44]
 334 003c EEE7     		b	.L15
 335              	.L17:
 228:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 336              		.loc 1 228 17 is_stmt 1 discriminator 3 view .LVU99
 228:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 337              		.loc 1 228 40 is_stmt 0 discriminator 3 view .LVU100
 338 003e A38E     		ldrh	r3, [r4, #52]
 228:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 339              		.loc 1 228 36 discriminator 3 view .LVU101
 340 0040 226B     		ldr	r2, [r4, #48]
 341 0042 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 228:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 342              		.loc 1 228 25 discriminator 3 view .LVU102
 343 0044 01F8013B 		strb	r3, [r1], #1
 344              	.LVL28:
 229:FML/Src/EC2x.c ****                 src->size--;
 345              		.loc 1 229 17 is_stmt 1 discriminator 3 view .LVU103
 229:FML/Src/EC2x.c ****                 src->size--;
 346              		.loc 1 229 33 is_stmt 0 discriminator 3 view .LVU104
 347 0048 A38E     		ldrh	r3, [r4, #52]
 229:FML/Src/EC2x.c ****                 src->size--;
 348              		.loc 1 229 50 discriminator 3 view .LVU105
 349 004a 628F     		ldrh	r2, [r4, #58]
 229:FML/Src/EC2x.c ****                 src->size--;
 350              		.loc 1 229 40 discriminator 3 view .LVU106
 351 004c 0133     		adds	r3, r3, #1
 229:FML/Src/EC2x.c ****                 src->size--;
 352              		.loc 1 229 45 discriminator 3 view .LVU107
 353 004e B3FBF2F5 		udiv	r5, r3, r2
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 12


 354 0052 02FB1533 		mls	r3, r2, r5, r3
 229:FML/Src/EC2x.c ****                 src->size--;
 355              		.loc 1 229 27 discriminator 3 view .LVU108
 356 0056 A386     		strh	r3, [r4, #52]	@ movhi
 230:FML/Src/EC2x.c ****             }
 357              		.loc 1 230 17 is_stmt 1 discriminator 3 view .LVU109
 230:FML/Src/EC2x.c ****             }
 358              		.loc 1 230 26 is_stmt 0 discriminator 3 view .LVU110
 359 0058 238F     		ldrh	r3, [r4, #56]
 360 005a 013B     		subs	r3, r3, #1
 361 005c 2387     		strh	r3, [r4, #56]	@ movhi
 227:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 362              		.loc 1 227 34 is_stmt 1 discriminator 3 view .LVU111
 363              	.LVL29:
 227:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 364              		.loc 1 227 34 is_stmt 0 discriminator 3 view .LVU112
 365 005e E8E7     		b	.L16
 366              	.LVL30:
 367              	.L18:
 227:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 368              		.loc 1 227 34 discriminator 3 view .LVU113
 369              	.LBE12:
 211:FML/Src/EC2x.c ****     else{
 370              		.loc 1 211 16 view .LVU114
 371 0060 4FF0FF35 		mov	r5, #-1
 372 0064 DBE7     		b	.L13
 373              	.L20:
 374 0066 00BF     		.align	2
 375              	.L19:
 376 0068 00000000 		.word	.LANCHOR0
 377              		.cfi_endproc
 378              	.LFE295:
 380              		.section	.rodata.ec2x_handler.str1.1,"aMS",%progbits,1
 381              	.LC0:
 382 0000 257300   		.ascii	"%s\000"
 383              		.section	.text.ec2x_handler,"ax",%progbits
 384              		.align	1
 385              		.global	ec2x_handler
 386              		.syntax unified
 387              		.thumb
 388              		.thumb_func
 390              	ec2x_handler:
 391              	.LVL31:
 392              	.LFB296:
 237:FML/Src/EC2x.c **** int ec2x_ioctl(int fd);
 238:FML/Src/EC2x.c **** 
 239:FML/Src/EC2x.c **** /**
 240:FML/Src/EC2x.c ****  * @brief 将串口接收数据copy到环形缓冲区，并更新缓冲区状态
 241:FML/Src/EC2x.c ****  * 
 242:FML/Src/EC2x.c ****  * @param huart 
 243:FML/Src/EC2x.c ****  * @param data 
 244:FML/Src/EC2x.c ****  * @param len 
 245:FML/Src/EC2x.c ****  */
 246:FML/Src/EC2x.c **** void ec2x_handler(UART_HandleTypeDef *huart,uint8_t *data,uint16_t len)
 247:FML/Src/EC2x.c **** {
 393              		.loc 1 247 1 is_stmt 1 view -0
 394              		.cfi_startproc
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 13


 395              		@ args = 0, pretend = 0, frame = 0
 396              		@ frame_needed = 0, uses_anonymous_args = 0
 248:FML/Src/EC2x.c ****     uint8_t i = 0,j = 0;
 397              		.loc 1 248 5 view .LVU116
 249:FML/Src/EC2x.c ****     shellPrint(&shell,"%s",data);
 398              		.loc 1 249 5 view .LVU117
 247:FML/Src/EC2x.c ****     uint8_t i = 0,j = 0;
 399              		.loc 1 247 1 is_stmt 0 view .LVU118
 400 0000 70B5     		push	{r4, r5, r6, lr}
 401              	.LCFI5:
 402              		.cfi_def_cfa_offset 16
 403              		.cfi_offset 4, -16
 404              		.cfi_offset 5, -12
 405              		.cfi_offset 6, -8
 406              		.cfi_offset 14, -4
 247:FML/Src/EC2x.c ****     uint8_t i = 0,j = 0;
 407              		.loc 1 247 1 view .LVU119
 408 0002 0646     		mov	r6, r0
 409 0004 0C46     		mov	r4, r1
 410              		.loc 1 249 5 view .LVU120
 411 0006 1B48     		ldr	r0, .L26
 412              	.LVL32:
 247:FML/Src/EC2x.c ****     uint8_t i = 0,j = 0;
 413              		.loc 1 247 1 view .LVU121
 414 0008 1546     		mov	r5, r2
 415              		.loc 1 249 5 view .LVU122
 416 000a 0A46     		mov	r2, r1
 417              	.LVL33:
 418              		.loc 1 249 5 view .LVU123
 419 000c 1A49     		ldr	r1, .L26+4
 420              	.LVL34:
 421              		.loc 1 249 5 view .LVU124
 422 000e FFF7FEFF 		bl	shellPrint
 423              	.LVL35:
 250:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 424              		.loc 1 250 5 is_stmt 1 view .LVU125
 425              		.loc 1 250 15 view .LVU126
 251:FML/Src/EC2x.c ****     {
 252:FML/Src/EC2x.c ****         if(huart == ec2x_dev[i].huart)
 426              		.loc 1 252 9 view .LVU127
 427              		.loc 1 252 32 is_stmt 0 view .LVU128
 428 0012 1A4B     		ldr	r3, .L26+8
 429              		.loc 1 252 11 view .LVU129
 430 0014 1A69     		ldr	r2, [r3, #16]
 431 0016 B242     		cmp	r2, r6
 432 0018 16D1     		bne	.L21
 433              	.LBB13:
 253:FML/Src/EC2x.c ****         {
 254:FML/Src/EC2x.c ****             RingBuffer_TypeDef *dest = &ec2x_dev[i].msg;
 434              		.loc 1 254 13 is_stmt 1 view .LVU130
 435              	.LVL36:
 255:FML/Src/EC2x.c ****             if(dest->block  == 0){
 436              		.loc 1 255 13 view .LVU131
 437              		.loc 1 255 15 is_stmt 0 view .LVU132
 438 001a 93F82C00 		ldrb	r0, [r3, #44]	@ zero_extendqisi2
 439 001e 98B9     		cbnz	r0, .L21
 256:FML/Src/EC2x.c ****                 dest->block = 1;
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 14


 440              		.loc 1 256 17 is_stmt 1 view .LVU133
 441              		.loc 1 256 29 is_stmt 0 view .LVU134
 442 0020 0122     		movs	r2, #1
 443 0022 83F82C20 		strb	r2, [r3, #44]
 257:FML/Src/EC2x.c ****                 for(j = 0 ; j < len; j++){
 444              		.loc 1 257 17 is_stmt 1 view .LVU135
 445              	.LVL37:
 446              	.L23:
 447              		.loc 1 257 29 discriminator 1 view .LVU136
 448              		.loc 1 257 31 is_stmt 0 discriminator 1 view .LVU137
 449 0026 C6B2     		uxtb	r6, r0
 450              		.loc 1 257 17 discriminator 1 view .LVU138
 451 0028 AE42     		cmp	r6, r5
 258:FML/Src/EC2x.c ****                    
 259:FML/Src/EC2x.c ****                     dest->data[dest->tail] = data[j];
 452              		.loc 1 259 36 discriminator 1 view .LVU139
 453 002a DA8E     		ldrh	r2, [r3, #54]
 257:FML/Src/EC2x.c ****                 for(j = 0 ; j < len; j++){
 454              		.loc 1 257 17 discriminator 1 view .LVU140
 455 002c 00F10101 		add	r1, r0, #1
 456 0030 0BD3     		bcc	.L24
 260:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 261:FML/Src/EC2x.c ****                     dest->size++;
 262:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 263:FML/Src/EC2x.c ****                 }
 264:FML/Src/EC2x.c ****                 if((dest->tail > dest->head)&&(dest->size == dest->capacity))
 457              		.loc 1 264 17 is_stmt 1 view .LVU141
 458              		.loc 1 264 19 is_stmt 0 view .LVU142
 459 0032 998E     		ldrh	r1, [r3, #52]
 460 0034 9142     		cmp	r1, r2
 461 0036 04D2     		bcs	.L25
 462              		.loc 1 264 45 discriminator 1 view .LVU143
 463 0038 188F     		ldrh	r0, [r3, #56]
 464              	.LVL38:
 465              		.loc 1 264 45 discriminator 1 view .LVU144
 466 003a 598F     		ldrh	r1, [r3, #58]
 467 003c 8842     		cmp	r0, r1
 265:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 468              		.loc 1 265 21 is_stmt 1 discriminator 1 view .LVU145
 469              		.loc 1 265 32 is_stmt 0 discriminator 1 view .LVU146
 470 003e 08BF     		it	eq
 471 0040 9A86     		strheq	r2, [r3, #52]	@ movhi
 472              	.L25:
 266:FML/Src/EC2x.c ****                 dest->block = 0;
 473              		.loc 1 266 17 is_stmt 1 view .LVU147
 474              		.loc 1 266 29 is_stmt 0 view .LVU148
 475 0042 0022     		movs	r2, #0
 476 0044 83F82C20 		strb	r2, [r3, #44]
 477              	.LVL39:
 478              		.loc 1 266 29 view .LVU149
 479              	.LBE13:
 250:FML/Src/EC2x.c ****     {
 480              		.loc 1 250 15 is_stmt 1 view .LVU150
 481              	.L21:
 267:FML/Src/EC2x.c ****             }
 268:FML/Src/EC2x.c ****         }
 269:FML/Src/EC2x.c ****     }
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 15


 270:FML/Src/EC2x.c **** }
 482              		.loc 1 270 1 is_stmt 0 view .LVU151
 483 0048 70BD     		pop	{r4, r5, r6, pc}
 484              	.LVL40:
 485              	.L24:
 486              	.LBB14:
 259:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 487              		.loc 1 259 21 is_stmt 1 discriminator 3 view .LVU152
 259:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 488              		.loc 1 259 44 is_stmt 0 discriminator 3 view .LVU153
 489 004a 186B     		ldr	r0, [r3, #48]
 490              	.LVL41:
 259:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 491              		.loc 1 259 50 discriminator 3 view .LVU154
 492 004c A65D     		ldrb	r6, [r4, r6]	@ zero_extendqisi2
 493              	.LVL42:
 259:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 494              		.loc 1 259 44 discriminator 3 view .LVU155
 495 004e 8654     		strb	r6, [r0, r2]
 260:FML/Src/EC2x.c ****                     dest->size++;
 496              		.loc 1 260 21 is_stmt 1 discriminator 3 view .LVU156
 260:FML/Src/EC2x.c ****                     dest->size++;
 497              		.loc 1 260 39 is_stmt 0 discriminator 3 view .LVU157
 498 0050 DA8E     		ldrh	r2, [r3, #54]
 260:FML/Src/EC2x.c ****                     dest->size++;
 499              		.loc 1 260 56 discriminator 3 view .LVU158
 500 0052 5E8F     		ldrh	r6, [r3, #58]
 260:FML/Src/EC2x.c ****                     dest->size++;
 501              		.loc 1 260 46 discriminator 3 view .LVU159
 502 0054 0132     		adds	r2, r2, #1
 260:FML/Src/EC2x.c ****                     dest->size++;
 503              		.loc 1 260 50 discriminator 3 view .LVU160
 504 0056 B2FBF6F0 		udiv	r0, r2, r6
 505 005a 06FB1022 		mls	r2, r6, r0, r2
 261:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 506              		.loc 1 261 31 discriminator 3 view .LVU161
 507 005e 188F     		ldrh	r0, [r3, #56]
 260:FML/Src/EC2x.c ****                     dest->size++;
 508              		.loc 1 260 32 discriminator 3 view .LVU162
 509 0060 DA86     		strh	r2, [r3, #54]	@ movhi
 261:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 510              		.loc 1 261 21 is_stmt 1 discriminator 3 view .LVU163
 262:FML/Src/EC2x.c ****                 }
 511              		.loc 1 262 21 discriminator 3 view .LVU164
 261:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 512              		.loc 1 261 31 is_stmt 0 discriminator 3 view .LVU165
 513 0062 0130     		adds	r0, r0, #1
 262:FML/Src/EC2x.c ****                 }
 514              		.loc 1 262 79 discriminator 3 view .LVU166
 515 0064 80B2     		uxth	r0, r0
 516 0066 B042     		cmp	r0, r6
 517 0068 28BF     		it	cs
 518 006a 3046     		movcs	r0, r6
 262:FML/Src/EC2x.c ****                 }
 519              		.loc 1 262 32 discriminator 3 view .LVU167
 520 006c 1887     		strh	r0, [r3, #56]	@ movhi
 257:FML/Src/EC2x.c ****                    
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 16


 521              		.loc 1 257 38 is_stmt 1 discriminator 3 view .LVU168
 522              	.LVL43:
 262:FML/Src/EC2x.c ****                 }
 523              		.loc 1 262 32 is_stmt 0 discriminator 3 view .LVU169
 524 006e 0846     		mov	r0, r1
 525 0070 D9E7     		b	.L23
 526              	.L27:
 527 0072 00BF     		.align	2
 528              	.L26:
 529 0074 00000000 		.word	shell
 530 0078 00000000 		.word	.LC0
 531 007c 00000000 		.word	.LANCHOR0
 532              	.LBE14:
 533              		.cfi_endproc
 534              	.LFE296:
 536              		.section	.text.ec2x_replymatch,"ax",%progbits
 537              		.align	1
 538              		.global	ec2x_replymatch
 539              		.syntax unified
 540              		.thumb
 541              		.thumb_func
 543              	ec2x_replymatch:
 544              	.LVL44:
 545              	.LFB297:
 271:FML/Src/EC2x.c **** 
 272:FML/Src/EC2x.c **** 
 273:FML/Src/EC2x.c **** /**
 274:FML/Src/EC2x.c ****  * @brief 回复匹配函数
 275:FML/Src/EC2x.c ****  *        1）匹配成功，则插入回复成功事件
 276:FML/Src/EC2x.c ****  *        2.1）匹配失败，超时次数-1
 277:FML/Src/EC2x.c ****  *        2.2）匹配失败，超时次数=0，插入超时事件消息
 278:FML/Src/EC2x.c ****  * 
 279:FML/Src/EC2x.c ****  * @param expect 
 280:FML/Src/EC2x.c ****  * @return int 
 281:FML/Src/EC2x.c ****  */
 282:FML/Src/EC2x.c **** int ec2x_replymatch(uint8_t* expect){
 546              		.loc 1 282 37 is_stmt 1 view -0
 547              		.cfi_startproc
 548              		@ args = 0, pretend = 0, frame = 200
 549              		@ frame_needed = 0, uses_anonymous_args = 0
 283:FML/Src/EC2x.c ****     uint8_t rx_buff[200]  = {0x00};
 550              		.loc 1 283 5 view .LVU171
 282:FML/Src/EC2x.c ****     uint8_t rx_buff[200]  = {0x00};
 551              		.loc 1 282 37 is_stmt 0 view .LVU172
 552 0000 30B5     		push	{r4, r5, lr}
 553              	.LCFI6:
 554              		.cfi_def_cfa_offset 12
 555              		.cfi_offset 4, -12
 556              		.cfi_offset 5, -8
 557              		.cfi_offset 14, -4
 558              		.loc 1 283 13 view .LVU173
 559 0002 0024     		movs	r4, #0
 282:FML/Src/EC2x.c ****     uint8_t rx_buff[200]  = {0x00};
 560              		.loc 1 282 37 view .LVU174
 561 0004 B3B0     		sub	sp, sp, #204
 562              	.LCFI7:
 563              		.cfi_def_cfa_offset 216
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 17


 564              		.loc 1 283 13 view .LVU175
 565 0006 C422     		movs	r2, #196
 566 0008 2146     		mov	r1, r4
 282:FML/Src/EC2x.c ****     uint8_t rx_buff[200]  = {0x00};
 567              		.loc 1 282 37 view .LVU176
 568 000a 0546     		mov	r5, r0
 569              		.loc 1 283 13 view .LVU177
 570 000c 01A8     		add	r0, sp, #4
 571              	.LVL45:
 572              		.loc 1 283 13 view .LVU178
 573 000e 0094     		str	r4, [sp]
 574 0010 FFF7FEFF 		bl	memset
 575              	.LVL46:
 284:FML/Src/EC2x.c ****     int bytes_num = 0;
 576              		.loc 1 284 5 is_stmt 1 view .LVU179
 285:FML/Src/EC2x.c ****     bytes_num =  ec2x_read(0,rx_buff,200);
 577              		.loc 1 285 5 view .LVU180
 578              		.loc 1 285 18 is_stmt 0 view .LVU181
 579 0014 C822     		movs	r2, #200
 580 0016 6946     		mov	r1, sp
 581 0018 2046     		mov	r0, r4
 582 001a FFF7FEFF 		bl	ec2x_read
 583              	.LVL47:
 286:FML/Src/EC2x.c ****     if(bytes_num > 0)
 584              		.loc 1 286 5 is_stmt 1 view .LVU182
 585              		.loc 1 286 7 is_stmt 0 view .LVU183
 586 001e A042     		cmp	r0, r4
 587 0020 08DD     		ble	.L30
 287:FML/Src/EC2x.c ****     {
 288:FML/Src/EC2x.c ****         if(strstr((const char*)rx_buff,(const char*)expect) != NULL){
 588              		.loc 1 288 9 is_stmt 1 view .LVU184
 589              		.loc 1 288 12 is_stmt 0 view .LVU185
 590 0022 2946     		mov	r1, r5
 591 0024 6846     		mov	r0, sp
 592              	.LVL48:
 593              		.loc 1 288 12 view .LVU186
 594 0026 FFF7FEFF 		bl	strstr
 595              	.LVL49:
 596              		.loc 1 288 11 view .LVU187
 597 002a 001B     		subs	r0, r0, r4
 598 002c 18BF     		it	ne
 599 002e 0120     		movne	r0, #1
 600              	.L28:
 289:FML/Src/EC2x.c ****             return 1;
 290:FML/Src/EC2x.c ****         }
 291:FML/Src/EC2x.c ****     }
 292:FML/Src/EC2x.c ****     return 0;
 293:FML/Src/EC2x.c **** }
 601              		.loc 1 293 1 view .LVU188
 602 0030 33B0     		add	sp, sp, #204
 603              	.LCFI8:
 604              		.cfi_remember_state
 605              		.cfi_def_cfa_offset 12
 606              		@ sp needed
 607 0032 30BD     		pop	{r4, r5, pc}
 608              	.LVL50:
 609              	.L30:
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 18


 610              	.LCFI9:
 611              		.cfi_restore_state
 292:FML/Src/EC2x.c **** }
 612              		.loc 1 292 12 view .LVU189
 613 0034 2046     		mov	r0, r4
 614              	.LVL51:
 292:FML/Src/EC2x.c **** }
 615              		.loc 1 292 12 view .LVU190
 616 0036 FBE7     		b	.L28
 617              		.cfi_endproc
 618              	.LFE297:
 620              		.section	.text.ec2x_cmd_send,"ax",%progbits
 621              		.align	1
 622              		.syntax unified
 623              		.thumb
 624              		.thumb_func
 626              	ec2x_cmd_send:
 627              	.LVL52:
 628              	.LFB298:
 294:FML/Src/EC2x.c **** 
 295:FML/Src/EC2x.c **** 
 296:FML/Src/EC2x.c **** /**
 297:FML/Src/EC2x.c ****  * @brief ec2x指令发送函数
 298:FML/Src/EC2x.c ****  *        1）发送指令
 299:FML/Src/EC2x.c ****  *        2）进入等待回复状态
 300:FML/Src/EC2x.c ****  * @param fd 
 301:FML/Src/EC2x.c ****  * @param tx_buff 
 302:FML/Src/EC2x.c ****  * @param len 
 303:FML/Src/EC2x.c ****  * @param expect_reply 
 304:FML/Src/EC2x.c ****  * @param timeout 
 305:FML/Src/EC2x.c ****  */
 306:FML/Src/EC2x.c **** int ec2x_cmd_send(int fd,uint8_t *tx_buff,uint16_t len,uint8_t *expect_reply,uint16_t timeout)
 307:FML/Src/EC2x.c **** {
 629              		.loc 1 307 1 is_stmt 1 view -0
 630              		.cfi_startproc
 631              		@ args = 4, pretend = 0, frame = 0
 632              		@ frame_needed = 0, uses_anonymous_args = 0
 308:FML/Src/EC2x.c ****     if(tx_buff !=NULL){
 633              		.loc 1 308 5 view .LVU192
 307:FML/Src/EC2x.c ****     if(tx_buff !=NULL){
 634              		.loc 1 307 1 is_stmt 0 view .LVU193
 635 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 636              	.LCFI10:
 637              		.cfi_def_cfa_offset 32
 638              		.cfi_offset 3, -32
 639              		.cfi_offset 4, -28
 640              		.cfi_offset 5, -24
 641              		.cfi_offset 6, -20
 642              		.cfi_offset 7, -16
 643              		.cfi_offset 8, -12
 644              		.cfi_offset 9, -8
 645              		.cfi_offset 14, -4
 307:FML/Src/EC2x.c ****     if(tx_buff !=NULL){
 646              		.loc 1 307 1 view .LVU194
 647 0004 0646     		mov	r6, r0
 648 0006 9046     		mov	r8, r2
 649 0008 1D46     		mov	r5, r3
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 19


 650              		.loc 1 308 7 view .LVU195
 651 000a 0F46     		mov	r7, r1
 652 000c A9B1     		cbz	r1, .L32
 309:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.block = 1;
 653              		.loc 1 309 9 is_stmt 1 view .LVU196
 310:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.head = 0;
 654              		.loc 1 310 9 view .LVU197
 311:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.tail = 0;
 655              		.loc 1 311 9 view .LVU198
 312:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.size = 0;
 656              		.loc 1 312 9 view .LVU199
 313:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.capacity = BUFF_LEN;
 657              		.loc 1 313 9 view .LVU200
 658 000e 174C     		ldr	r4, .L44
 659 0010 3C23     		movs	r3, #60
 660              	.LVL53:
 661              		.loc 1 313 9 is_stmt 0 view .LVU201
 662 0012 03FB0044 		mla	r4, r3, r0, r4
 312:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.size = 0;
 663              		.loc 1 312 31 view .LVU202
 664 0016 4FF00009 		mov	r9, #0
 665 001a 4FF44803 		mov	r3, #13107200
 314:FML/Src/EC2x.c ****         memset(ec2x_dev[fd].msg.data,0x00,BUFF_LEN);
 666              		.loc 1 314 9 view .LVU203
 667 001e C822     		movs	r2, #200
 668              	.LVL54:
 669              		.loc 1 314 9 view .LVU204
 670 0020 4946     		mov	r1, r9
 671              	.LVL55:
 312:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.size = 0;
 672              		.loc 1 312 31 view .LVU205
 673 0022 C4E90D93 		strd	r9, r3, [r4, #52]
 674              		.loc 1 314 9 is_stmt 1 view .LVU206
 675 0026 206B     		ldr	r0, [r4, #48]
 676              	.LVL56:
 677              		.loc 1 314 9 is_stmt 0 view .LVU207
 678 0028 FFF7FEFF 		bl	memset
 679              	.LVL57:
 315:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.block = 0;
 680              		.loc 1 315 9 is_stmt 1 view .LVU208
 681              		.loc 1 315 32 is_stmt 0 view .LVU209
 682 002c 84F82C90 		strb	r9, [r4, #44]
 316:FML/Src/EC2x.c ****         ec2x_write(fd,tx_buff,len);
 683              		.loc 1 316 9 is_stmt 1 view .LVU210
 684 0030 4246     		mov	r2, r8
 685 0032 3946     		mov	r1, r7
 686 0034 3046     		mov	r0, r6
 687 0036 FFF7FEFF 		bl	ec2x_write
 688              	.LVL58:
 689              	.L32:
 317:FML/Src/EC2x.c ****     }
 318:FML/Src/EC2x.c ****     if(expect_reply != NULL){
 690              		.loc 1 318 5 view .LVU211
 691              		.loc 1 318 7 is_stmt 0 view .LVU212
 692 003a 15B9     		cbnz	r5, .L33
 693              	.LVL59:
 694              	.L37:
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 20


 319:FML/Src/EC2x.c ****         uint16_t retry_times = timeout / 200;
 320:FML/Src/EC2x.c ****         while(retry_times--){
 321:FML/Src/EC2x.c ****             Delay_ms(200);
 322:FML/Src/EC2x.c ****             if(ec2x_replymatch(expect_reply) == 1)
 323:FML/Src/EC2x.c ****                 return  1;
 324:FML/Src/EC2x.c ****         }
 325:FML/Src/EC2x.c ****     }
 326:FML/Src/EC2x.c ****     return 0;
 695              		.loc 1 326 12 view .LVU213
 696 003c 0020     		movs	r0, #0
 697              	.L31:
 327:FML/Src/EC2x.c **** }
 698              		.loc 1 327 1 view .LVU214
 699 003e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 700              	.LVL60:
 701              	.L33:
 702              	.LBB15:
 319:FML/Src/EC2x.c ****         uint16_t retry_times = timeout / 200;
 703              		.loc 1 319 9 is_stmt 1 view .LVU215
 320:FML/Src/EC2x.c ****             Delay_ms(200);
 704              		.loc 1 320 14 is_stmt 0 view .LVU216
 705 0042 4FF6FF76 		movw	r6, #65535
 706              	.LVL61:
 319:FML/Src/EC2x.c ****         uint16_t retry_times = timeout / 200;
 707              		.loc 1 319 18 view .LVU217
 708 0046 BDF82040 		ldrh	r4, [sp, #32]
 709 004a C823     		movs	r3, #200
 710 004c B4FBF3F4 		udiv	r4, r4, r3
 711              	.LVL62:
 320:FML/Src/EC2x.c ****             Delay_ms(200);
 712              		.loc 1 320 9 is_stmt 1 view .LVU218
 713              	.L35:
 320:FML/Src/EC2x.c ****             Delay_ms(200);
 714              		.loc 1 320 14 view .LVU219
 320:FML/Src/EC2x.c ****             Delay_ms(200);
 715              		.loc 1 320 26 is_stmt 0 view .LVU220
 716 0050 013C     		subs	r4, r4, #1
 717              	.LVL63:
 320:FML/Src/EC2x.c ****             Delay_ms(200);
 718              		.loc 1 320 26 view .LVU221
 719 0052 A4B2     		uxth	r4, r4
 720              	.LVL64:
 320:FML/Src/EC2x.c ****             Delay_ms(200);
 721              		.loc 1 320 14 view .LVU222
 722 0054 B442     		cmp	r4, r6
 723 0056 F1D0     		beq	.L37
 321:FML/Src/EC2x.c ****             if(ec2x_replymatch(expect_reply) == 1)
 724              		.loc 1 321 13 is_stmt 1 view .LVU223
 725 0058 C820     		movs	r0, #200
 726 005a FFF7FEFF 		bl	Delay_ms
 727              	.LVL65:
 322:FML/Src/EC2x.c ****                 return  1;
 728              		.loc 1 322 13 view .LVU224
 322:FML/Src/EC2x.c ****                 return  1;
 729              		.loc 1 322 16 is_stmt 0 view .LVU225
 730 005e 2846     		mov	r0, r5
 731 0060 FFF7FEFF 		bl	ec2x_replymatch
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 21


 732              	.LVL66:
 322:FML/Src/EC2x.c ****                 return  1;
 733              		.loc 1 322 15 view .LVU226
 734 0064 0128     		cmp	r0, #1
 735 0066 F3D1     		bne	.L35
 736 0068 E9E7     		b	.L31
 737              	.L45:
 738 006a 00BF     		.align	2
 739              	.L44:
 740 006c 00000000 		.word	.LANCHOR0
 741              	.LBE15:
 742              		.cfi_endproc
 743              	.LFE298:
 745              		.section	.rodata.ec2x_reset.constprop.0.str1.1,"aMS",%progbits,1
 746              	.LC1:
 747 0000 5244590D 		.ascii	"RDY\015\012\000"
 747      0A00
 748              		.section	.text.ec2x_reset.constprop.0,"ax",%progbits
 749              		.align	1
 750              		.syntax unified
 751              		.thumb
 752              		.thumb_func
 754              	ec2x_reset.constprop.0:
 755              	.LFB302:
 126:FML/Src/EC2x.c ****     fd = 0;
 756              		.loc 1 126 5 is_stmt 1 view -0
 757              		.cfi_startproc
 758              		@ args = 0, pretend = 0, frame = 0
 759              		@ frame_needed = 0, uses_anonymous_args = 0
 760              	.LVL67:
 127:FML/Src/EC2x.c ****     int err_code = 0;
 761              		.loc 1 127 5 view .LVU228
 128:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 762              		.loc 1 128 5 view .LVU229
 129:FML/Src/EC2x.c ****         return (err_code = -1);
 763              		.loc 1 129 5 view .LVU230
 764              	.LBB16:
 132:FML/Src/EC2x.c ****         HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_SET);
 765              		.loc 1 132 9 view .LVU231
 133:FML/Src/EC2x.c ****         Delay_ms(500);
 766              		.loc 1 133 9 view .LVU232
 767              	.LBE16:
 126:FML/Src/EC2x.c ****     fd = 0;
 768              		.loc 1 126 5 is_stmt 0 view .LVU233
 769 0000 13B5     		push	{r0, r1, r4, lr}
 770              	.LCFI11:
 771              		.cfi_def_cfa_offset 16
 772              		.cfi_offset 4, -8
 773              		.cfi_offset 14, -4
 774              	.LBB17:
 133:FML/Src/EC2x.c ****         Delay_ms(500);
 775              		.loc 1 133 9 view .LVU234
 776 0002 0F4C     		ldr	r4, .L47
 777 0004 0122     		movs	r2, #1
 778 0006 218B     		ldrh	r1, [r4, #24]
 779 0008 6069     		ldr	r0, [r4, #20]
 780 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 22


 781              	.LVL68:
 134:FML/Src/EC2x.c ****         HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_RESET);
 782              		.loc 1 134 9 is_stmt 1 view .LVU235
 783 000e 4FF4FA70 		mov	r0, #500
 784 0012 FFF7FEFF 		bl	Delay_ms
 785              	.LVL69:
 135:FML/Src/EC2x.c ****     }
 786              		.loc 1 135 9 view .LVU236
 787 0016 218B     		ldrh	r1, [r4, #24]
 788 0018 6069     		ldr	r0, [r4, #20]
 789 001a 0022     		movs	r2, #0
 790 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
 791              	.LVL70:
 792              	.LBE17:
 137:FML/Src/EC2x.c ****     return(ec2x_cmd_send(fd,NULL,0,"RDY\r\n",20000));
 793              		.loc 1 137 5 view .LVU237
 137:FML/Src/EC2x.c ****     return(ec2x_cmd_send(fd,NULL,0,"RDY\r\n",20000));
 794              		.loc 1 137 16 is_stmt 0 view .LVU238
 795 0020 084A     		ldr	r2, .L47+4
 796 0022 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 797 0024 0133     		adds	r3, r3, #1
 798 0026 1370     		strb	r3, [r2]
 138:FML/Src/EC2x.c **** }
 799              		.loc 1 138 5 is_stmt 1 view .LVU239
 138:FML/Src/EC2x.c **** }
 800              		.loc 1 138 12 is_stmt 0 view .LVU240
 801 0028 0022     		movs	r2, #0
 802 002a 44F62063 		movw	r3, #20000
 803 002e 0093     		str	r3, [sp]
 804 0030 1146     		mov	r1, r2
 805 0032 054B     		ldr	r3, .L47+8
 806 0034 1046     		mov	r0, r2
 807 0036 FFF7FEFF 		bl	ec2x_cmd_send
 808              	.LVL71:
 139:FML/Src/EC2x.c **** 
 809              		.loc 1 139 1 view .LVU241
 810 003a 02B0     		add	sp, sp, #8
 811              	.LCFI12:
 812              		.cfi_def_cfa_offset 8
 813              		@ sp needed
 814 003c 10BD     		pop	{r4, pc}
 815              	.L48:
 816 003e 00BF     		.align	2
 817              	.L47:
 818 0040 00000000 		.word	.LANCHOR0
 819 0044 00000000 		.word	.LANCHOR1
 820 0048 00000000 		.word	.LC1
 821              		.cfi_endproc
 822              	.LFE302:
 824              		.section	.rodata.ec2x_tcp_connect.str1.1,"aMS",%progbits,1
 825              	.LC2:
 826 0000 6E6F2069 		.ascii	"no invalid ec2x device sn\015\012\000"
 826      6E76616C 
 826      69642065 
 826      63327820 
 826      64657669 
 827              	.LC3:
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 23


 828 001c 54435020 		.ascii	"TCP Connect Failed\015\012\000"
 828      436F6E6E 
 828      65637420 
 828      4661696C 
 828      65640D0A 
 829              	.LC4:
 830 0031 25732065 		.ascii	"%s err\015\012\000"
 830      72720D0A 
 830      00
 831              	.LC5:
 832 003a 74637020 		.ascii	"tcp connect success\015\012\000"
 832      636F6E6E 
 832      65637420 
 832      73756363 
 832      6573730D 
 833              		.section	.text.ec2x_tcp_connect,"ax",%progbits
 834              		.align	1
 835              		.global	ec2x_tcp_connect
 836              		.syntax unified
 837              		.thumb
 838              		.thumb_func
 840              	ec2x_tcp_connect:
 841              	.LVL72:
 842              	.LFB299:
 328:FML/Src/EC2x.c **** 
 329:FML/Src/EC2x.c **** /**
 330:FML/Src/EC2x.c ****  * @brief tcp 连接流程
 331:FML/Src/EC2x.c ****  * 
 332:FML/Src/EC2x.c ****  * @param fd 
 333:FML/Src/EC2x.c ****  * @return uint8_t 
 334:FML/Src/EC2x.c ****  */
 335:FML/Src/EC2x.c **** uint8_t ec2x_tcp_connect(int fd){
 843              		.loc 1 335 33 is_stmt 1 view -0
 844              		.cfi_startproc
 845              		@ args = 0, pretend = 0, frame = 8
 846              		@ frame_needed = 0, uses_anonymous_args = 0
 336:FML/Src/EC2x.c ****     static uint8_t step = 0,retry =0;
 847              		.loc 1 336 5 view .LVU243
 337:FML/Src/EC2x.c ****     reset_times = 0;
 848              		.loc 1 337 5 view .LVU244
 335:FML/Src/EC2x.c ****     static uint8_t step = 0,retry =0;
 849              		.loc 1 335 33 is_stmt 0 view .LVU245
 850 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 851              	.LCFI13:
 852              		.cfi_def_cfa_offset 28
 853              		.cfi_offset 4, -28
 854              		.cfi_offset 5, -24
 855              		.cfi_offset 6, -20
 856              		.cfi_offset 7, -16
 857              		.cfi_offset 8, -12
 858              		.cfi_offset 9, -8
 859              		.cfi_offset 14, -4
 860              		.loc 1 337 17 view .LVU246
 861 0004 2A4F     		ldr	r7, .L59
 862 0006 0023     		movs	r3, #0
 335:FML/Src/EC2x.c ****     static uint8_t step = 0,retry =0;
 863              		.loc 1 335 33 view .LVU247
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 24


 864 0008 85B0     		sub	sp, sp, #20
 865              	.LCFI14:
 866              		.cfi_def_cfa_offset 48
 867              		.loc 1 337 17 view .LVU248
 868 000a 3B70     		strb	r3, [r7]
 338:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef)){
 869              		.loc 1 338 5 is_stmt 1 view .LVU249
 870              		.loc 1 338 7 is_stmt 0 view .LVU250
 871 000c 50B9     		cbnz	r0, .L58
 339:FML/Src/EC2x.c ****         shellPrint(&shell,"no invalid ec2x device sn\r\n");
 340:FML/Src/EC2x.c ****         return -1;
 341:FML/Src/EC2x.c ****     }
 342:FML/Src/EC2x.c ****     while(step < 9){
 872              		.loc 1 342 16 view .LVU251
 873 000e 294D     		ldr	r5, .L59+4
 343:FML/Src/EC2x.c ****         if(reset_times > 3)
 344:FML/Src/EC2x.c ****         {
 345:FML/Src/EC2x.c ****             shellPrint(&shell,"TCP Connect Failed\r\n");
 346:FML/Src/EC2x.c ****             return 0;
 347:FML/Src/EC2x.c ****         }
 348:FML/Src/EC2x.c ****         if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txmsg),conne
 874              		.loc 1 348 12 view .LVU252
 875 0010 294C     		ldr	r4, .L59+8
 876 0012 2A4E     		ldr	r6, .L59+12
 877              	.LVL73:
 878              	.L50:
 342:FML/Src/EC2x.c ****         if(reset_times > 3)
 879              		.loc 1 342 10 is_stmt 1 view .LVU253
 342:FML/Src/EC2x.c ****         if(reset_times > 3)
 880              		.loc 1 342 16 is_stmt 0 view .LVU254
 881 0014 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 342:FML/Src/EC2x.c ****         if(reset_times > 3)
 882              		.loc 1 342 10 view .LVU255
 883 0016 082B     		cmp	r3, #8
 884 0018 0CD9     		bls	.L56
 349:FML/Src/EC2x.c ****         {    
 350:FML/Src/EC2x.c ****             step++;
 351:FML/Src/EC2x.c ****             retry = 0;
 352:FML/Src/EC2x.c ****         }
 353:FML/Src/EC2x.c ****         else
 354:FML/Src/EC2x.c ****         {
 355:FML/Src/EC2x.c ****             if(connectmsg_queue[step].retry_times < retry)
 356:FML/Src/EC2x.c ****             {
 357:FML/Src/EC2x.c ****                 shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 358:FML/Src/EC2x.c ****                 ec2x_reset(fd); 
 359:FML/Src/EC2x.c ****                 step = 0;
 360:FML/Src/EC2x.c ****             }
 361:FML/Src/EC2x.c ****             else
 362:FML/Src/EC2x.c ****             {
 363:FML/Src/EC2x.c ****                 retry++;
 364:FML/Src/EC2x.c ****                 Delay_ms(1000);
 365:FML/Src/EC2x.c ****             }
 366:FML/Src/EC2x.c ****         }
 367:FML/Src/EC2x.c ****     }
 368:FML/Src/EC2x.c ****     shellPrint(&shell,"tcp connect success\r\n");
 885              		.loc 1 368 5 is_stmt 1 view .LVU256
 886 001a 2948     		ldr	r0, .L59+16
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 25


 887 001c 2949     		ldr	r1, .L59+20
 888 001e FFF7FEFF 		bl	shellPrint
 889              	.LVL74:
 369:FML/Src/EC2x.c ****     //ec2x_cmd_send(fd,"AT+QIOPEN=0,500\r\n",strlen("AT+QIOPEN=0,500\r\n"),"OK",500);
 370:FML/Src/EC2x.c **** }
 890              		.loc 1 370 1 is_stmt 0 view .LVU257
 891 0022 04E0     		b	.L49
 892              	.LVL75:
 893              	.L58:
 339:FML/Src/EC2x.c ****         return -1;
 894              		.loc 1 339 9 is_stmt 1 view .LVU258
 895 0024 2648     		ldr	r0, .L59+16
 896              	.LVL76:
 339:FML/Src/EC2x.c ****         return -1;
 897              		.loc 1 339 9 is_stmt 0 view .LVU259
 898 0026 2849     		ldr	r1, .L59+24
 899 0028 FFF7FEFF 		bl	shellPrint
 900              	.LVL77:
 340:FML/Src/EC2x.c ****     }
 901              		.loc 1 340 9 is_stmt 1 view .LVU260
 340:FML/Src/EC2x.c ****     }
 902              		.loc 1 340 16 is_stmt 0 view .LVU261
 903 002c FF20     		movs	r0, #255
 904              	.L49:
 905              		.loc 1 370 1 view .LVU262
 906 002e 05B0     		add	sp, sp, #20
 907              	.LCFI15:
 908              		.cfi_remember_state
 909              		.cfi_def_cfa_offset 28
 910              		@ sp needed
 911 0030 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 912              	.L56:
 913              	.LCFI16:
 914              		.cfi_restore_state
 343:FML/Src/EC2x.c ****         {
 915              		.loc 1 343 9 is_stmt 1 view .LVU263
 343:FML/Src/EC2x.c ****         {
 916              		.loc 1 343 11 is_stmt 0 view .LVU264
 917 0034 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 918 0036 032A     		cmp	r2, #3
 919 0038 05D9     		bls	.L52
 345:FML/Src/EC2x.c ****             return 0;
 920              		.loc 1 345 13 is_stmt 1 view .LVU265
 921 003a 2148     		ldr	r0, .L59+16
 922 003c 2349     		ldr	r1, .L59+28
 923 003e FFF7FEFF 		bl	shellPrint
 924              	.LVL78:
 346:FML/Src/EC2x.c ****         }
 925              		.loc 1 346 13 view .LVU266
 346:FML/Src/EC2x.c ****         }
 926              		.loc 1 346 20 is_stmt 0 view .LVU267
 927 0042 0020     		movs	r0, #0
 928 0044 F3E7     		b	.L49
 929              	.L52:
 348:FML/Src/EC2x.c ****         {    
 930              		.loc 1 348 9 is_stmt 1 view .LVU268
 348:FML/Src/EC2x.c ****         {    
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 26


 931              		.loc 1 348 12 is_stmt 0 view .LVU269
 932 0046 4FF00C08 		mov	r8, #12
 933 004a 08FB03F3 		mul	r3, r8, r3
 934 004e 04EB0309 		add	r9, r4, r3
 935 0052 E158     		ldr	r1, [r4, r3]
 348:FML/Src/EC2x.c ****         {    
 936              		.loc 1 348 58 view .LVU270
 937 0054 0391     		str	r1, [sp, #12]
 938 0056 0846     		mov	r0, r1
 939 0058 FFF7FEFF 		bl	strlen
 940              	.LVL79:
 348:FML/Src/EC2x.c ****         {    
 941              		.loc 1 348 12 view .LVU271
 942 005c 2389     		ldrh	r3, [r4, #8]
 943 005e 0093     		str	r3, [sp]
 944 0060 D9F80430 		ldr	r3, [r9, #4]
 945 0064 0399     		ldr	r1, [sp, #12]
 946 0066 82B2     		uxth	r2, r0
 947 0068 0020     		movs	r0, #0
 948 006a FFF7FEFF 		bl	ec2x_cmd_send
 949              	.LVL80:
 950 006e 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 348:FML/Src/EC2x.c ****         {    
 951              		.loc 1 348 11 view .LVU272
 952 0070 8146     		mov	r9, r0
 953 0072 20B1     		cbz	r0, .L53
 350:FML/Src/EC2x.c ****             retry = 0;
 954              		.loc 1 350 13 is_stmt 1 view .LVU273
 350:FML/Src/EC2x.c ****             retry = 0;
 955              		.loc 1 350 17 is_stmt 0 view .LVU274
 956 0074 0133     		adds	r3, r3, #1
 957 0076 2B70     		strb	r3, [r5]
 351:FML/Src/EC2x.c ****         }
 958              		.loc 1 351 13 is_stmt 1 view .LVU275
 351:FML/Src/EC2x.c ****         }
 959              		.loc 1 351 19 is_stmt 0 view .LVU276
 960 0078 0023     		movs	r3, #0
 961 007a 3370     		strb	r3, [r6]
 962 007c CAE7     		b	.L50
 963              	.L53:
 355:FML/Src/EC2x.c ****             {
 964              		.loc 1 355 13 is_stmt 1 view .LVU277
 355:FML/Src/EC2x.c ****             {
 965              		.loc 1 355 38 is_stmt 0 view .LVU278
 966 007e 08FB03F3 		mul	r3, r8, r3
 967 0082 E118     		adds	r1, r4, r3
 355:FML/Src/EC2x.c ****             {
 968              		.loc 1 355 51 view .LVU279
 969 0084 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 355:FML/Src/EC2x.c ****             {
 970              		.loc 1 355 15 view .LVU280
 971 0086 897A     		ldrb	r1, [r1, #10]	@ zero_extendqisi2
 972 0088 9142     		cmp	r1, r2
 973 008a 09D2     		bcs	.L55
 357:FML/Src/EC2x.c ****                 ec2x_reset(fd); 
 974              		.loc 1 357 17 is_stmt 1 view .LVU281
 975 008c E258     		ldr	r2, [r4, r3]
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 27


 976 008e 1049     		ldr	r1, .L59+32
 977 0090 0B48     		ldr	r0, .L59+16
 978 0092 FFF7FEFF 		bl	shellPrint
 979              	.LVL81:
 358:FML/Src/EC2x.c ****                 step = 0;
 980              		.loc 1 358 17 view .LVU282
 981 0096 FFF7FEFF 		bl	ec2x_reset.constprop.0
 982              	.LVL82:
 359:FML/Src/EC2x.c ****             }
 983              		.loc 1 359 17 view .LVU283
 359:FML/Src/EC2x.c ****             }
 984              		.loc 1 359 22 is_stmt 0 view .LVU284
 985 009a 85F80090 		strb	r9, [r5]
 986 009e B9E7     		b	.L50
 987              	.L55:
 363:FML/Src/EC2x.c ****                 Delay_ms(1000);
 988              		.loc 1 363 17 is_stmt 1 view .LVU285
 363:FML/Src/EC2x.c ****                 Delay_ms(1000);
 989              		.loc 1 363 22 is_stmt 0 view .LVU286
 990 00a0 0132     		adds	r2, r2, #1
 364:FML/Src/EC2x.c ****             }
 991              		.loc 1 364 17 view .LVU287
 992 00a2 4FF47A70 		mov	r0, #1000
 363:FML/Src/EC2x.c ****                 Delay_ms(1000);
 993              		.loc 1 363 22 view .LVU288
 994 00a6 3270     		strb	r2, [r6]
 364:FML/Src/EC2x.c ****             }
 995              		.loc 1 364 17 is_stmt 1 view .LVU289
 996 00a8 FFF7FEFF 		bl	Delay_ms
 997              	.LVL83:
 998 00ac B2E7     		b	.L50
 999              	.L60:
 1000 00ae 00BF     		.align	2
 1001              	.L59:
 1002 00b0 00000000 		.word	.LANCHOR1
 1003 00b4 00000000 		.word	.LANCHOR3
 1004 00b8 00000000 		.word	.LANCHOR2
 1005 00bc 00000000 		.word	.LANCHOR4
 1006 00c0 00000000 		.word	shell
 1007 00c4 3A000000 		.word	.LC5
 1008 00c8 00000000 		.word	.LC2
 1009 00cc 1C000000 		.word	.LC3
 1010 00d0 31000000 		.word	.LC4
 1011              		.cfi_endproc
 1012              	.LFE299:
 1014              		.section	.rodata.EC2x_Test.str1.1,"aMS",%progbits,1
 1015              	.LC6:
 1016 0000 7463705F 		.ascii	"tcp_connect\000"
 1016      636F6E6E 
 1016      65637400 
 1017              	.LC7:
 1018 000c 45433278 		.ascii	"EC2x CMD Test OK\015\012\000"
 1018      20434D44 
 1018      20546573 
 1018      74204F4B 
 1018      0D0A00
 1019              	.LC8:
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 28


 1020 001f 45433278 		.ascii	"EC2x CMD Test Failed\015\012\000"
 1020      20434D44 
 1020      20546573 
 1020      74204661 
 1020      696C6564 
 1021              		.section	.text.EC2x_Test,"ax",%progbits
 1022              		.align	1
 1023              		.global	EC2x_Test
 1024              		.syntax unified
 1025              		.thumb
 1026              		.thumb_func
 1028              	EC2x_Test:
 1029              	.LVL84:
 1030              	.LFB300:
 371:FML/Src/EC2x.c **** /*------------------------------------test------------------------------------*/
 372:FML/Src/EC2x.c **** 
 373:FML/Src/EC2x.c **** /**
 374:FML/Src/EC2x.c ****  * @brief 
 375:FML/Src/EC2x.c ****  * 
 376:FML/Src/EC2x.c ****  * @param fd 
 377:FML/Src/EC2x.c ****  * @param tx_buff 
 378:FML/Src/EC2x.c ****  * @param expect_reply 
 379:FML/Src/EC2x.c ****  * @param timeout 
 380:FML/Src/EC2x.c ****  */
 381:FML/Src/EC2x.c **** void EC2x_Test(int fd,char *tx_buff,char *expect_reply,uint16_t timeout)
 382:FML/Src/EC2x.c **** {
 1031              		.loc 1 382 1 view -0
 1032              		.cfi_startproc
 1033              		@ args = 0, pretend = 0, frame = 40
 1034              		@ frame_needed = 0, uses_anonymous_args = 0
 383:FML/Src/EC2x.c ****     uint8_t tx_data[20] = {0xff,};
 1035              		.loc 1 383 5 view .LVU291
 382:FML/Src/EC2x.c ****     uint8_t tx_data[20] = {0xff,};
 1036              		.loc 1 382 1 is_stmt 0 view .LVU292
 1037 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1038              	.LCFI17:
 1039              		.cfi_def_cfa_offset 28
 1040              		.cfi_offset 4, -28
 1041              		.cfi_offset 5, -24
 1042              		.cfi_offset 6, -20
 1043              		.cfi_offset 7, -16
 1044              		.cfi_offset 8, -12
 1045              		.cfi_offset 9, -8
 1046              		.cfi_offset 14, -4
 1047 0004 8DB0     		sub	sp, sp, #52
 1048              	.LCFI18:
 1049              		.cfi_def_cfa_offset 80
 382:FML/Src/EC2x.c ****     uint8_t tx_data[20] = {0xff,};
 1050              		.loc 1 382 1 view .LVU293
 1051 0006 0D46     		mov	r5, r1
 1052              		.loc 1 383 13 view .LVU294
 1053 0008 FF24     		movs	r4, #255
 1054 000a 0021     		movs	r1, #0
 1055              	.LVL85:
 382:FML/Src/EC2x.c ****     uint8_t tx_data[20] = {0xff,};
 1056              		.loc 1 382 1 view .LVU295
 1057 000c 0646     		mov	r6, r0
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 29


 1058 000e 1746     		mov	r7, r2
 1059              		.loc 1 383 13 view .LVU296
 1060 0010 03A8     		add	r0, sp, #12
 1061              	.LVL86:
 1062              		.loc 1 383 13 view .LVU297
 1063 0012 1022     		movs	r2, #16
 1064              	.LVL87:
 382:FML/Src/EC2x.c ****     uint8_t tx_data[20] = {0xff,};
 1065              		.loc 1 382 1 view .LVU298
 1066 0014 9846     		mov	r8, r3
 1067              		.loc 1 383 13 view .LVU299
 1068 0016 0294     		str	r4, [sp, #8]
 1069 0018 FFF7FEFF 		bl	memset
 1070              	.LVL88:
 384:FML/Src/EC2x.c ****     uint8_t reply_data[20] = {0xff,};
 1071              		.loc 1 384 5 is_stmt 1 view .LVU300
 1072              		.loc 1 384 13 is_stmt 0 view .LVU301
 1073 001c 0021     		movs	r1, #0
 1074 001e 1022     		movs	r2, #16
 1075 0020 08A8     		add	r0, sp, #32
 1076 0022 0794     		str	r4, [sp, #28]
 1077 0024 FFF7FEFF 		bl	memset
 1078              	.LVL89:
 385:FML/Src/EC2x.c ****     uint8_t tx_len = 0,reply_len = 0;
 1079              		.loc 1 385 5 is_stmt 1 view .LVU302
 386:FML/Src/EC2x.c ****     tx_len = strlen(tx_buff);
 1080              		.loc 1 386 5 view .LVU303
 387:FML/Src/EC2x.c ****     reply_len = strlen(expect_reply);
 1081              		.loc 1 387 5 view .LVU304
 388:FML/Src/EC2x.c ****     if(strcmp(tx_buff,"tcp_connect")==0){
 1082              		.loc 1 388 5 view .LVU305
 1083              		.loc 1 388 8 is_stmt 0 view .LVU306
 1084 0028 1F49     		ldr	r1, .L65
 1085 002a 2846     		mov	r0, r5
 1086 002c FFF7FEFF 		bl	strcmp
 1087              	.LVL90:
 1088              		.loc 1 388 7 view .LVU307
 1089 0030 28B9     		cbnz	r0, .L62
 389:FML/Src/EC2x.c ****         ec2x_tcp_connect(fd);
 1090              		.loc 1 389 9 is_stmt 1 view .LVU308
 1091 0032 3046     		mov	r0, r6
 1092 0034 FFF7FEFF 		bl	ec2x_tcp_connect
 1093              	.LVL91:
 1094              	.L61:
 390:FML/Src/EC2x.c ****     }
 391:FML/Src/EC2x.c ****     else{
 392:FML/Src/EC2x.c ****         memcpy(tx_data,tx_buff,tx_len);
 393:FML/Src/EC2x.c ****         tx_data[tx_len] = 0x0D;
 394:FML/Src/EC2x.c ****         tx_data[tx_len+1] = 0x0A;
 395:FML/Src/EC2x.c ****         tx_len += 2;
 396:FML/Src/EC2x.c ****         memcpy(reply_data,expect_reply,reply_len);
 397:FML/Src/EC2x.c **** 
 398:FML/Src/EC2x.c ****         if(ec2x_cmd_send(fd,tx_data,tx_len,reply_data,timeout)){
 399:FML/Src/EC2x.c ****             shellPrint(&shell,"EC2x CMD Test OK\r\n");
 400:FML/Src/EC2x.c ****             test_ok_cnt++;
 401:FML/Src/EC2x.c ****         }
 402:FML/Src/EC2x.c ****         else
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 30


 403:FML/Src/EC2x.c ****             shellPrint(&shell,"EC2x CMD Test Failed\r\n");
 404:FML/Src/EC2x.c ****     }
 405:FML/Src/EC2x.c **** }
 1095              		.loc 1 405 1 is_stmt 0 view .LVU309
 1096 0038 0DB0     		add	sp, sp, #52
 1097              	.LCFI19:
 1098              		.cfi_remember_state
 1099              		.cfi_def_cfa_offset 28
 1100              		@ sp needed
 1101 003a BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1102              	.LVL92:
 1103              	.L62:
 1104              	.LCFI20:
 1105              		.cfi_restore_state
 386:FML/Src/EC2x.c ****     reply_len = strlen(expect_reply);
 1106              		.loc 1 386 14 view .LVU310
 1107 003e 2846     		mov	r0, r5
 1108 0040 FFF7FEFF 		bl	strlen
 1109              	.LVL93:
 1110 0044 0446     		mov	r4, r0
 387:FML/Src/EC2x.c ****     if(strcmp(tx_buff,"tcp_connect")==0){
 1111              		.loc 1 387 17 view .LVU311
 1112 0046 3846     		mov	r0, r7
 1113 0048 FFF7FEFF 		bl	strlen
 1114              	.LVL94:
 1115 004c E4B2     		uxtb	r4, r4
 1116 004e 8146     		mov	r9, r0
 392:FML/Src/EC2x.c ****         tx_data[tx_len] = 0x0D;
 1117              		.loc 1 392 9 is_stmt 1 view .LVU312
 1118 0050 2246     		mov	r2, r4
 1119 0052 2946     		mov	r1, r5
 1120 0054 02A8     		add	r0, sp, #8
 1121 0056 FFF7FEFF 		bl	memcpy
 1122              	.LVL95:
 393:FML/Src/EC2x.c ****         tx_data[tx_len+1] = 0x0A;
 1123              		.loc 1 393 9 view .LVU313
 393:FML/Src/EC2x.c ****         tx_data[tx_len+1] = 0x0A;
 1124              		.loc 1 393 25 is_stmt 0 view .LVU314
 1125 005a 04F13003 		add	r3, r4, #48
 1126 005e 6B44     		add	r3, sp, r3
 1127 0060 0D22     		movs	r2, #13
 1128 0062 03F8282C 		strb	r2, [r3, #-40]
 394:FML/Src/EC2x.c ****         tx_len += 2;
 1129              		.loc 1 394 9 is_stmt 1 view .LVU315
 394:FML/Src/EC2x.c ****         tx_len += 2;
 1130              		.loc 1 394 27 is_stmt 0 view .LVU316
 1131 0066 0A22     		movs	r2, #10
 1132 0068 03F8272C 		strb	r2, [r3, #-39]
 395:FML/Src/EC2x.c ****         memcpy(reply_data,expect_reply,reply_len);
 1133              		.loc 1 395 9 is_stmt 1 view .LVU317
 1134              	.LVL96:
 396:FML/Src/EC2x.c **** 
 1135              		.loc 1 396 9 view .LVU318
 1136 006c 3946     		mov	r1, r7
 1137 006e 5FFA89F2 		uxtb	r2, r9
 1138 0072 07A8     		add	r0, sp, #28
 1139 0074 FFF7FEFF 		bl	memcpy
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 31


 1140              	.LVL97:
 398:FML/Src/EC2x.c ****             shellPrint(&shell,"EC2x CMD Test OK\r\n");
 1141              		.loc 1 398 9 view .LVU319
 395:FML/Src/EC2x.c ****         memcpy(reply_data,expect_reply,reply_len);
 1142              		.loc 1 395 16 is_stmt 0 view .LVU320
 1143 0078 A21C     		adds	r2, r4, #2
 398:FML/Src/EC2x.c ****             shellPrint(&shell,"EC2x CMD Test OK\r\n");
 1144              		.loc 1 398 12 view .LVU321
 1145 007a CDF80080 		str	r8, [sp]
 1146 007e 07AB     		add	r3, sp, #28
 1147 0080 D2B2     		uxtb	r2, r2
 1148 0082 02A9     		add	r1, sp, #8
 1149 0084 3046     		mov	r0, r6
 1150 0086 FFF7FEFF 		bl	ec2x_cmd_send
 1151              	.LVL98:
 398:FML/Src/EC2x.c ****             shellPrint(&shell,"EC2x CMD Test OK\r\n");
 1152              		.loc 1 398 11 view .LVU322
 1153 008a 40B1     		cbz	r0, .L64
 399:FML/Src/EC2x.c ****             test_ok_cnt++;
 1154              		.loc 1 399 13 is_stmt 1 view .LVU323
 1155 008c 0749     		ldr	r1, .L65+4
 1156 008e 0848     		ldr	r0, .L65+8
 1157 0090 FFF7FEFF 		bl	shellPrint
 1158              	.LVL99:
 400:FML/Src/EC2x.c ****         }
 1159              		.loc 1 400 13 view .LVU324
 400:FML/Src/EC2x.c ****         }
 1160              		.loc 1 400 24 is_stmt 0 view .LVU325
 1161 0094 074A     		ldr	r2, .L65+12
 1162 0096 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1163 0098 0133     		adds	r3, r3, #1
 1164 009a 1370     		strb	r3, [r2]
 1165 009c CCE7     		b	.L61
 1166              	.L64:
 403:FML/Src/EC2x.c ****     }
 1167              		.loc 1 403 13 is_stmt 1 view .LVU326
 1168 009e 0649     		ldr	r1, .L65+16
 1169 00a0 0348     		ldr	r0, .L65+8
 1170 00a2 FFF7FEFF 		bl	shellPrint
 1171              	.LVL100:
 1172              		.loc 1 405 1 is_stmt 0 view .LVU327
 1173 00a6 C7E7     		b	.L61
 1174              	.L66:
 1175              		.align	2
 1176              	.L65:
 1177 00a8 00000000 		.word	.LC6
 1178 00ac 0C000000 		.word	.LC7
 1179 00b0 00000000 		.word	shell
 1180 00b4 00000000 		.word	test_ok_cnt
 1181 00b8 1F000000 		.word	.LC8
 1182              		.cfi_endproc
 1183              	.LFE300:
 1185              		.section	.rodata.ec2x_open.str1.1,"aMS",%progbits,1
 1186              	.LC9:
 1187 0000 65633278 		.ascii	"ec2x initial OK\015\012\000"
 1187      20696E69 
 1187      7469616C 
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 32


 1187      204F4B0D 
 1187      0A00
 1188              	.LC10:
 1189 0012 65633278 		.ascii	"ec2x initial not Failed\015\012\000"
 1189      20696E69 
 1189      7469616C 
 1189      206E6F74 
 1189      20466169 
 1190              		.section	.text.ec2x_open,"ax",%progbits
 1191              		.align	1
 1192              		.global	ec2x_open
 1193              		.syntax unified
 1194              		.thumb
 1195              		.thumb_func
 1197              	ec2x_open:
 1198              	.LVL101:
 1199              	.LFB293:
 149:FML/Src/EC2x.c ****     uint8_t i = 0;
 1200              		.loc 1 149 1 is_stmt 1 view -0
 1201              		.cfi_startproc
 1202              		@ args = 0, pretend = 0, frame = 0
 1203              		@ frame_needed = 0, uses_anonymous_args = 0
 150:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 1204              		.loc 1 150 5 view .LVU329
 151:FML/Src/EC2x.c ****     {
 1205              		.loc 1 151 5 view .LVU330
 151:FML/Src/EC2x.c ****     {
 1206              		.loc 1 151 15 view .LVU331
 153:FML/Src/EC2x.c ****         {
 1207              		.loc 1 153 9 view .LVU332
 149:FML/Src/EC2x.c ****     uint8_t i = 0;
 1208              		.loc 1 149 1 is_stmt 0 view .LVU333
 1209 0000 38B5     		push	{r3, r4, r5, lr}
 1210              	.LCFI21:
 1211              		.cfi_def_cfa_offset 16
 1212              		.cfi_offset 3, -16
 1213              		.cfi_offset 4, -12
 1214              		.cfi_offset 5, -8
 1215              		.cfi_offset 14, -4
 153:FML/Src/EC2x.c ****         {
 1216              		.loc 1 153 12 view .LVU334
 1217 0002 0D49     		ldr	r1, .L71
 1218 0004 FFF7FEFF 		bl	strcmp
 1219              	.LVL102:
 153:FML/Src/EC2x.c ****         {
 1220              		.loc 1 153 11 view .LVU335
 1221 0008 0546     		mov	r5, r0
 1222 000a 90B9     		cbnz	r0, .L70
 155:FML/Src/EC2x.c ****             if(ec2x_reset(i))
 1223              		.loc 1 155 13 is_stmt 1 view .LVU336
 1224 000c 0A48     		ldr	r0, .L71
 1225 000e FFF7FEFF 		bl	ec2x_io_init
 1226              	.LVL103:
 156:FML/Src/EC2x.c ****                 shellPrint(&shell,"ec2x initial OK\r\n");
 1227              		.loc 1 156 13 view .LVU337
 156:FML/Src/EC2x.c ****                 shellPrint(&shell,"ec2x initial OK\r\n");
 1228              		.loc 1 156 16 is_stmt 0 view .LVU338
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 33


 1229 0012 FFF7FEFF 		bl	ec2x_reset.constprop.0
 1230              	.LVL104:
 156:FML/Src/EC2x.c ****                 shellPrint(&shell,"ec2x initial OK\r\n");
 1231              		.loc 1 156 15 view .LVU339
 1232 0016 0446     		mov	r4, r0
 1233 0018 30B1     		cbz	r0, .L69
 157:FML/Src/EC2x.c ****             else
 1234              		.loc 1 157 17 is_stmt 1 view .LVU340
 1235 001a 0849     		ldr	r1, .L71+4
 1236 001c 0848     		ldr	r0, .L71+8
 1237 001e FFF7FEFF 		bl	shellPrint
 1238              	.LVL105:
 153:FML/Src/EC2x.c ****         {
 1239              		.loc 1 153 39 is_stmt 0 view .LVU341
 1240 0022 2C46     		mov	r4, r5
 1241              	.LVL106:
 1242              	.L67:
 164:FML/Src/EC2x.c **** 
 1243              		.loc 1 164 1 view .LVU342
 1244 0024 2046     		mov	r0, r4
 1245 0026 38BD     		pop	{r3, r4, r5, pc}
 1246              	.LVL107:
 1247              	.L69:
 159:FML/Src/EC2x.c ****             return i;
 1248              		.loc 1 159 17 is_stmt 1 view .LVU343
 1249 0028 0649     		ldr	r1, .L71+12
 1250 002a 0548     		ldr	r0, .L71+8
 1251 002c FFF7FEFF 		bl	shellPrint
 1252              	.LVL108:
 1253 0030 F8E7     		b	.L67
 1254              	.L70:
 163:FML/Src/EC2x.c **** };
 1255              		.loc 1 163 12 is_stmt 0 view .LVU344
 1256 0032 4FF0FF34 		mov	r4, #-1
 1257              	.LVL109:
 163:FML/Src/EC2x.c **** };
 1258              		.loc 1 163 12 view .LVU345
 1259 0036 F5E7     		b	.L67
 1260              	.L72:
 1261              		.align	2
 1262              	.L71:
 1263 0038 00000000 		.word	.LANCHOR0
 1264 003c 00000000 		.word	.LC9
 1265 0040 00000000 		.word	shell
 1266 0044 12000000 		.word	.LC10
 1267              		.cfi_endproc
 1268              	.LFE293:
 1270              		.global	shellCommandec2x_connect
 1271              		.global	shellDescec2x_connect
 1272              		.global	shellCmdec2x_connect
 1273              		.global	shellCommandec2x_test
 1274              		.global	shellDescec2x_test
 1275              		.global	shellCmdec2x_test
 1276              		.global	ec2x_dev
 1277              		.global	connectmsg_queue
 1278              		.section	.rodata.str1.1,"aMS",%progbits,1
 1279              	.LC11:
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 34


 1280 0000 41540D0A 		.ascii	"AT\015\012\000"
 1280      00
 1281              	.LC12:
 1282 0005 4F4B00   		.ascii	"OK\000"
 1283              	.LC13:
 1284 0008 41544530 		.ascii	"ATE0\015\012\000"
 1284      0D0A00
 1285              	.LC14:
 1286 000f 41542B43 		.ascii	"AT+CPIN?\015\012\000"
 1286      50494E3F 
 1286      0D0A00
 1287              	.LC15:
 1288 001a 52454144 		.ascii	"READY\000"
 1288      5900
 1289              	.LC16:
 1290 0020 41542B43 		.ascii	"AT+CREG?\015\012\000"
 1290      5245473F 
 1290      0D0A00
 1291              	.LC17:
 1292 002b 2B435245 		.ascii	"+CREG: 0,1\000"
 1292      473A2030 
 1292      2C3100
 1293              	.LC18:
 1294 0036 41542B43 		.ascii	"AT+CGREG?\015\012\000"
 1294      47524547 
 1294      3F0D0A00 
 1295              	.LC19:
 1296 0042 2B434752 		.ascii	"+CGREG: 0,1\000"
 1296      45473A20 
 1296      302C3100 
 1297              	.LC20:
 1298 004e 41542B51 		.ascii	"AT+QICSGP=1,1,\"CMNET\",\"\",\"\",1\015\012\000"
 1298      49435347 
 1298      503D312C 
 1298      312C2243 
 1298      4D4E4554 
 1299              	.LC21:
 1300 006e 41542B51 		.ascii	"AT+QIDEACT=1\015\012\000"
 1300      49444541 
 1300      43543D31 
 1300      0D0A00
 1301              	.LC22:
 1302 007d 41542B51 		.ascii	"AT+QIACT=1\015\012\000"
 1302      49414354 
 1302      3D310D0A 
 1302      00
 1303              		.global	tcpconnct_step
 1304              		.global	tcp_connect
 1305              		.global	ec2x_buff
 1306              		.section	.bss.reset_times,"aw",%nobits
 1307              		.set	.LANCHOR1,. + 0
 1310              	reset_times:
 1311 0000 00       		.space	1
 1312              		.section	.bss.retry.0,"aw",%nobits
 1313              		.set	.LANCHOR4,. + 0
 1316              	retry.0:
 1317 0000 00       		.space	1
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 35


 1318              		.section	.bss.step.1,"aw",%nobits
 1319              		.set	.LANCHOR3,. + 0
 1322              	step.1:
 1323 0000 00       		.space	1
 1324              		.section	.bss.tcpconnct_step,"aw",%nobits
 1327              	tcpconnct_step:
 1328 0000 00       		.space	1
 1329              		.section	.data.connectmsg_queue,"aw"
 1330              		.align	2
 1331              		.set	.LANCHOR2,. + 0
 1334              	connectmsg_queue:
 1335 0000 00000000 		.word	.LC11
 1336 0004 05000000 		.word	.LC12
 1337 0008 C800     		.short	200
 1338 000a 05       		.byte	5
 1339 000b 00       		.space	1
 1340 000c 08000000 		.word	.LC13
 1341 0010 05000000 		.word	.LC12
 1342 0014 C800     		.short	200
 1343 0016 05       		.byte	5
 1344 0017 00       		.space	1
 1345 0018 0F000000 		.word	.LC14
 1346 001c 1A000000 		.word	.LC15
 1347 0020 F401     		.short	500
 1348 0022 05       		.byte	5
 1349 0023 00       		.space	1
 1350 0024 20000000 		.word	.LC16
 1351 0028 2B000000 		.word	.LC17
 1352 002c F401     		.short	500
 1353 002e 05       		.byte	5
 1354 002f 00       		.space	1
 1355 0030 36000000 		.word	.LC18
 1356 0034 42000000 		.word	.LC19
 1357 0038 F401     		.short	500
 1358 003a 05       		.byte	5
 1359 003b 00       		.space	1
 1360 003c 4E000000 		.word	.LC20
 1361 0040 05000000 		.word	.LC12
 1362 0044 F401     		.short	500
 1363 0046 05       		.byte	5
 1364 0047 00       		.space	1
 1365 0048 6E000000 		.word	.LC21
 1366 004c 05000000 		.word	.LC12
 1367 0050 F401     		.short	500
 1368 0052 05       		.byte	5
 1369 0053 00       		.space	1
 1370 0054 7D000000 		.word	.LC22
 1371 0058 05000000 		.word	.LC12
 1372 005c F401     		.short	500
 1373 005e 05       		.byte	5
 1374 005f 00       		.space	1
 1375 0060 00000000 		.word	tcp_connect
 1376 0064 05000000 		.word	.LC12
 1377 0068 F401     		.short	500
 1378 006a 05       		.byte	5
 1379 006b 00       		.space	1
 1380              		.section	.data.ec2x_buff,"aw"
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 36


 1383              	ec2x_buff:
 1384 0000 FF00     		.ascii	"\377\000"
 1385 0002 00000000 		.space	198
 1385      00000000 
 1385      00000000 
 1385      00000000 
 1385      00000000 
 1386              		.section	.data.ec2x_dev,"aw"
 1387              		.align	2
 1388              		.set	.LANCHOR0,. + 0
 1391              	ec2x_dev:
 1392 0000 75617274 		.ascii	"uart1/ec200s\000"
 1392      312F6563 
 1392      32303073 
 1392      00
 1393 000d 0000     		.space	2
 1394 000f 00       		.space	1
 1395 0010 00000000 		.word	huart1
 1396 0014 00000048 		.word	1207959552
 1397 0018 0010     		.short	4096
 1398 001a 0000     		.space	2
 1399 001c 00000048 		.word	1207959552
 1400 0020 0001     		.short	256
 1401 0022 0000     		.space	2
 1402 0024 00000048 		.word	1207959552
 1403 0028 0008     		.short	2048
 1404 002a 0000     		.space	2
 1405 002c 00       		.byte	0
 1406 002d 000000   		.space	3
 1407 0030 00000000 		.word	ec2x_buff
 1408 0034 0000     		.short	0
 1409 0036 0000     		.short	0
 1410 0038 0000     		.short	0
 1411 003a C800     		.short	200
 1412              		.section	.data.tcp_connect,"aw"
 1415              	tcp_connect:
 1416 0000 41542B51 		.ascii	"AT+QIOPEN=1,0,\"TCP\",\"47.108.254.101\",7002,0,0\015"
 1416      494F5045 
 1416      4E3D312C 
 1416      302C2254 
 1416      4350222C 
 1417 002e 0A00     		.ascii	"\012\000"
 1418              		.section	.rodata.shellCmdec2x_connect,"a"
 1421              	shellCmdec2x_connect:
 1422 0000 65633278 		.ascii	"ec2x_connect\000"
 1422      5F636F6E 
 1422      6E656374 
 1422      00
 1423              		.section	.rodata.shellCmdec2x_test,"a"
 1426              	shellCmdec2x_test:
 1427 0000 65633278 		.ascii	"ec2x_test\000"
 1427      5F746573 
 1427      7400
 1428              		.section	.rodata.shellDescec2x_connect,"a"
 1431              	shellDescec2x_connect:
 1432 0000 65633278 		.ascii	"ec2x tcp connect\000"
 1432      20746370 
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 37


 1432      20636F6E 
 1432      6E656374 
 1432      00
 1433              		.section	.rodata.shellDescec2x_test,"a"
 1436              	shellDescec2x_test:
 1437 0000 73656E64 		.ascii	"send command and wait for reply\000"
 1437      20636F6D 
 1437      6D616E64 
 1437      20616E64 
 1437      20776169 
 1438              		.section	shellCommand,"a"
 1441              	shellCommandec2x_connect:
 1442 0000 00210000 		.4byte	8448
 1443 0004 00000000 		.4byte	shellCmdec2x_connect
 1444 0008 00000000 		.4byte	ec2x_tcp_connect
 1445 000c 00000000 		.4byte	shellDescec2x_connect
 1448              	shellCommandec2x_test:
 1449 0010 00210000 		.4byte	8448
 1450 0014 00000000 		.4byte	shellCmdec2x_test
 1451 0018 00000000 		.4byte	EC2x_Test
 1452 001c 00000000 		.4byte	shellDescec2x_test
 1453              		.text
 1454              	.Letext0:
 1455              		.file 2 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\
 1456              		.file 3 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\
 1457              		.file 4 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l431xx.h"
 1458              		.file 5 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l4xx.h"
 1459              		.file 6 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 1460              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_gpio.h"
 1461              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 1462              		.file 9 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_uart.h"
 1463              		.file 10 "FML/Inc/EC2x.h"
 1464              		.file 11 "ThirdParty/Letter-shell/Inc/shell.h"
 1465              		.file 12 "HAL/Inc/usart.h"
 1466              		.file 13 "ThirdParty/Letter-shell/Inc/shell_port.h"
 1467              		.file 14 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\
 1468              		.file 15 "<built-in>"
 1469              		.file 16 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 38


DEFINED SYMBOLS
                            *ABS*:00000000 EC2x.c
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:20     .text.ec2x_io_init:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:26     .text.ec2x_io_init:00000000 ec2x_io_init
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:167    .text.ec2x_io_init:0000008c $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:172    .text.ec2x_write:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:178    .text.ec2x_write:00000000 ec2x_write
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:243    .text.ec2x_write:00000024 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:248    .text.ec2x_read:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:254    .text.ec2x_read:00000000 ec2x_read
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:376    .text.ec2x_read:00000068 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:384    .text.ec2x_handler:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:390    .text.ec2x_handler:00000000 ec2x_handler
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:529    .text.ec2x_handler:00000074 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:537    .text.ec2x_replymatch:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:543    .text.ec2x_replymatch:00000000 ec2x_replymatch
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:621    .text.ec2x_cmd_send:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:626    .text.ec2x_cmd_send:00000000 ec2x_cmd_send
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:740    .text.ec2x_cmd_send:0000006c $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:749    .text.ec2x_reset.constprop.0:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:754    .text.ec2x_reset.constprop.0:00000000 ec2x_reset.constprop.0
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:818    .text.ec2x_reset.constprop.0:00000040 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:834    .text.ec2x_tcp_connect:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:840    .text.ec2x_tcp_connect:00000000 ec2x_tcp_connect
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1002   .text.ec2x_tcp_connect:000000b0 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1022   .text.EC2x_Test:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1028   .text.EC2x_Test:00000000 EC2x_Test
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1177   .text.EC2x_Test:000000a8 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1191   .text.ec2x_open:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1197   .text.ec2x_open:00000000 ec2x_open
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1263   .text.ec2x_open:00000038 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1441   shellCommand:00000000 shellCommandec2x_connect
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1431   .rodata.shellDescec2x_connect:00000000 shellDescec2x_connect
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1421   .rodata.shellCmdec2x_connect:00000000 shellCmdec2x_connect
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1448   shellCommand:00000010 shellCommandec2x_test
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1436   .rodata.shellDescec2x_test:00000000 shellDescec2x_test
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1426   .rodata.shellCmdec2x_test:00000000 shellCmdec2x_test
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1391   .data.ec2x_dev:00000000 ec2x_dev
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1334   .data.connectmsg_queue:00000000 connectmsg_queue
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1327   .bss.tcpconnct_step:00000000 tcpconnct_step
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1415   .data.tcp_connect:00000000 tcp_connect
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1383   .data.ec2x_buff:00000000 ec2x_buff
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1310   .bss.reset_times:00000000 reset_times
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1311   .bss.reset_times:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1316   .bss.retry.0:00000000 retry.0
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1317   .bss.retry.0:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1322   .bss.step.1:00000000 step.1
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1323   .bss.step.1:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1328   .bss.tcpconnct_step:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1330   .data.connectmsg_queue:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1385   .data.ec2x_buff:00000002 $d
C:\Users\CL\AppData\Local\Temp\ccNZ526f.s:1387   .data.ec2x_dev:00000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_Init
HAL_GPIO_WritePin
Delay_ms
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccNZ526f.s 			page 39


HAL_UART_Transmit_IT
shellPrint
shell
memset
strstr
strlen
strcmp
memcpy
test_ok_cnt
huart1
