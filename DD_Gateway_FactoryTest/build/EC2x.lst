ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"EC2x.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.ec2x_waitreply,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	ec2x_waitreply:
  26              	.LVL0:
  27              	.LFB303:
  28              		.file 1 "FML/Src/EC2x.c"
   1:FML/Src/EC2x.c **** /**
   2:FML/Src/EC2x.c ****  ******************************************************************************
   3:FML/Src/EC2x.c **** *
   4:FML/Src/EC2x.c **** * @file   
   5:FML/Src/EC2x.c **** *
   6:FML/Src/EC2x.c **** * @brief   
   7:FML/Src/EC2x.c **** *
   8:FML/Src/EC2x.c **** * @attention
   9:FML/Src/EC2x.c **** *
  10:FML/Src/EC2x.c **** *Copyright (c) 2023 STMicroelectronics.
  11:FML/Src/EC2x.c **** *
  12:FML/Src/EC2x.c **** *All rights reserved.
  13:FML/Src/EC2x.c ****  ******************************************************************************
  14:FML/Src/EC2x.c **** */
  15:FML/Src/EC2x.c **** 
  16:FML/Src/EC2x.c **** 
  17:FML/Src/EC2x.c **** /*----------------------------------include-----------------------------------*/
  18:FML/Src/EC2x.c **** #include "EC2x.h"
  19:FML/Src/EC2x.c **** #include "usart.h"
  20:FML/Src/EC2x.c **** #include "timer.h"
  21:FML/Src/EC2x.c **** #include "shell_port.h"
  22:FML/Src/EC2x.c **** #include <stdio.h>
  23:FML/Src/EC2x.c **** #include "fsm.h"
  24:FML/Src/EC2x.c **** #include "queue.h"
  25:FML/Src/EC2x.c **** /*-----------------------------------macro------------------------------------*/
  26:FML/Src/EC2x.c **** #define BUFF_LEN 300
  27:FML/Src/EC2x.c **** /*----------------------------------typedef-----------------------------------*/
  28:FML/Src/EC2x.c **** void ec2x_queue_send(void);
  29:FML/Src/EC2x.c **** void ec2x_reply_handler(void);
  30:FML/Src/EC2x.c **** void ex2x_timeout_handler(void);
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 2


  31:FML/Src/EC2x.c **** /*----------------------------------variable----------------------------------*/
  32:FML/Src/EC2x.c **** uint8_t ec2x_buff[BUFF_LEN]={0xff,};
  33:FML/Src/EC2x.c **** 
  34:FML/Src/EC2x.c **** FSM_T ec2x_fsm;
  35:FML/Src/EC2x.c **** 
  36:FML/Src/EC2x.c **** StateTransform_T ec2x_transtable[] = 
  37:FML/Src/EC2x.c **** {
  38:FML/Src/EC2x.c **** 	{UINIT,Timeout_Event,UINIT,ec2x_reset},
  39:FML/Src/EC2x.c **** 	{UINIT,ReplyScs_Event,AT_MODE,NULL},
  40:FML/Src/EC2x.c **** 	{AT_MODE,CMDSend_Event,WAIT_REPLY,ec2x_queue_send},
  41:FML/Src/EC2x.c **** 	{WAIT_REPLY,ReplyScs_Event,AT_MODE,ec2x_reply_handler},
  42:FML/Src/EC2x.c **** 	{WAIT_REPLY,Timeout_Event,AT_MODE,ex2x_timeout_handler},
  43:FML/Src/EC2x.c **** 	{TRANS_MODE,MsgSend_Event,TRANS_MODE,NULL},
  44:FML/Src/EC2x.c **** };
  45:FML/Src/EC2x.c **** 
  46:FML/Src/EC2x.c **** //定义事件队列
  47:FML/Src/EC2x.c **** uint8_t event_buff[10];
  48:FML/Src/EC2x.c **** Queue_HandleTypeDef ec2x_event_queue;
  49:FML/Src/EC2x.c **** //定义tcp连接字符串
  50:FML/Src/EC2x.c **** uint8_t tcp_connect[]="AT+QIOPEN=1,0,\"TCP\",\"115.236.153.170\",52894,0,2";
  51:FML/Src/EC2x.c **** 
  52:FML/Src/EC2x.c **** //定义tcp连接指令队列
  53:FML/Src/EC2x.c **** uint8_t tcpconnct_step = 0;
  54:FML/Src/EC2x.c **** ATMsg_TypeDef connectmsg_queue[] = {
  55:FML/Src/EC2x.c ****     {"AT\r\n","OK",500,5},
  56:FML/Src/EC2x.c ****     {"AT+CPIN?\r\n","+CPIN: READY",500,2},
  57:FML/Src/EC2x.c ****     {"AT+CREG?\r\n","+CREG: 0,1", 500, 2},
  58:FML/Src/EC2x.c ****     {"AT+CGREG?\r\n","+CGREG: 0,1", 500, 2},
  59:FML/Src/EC2x.c ****     {"AT+QICSGP=1,1,\"CMNET\",\"\",\"\",1\r\n","OK", 500, 3},
  60:FML/Src/EC2x.c ****     {"AT+QIDEACT=1\r\n", "OK", 40, 1},
  61:FML/Src/EC2x.c ****     {"AT+QIACT=1\r\n", "OK", 150, 1},
  62:FML/Src/EC2x.c ****     {tcp_connect, "+QIOPEN:", 150, 5},
  63:FML/Src/EC2x.c **** };
  64:FML/Src/EC2x.c **** 
  65:FML/Src/EC2x.c **** //定义发送消息队列
  66:FML/Src/EC2x.c **** ATMsg_TypeDef *ec2x_txmsg_buff[10];
  67:FML/Src/EC2x.c **** ATMsg_TypeDef *cur_msg = NULL;
  68:FML/Src/EC2x.c **** Queue_HandleTypeDef ec2x_txmsg_queue;
  69:FML/Src/EC2x.c **** 
  70:FML/Src/EC2x.c **** 
  71:FML/Src/EC2x.c **** /*----------------------------------typedef-----------------------------------*/
  72:FML/Src/EC2x.c **** 
  73:FML/Src/EC2x.c **** EC2x_HandleTypeDef ec2x_dev[]=
  74:FML/Src/EC2x.c **** {
  75:FML/Src/EC2x.c ****     {
  76:FML/Src/EC2x.c ****         "uart1/ec200s",
  77:FML/Src/EC2x.c ****         &huart1,
  78:FML/Src/EC2x.c ****         GPIOA,
  79:FML/Src/EC2x.c ****         GPIO_PIN_12,
  80:FML/Src/EC2x.c ****         GPIOA,
  81:FML/Src/EC2x.c ****         GPIO_PIN_8,
  82:FML/Src/EC2x.c ****         GPIOA,
  83:FML/Src/EC2x.c ****         GPIO_PIN_11,
  84:FML/Src/EC2x.c ****         {
  85:FML/Src/EC2x.c ****             0,
  86:FML/Src/EC2x.c ****            ec2x_buff,
  87:FML/Src/EC2x.c ****             0,
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 3


  88:FML/Src/EC2x.c ****             0,
  89:FML/Src/EC2x.c ****             0,
  90:FML/Src/EC2x.c ****             BUFF_LEN 
  91:FML/Src/EC2x.c ****         }
  92:FML/Src/EC2x.c ****     }
  93:FML/Src/EC2x.c **** };
  94:FML/Src/EC2x.c **** /*-------------------------------------os-------------------------------------*/
  95:FML/Src/EC2x.c **** 
  96:FML/Src/EC2x.c **** /*----------------------------------function----------------------------------*/
  97:FML/Src/EC2x.c **** 
  98:FML/Src/EC2x.c **** /**
  99:FML/Src/EC2x.c ****  * @brief 设备初始化函数
 100:FML/Src/EC2x.c ****  * 
 101:FML/Src/EC2x.c ****  */
 102:FML/Src/EC2x.c **** void ec2x_io_init(EC2x_HandleTypeDef *device)
 103:FML/Src/EC2x.c **** {
 104:FML/Src/EC2x.c ****      GPIO_InitTypeDef GPIO_InitStruct = {0};
 105:FML/Src/EC2x.c ****     
 106:FML/Src/EC2x.c ****     // 使能UART和GPIO时钟
 107:FML/Src/EC2x.c ****     //__HAL_RCC_UARTX_CLK_ENABLE(); // 替换为实际的UART时钟
 108:FML/Src/EC2x.c ****     __HAL_RCC_GPIOA_CLK_ENABLE(); // 替换为实际的GPIO时钟
 109:FML/Src/EC2x.c ****     
 110:FML/Src/EC2x.c ****     // 配置GPIO引脚
 111:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->reset_pin;
 112:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 113:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 114:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 115:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->reset_port, &GPIO_InitStruct);
 116:FML/Src/EC2x.c **** 
 117:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->wake_pin;
 118:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 119:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 120:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 121:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->wake_port, &GPIO_InitStruct);
 122:FML/Src/EC2x.c **** 
 123:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->pwren_pin;
 124:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 125:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 126:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 127:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->pwren_port, &GPIO_InitStruct);
 128:FML/Src/EC2x.c ****     
 129:FML/Src/EC2x.c ****     
 130:FML/Src/EC2x.c ****     // 初始化复位引脚为高电平
 131:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->reset_port, device->reset_pin, GPIO_PIN_SET);
 132:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->wake_port, device->wake_pin, GPIO_PIN_SET);
 133:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_SET);
 134:FML/Src/EC2x.c ****     HAL_Delay(1000);
 135:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_RESET);
 136:FML/Src/EC2x.c **** }
 137:FML/Src/EC2x.c **** /**
 138:FML/Src/EC2x.c ****  * @brief 通过POWEREN引脚，对模块进行掉电复位
 139:FML/Src/EC2x.c ****  * 
 140:FML/Src/EC2x.c ****  * @param fd 
 141:FML/Src/EC2x.c ****  * @return int 
 142:FML/Src/EC2x.c ****  */
 143:FML/Src/EC2x.c **** int ec2x_reset(int fd){
 144:FML/Src/EC2x.c ****     fd = 0;
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 4


 145:FML/Src/EC2x.c ****     int err_code = 0;
 146:FML/Src/EC2x.c ****     // if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 147:FML/Src/EC2x.c ****     //     return (err_code = -1);
 148:FML/Src/EC2x.c ****     // else{
 149:FML/Src/EC2x.c ****     //     EC2x_HandleTypeDef *device = &ec2x_dev[fd];
 150:FML/Src/EC2x.c ****     //     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_SET);
 151:FML/Src/EC2x.c ****     //     HAL_Delay(500);
 152:FML/Src/EC2x.c ****     //     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_RESET);
 153:FML/Src/EC2x.c ****     // }
 154:FML/Src/EC2x.c ****     ec2x_waitreply("\r\nRDY",10000);
 155:FML/Src/EC2x.c **** }
 156:FML/Src/EC2x.c **** 
 157:FML/Src/EC2x.c **** /**
 158:FML/Src/EC2x.c ****  * @brief 设备文件open函数
 159:FML/Src/EC2x.c ****  * 
 160:FML/Src/EC2x.c ****  * @param dev_name 
 161:FML/Src/EC2x.c ****  * @return int 
 162:FML/Src/EC2x.c ****  *         返回设备文件索引，未查找到则返回-1
 163:FML/Src/EC2x.c ****  */
 164:FML/Src/EC2x.c **** int ec2x_open(char *dev_name)
 165:FML/Src/EC2x.c **** {
 166:FML/Src/EC2x.c ****     uint8_t i = 0;
 167:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 168:FML/Src/EC2x.c ****     {
 169:FML/Src/EC2x.c ****         if(strcmp(dev_name,ec2x_dev[i].dev_name) == 0)
 170:FML/Src/EC2x.c ****         {
 171:FML/Src/EC2x.c ****             ec2x_io_init(&ec2x_dev[i]);
 172:FML/Src/EC2x.c **** 
 173:FML/Src/EC2x.c ****             queue_init(&ec2x_event_queue,event_buff,10);
 174:FML/Src/EC2x.c ****             queue_init(&ec2x_txmsg_queue,ec2x_txmsg_buff,10);
 175:FML/Src/EC2x.c ****         
 176:FML/Src/EC2x.c ****            // ec2x_fsm = (FSM_T*)malloc(sizeof(FSM_T));
 177:FML/Src/EC2x.c ****             uint8_t num = sizeof(ec2x_transtable)/sizeof(ec2x_transtable[0]);
 178:FML/Src/EC2x.c ****             FSM_Regist(&ec2x_fsm,ec2x_transtable,num,UINIT);
 179:FML/Src/EC2x.c ****             queue_insert(&ec2x_event_queue,(uint8_t)Timeout_Event);
 180:FML/Src/EC2x.c ****             return i;
 181:FML/Src/EC2x.c ****         }
 182:FML/Src/EC2x.c ****     }
 183:FML/Src/EC2x.c ****     return -1;
 184:FML/Src/EC2x.c **** };
 185:FML/Src/EC2x.c **** 
 186:FML/Src/EC2x.c **** /**
 187:FML/Src/EC2x.c ****  * @brief 设备文件close函数
 188:FML/Src/EC2x.c ****  * 
 189:FML/Src/EC2x.c ****  * @param fd 
 190:FML/Src/EC2x.c ****  * @return int 
 191:FML/Src/EC2x.c ****  */
 192:FML/Src/EC2x.c **** int ec2x_close(int fd);
 193:FML/Src/EC2x.c **** 
 194:FML/Src/EC2x.c **** /**
 195:FML/Src/EC2x.c ****  * @brief 设备文件写入函数
 196:FML/Src/EC2x.c ****  * 
 197:FML/Src/EC2x.c ****  * @param fd 
 198:FML/Src/EC2x.c ****  * @param tx_buff 
 199:FML/Src/EC2x.c ****  * @param len 
 200:FML/Src/EC2x.c ****  * @return int 
 201:FML/Src/EC2x.c ****  *         设备号无效返回-1
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 5


 202:FML/Src/EC2x.c ****  *         写入失败返回 0
 203:FML/Src/EC2x.c ****  *          写入成功返回1
 204:FML/Src/EC2x.c ****  *         
 205:FML/Src/EC2x.c ****  */
 206:FML/Src/EC2x.c **** int ec2x_write(int fd,uint8_t *tx_buff,uint16_t len){
 207:FML/Src/EC2x.c ****     int err_code = 0;
 208:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 209:FML/Src/EC2x.c ****         return (err_code = -1);
 210:FML/Src/EC2x.c ****     else{
 211:FML/Src/EC2x.c ****         err_code =  HAL_UART_Transmit_IT(ec2x_dev[fd].huart, tx_buff,len);
 212:FML/Src/EC2x.c ****         return(!err_code);
 213:FML/Src/EC2x.c ****     }
 214:FML/Src/EC2x.c **** };
 215:FML/Src/EC2x.c **** /**
 216:FML/Src/EC2x.c ****  * @brief 设备文件读取函数
 217:FML/Src/EC2x.c ****  *        读取环形缓冲区指定长度数据
 218:FML/Src/EC2x.c ****  * 
 219:FML/Src/EC2x.c ****  * @param fd 
 220:FML/Src/EC2x.c ****  * @param rx_buff 
 221:FML/Src/EC2x.c ****  * @param len 
 222:FML/Src/EC2x.c ****  * @return int 
 223:FML/Src/EC2x.c ****  *         -1 接口错误
 224:FML/Src/EC2x.c ****  *          0 读取失败
 225:FML/Src/EC2x.c ****  *          n 读取成功字节数
 226:FML/Src/EC2x.c ****  */
 227:FML/Src/EC2x.c **** int ec2x_read(int fd,uint8_t *rx_buff,uint16_t len){
 228:FML/Src/EC2x.c ****     uint8_t *dest = rx_buff;
 229:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 230:FML/Src/EC2x.c ****         return -1;
 231:FML/Src/EC2x.c ****     else{
 232:FML/Src/EC2x.c ****         uint16_t j = 0;
 233:FML/Src/EC2x.c ****         
 234:FML/Src/EC2x.c ****         RingBuffer_TypeDef *src = &ec2x_dev[fd].msg;
 235:FML/Src/EC2x.c ****         //如果队列被上锁了，则等待100ms
 236:FML/Src/EC2x.c ****         if(src->block == 1)
 237:FML/Src/EC2x.c ****         {
 238:FML/Src/EC2x.c ****             HAL_Delay(100);
 239:FML/Src/EC2x.c ****             if(src->block == 1)
 240:FML/Src/EC2x.c ****                 return 0;
 241:FML/Src/EC2x.c ****         }
 242:FML/Src/EC2x.c ****         else{
 243:FML/Src/EC2x.c ****             src->block = 1;
 244:FML/Src/EC2x.c ****             if(len > src->size)
 245:FML/Src/EC2x.c ****                 len = src->size;
 246:FML/Src/EC2x.c ****             for(j = 0 ; j < len; j++){
 247:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 248:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 249:FML/Src/EC2x.c ****                 src->size--;
 250:FML/Src/EC2x.c ****             }
 251:FML/Src/EC2x.c ****             src->block = 0;
 252:FML/Src/EC2x.c ****         }
 253:FML/Src/EC2x.c ****         return len;
 254:FML/Src/EC2x.c ****     }
 255:FML/Src/EC2x.c **** };
 256:FML/Src/EC2x.c **** int ec2x_ioctl(int fd);
 257:FML/Src/EC2x.c **** 
 258:FML/Src/EC2x.c **** /**
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 6


 259:FML/Src/EC2x.c ****  * @brief 将串口接收数据copy到环形缓冲区，并更新缓冲区状态
 260:FML/Src/EC2x.c ****  * 
 261:FML/Src/EC2x.c ****  * @param huart 
 262:FML/Src/EC2x.c ****  * @param data 
 263:FML/Src/EC2x.c ****  * @param len 
 264:FML/Src/EC2x.c ****  */
 265:FML/Src/EC2x.c **** void ec2x_handler(UART_HandleTypeDef *huart,uint8_t *data,uint16_t len)
 266:FML/Src/EC2x.c **** {
 267:FML/Src/EC2x.c ****     uint8_t i = 0,j = 0;
 268:FML/Src/EC2x.c ****     shellPrint(&shell,"%s",data);
 269:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 270:FML/Src/EC2x.c ****     {
 271:FML/Src/EC2x.c ****         if(huart == ec2x_dev[i].huart)
 272:FML/Src/EC2x.c ****         {
 273:FML/Src/EC2x.c ****             RingBuffer_TypeDef *dest = &ec2x_dev[i].msg;
 274:FML/Src/EC2x.c ****             if(dest->block  == 0){
 275:FML/Src/EC2x.c ****                 dest->block = 1;
 276:FML/Src/EC2x.c ****                 for(j = 0 ; j < len; j++){
 277:FML/Src/EC2x.c ****                    
 278:FML/Src/EC2x.c ****                     dest->data[dest->tail] = data[j];
 279:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 280:FML/Src/EC2x.c ****                     dest->size++;
 281:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 282:FML/Src/EC2x.c ****                 }
 283:FML/Src/EC2x.c ****                 if((dest->tail > dest->head)&&(dest->size == dest->capacity))
 284:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 285:FML/Src/EC2x.c ****                 dest->block = 0;
 286:FML/Src/EC2x.c ****             }
 287:FML/Src/EC2x.c ****         }
 288:FML/Src/EC2x.c ****     }
 289:FML/Src/EC2x.c **** }
 290:FML/Src/EC2x.c **** 
 291:FML/Src/EC2x.c **** static uint8_t timeout_cnt = 0;
 292:FML/Src/EC2x.c **** void ec2x_timeout_handle(void){
 293:FML/Src/EC2x.c ****     shellPrint(&shell,"no valid data\r\n");
 294:FML/Src/EC2x.c ****     queue_insert(&ec2x_event_queue,(uint8_t)Timeout_Event);
 295:FML/Src/EC2x.c **** }
 296:FML/Src/EC2x.c **** 
 297:FML/Src/EC2x.c **** int ec2x_replymatch(char* expect){
 298:FML/Src/EC2x.c ****     uint8_t rx_buff[300]  = {0x00};
 299:FML/Src/EC2x.c ****     int bytes_num = 0;
 300:FML/Src/EC2x.c ****     bytes_num =  ec2x_read(0,rx_buff,300);
 301:FML/Src/EC2x.c ****     if(bytes_num > 0)
 302:FML/Src/EC2x.c ****     {
 303:FML/Src/EC2x.c ****         if(strstr(rx_buff,expect) != NULL){
 304:FML/Src/EC2x.c ****              shellPrint(&shell,"recv success");
 305:FML/Src/EC2x.c ****              queue_insert(&ec2x_event_queue,(uint8_t)ReplyScs_Event);
 306:FML/Src/EC2x.c ****             return 1;
 307:FML/Src/EC2x.c ****         }
 308:FML/Src/EC2x.c ****     }
 309:FML/Src/EC2x.c ****     
 310:FML/Src/EC2x.c ****     if(timeout_cnt == 0)
 311:FML/Src/EC2x.c ****          ec2x_timeout_handle(); 
 312:FML/Src/EC2x.c ****     else
 313:FML/Src/EC2x.c ****         timeout_cnt--;
 314:FML/Src/EC2x.c ****     return 0;
 315:FML/Src/EC2x.c **** }
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 7


 316:FML/Src/EC2x.c **** 
 317:FML/Src/EC2x.c **** //扫描发送消息队列是否有消息，有则发送队首消息
 318:FML/Src/EC2x.c **** void ec2x_queue_send(void){
 319:FML/Src/EC2x.c ****     
 320:FML/Src/EC2x.c ****     if(!queue_is_empty(&ec2x_txmsg_queue)){
 321:FML/Src/EC2x.c ****         if(queue_pull(&ec2x_txmsg_queue,&cur_msg,1))
 322:FML/Src/EC2x.c ****         ec2x_cmd_send(0,cur_msg->txmsg,sizeof(cur_msg->txmsg),cur_msg->expect_reply,cur_msg->timeou
 323:FML/Src/EC2x.c ****     }      
 324:FML/Src/EC2x.c **** }
 325:FML/Src/EC2x.c **** 
 326:FML/Src/EC2x.c **** void ec2x_reply_handler(void){
 327:FML/Src/EC2x.c ****     
 328:FML/Src/EC2x.c ****     if(!queue_is_empty(&ec2x_txmsg_queue)){
 329:FML/Src/EC2x.c ****         queue_pop(&ec2x_txmsg_queue,&cur_msg,1);
 330:FML/Src/EC2x.c ****     }
 331:FML/Src/EC2x.c ****     if(!queue_is_empty(&ec2x_txmsg_queue)){
 332:FML/Src/EC2x.c ****         queue_insert(&ec2x_event_queue,(uint8_t)CMDSend_Event);
 333:FML/Src/EC2x.c ****     }        
 334:FML/Src/EC2x.c **** }
 335:FML/Src/EC2x.c **** void ex2x_timeout_handler(void){
 336:FML/Src/EC2x.c ****     cur_msg->retry_times--;
 337:FML/Src/EC2x.c ****     if(cur_msg->retry_times == 0){
 338:FML/Src/EC2x.c ****         if(!queue_is_empty(&ec2x_txmsg_queue))
 339:FML/Src/EC2x.c ****             queue_pop(&ec2x_txmsg_queue,&cur_msg,1);       
 340:FML/Src/EC2x.c ****     }
 341:FML/Src/EC2x.c ****     else
 342:FML/Src/EC2x.c ****         queue_insert(&ec2x_event_queue,(uint8_t)CMDSend_Event); 
 343:FML/Src/EC2x.c **** }
 344:FML/Src/EC2x.c **** void ec2x_cmd_send(int fd,uint8_t *tx_buff,uint16_t len,uint8_t *expect_reply,uint16_t timeout)
 345:FML/Src/EC2x.c **** {
 346:FML/Src/EC2x.c ****     ec2x_write(fd,tx_buff,len);
 347:FML/Src/EC2x.c ****     ec2x_waitreply(expect_reply,timeout);
 348:FML/Src/EC2x.c **** }
 349:FML/Src/EC2x.c **** 
 350:FML/Src/EC2x.c **** /***/
 351:FML/Src/EC2x.c **** void ec2x_waitreply(uint8_t *expect,uint16_t timeout){
  29              		.loc 1 351 54 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 351 54 is_stmt 0 view .LVU1
  34 0000 08B5     		push	{r3, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 3, -8
  38              		.cfi_offset 14, -4
  39 0002 0346     		mov	r3, r0
 352:FML/Src/EC2x.c ****     timeout_cnt = timeout / 100;
  40              		.loc 1 352 5 is_stmt 1 view .LVU2
  41              		.loc 1 352 17 is_stmt 0 view .LVU3
  42 0004 064A     		ldr	r2, .L3
  43 0006 A2FB0121 		umull	r2, r1, r2, r1
  44              	.LVL1:
  45              		.loc 1 352 17 view .LVU4
  46 000a C1F34711 		ubfx	r1, r1, #5, #8
  47 000e 054A     		ldr	r2, .L3+4
  48 0010 1170     		strb	r1, [r2]
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 8


 353:FML/Src/EC2x.c ****     timer_insert(100,timeout_cnt,ec2x_replymatch,expect);
  49              		.loc 1 353 5 is_stmt 1 view .LVU5
  50 0012 054A     		ldr	r2, .L3+8
  51 0014 49B2     		sxtb	r1, r1
  52 0016 6420     		movs	r0, #100
  53              	.LVL2:
  54              		.loc 1 353 5 is_stmt 0 view .LVU6
  55 0018 FFF7FEFF 		bl	timer_insert
  56              	.LVL3:
 354:FML/Src/EC2x.c **** }
  57              		.loc 1 354 1 view .LVU7
  58 001c 08BD     		pop	{r3, pc}
  59              	.L4:
  60 001e 00BF     		.align	2
  61              	.L3:
  62 0020 1F85EB51 		.word	1374389535
  63 0024 00000000 		.word	.LANCHOR0
  64 0028 00000000 		.word	ec2x_replymatch
  65              		.cfi_endproc
  66              	.LFE303:
  68              		.section	.rodata.ec2x_reset.str1.4,"aMS",%progbits,1
  69              		.align	2
  70              	.LC0:
  71 0000 0D0A5244 		.ascii	"\015\012RDY\000"
  71      5900
  72              		.section	.text.ec2x_reset,"ax",%progbits
  73              		.align	1
  74              		.syntax unified
  75              		.thumb
  76              		.thumb_func
  78              	ec2x_reset:
  79              	.LVL4:
  80              	.LFB292:
 143:FML/Src/EC2x.c ****     fd = 0;
  81              		.loc 1 143 23 is_stmt 1 view -0
  82              		.cfi_startproc
  83              		@ args = 0, pretend = 0, frame = 0
  84              		@ frame_needed = 0, uses_anonymous_args = 0
 143:FML/Src/EC2x.c ****     fd = 0;
  85              		.loc 1 143 23 is_stmt 0 view .LVU9
  86 0000 08B5     		push	{r3, lr}
  87              	.LCFI1:
  88              		.cfi_def_cfa_offset 8
  89              		.cfi_offset 3, -8
  90              		.cfi_offset 14, -4
 144:FML/Src/EC2x.c ****     int err_code = 0;
  91              		.loc 1 144 5 is_stmt 1 view .LVU10
  92              	.LVL5:
 145:FML/Src/EC2x.c ****     // if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
  93              		.loc 1 145 5 view .LVU11
 154:FML/Src/EC2x.c **** }
  94              		.loc 1 154 5 view .LVU12
  95 0002 42F21071 		movw	r1, #10000
  96 0006 0248     		ldr	r0, .L7
  97 0008 FFF7FEFF 		bl	ec2x_waitreply
  98              	.LVL6:
 155:FML/Src/EC2x.c **** 
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 9


  99              		.loc 1 155 1 is_stmt 0 view .LVU13
 100 000c 08BD     		pop	{r3, pc}
 101              	.L8:
 102 000e 00BF     		.align	2
 103              	.L7:
 104 0010 00000000 		.word	.LC0
 105              		.cfi_endproc
 106              	.LFE292:
 108              		.section	.text.ec2x_reply_handler,"ax",%progbits
 109              		.align	1
 110              		.global	ec2x_reply_handler
 111              		.syntax unified
 112              		.thumb
 113              		.thumb_func
 115              	ec2x_reply_handler:
 116              	.LFB300:
 326:FML/Src/EC2x.c ****     
 117              		.loc 1 326 30 is_stmt 1 view -0
 118              		.cfi_startproc
 119              		@ args = 0, pretend = 0, frame = 0
 120              		@ frame_needed = 0, uses_anonymous_args = 0
 121 0000 08B5     		push	{r3, lr}
 122              	.LCFI2:
 123              		.cfi_def_cfa_offset 8
 124              		.cfi_offset 3, -8
 125              		.cfi_offset 14, -4
 328:FML/Src/EC2x.c ****         queue_pop(&ec2x_txmsg_queue,&cur_msg,1);
 126              		.loc 1 328 5 view .LVU15
 328:FML/Src/EC2x.c ****         queue_pop(&ec2x_txmsg_queue,&cur_msg,1);
 127              		.loc 1 328 9 is_stmt 0 view .LVU16
 128 0002 0A48     		ldr	r0, .L15
 129 0004 FFF7FEFF 		bl	queue_is_empty
 130              	.LVL7:
 328:FML/Src/EC2x.c ****         queue_pop(&ec2x_txmsg_queue,&cur_msg,1);
 131              		.loc 1 328 7 view .LVU17
 132 0008 20B1     		cbz	r0, .L13
 133              	.L10:
 331:FML/Src/EC2x.c ****         queue_insert(&ec2x_event_queue,(uint8_t)CMDSend_Event);
 134              		.loc 1 331 5 is_stmt 1 view .LVU18
 331:FML/Src/EC2x.c ****         queue_insert(&ec2x_event_queue,(uint8_t)CMDSend_Event);
 135              		.loc 1 331 9 is_stmt 0 view .LVU19
 136 000a 0848     		ldr	r0, .L15
 137 000c FFF7FEFF 		bl	queue_is_empty
 138              	.LVL8:
 331:FML/Src/EC2x.c ****         queue_insert(&ec2x_event_queue,(uint8_t)CMDSend_Event);
 139              		.loc 1 331 7 view .LVU20
 140 0010 30B1     		cbz	r0, .L14
 141              	.L9:
 334:FML/Src/EC2x.c **** void ex2x_timeout_handler(void){
 142              		.loc 1 334 1 view .LVU21
 143 0012 08BD     		pop	{r3, pc}
 144              	.L13:
 329:FML/Src/EC2x.c ****     }
 145              		.loc 1 329 9 is_stmt 1 view .LVU22
 146 0014 0122     		movs	r2, #1
 147 0016 0649     		ldr	r1, .L15+4
 148 0018 0448     		ldr	r0, .L15
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 10


 149 001a FFF7FEFF 		bl	queue_pop
 150              	.LVL9:
 151 001e F4E7     		b	.L10
 152              	.L14:
 332:FML/Src/EC2x.c ****     }        
 153              		.loc 1 332 9 view .LVU23
 154 0020 0321     		movs	r1, #3
 155 0022 0448     		ldr	r0, .L15+8
 156 0024 FFF7FEFF 		bl	queue_insert
 157              	.LVL10:
 334:FML/Src/EC2x.c **** void ex2x_timeout_handler(void){
 158              		.loc 1 334 1 is_stmt 0 view .LVU24
 159 0028 F3E7     		b	.L9
 160              	.L16:
 161 002a 00BF     		.align	2
 162              	.L15:
 163 002c 00000000 		.word	.LANCHOR1
 164 0030 00000000 		.word	.LANCHOR2
 165 0034 00000000 		.word	.LANCHOR3
 166              		.cfi_endproc
 167              	.LFE300:
 169              		.section	.text.ex2x_timeout_handler,"ax",%progbits
 170              		.align	1
 171              		.global	ex2x_timeout_handler
 172              		.syntax unified
 173              		.thumb
 174              		.thumb_func
 176              	ex2x_timeout_handler:
 177              	.LFB301:
 335:FML/Src/EC2x.c ****     cur_msg->retry_times--;
 178              		.loc 1 335 32 is_stmt 1 view -0
 179              		.cfi_startproc
 180              		@ args = 0, pretend = 0, frame = 0
 181              		@ frame_needed = 0, uses_anonymous_args = 0
 182 0000 08B5     		push	{r3, lr}
 183              	.LCFI3:
 184              		.cfi_def_cfa_offset 8
 185              		.cfi_offset 3, -8
 186              		.cfi_offset 14, -4
 336:FML/Src/EC2x.c ****     if(cur_msg->retry_times == 0){
 187              		.loc 1 336 5 view .LVU26
 336:FML/Src/EC2x.c ****     if(cur_msg->retry_times == 0){
 188              		.loc 1 336 12 is_stmt 0 view .LVU27
 189 0002 0B4B     		ldr	r3, .L21
 190 0004 1A68     		ldr	r2, [r3]
 191 0006 937A     		ldrb	r3, [r2, #10]	@ zero_extendqisi2
 336:FML/Src/EC2x.c ****     if(cur_msg->retry_times == 0){
 192              		.loc 1 336 25 view .LVU28
 193 0008 013B     		subs	r3, r3, #1
 194 000a DBB2     		uxtb	r3, r3
 195 000c 9372     		strb	r3, [r2, #10]
 337:FML/Src/EC2x.c ****         if(!queue_is_empty(&ec2x_txmsg_queue))
 196              		.loc 1 337 5 is_stmt 1 view .LVU29
 337:FML/Src/EC2x.c ****         if(!queue_is_empty(&ec2x_txmsg_queue))
 197              		.loc 1 337 7 is_stmt 0 view .LVU30
 198 000e 4BB9     		cbnz	r3, .L18
 338:FML/Src/EC2x.c ****             queue_pop(&ec2x_txmsg_queue,&cur_msg,1);       
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 11


 199              		.loc 1 338 9 is_stmt 1 view .LVU31
 338:FML/Src/EC2x.c ****             queue_pop(&ec2x_txmsg_queue,&cur_msg,1);       
 200              		.loc 1 338 13 is_stmt 0 view .LVU32
 201 0010 0848     		ldr	r0, .L21+4
 202 0012 FFF7FEFF 		bl	queue_is_empty
 203              	.LVL11:
 338:FML/Src/EC2x.c ****             queue_pop(&ec2x_txmsg_queue,&cur_msg,1);       
 204              		.loc 1 338 11 view .LVU33
 205 0016 48B9     		cbnz	r0, .L17
 339:FML/Src/EC2x.c ****     }
 206              		.loc 1 339 13 is_stmt 1 view .LVU34
 207 0018 0122     		movs	r2, #1
 208 001a 0549     		ldr	r1, .L21
 209 001c 0548     		ldr	r0, .L21+4
 210 001e FFF7FEFF 		bl	queue_pop
 211              	.LVL12:
 212 0022 03E0     		b	.L17
 213              	.L18:
 342:FML/Src/EC2x.c **** }
 214              		.loc 1 342 9 view .LVU35
 215 0024 0321     		movs	r1, #3
 216 0026 0448     		ldr	r0, .L21+8
 217 0028 FFF7FEFF 		bl	queue_insert
 218              	.LVL13:
 219              	.L17:
 343:FML/Src/EC2x.c **** void ec2x_cmd_send(int fd,uint8_t *tx_buff,uint16_t len,uint8_t *expect_reply,uint16_t timeout)
 220              		.loc 1 343 1 is_stmt 0 view .LVU36
 221 002c 08BD     		pop	{r3, pc}
 222              	.L22:
 223 002e 00BF     		.align	2
 224              	.L21:
 225 0030 00000000 		.word	.LANCHOR2
 226 0034 00000000 		.word	.LANCHOR1
 227 0038 00000000 		.word	.LANCHOR3
 228              		.cfi_endproc
 229              	.LFE301:
 231              		.section	.text.ec2x_io_init,"ax",%progbits
 232              		.align	1
 233              		.global	ec2x_io_init
 234              		.syntax unified
 235              		.thumb
 236              		.thumb_func
 238              	ec2x_io_init:
 239              	.LVL14:
 240              	.LFB291:
 103:FML/Src/EC2x.c ****      GPIO_InitTypeDef GPIO_InitStruct = {0};
 241              		.loc 1 103 1 is_stmt 1 view -0
 242              		.cfi_startproc
 243              		@ args = 0, pretend = 0, frame = 24
 244              		@ frame_needed = 0, uses_anonymous_args = 0
 103:FML/Src/EC2x.c ****      GPIO_InitTypeDef GPIO_InitStruct = {0};
 245              		.loc 1 103 1 is_stmt 0 view .LVU38
 246 0000 70B5     		push	{r4, r5, r6, lr}
 247              	.LCFI4:
 248              		.cfi_def_cfa_offset 16
 249              		.cfi_offset 4, -16
 250              		.cfi_offset 5, -12
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 12


 251              		.cfi_offset 6, -8
 252              		.cfi_offset 14, -4
 253 0002 86B0     		sub	sp, sp, #24
 254              	.LCFI5:
 255              		.cfi_def_cfa_offset 40
 256 0004 0446     		mov	r4, r0
 104:FML/Src/EC2x.c ****     
 257              		.loc 1 104 6 is_stmt 1 view .LVU39
 104:FML/Src/EC2x.c ****     
 258              		.loc 1 104 23 is_stmt 0 view .LVU40
 259 0006 0025     		movs	r5, #0
 260 0008 0195     		str	r5, [sp, #4]
 261 000a 0295     		str	r5, [sp, #8]
 262 000c 0395     		str	r5, [sp, #12]
 263 000e 0495     		str	r5, [sp, #16]
 264 0010 0595     		str	r5, [sp, #20]
 108:FML/Src/EC2x.c ****     
 265              		.loc 1 108 5 is_stmt 1 view .LVU41
 266              	.LBB2:
 108:FML/Src/EC2x.c ****     
 267              		.loc 1 108 5 view .LVU42
 108:FML/Src/EC2x.c ****     
 268              		.loc 1 108 5 view .LVU43
 269 0012 1F4B     		ldr	r3, .L25
 270 0014 DA6C     		ldr	r2, [r3, #76]
 271 0016 42F00102 		orr	r2, r2, #1
 272 001a DA64     		str	r2, [r3, #76]
 108:FML/Src/EC2x.c ****     
 273              		.loc 1 108 5 view .LVU44
 274 001c DB6C     		ldr	r3, [r3, #76]
 275 001e 03F00103 		and	r3, r3, #1
 276 0022 0093     		str	r3, [sp]
 108:FML/Src/EC2x.c ****     
 277              		.loc 1 108 5 view .LVU45
 278 0024 009B     		ldr	r3, [sp]
 279              	.LBE2:
 108:FML/Src/EC2x.c ****     
 280              		.loc 1 108 5 view .LVU46
 111:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 281              		.loc 1 111 5 view .LVU47
 111:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 282              		.loc 1 111 33 is_stmt 0 view .LVU48
 283 0026 038C     		ldrh	r3, [r0, #32]
 111:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 284              		.loc 1 111 25 view .LVU49
 285 0028 0193     		str	r3, [sp, #4]
 112:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 286              		.loc 1 112 5 is_stmt 1 view .LVU50
 112:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 287              		.loc 1 112 26 is_stmt 0 view .LVU51
 288 002a 0126     		movs	r6, #1
 289 002c 0296     		str	r6, [sp, #8]
 113:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 290              		.loc 1 113 5 is_stmt 1 view .LVU52
 114:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->reset_port, &GPIO_InitStruct);
 291              		.loc 1 114 5 view .LVU53
 115:FML/Src/EC2x.c **** 
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 13


 292              		.loc 1 115 5 view .LVU54
 293 002e 01A9     		add	r1, sp, #4
 294 0030 C069     		ldr	r0, [r0, #28]
 295              	.LVL15:
 115:FML/Src/EC2x.c **** 
 296              		.loc 1 115 5 is_stmt 0 view .LVU55
 297 0032 FFF7FEFF 		bl	HAL_GPIO_Init
 298              	.LVL16:
 117:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 299              		.loc 1 117 5 is_stmt 1 view .LVU56
 117:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 300              		.loc 1 117 33 is_stmt 0 view .LVU57
 301 0036 238D     		ldrh	r3, [r4, #40]
 117:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 302              		.loc 1 117 25 view .LVU58
 303 0038 0193     		str	r3, [sp, #4]
 118:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 304              		.loc 1 118 5 is_stmt 1 view .LVU59
 118:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 305              		.loc 1 118 26 is_stmt 0 view .LVU60
 306 003a 0296     		str	r6, [sp, #8]
 119:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 307              		.loc 1 119 5 is_stmt 1 view .LVU61
 119:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 308              		.loc 1 119 26 is_stmt 0 view .LVU62
 309 003c 0395     		str	r5, [sp, #12]
 120:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->wake_port, &GPIO_InitStruct);
 310              		.loc 1 120 5 is_stmt 1 view .LVU63
 120:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->wake_port, &GPIO_InitStruct);
 311              		.loc 1 120 27 is_stmt 0 view .LVU64
 312 003e 0495     		str	r5, [sp, #16]
 121:FML/Src/EC2x.c **** 
 313              		.loc 1 121 5 is_stmt 1 view .LVU65
 314 0040 01A9     		add	r1, sp, #4
 315 0042 606A     		ldr	r0, [r4, #36]
 316 0044 FFF7FEFF 		bl	HAL_GPIO_Init
 317              	.LVL17:
 123:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 318              		.loc 1 123 5 view .LVU66
 123:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 319              		.loc 1 123 33 is_stmt 0 view .LVU67
 320 0048 238B     		ldrh	r3, [r4, #24]
 123:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 321              		.loc 1 123 25 view .LVU68
 322 004a 0193     		str	r3, [sp, #4]
 124:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 323              		.loc 1 124 5 is_stmt 1 view .LVU69
 124:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 324              		.loc 1 124 26 is_stmt 0 view .LVU70
 325 004c 0296     		str	r6, [sp, #8]
 125:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 326              		.loc 1 125 5 is_stmt 1 view .LVU71
 125:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 327              		.loc 1 125 26 is_stmt 0 view .LVU72
 328 004e 0395     		str	r5, [sp, #12]
 126:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->pwren_port, &GPIO_InitStruct);
 329              		.loc 1 126 5 is_stmt 1 view .LVU73
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 14


 126:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->pwren_port, &GPIO_InitStruct);
 330              		.loc 1 126 27 is_stmt 0 view .LVU74
 331 0050 0495     		str	r5, [sp, #16]
 127:FML/Src/EC2x.c ****     
 332              		.loc 1 127 5 is_stmt 1 view .LVU75
 333 0052 01A9     		add	r1, sp, #4
 334 0054 6069     		ldr	r0, [r4, #20]
 335 0056 FFF7FEFF 		bl	HAL_GPIO_Init
 336              	.LVL18:
 131:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->wake_port, device->wake_pin, GPIO_PIN_SET);
 337              		.loc 1 131 5 view .LVU76
 338 005a 3246     		mov	r2, r6
 339 005c 218C     		ldrh	r1, [r4, #32]
 340 005e E069     		ldr	r0, [r4, #28]
 341 0060 FFF7FEFF 		bl	HAL_GPIO_WritePin
 342              	.LVL19:
 132:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_SET);
 343              		.loc 1 132 5 view .LVU77
 344 0064 3246     		mov	r2, r6
 345 0066 218D     		ldrh	r1, [r4, #40]
 346 0068 606A     		ldr	r0, [r4, #36]
 347 006a FFF7FEFF 		bl	HAL_GPIO_WritePin
 348              	.LVL20:
 133:FML/Src/EC2x.c ****     HAL_Delay(1000);
 349              		.loc 1 133 5 view .LVU78
 350 006e 3246     		mov	r2, r6
 351 0070 218B     		ldrh	r1, [r4, #24]
 352 0072 6069     		ldr	r0, [r4, #20]
 353 0074 FFF7FEFF 		bl	HAL_GPIO_WritePin
 354              	.LVL21:
 134:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_RESET);
 355              		.loc 1 134 5 view .LVU79
 356 0078 4FF47A70 		mov	r0, #1000
 357 007c FFF7FEFF 		bl	HAL_Delay
 358              	.LVL22:
 135:FML/Src/EC2x.c **** }
 359              		.loc 1 135 5 view .LVU80
 360 0080 2A46     		mov	r2, r5
 361 0082 218B     		ldrh	r1, [r4, #24]
 362 0084 6069     		ldr	r0, [r4, #20]
 363 0086 FFF7FEFF 		bl	HAL_GPIO_WritePin
 364              	.LVL23:
 136:FML/Src/EC2x.c **** /**
 365              		.loc 1 136 1 is_stmt 0 view .LVU81
 366 008a 06B0     		add	sp, sp, #24
 367              	.LCFI6:
 368              		.cfi_def_cfa_offset 16
 369              		@ sp needed
 370 008c 70BD     		pop	{r4, r5, r6, pc}
 371              	.LVL24:
 372              	.L26:
 136:FML/Src/EC2x.c **** /**
 373              		.loc 1 136 1 view .LVU82
 374 008e 00BF     		.align	2
 375              	.L25:
 376 0090 00100240 		.word	1073876992
 377              		.cfi_endproc
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 15


 378              	.LFE291:
 380              		.section	.text.ec2x_open,"ax",%progbits
 381              		.align	1
 382              		.global	ec2x_open
 383              		.syntax unified
 384              		.thumb
 385              		.thumb_func
 387              	ec2x_open:
 388              	.LVL25:
 389              	.LFB293:
 165:FML/Src/EC2x.c ****     uint8_t i = 0;
 390              		.loc 1 165 1 is_stmt 1 view -0
 391              		.cfi_startproc
 392              		@ args = 0, pretend = 0, frame = 0
 393              		@ frame_needed = 0, uses_anonymous_args = 0
 165:FML/Src/EC2x.c ****     uint8_t i = 0;
 394              		.loc 1 165 1 is_stmt 0 view .LVU84
 395 0000 70B5     		push	{r4, r5, r6, lr}
 396              	.LCFI7:
 397              		.cfi_def_cfa_offset 16
 398              		.cfi_offset 4, -16
 399              		.cfi_offset 5, -12
 400              		.cfi_offset 6, -8
 401              		.cfi_offset 14, -4
 402 0002 0546     		mov	r5, r0
 166:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 403              		.loc 1 166 5 is_stmt 1 view .LVU85
 404              	.LVL26:
 167:FML/Src/EC2x.c ****     {
 405              		.loc 1 167 5 view .LVU86
 167:FML/Src/EC2x.c ****     {
 406              		.loc 1 167 11 is_stmt 0 view .LVU87
 407 0004 0024     		movs	r4, #0
 408              	.LVL27:
 409              	.L28:
 167:FML/Src/EC2x.c ****     {
 410              		.loc 1 167 15 is_stmt 1 discriminator 1 view .LVU88
 167:FML/Src/EC2x.c ****     {
 411              		.loc 1 167 5 is_stmt 0 discriminator 1 view .LVU89
 412 0006 1CB1     		cbz	r4, .L31
 183:FML/Src/EC2x.c **** };
 413              		.loc 1 183 12 view .LVU90
 414 0008 4FF0FF36 		mov	r6, #-1
 415              	.LVL28:
 416              	.L27:
 184:FML/Src/EC2x.c **** 
 417              		.loc 1 184 1 view .LVU91
 418 000c 3046     		mov	r0, r6
 419 000e 70BD     		pop	{r4, r5, r6, pc}
 420              	.LVL29:
 421              	.L31:
 169:FML/Src/EC2x.c ****         {
 422              		.loc 1 169 9 is_stmt 1 view .LVU92
 423              	.LBB3:
 169:FML/Src/EC2x.c ****         {
 424              		.loc 1 169 39 is_stmt 0 view .LVU93
 425 0010 2646     		mov	r6, r4
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 16


 426 0012 C4EB0413 		rsb	r3, r4, r4, lsl #4
 169:FML/Src/EC2x.c ****         {
 427              		.loc 1 169 12 view .LVU94
 428 0016 1349     		ldr	r1, .L34
 429 0018 01EB8301 		add	r1, r1, r3, lsl #2
 430 001c 2846     		mov	r0, r5
 431 001e FFF7FEFF 		bl	strcmp
 432              	.LVL30:
 169:FML/Src/EC2x.c ****         {
 433              		.loc 1 169 11 view .LVU95
 434 0022 10B1     		cbz	r0, .L33
 435              	.LBE3:
 167:FML/Src/EC2x.c ****     {
 436              		.loc 1 167 64 is_stmt 1 discriminator 2 view .LVU96
 167:FML/Src/EC2x.c ****     {
 437              		.loc 1 167 65 is_stmt 0 discriminator 2 view .LVU97
 438 0024 0134     		adds	r4, r4, #1
 439              	.LVL31:
 167:FML/Src/EC2x.c ****     {
 440              		.loc 1 167 65 discriminator 2 view .LVU98
 441 0026 E4B2     		uxtb	r4, r4
 442              	.LVL32:
 167:FML/Src/EC2x.c ****     {
 443              		.loc 1 167 65 discriminator 2 view .LVU99
 444 0028 EDE7     		b	.L28
 445              	.L33:
 446              	.LBB5:
 447              	.LBB4:
 171:FML/Src/EC2x.c **** 
 448              		.loc 1 171 13 is_stmt 1 view .LVU100
 449 002a C4EB0413 		rsb	r3, r4, r4, lsl #4
 450 002e 0D48     		ldr	r0, .L34
 451 0030 00EB8300 		add	r0, r0, r3, lsl #2
 452 0034 FFF7FEFF 		bl	ec2x_io_init
 453              	.LVL33:
 173:FML/Src/EC2x.c ****             queue_init(&ec2x_txmsg_queue,ec2x_txmsg_buff,10);
 454              		.loc 1 173 13 view .LVU101
 455 0038 0B4C     		ldr	r4, .L34+4
 456              	.LVL34:
 173:FML/Src/EC2x.c ****             queue_init(&ec2x_txmsg_queue,ec2x_txmsg_buff,10);
 457              		.loc 1 173 13 is_stmt 0 view .LVU102
 458 003a 0A22     		movs	r2, #10
 459 003c 0B49     		ldr	r1, .L34+8
 460 003e 2046     		mov	r0, r4
 461 0040 FFF7FEFF 		bl	queue_init
 462              	.LVL35:
 174:FML/Src/EC2x.c ****         
 463              		.loc 1 174 13 is_stmt 1 view .LVU103
 464 0044 0A22     		movs	r2, #10
 465 0046 0A49     		ldr	r1, .L34+12
 466 0048 0A48     		ldr	r0, .L34+16
 467 004a FFF7FEFF 		bl	queue_init
 468              	.LVL36:
 177:FML/Src/EC2x.c ****             FSM_Regist(&ec2x_fsm,ec2x_transtable,num,UINIT);
 469              		.loc 1 177 13 view .LVU104
 178:FML/Src/EC2x.c ****             queue_insert(&ec2x_event_queue,(uint8_t)Timeout_Event);
 470              		.loc 1 178 13 view .LVU105
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 17


 471 004e 0023     		movs	r3, #0
 472 0050 0622     		movs	r2, #6
 473 0052 0949     		ldr	r1, .L34+20
 474 0054 0948     		ldr	r0, .L34+24
 475 0056 FFF7FEFF 		bl	FSM_Regist
 476              	.LVL37:
 179:FML/Src/EC2x.c ****             return i;
 477              		.loc 1 179 13 view .LVU106
 478 005a 0121     		movs	r1, #1
 479 005c 2046     		mov	r0, r4
 480 005e FFF7FEFF 		bl	queue_insert
 481              	.LVL38:
 180:FML/Src/EC2x.c ****         }
 482              		.loc 1 180 13 view .LVU107
 180:FML/Src/EC2x.c ****         }
 483              		.loc 1 180 20 is_stmt 0 view .LVU108
 484 0062 D3E7     		b	.L27
 485              	.L35:
 486              		.align	2
 487              	.L34:
 488 0064 00000000 		.word	.LANCHOR4
 489 0068 00000000 		.word	.LANCHOR3
 490 006c 00000000 		.word	.LANCHOR5
 491 0070 00000000 		.word	.LANCHOR6
 492 0074 00000000 		.word	.LANCHOR1
 493 0078 00000000 		.word	.LANCHOR7
 494 007c 00000000 		.word	.LANCHOR8
 495              	.LBE4:
 496              	.LBE5:
 497              		.cfi_endproc
 498              	.LFE293:
 500              		.section	.text.ec2x_write,"ax",%progbits
 501              		.align	1
 502              		.global	ec2x_write
 503              		.syntax unified
 504              		.thumb
 505              		.thumb_func
 507              	ec2x_write:
 508              	.LVL39:
 509              	.LFB294:
 206:FML/Src/EC2x.c ****     int err_code = 0;
 510              		.loc 1 206 53 is_stmt 1 view -0
 511              		.cfi_startproc
 512              		@ args = 0, pretend = 0, frame = 0
 513              		@ frame_needed = 0, uses_anonymous_args = 0
 207:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 514              		.loc 1 207 5 view .LVU110
 208:FML/Src/EC2x.c ****         return (err_code = -1);
 515              		.loc 1 208 5 view .LVU111
 208:FML/Src/EC2x.c ****         return (err_code = -1);
 516              		.loc 1 208 7 is_stmt 0 view .LVU112
 517 0000 10B1     		cbz	r0, .L43
 209:FML/Src/EC2x.c ****     else{
 518              		.loc 1 209 26 view .LVU113
 519 0002 4FF0FF30 		mov	r0, #-1
 520              	.LVL40:
 214:FML/Src/EC2x.c **** /**
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 18


 521              		.loc 1 214 1 view .LVU114
 522 0006 7047     		bx	lr
 523              	.LVL41:
 524              	.L43:
 206:FML/Src/EC2x.c ****     int err_code = 0;
 525              		.loc 1 206 53 view .LVU115
 526 0008 08B5     		push	{r3, lr}
 527              	.LCFI8:
 528              		.cfi_def_cfa_offset 8
 529              		.cfi_offset 3, -8
 530              		.cfi_offset 14, -4
 211:FML/Src/EC2x.c ****         return(!err_code);
 531              		.loc 1 211 9 is_stmt 1 view .LVU116
 211:FML/Src/EC2x.c ****         return(!err_code);
 532              		.loc 1 211 21 is_stmt 0 view .LVU117
 533 000a C0EB0013 		rsb	r3, r0, r0, lsl #4
 534 000e 0548     		ldr	r0, .L44
 535              	.LVL42:
 211:FML/Src/EC2x.c ****         return(!err_code);
 536              		.loc 1 211 21 view .LVU118
 537 0010 00EB8303 		add	r3, r0, r3, lsl #2
 538 0014 1869     		ldr	r0, [r3, #16]
 539 0016 FFF7FEFF 		bl	HAL_UART_Transmit_IT
 540              	.LVL43:
 212:FML/Src/EC2x.c ****     }
 541              		.loc 1 212 9 is_stmt 1 view .LVU119
 212:FML/Src/EC2x.c ****     }
 542              		.loc 1 212 16 is_stmt 0 view .LVU120
 543 001a B0FA80F0 		clz	r0, r0
 544              	.LVL44:
 212:FML/Src/EC2x.c ****     }
 545              		.loc 1 212 16 view .LVU121
 546 001e 4009     		lsrs	r0, r0, #5
 214:FML/Src/EC2x.c **** /**
 547              		.loc 1 214 1 view .LVU122
 548 0020 08BD     		pop	{r3, pc}
 549              	.L45:
 550 0022 00BF     		.align	2
 551              	.L44:
 552 0024 00000000 		.word	.LANCHOR4
 553              		.cfi_endproc
 554              	.LFE294:
 556              		.section	.text.ec2x_cmd_send,"ax",%progbits
 557              		.align	1
 558              		.syntax unified
 559              		.thumb
 560              		.thumb_func
 562              	ec2x_cmd_send:
 563              	.LVL45:
 564              	.LFB302:
 345:FML/Src/EC2x.c ****     ec2x_write(fd,tx_buff,len);
 565              		.loc 1 345 1 is_stmt 1 view -0
 566              		.cfi_startproc
 567              		@ args = 4, pretend = 0, frame = 0
 568              		@ frame_needed = 0, uses_anonymous_args = 0
 345:FML/Src/EC2x.c ****     ec2x_write(fd,tx_buff,len);
 569              		.loc 1 345 1 is_stmt 0 view .LVU124
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 19


 570 0000 10B5     		push	{r4, lr}
 571              	.LCFI9:
 572              		.cfi_def_cfa_offset 8
 573              		.cfi_offset 4, -8
 574              		.cfi_offset 14, -4
 575 0002 1C46     		mov	r4, r3
 346:FML/Src/EC2x.c ****     ec2x_waitreply(expect_reply,timeout);
 576              		.loc 1 346 5 is_stmt 1 view .LVU125
 577 0004 FFF7FEFF 		bl	ec2x_write
 578              	.LVL46:
 347:FML/Src/EC2x.c **** }
 579              		.loc 1 347 5 view .LVU126
 580 0008 BDF80810 		ldrh	r1, [sp, #8]
 581 000c 2046     		mov	r0, r4
 582 000e FFF7FEFF 		bl	ec2x_waitreply
 583              	.LVL47:
 348:FML/Src/EC2x.c **** 
 584              		.loc 1 348 1 is_stmt 0 view .LVU127
 585 0012 10BD     		pop	{r4, pc}
 348:FML/Src/EC2x.c **** 
 586              		.loc 1 348 1 view .LVU128
 587              		.cfi_endproc
 588              	.LFE302:
 590              		.section	.text.ec2x_queue_send,"ax",%progbits
 591              		.align	1
 592              		.global	ec2x_queue_send
 593              		.syntax unified
 594              		.thumb
 595              		.thumb_func
 597              	ec2x_queue_send:
 598              	.LFB299:
 318:FML/Src/EC2x.c ****     
 599              		.loc 1 318 27 is_stmt 1 view -0
 600              		.cfi_startproc
 601              		@ args = 0, pretend = 0, frame = 0
 602              		@ frame_needed = 0, uses_anonymous_args = 0
 603 0000 00B5     		push	{lr}
 604              	.LCFI10:
 605              		.cfi_def_cfa_offset 4
 606              		.cfi_offset 14, -4
 607 0002 83B0     		sub	sp, sp, #12
 608              	.LCFI11:
 609              		.cfi_def_cfa_offset 16
 320:FML/Src/EC2x.c ****         if(queue_pull(&ec2x_txmsg_queue,&cur_msg,1))
 610              		.loc 1 320 5 view .LVU130
 320:FML/Src/EC2x.c ****         if(queue_pull(&ec2x_txmsg_queue,&cur_msg,1))
 611              		.loc 1 320 9 is_stmt 0 view .LVU131
 612 0004 0C48     		ldr	r0, .L52
 613 0006 FFF7FEFF 		bl	queue_is_empty
 614              	.LVL48:
 320:FML/Src/EC2x.c ****         if(queue_pull(&ec2x_txmsg_queue,&cur_msg,1))
 615              		.loc 1 320 7 view .LVU132
 616 000a 10B1     		cbz	r0, .L51
 617              	.L48:
 324:FML/Src/EC2x.c **** 
 618              		.loc 1 324 1 view .LVU133
 619 000c 03B0     		add	sp, sp, #12
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 20


 620              	.LCFI12:
 621              		.cfi_remember_state
 622              		.cfi_def_cfa_offset 4
 623              		@ sp needed
 624 000e 5DF804FB 		ldr	pc, [sp], #4
 625              	.L51:
 626              	.LCFI13:
 627              		.cfi_restore_state
 321:FML/Src/EC2x.c ****         ec2x_cmd_send(0,cur_msg->txmsg,sizeof(cur_msg->txmsg),cur_msg->expect_reply,cur_msg->timeou
 628              		.loc 1 321 9 is_stmt 1 view .LVU134
 321:FML/Src/EC2x.c ****         ec2x_cmd_send(0,cur_msg->txmsg,sizeof(cur_msg->txmsg),cur_msg->expect_reply,cur_msg->timeou
 629              		.loc 1 321 12 is_stmt 0 view .LVU135
 630 0012 0122     		movs	r2, #1
 631 0014 0949     		ldr	r1, .L52+4
 632 0016 0848     		ldr	r0, .L52
 633 0018 FFF7FEFF 		bl	queue_pull
 634              	.LVL49:
 321:FML/Src/EC2x.c ****         ec2x_cmd_send(0,cur_msg->txmsg,sizeof(cur_msg->txmsg),cur_msg->expect_reply,cur_msg->timeou
 635              		.loc 1 321 11 view .LVU136
 636 001c 0028     		cmp	r0, #0
 637 001e F5D0     		beq	.L48
 322:FML/Src/EC2x.c ****     }      
 638              		.loc 1 322 9 is_stmt 1 view .LVU137
 322:FML/Src/EC2x.c ****     }      
 639              		.loc 1 322 32 is_stmt 0 view .LVU138
 640 0020 064B     		ldr	r3, .L52+4
 641 0022 1A68     		ldr	r2, [r3]
 322:FML/Src/EC2x.c ****     }      
 642              		.loc 1 322 9 view .LVU139
 643 0024 5368     		ldr	r3, [r2, #4]
 644 0026 1168     		ldr	r1, [r2]
 645 0028 1289     		ldrh	r2, [r2, #8]
 646 002a 0092     		str	r2, [sp]
 647 002c 0422     		movs	r2, #4
 648 002e 0020     		movs	r0, #0
 649 0030 FFF7FEFF 		bl	ec2x_cmd_send
 650              	.LVL50:
 324:FML/Src/EC2x.c **** 
 651              		.loc 1 324 1 view .LVU140
 652 0034 EAE7     		b	.L48
 653              	.L53:
 654 0036 00BF     		.align	2
 655              	.L52:
 656 0038 00000000 		.word	.LANCHOR1
 657 003c 00000000 		.word	.LANCHOR2
 658              		.cfi_endproc
 659              	.LFE299:
 661              		.section	.text.ec2x_read,"ax",%progbits
 662              		.align	1
 663              		.global	ec2x_read
 664              		.syntax unified
 665              		.thumb
 666              		.thumb_func
 668              	ec2x_read:
 669              	.LVL51:
 670              	.LFB295:
 227:FML/Src/EC2x.c ****     uint8_t *dest = rx_buff;
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 21


 671              		.loc 1 227 52 is_stmt 1 view -0
 672              		.cfi_startproc
 673              		@ args = 0, pretend = 0, frame = 0
 674              		@ frame_needed = 0, uses_anonymous_args = 0
 228:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 675              		.loc 1 228 5 view .LVU142
 229:FML/Src/EC2x.c ****         return -1;
 676              		.loc 1 229 5 view .LVU143
 229:FML/Src/EC2x.c ****         return -1;
 677              		.loc 1 229 7 is_stmt 0 view .LVU144
 678 0000 0028     		cmp	r0, #0
 679 0002 4BD1     		bne	.L61
 227:FML/Src/EC2x.c ****     uint8_t *dest = rx_buff;
 680              		.loc 1 227 52 view .LVU145
 681 0004 38B5     		push	{r3, r4, r5, lr}
 682              	.LCFI14:
 683              		.cfi_def_cfa_offset 16
 684              		.cfi_offset 3, -16
 685              		.cfi_offset 4, -12
 686              		.cfi_offset 5, -8
 687              		.cfi_offset 14, -4
 688 0006 1546     		mov	r5, r2
 689 0008 0446     		mov	r4, r0
 690              	.LBB6:
 232:FML/Src/EC2x.c ****         
 691              		.loc 1 232 9 is_stmt 1 view .LVU146
 692              	.LVL52:
 234:FML/Src/EC2x.c ****         //如果队列被上锁了，则等待100ms
 693              		.loc 1 234 9 view .LVU147
 236:FML/Src/EC2x.c ****         {
 694              		.loc 1 236 9 view .LVU148
 236:FML/Src/EC2x.c ****         {
 695              		.loc 1 236 15 is_stmt 0 view .LVU149
 696 000a C0EB0013 		rsb	r3, r0, r0, lsl #4
 697 000e 264A     		ldr	r2, .L68
 698              	.LVL53:
 236:FML/Src/EC2x.c ****         {
 699              		.loc 1 236 15 view .LVU150
 700 0010 02EB8303 		add	r3, r2, r3, lsl #2
 701 0014 93F82C30 		ldrb	r3, [r3, #44]	@ zero_extendqisi2
 236:FML/Src/EC2x.c ****         {
 702              		.loc 1 236 11 view .LVU151
 703 0018 73B9     		cbnz	r3, .L67
 243:FML/Src/EC2x.c ****             if(len > src->size)
 704              		.loc 1 243 13 is_stmt 1 view .LVU152
 243:FML/Src/EC2x.c ****             if(len > src->size)
 705              		.loc 1 243 24 is_stmt 0 view .LVU153
 706 001a C0EB0013 		rsb	r3, r0, r0, lsl #4
 707 001e 224A     		ldr	r2, .L68
 708 0020 02EB8303 		add	r3, r2, r3, lsl #2
 709 0024 0122     		movs	r2, #1
 710 0026 83F82C20 		strb	r2, [r3, #44]
 244:FML/Src/EC2x.c ****                 len = src->size;
 711              		.loc 1 244 13 is_stmt 1 view .LVU154
 244:FML/Src/EC2x.c ****                 len = src->size;
 712              		.loc 1 244 25 is_stmt 0 view .LVU155
 713 002a 188F     		ldrh	r0, [r3, #56]
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 22


 714              	.LVL54:
 244:FML/Src/EC2x.c ****                 len = src->size;
 715              		.loc 1 244 15 view .LVU156
 716 002c A842     		cmp	r0, r5
 717 002e 00D3     		bcc	.L58
 718 0030 2846     		mov	r0, r5
 719              	.L58:
 720              	.LVL55:
 246:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 721              		.loc 1 246 13 is_stmt 1 view .LVU157
 246:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 722              		.loc 1 246 19 is_stmt 0 view .LVU158
 723 0032 4FF0000C 		mov	ip, #0
 246:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 724              		.loc 1 246 13 view .LVU159
 725 0036 26E0     		b	.L59
 726              	.LVL56:
 727              	.L67:
 238:FML/Src/EC2x.c ****             if(src->block == 1)
 728              		.loc 1 238 13 is_stmt 1 view .LVU160
 729 0038 6420     		movs	r0, #100
 730              	.LVL57:
 238:FML/Src/EC2x.c ****             if(src->block == 1)
 731              		.loc 1 238 13 is_stmt 0 view .LVU161
 732 003a FFF7FEFF 		bl	HAL_Delay
 733              	.LVL58:
 239:FML/Src/EC2x.c ****                 return 0;
 734              		.loc 1 239 13 is_stmt 1 view .LVU162
 239:FML/Src/EC2x.c ****                 return 0;
 735              		.loc 1 239 19 is_stmt 0 view .LVU163
 736 003e C4EB0413 		rsb	r3, r4, r4, lsl #4
 737 0042 194A     		ldr	r2, .L68
 738 0044 02EB8303 		add	r3, r2, r3, lsl #2
 739 0048 93F82C30 		ldrb	r3, [r3, #44]	@ zero_extendqisi2
 239:FML/Src/EC2x.c ****                 return 0;
 740              		.loc 1 239 15 view .LVU164
 741 004c 4BBB     		cbnz	r3, .L62
 742 004e 2846     		mov	r0, r5
 743 0050 23E0     		b	.L54
 744              	.LVL59:
 745              	.L60:
 247:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 746              		.loc 1 247 17 is_stmt 1 discriminator 3 view .LVU165
 247:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 747              		.loc 1 247 30 is_stmt 0 discriminator 3 view .LVU166
 748 0052 C4EB0413 		rsb	r3, r4, r4, lsl #4
 749 0056 144A     		ldr	r2, .L68
 750 0058 02EB8303 		add	r3, r2, r3, lsl #2
 751 005c 1D6B     		ldr	r5, [r3, #48]
 247:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 752              		.loc 1 247 40 discriminator 3 view .LVU167
 753 005e 9A8E     		ldrh	r2, [r3, #52]
 247:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 754              		.loc 1 247 36 discriminator 3 view .LVU168
 755 0060 AA5C     		ldrb	r2, [r5, r2]	@ zero_extendqisi2
 247:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 756              		.loc 1 247 25 discriminator 3 view .LVU169
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 23


 757 0062 01F80C20 		strb	r2, [r1, ip]
 248:FML/Src/EC2x.c ****                 src->size--;
 758              		.loc 1 248 17 is_stmt 1 discriminator 3 view .LVU170
 248:FML/Src/EC2x.c ****                 src->size--;
 759              		.loc 1 248 33 is_stmt 0 discriminator 3 view .LVU171
 760 0066 9A8E     		ldrh	r2, [r3, #52]
 248:FML/Src/EC2x.c ****                 src->size--;
 761              		.loc 1 248 40 discriminator 3 view .LVU172
 762 0068 0132     		adds	r2, r2, #1
 248:FML/Src/EC2x.c ****                 src->size--;
 763              		.loc 1 248 50 discriminator 3 view .LVU173
 764 006a B3F83AE0 		ldrh	lr, [r3, #58]
 248:FML/Src/EC2x.c ****                 src->size--;
 765              		.loc 1 248 45 discriminator 3 view .LVU174
 766 006e 92FBFEF5 		sdiv	r5, r2, lr
 767 0072 0EFB1522 		mls	r2, lr, r5, r2
 248:FML/Src/EC2x.c ****                 src->size--;
 768              		.loc 1 248 27 discriminator 3 view .LVU175
 769 0076 9A86     		strh	r2, [r3, #52]	@ movhi
 249:FML/Src/EC2x.c ****             }
 770              		.loc 1 249 17 is_stmt 1 discriminator 3 view .LVU176
 249:FML/Src/EC2x.c ****             }
 771              		.loc 1 249 20 is_stmt 0 discriminator 3 view .LVU177
 772 0078 1A8F     		ldrh	r2, [r3, #56]
 249:FML/Src/EC2x.c ****             }
 773              		.loc 1 249 26 discriminator 3 view .LVU178
 774 007a 013A     		subs	r2, r2, #1
 775 007c 1A87     		strh	r2, [r3, #56]	@ movhi
 246:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 776              		.loc 1 246 34 is_stmt 1 discriminator 3 view .LVU179
 246:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 777              		.loc 1 246 35 is_stmt 0 discriminator 3 view .LVU180
 778 007e 0CF1010C 		add	ip, ip, #1
 779              	.LVL60:
 246:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 780              		.loc 1 246 35 discriminator 3 view .LVU181
 781 0082 1FFA8CFC 		uxth	ip, ip
 782              	.LVL61:
 783              	.L59:
 246:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 784              		.loc 1 246 25 is_stmt 1 discriminator 1 view .LVU182
 246:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 785              		.loc 1 246 13 is_stmt 0 discriminator 1 view .LVU183
 786 0086 6045     		cmp	r0, ip
 787 0088 E3D8     		bhi	.L60
 251:FML/Src/EC2x.c ****         }
 788              		.loc 1 251 13 is_stmt 1 view .LVU184
 251:FML/Src/EC2x.c ****         }
 789              		.loc 1 251 24 is_stmt 0 view .LVU185
 790 008a C4EB0414 		rsb	r4, r4, r4, lsl #4
 791              	.LVL62:
 251:FML/Src/EC2x.c ****         }
 792              		.loc 1 251 24 view .LVU186
 793 008e 064B     		ldr	r3, .L68
 794 0090 03EB8404 		add	r4, r3, r4, lsl #2
 795 0094 0023     		movs	r3, #0
 796 0096 84F82C30 		strb	r3, [r4, #44]
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 24


 253:FML/Src/EC2x.c ****     }
 797              		.loc 1 253 9 is_stmt 1 view .LVU187
 798              	.LVL63:
 799              	.L54:
 253:FML/Src/EC2x.c ****     }
 800              		.loc 1 253 9 is_stmt 0 view .LVU188
 801              	.LBE6:
 255:FML/Src/EC2x.c **** int ec2x_ioctl(int fd);
 802              		.loc 1 255 1 view .LVU189
 803 009a 38BD     		pop	{r3, r4, r5, pc}
 804              	.LVL64:
 805              	.L61:
 806              	.LCFI15:
 807              		.cfi_def_cfa_offset 0
 808              		.cfi_restore 3
 809              		.cfi_restore 4
 810              		.cfi_restore 5
 811              		.cfi_restore 14
 230:FML/Src/EC2x.c ****     else{
 812              		.loc 1 230 16 view .LVU190
 813 009c 4FF0FF30 		mov	r0, #-1
 814              	.LVL65:
 255:FML/Src/EC2x.c **** int ec2x_ioctl(int fd);
 815              		.loc 1 255 1 view .LVU191
 816 00a0 7047     		bx	lr
 817              	.LVL66:
 818              	.L62:
 819              	.LCFI16:
 820              		.cfi_def_cfa_offset 16
 821              		.cfi_offset 3, -16
 822              		.cfi_offset 4, -12
 823              		.cfi_offset 5, -8
 824              		.cfi_offset 14, -4
 825              	.LBB7:
 240:FML/Src/EC2x.c ****         }
 826              		.loc 1 240 24 view .LVU192
 827 00a2 2046     		mov	r0, r4
 828 00a4 F9E7     		b	.L54
 829              	.L69:
 830 00a6 00BF     		.align	2
 831              	.L68:
 832 00a8 00000000 		.word	.LANCHOR4
 833              	.LBE7:
 834              		.cfi_endproc
 835              	.LFE295:
 837              		.section	.rodata.ec2x_handler.str1.4,"aMS",%progbits,1
 838              		.align	2
 839              	.LC1:
 840 0000 257300   		.ascii	"%s\000"
 841              		.section	.text.ec2x_handler,"ax",%progbits
 842              		.align	1
 843              		.global	ec2x_handler
 844              		.syntax unified
 845              		.thumb
 846              		.thumb_func
 848              	ec2x_handler:
 849              	.LVL67:
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 25


 850              	.LFB296:
 266:FML/Src/EC2x.c ****     uint8_t i = 0,j = 0;
 851              		.loc 1 266 1 is_stmt 1 view -0
 852              		.cfi_startproc
 853              		@ args = 0, pretend = 0, frame = 0
 854              		@ frame_needed = 0, uses_anonymous_args = 0
 266:FML/Src/EC2x.c ****     uint8_t i = 0,j = 0;
 855              		.loc 1 266 1 is_stmt 0 view .LVU194
 856 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 857              	.LCFI17:
 858              		.cfi_def_cfa_offset 24
 859              		.cfi_offset 3, -24
 860              		.cfi_offset 4, -20
 861              		.cfi_offset 5, -16
 862              		.cfi_offset 6, -12
 863              		.cfi_offset 7, -8
 864              		.cfi_offset 14, -4
 865 0002 0546     		mov	r5, r0
 866 0004 0C46     		mov	r4, r1
 867 0006 1646     		mov	r6, r2
 267:FML/Src/EC2x.c ****     shellPrint(&shell,"%s",data);
 868              		.loc 1 267 5 is_stmt 1 view .LVU195
 869              	.LVL68:
 268:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 870              		.loc 1 268 5 view .LVU196
 871 0008 0A46     		mov	r2, r1
 872              	.LVL69:
 268:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 873              		.loc 1 268 5 is_stmt 0 view .LVU197
 874 000a 3549     		ldr	r1, .L80
 875              	.LVL70:
 268:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 876              		.loc 1 268 5 view .LVU198
 877 000c 3548     		ldr	r0, .L80+4
 878              	.LVL71:
 268:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 879              		.loc 1 268 5 view .LVU199
 880 000e FFF7FEFF 		bl	shellPrint
 881              	.LVL72:
 269:FML/Src/EC2x.c ****     {
 882              		.loc 1 269 5 is_stmt 1 view .LVU200
 269:FML/Src/EC2x.c ****     {
 883              		.loc 1 269 11 is_stmt 0 view .LVU201
 884 0012 0023     		movs	r3, #0
 885              	.LVL73:
 886              	.L71:
 269:FML/Src/EC2x.c ****     {
 887              		.loc 1 269 15 is_stmt 1 discriminator 1 view .LVU202
 269:FML/Src/EC2x.c ****     {
 888              		.loc 1 269 5 is_stmt 0 discriminator 1 view .LVU203
 889 0014 03B1     		cbz	r3, .L76
 289:FML/Src/EC2x.c **** 
 890              		.loc 1 289 1 view .LVU204
 891 0016 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 892              	.LVL74:
 893              	.L76:
 271:FML/Src/EC2x.c ****         {
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 26


 894              		.loc 1 271 9 is_stmt 1 view .LVU205
 271:FML/Src/EC2x.c ****         {
 895              		.loc 1 271 32 is_stmt 0 view .LVU206
 896 0018 9E46     		mov	lr, r3
 897 001a C3EB0312 		rsb	r2, r3, r3, lsl #4
 898 001e 3249     		ldr	r1, .L80+8
 899 0020 01EB8202 		add	r2, r1, r2, lsl #2
 900 0024 1269     		ldr	r2, [r2, #16]
 271:FML/Src/EC2x.c ****         {
 901              		.loc 1 271 11 view .LVU207
 902 0026 AA42     		cmp	r2, r5
 903 0028 02D0     		beq	.L78
 904              	.L72:
 269:FML/Src/EC2x.c ****     {
 905              		.loc 1 269 64 is_stmt 1 discriminator 2 view .LVU208
 269:FML/Src/EC2x.c ****     {
 906              		.loc 1 269 65 is_stmt 0 discriminator 2 view .LVU209
 907 002a 0133     		adds	r3, r3, #1
 908              	.LVL75:
 269:FML/Src/EC2x.c ****     {
 909              		.loc 1 269 65 discriminator 2 view .LVU210
 910 002c DBB2     		uxtb	r3, r3
 911              	.LVL76:
 269:FML/Src/EC2x.c ****     {
 912              		.loc 1 269 65 discriminator 2 view .LVU211
 913 002e F1E7     		b	.L71
 914              	.L78:
 915              	.LBB8:
 273:FML/Src/EC2x.c ****             if(dest->block  == 0){
 916              		.loc 1 273 13 is_stmt 1 view .LVU212
 917              	.LVL77:
 274:FML/Src/EC2x.c ****                 dest->block = 1;
 918              		.loc 1 274 13 view .LVU213
 274:FML/Src/EC2x.c ****                 dest->block = 1;
 919              		.loc 1 274 20 is_stmt 0 view .LVU214
 920 0030 C3EB0312 		rsb	r2, r3, r3, lsl #4
 921 0034 01EB8202 		add	r2, r1, r2, lsl #2
 922 0038 92F82C20 		ldrb	r2, [r2, #44]	@ zero_extendqisi2
 274:FML/Src/EC2x.c ****                 dest->block = 1;
 923              		.loc 1 274 15 view .LVU215
 924 003c 002A     		cmp	r2, #0
 925 003e F4D1     		bne	.L72
 275:FML/Src/EC2x.c ****                 for(j = 0 ; j < len; j++){
 926              		.loc 1 275 17 is_stmt 1 view .LVU216
 275:FML/Src/EC2x.c ****                 for(j = 0 ; j < len; j++){
 927              		.loc 1 275 29 is_stmt 0 view .LVU217
 928 0040 C3EB0312 		rsb	r2, r3, r3, lsl #4
 929 0044 01EB8202 		add	r2, r1, r2, lsl #2
 930 0048 0121     		movs	r1, #1
 931 004a 82F82C10 		strb	r1, [r2, #44]
 276:FML/Src/EC2x.c ****                    
 932              		.loc 1 276 17 is_stmt 1 view .LVU218
 933              	.LVL78:
 276:FML/Src/EC2x.c ****                    
 934              		.loc 1 276 23 is_stmt 0 view .LVU219
 935 004e 1846     		mov	r0, r3
 276:FML/Src/EC2x.c ****                    
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 27


 936              		.loc 1 276 17 view .LVU220
 937 0050 22E0     		b	.L73
 938              	.LVL79:
 939              	.L74:
 278:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 940              		.loc 1 278 21 is_stmt 1 discriminator 3 view .LVU221
 278:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 941              		.loc 1 278 25 is_stmt 0 discriminator 3 view .LVU222
 942 0052 CEEB0E1C 		rsb	ip, lr, lr, lsl #4
 943 0056 244A     		ldr	r2, .L80+8
 944 0058 02EB8C0C 		add	ip, r2, ip, lsl #2
 945 005c DCF83020 		ldr	r2, [ip, #48]
 278:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 946              		.loc 1 278 36 discriminator 3 view .LVU223
 947 0060 BCF83610 		ldrh	r1, [ip, #54]
 278:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 948              		.loc 1 278 50 discriminator 3 view .LVU224
 949 0064 275C     		ldrb	r7, [r4, r0]	@ zero_extendqisi2
 278:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 950              		.loc 1 278 44 discriminator 3 view .LVU225
 951 0066 5754     		strb	r7, [r2, r1]
 279:FML/Src/EC2x.c ****                     dest->size++;
 952              		.loc 1 279 21 is_stmt 1 discriminator 3 view .LVU226
 279:FML/Src/EC2x.c ****                     dest->size++;
 953              		.loc 1 279 39 is_stmt 0 discriminator 3 view .LVU227
 954 0068 BCF83620 		ldrh	r2, [ip, #54]
 279:FML/Src/EC2x.c ****                     dest->size++;
 955              		.loc 1 279 46 discriminator 3 view .LVU228
 956 006c 0132     		adds	r2, r2, #1
 279:FML/Src/EC2x.c ****                     dest->size++;
 957              		.loc 1 279 56 discriminator 3 view .LVU229
 958 006e BCF83A70 		ldrh	r7, [ip, #58]
 279:FML/Src/EC2x.c ****                     dest->size++;
 959              		.loc 1 279 50 discriminator 3 view .LVU230
 960 0072 92FBF7F1 		sdiv	r1, r2, r7
 961 0076 07FB1122 		mls	r2, r7, r1, r2
 279:FML/Src/EC2x.c ****                     dest->size++;
 962              		.loc 1 279 32 discriminator 3 view .LVU231
 963 007a ACF83620 		strh	r2, [ip, #54]	@ movhi
 280:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 964              		.loc 1 280 21 is_stmt 1 discriminator 3 view .LVU232
 280:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 965              		.loc 1 280 25 is_stmt 0 discriminator 3 view .LVU233
 966 007e BCF83810 		ldrh	r1, [ip, #56]
 280:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 967              		.loc 1 280 31 discriminator 3 view .LVU234
 968 0082 0131     		adds	r1, r1, #1
 969 0084 89B2     		uxth	r1, r1
 970 0086 ACF83810 		strh	r1, [ip, #56]	@ movhi
 281:FML/Src/EC2x.c ****                 }
 971              		.loc 1 281 21 is_stmt 1 discriminator 3 view .LVU235
 281:FML/Src/EC2x.c ****                 }
 972              		.loc 1 281 79 is_stmt 0 discriminator 3 view .LVU236
 973 008a B942     		cmp	r1, r7
 974 008c 28BF     		it	cs
 975 008e 3946     		movcs	r1, r7
 281:FML/Src/EC2x.c ****                 }
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 28


 976              		.loc 1 281 32 discriminator 3 view .LVU237
 977 0090 ACF83810 		strh	r1, [ip, #56]	@ movhi
 276:FML/Src/EC2x.c ****                    
 978              		.loc 1 276 38 is_stmt 1 discriminator 3 view .LVU238
 276:FML/Src/EC2x.c ****                    
 979              		.loc 1 276 39 is_stmt 0 discriminator 3 view .LVU239
 980 0094 0130     		adds	r0, r0, #1
 981              	.LVL80:
 276:FML/Src/EC2x.c ****                    
 982              		.loc 1 276 39 discriminator 3 view .LVU240
 983 0096 C0B2     		uxtb	r0, r0
 984              	.LVL81:
 985              	.L73:
 276:FML/Src/EC2x.c ****                    
 986              		.loc 1 276 29 is_stmt 1 discriminator 1 view .LVU241
 276:FML/Src/EC2x.c ****                    
 987              		.loc 1 276 31 is_stmt 0 discriminator 1 view .LVU242
 988 0098 82B2     		uxth	r2, r0
 276:FML/Src/EC2x.c ****                    
 989              		.loc 1 276 17 discriminator 1 view .LVU243
 990 009a B242     		cmp	r2, r6
 991 009c D9D3     		bcc	.L74
 283:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 992              		.loc 1 283 17 is_stmt 1 view .LVU244
 283:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 993              		.loc 1 283 25 is_stmt 0 view .LVU245
 994 009e CEEB0E12 		rsb	r2, lr, lr, lsl #4
 995 00a2 1149     		ldr	r1, .L80+8
 996 00a4 01EB8202 		add	r2, r1, r2, lsl #2
 997 00a8 D08E     		ldrh	r0, [r2, #54]
 998              	.LVL82:
 283:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 999              		.loc 1 283 38 view .LVU246
 1000 00aa 928E     		ldrh	r2, [r2, #52]
 283:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 1001              		.loc 1 283 19 view .LVU247
 1002 00ac 9042     		cmp	r0, r2
 1003 00ae 07D9     		bls	.L75
 283:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 1004              		.loc 1 283 52 discriminator 1 view .LVU248
 1005 00b0 CEEB0E12 		rsb	r2, lr, lr, lsl #4
 1006 00b4 01EB8202 		add	r2, r1, r2, lsl #2
 1007 00b8 118F     		ldrh	r1, [r2, #56]
 283:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 1008              		.loc 1 283 66 discriminator 1 view .LVU249
 1009 00ba 528F     		ldrh	r2, [r2, #58]
 283:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 1010              		.loc 1 283 45 discriminator 1 view .LVU250
 1011 00bc 9142     		cmp	r1, r2
 1012 00be 08D0     		beq	.L79
 1013              	.L75:
 285:FML/Src/EC2x.c ****             }
 1014              		.loc 1 285 17 is_stmt 1 view .LVU251
 285:FML/Src/EC2x.c ****             }
 1015              		.loc 1 285 29 is_stmt 0 view .LVU252
 1016 00c0 CEEB0E1E 		rsb	lr, lr, lr, lsl #4
 1017 00c4 084A     		ldr	r2, .L80+8
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 29


 1018 00c6 02EB8E0E 		add	lr, r2, lr, lsl #2
 1019 00ca 0022     		movs	r2, #0
 1020 00cc 8EF82C20 		strb	r2, [lr, #44]
 1021 00d0 ABE7     		b	.L72
 1022              	.L79:
 284:FML/Src/EC2x.c ****                 dest->block = 0;
 1023              		.loc 1 284 21 is_stmt 1 view .LVU253
 284:FML/Src/EC2x.c ****                 dest->block = 0;
 1024              		.loc 1 284 32 is_stmt 0 view .LVU254
 1025 00d2 CEEB0E12 		rsb	r2, lr, lr, lsl #4
 1026 00d6 0449     		ldr	r1, .L80+8
 1027 00d8 01EB8202 		add	r2, r1, r2, lsl #2
 1028 00dc 9086     		strh	r0, [r2, #52]	@ movhi
 1029 00de EFE7     		b	.L75
 1030              	.L81:
 1031              		.align	2
 1032              	.L80:
 1033 00e0 00000000 		.word	.LC1
 1034 00e4 00000000 		.word	shell
 1035 00e8 00000000 		.word	.LANCHOR4
 1036              	.LBE8:
 1037              		.cfi_endproc
 1038              	.LFE296:
 1040              		.section	.rodata.ec2x_timeout_handle.str1.4,"aMS",%progbits,1
 1041              		.align	2
 1042              	.LC2:
 1043 0000 6E6F2076 		.ascii	"no valid data\015\012\000"
 1043      616C6964 
 1043      20646174 
 1043      610D0A00 
 1044              		.section	.text.ec2x_timeout_handle,"ax",%progbits
 1045              		.align	1
 1046              		.global	ec2x_timeout_handle
 1047              		.syntax unified
 1048              		.thumb
 1049              		.thumb_func
 1051              	ec2x_timeout_handle:
 1052              	.LFB297:
 292:FML/Src/EC2x.c ****     shellPrint(&shell,"no valid data\r\n");
 1053              		.loc 1 292 31 is_stmt 1 view -0
 1054              		.cfi_startproc
 1055              		@ args = 0, pretend = 0, frame = 0
 1056              		@ frame_needed = 0, uses_anonymous_args = 0
 1057 0000 08B5     		push	{r3, lr}
 1058              	.LCFI18:
 1059              		.cfi_def_cfa_offset 8
 1060              		.cfi_offset 3, -8
 1061              		.cfi_offset 14, -4
 293:FML/Src/EC2x.c ****     queue_insert(&ec2x_event_queue,(uint8_t)Timeout_Event);
 1062              		.loc 1 293 5 view .LVU256
 1063 0002 0449     		ldr	r1, .L84
 1064 0004 0448     		ldr	r0, .L84+4
 1065 0006 FFF7FEFF 		bl	shellPrint
 1066              	.LVL83:
 294:FML/Src/EC2x.c **** }
 1067              		.loc 1 294 5 view .LVU257
 1068 000a 0121     		movs	r1, #1
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 30


 1069 000c 0348     		ldr	r0, .L84+8
 1070 000e FFF7FEFF 		bl	queue_insert
 1071              	.LVL84:
 295:FML/Src/EC2x.c **** 
 1072              		.loc 1 295 1 is_stmt 0 view .LVU258
 1073 0012 08BD     		pop	{r3, pc}
 1074              	.L85:
 1075              		.align	2
 1076              	.L84:
 1077 0014 00000000 		.word	.LC2
 1078 0018 00000000 		.word	shell
 1079 001c 00000000 		.word	.LANCHOR3
 1080              		.cfi_endproc
 1081              	.LFE297:
 1083              		.section	.rodata.ec2x_replymatch.str1.4,"aMS",%progbits,1
 1084              		.align	2
 1085              	.LC3:
 1086 0000 72656376 		.ascii	"recv success\000"
 1086      20737563 
 1086      63657373 
 1086      00
 1087              		.section	.text.ec2x_replymatch,"ax",%progbits
 1088              		.align	1
 1089              		.global	ec2x_replymatch
 1090              		.syntax unified
 1091              		.thumb
 1092              		.thumb_func
 1094              	ec2x_replymatch:
 1095              	.LVL85:
 1096              	.LFB298:
 297:FML/Src/EC2x.c ****     uint8_t rx_buff[300]  = {0x00};
 1097              		.loc 1 297 34 is_stmt 1 view -0
 1098              		.cfi_startproc
 1099              		@ args = 0, pretend = 0, frame = 304
 1100              		@ frame_needed = 0, uses_anonymous_args = 0
 297:FML/Src/EC2x.c ****     uint8_t rx_buff[300]  = {0x00};
 1101              		.loc 1 297 34 is_stmt 0 view .LVU260
 1102 0000 30B5     		push	{r4, r5, lr}
 1103              	.LCFI19:
 1104              		.cfi_def_cfa_offset 12
 1105              		.cfi_offset 4, -12
 1106              		.cfi_offset 5, -8
 1107              		.cfi_offset 14, -4
 1108 0002 CDB0     		sub	sp, sp, #308
 1109              	.LCFI20:
 1110              		.cfi_def_cfa_offset 320
 1111 0004 0546     		mov	r5, r0
 298:FML/Src/EC2x.c ****     int bytes_num = 0;
 1112              		.loc 1 298 5 is_stmt 1 view .LVU261
 298:FML/Src/EC2x.c ****     int bytes_num = 0;
 1113              		.loc 1 298 13 is_stmt 0 view .LVU262
 1114 0006 0024     		movs	r4, #0
 1115 0008 0194     		str	r4, [sp, #4]
 1116 000a 4FF49472 		mov	r2, #296
 1117 000e 2146     		mov	r1, r4
 1118 0010 02A8     		add	r0, sp, #8
 1119              	.LVL86:
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 31


 298:FML/Src/EC2x.c ****     int bytes_num = 0;
 1120              		.loc 1 298 13 view .LVU263
 1121 0012 FFF7FEFF 		bl	memset
 1122              	.LVL87:
 299:FML/Src/EC2x.c ****     bytes_num =  ec2x_read(0,rx_buff,300);
 1123              		.loc 1 299 5 is_stmt 1 view .LVU264
 300:FML/Src/EC2x.c ****     if(bytes_num > 0)
 1124              		.loc 1 300 5 view .LVU265
 300:FML/Src/EC2x.c ****     if(bytes_num > 0)
 1125              		.loc 1 300 18 is_stmt 0 view .LVU266
 1126 0016 4FF49672 		mov	r2, #300
 1127 001a 01A9     		add	r1, sp, #4
 1128 001c 2046     		mov	r0, r4
 1129 001e FFF7FEFF 		bl	ec2x_read
 1130              	.LVL88:
 301:FML/Src/EC2x.c ****     {
 1131              		.loc 1 301 5 is_stmt 1 view .LVU267
 301:FML/Src/EC2x.c ****     {
 1132              		.loc 1 301 7 is_stmt 0 view .LVU268
 1133 0022 A042     		cmp	r0, r4
 1134 0024 04DD     		ble	.L87
 303:FML/Src/EC2x.c ****              shellPrint(&shell,"recv success");
 1135              		.loc 1 303 9 is_stmt 1 view .LVU269
 1136              	.LBB9:
 303:FML/Src/EC2x.c ****              shellPrint(&shell,"recv success");
 1137              		.loc 1 303 12 is_stmt 0 view .LVU270
 1138 0026 2946     		mov	r1, r5
 1139 0028 01A8     		add	r0, sp, #4
 1140              	.LVL89:
 303:FML/Src/EC2x.c ****              shellPrint(&shell,"recv success");
 1141              		.loc 1 303 12 view .LVU271
 1142 002a FFF7FEFF 		bl	strstr
 1143              	.LVL90:
 303:FML/Src/EC2x.c ****              shellPrint(&shell,"recv success");
 1144              		.loc 1 303 11 view .LVU272
 1145 002e 40B9     		cbnz	r0, .L91
 1146              	.L87:
 1147              	.LBE9:
 310:FML/Src/EC2x.c ****          ec2x_timeout_handle(); 
 1148              		.loc 1 310 5 is_stmt 1 view .LVU273
 310:FML/Src/EC2x.c ****          ec2x_timeout_handle(); 
 1149              		.loc 1 310 20 is_stmt 0 view .LVU274
 1150 0030 0B4B     		ldr	r3, .L93
 1151 0032 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 310:FML/Src/EC2x.c ****          ec2x_timeout_handle(); 
 1152              		.loc 1 310 7 view .LVU275
 1153 0034 7BB1     		cbz	r3, .L92
 313:FML/Src/EC2x.c ****     return 0;
 1154              		.loc 1 313 9 is_stmt 1 view .LVU276
 313:FML/Src/EC2x.c ****     return 0;
 1155              		.loc 1 313 20 is_stmt 0 view .LVU277
 1156 0036 013B     		subs	r3, r3, #1
 1157 0038 094A     		ldr	r2, .L93
 1158 003a 1370     		strb	r3, [r2]
 314:FML/Src/EC2x.c **** }
 1159              		.loc 1 314 12 view .LVU278
 1160 003c 0020     		movs	r0, #0
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 32


 1161              	.L86:
 315:FML/Src/EC2x.c **** 
 1162              		.loc 1 315 1 view .LVU279
 1163 003e 4DB0     		add	sp, sp, #308
 1164              	.LCFI21:
 1165              		.cfi_remember_state
 1166              		.cfi_def_cfa_offset 12
 1167              		@ sp needed
 1168 0040 30BD     		pop	{r4, r5, pc}
 1169              	.LVL91:
 1170              	.L91:
 1171              	.LCFI22:
 1172              		.cfi_restore_state
 1173              	.LBB10:
 304:FML/Src/EC2x.c ****              queue_insert(&ec2x_event_queue,(uint8_t)ReplyScs_Event);
 1174              		.loc 1 304 14 is_stmt 1 view .LVU280
 1175 0042 0849     		ldr	r1, .L93+4
 1176 0044 0848     		ldr	r0, .L93+8
 1177 0046 FFF7FEFF 		bl	shellPrint
 1178              	.LVL92:
 305:FML/Src/EC2x.c ****             return 1;
 1179              		.loc 1 305 14 view .LVU281
 1180 004a 0221     		movs	r1, #2
 1181 004c 0748     		ldr	r0, .L93+12
 1182 004e FFF7FEFF 		bl	queue_insert
 1183              	.LVL93:
 306:FML/Src/EC2x.c ****         }
 1184              		.loc 1 306 13 view .LVU282
 306:FML/Src/EC2x.c ****         }
 1185              		.loc 1 306 20 is_stmt 0 view .LVU283
 1186 0052 0120     		movs	r0, #1
 1187 0054 F3E7     		b	.L86
 1188              	.L92:
 1189              	.LBE10:
 311:FML/Src/EC2x.c ****     else
 1190              		.loc 1 311 10 is_stmt 1 view .LVU284
 1191 0056 FFF7FEFF 		bl	ec2x_timeout_handle
 1192              	.LVL94:
 314:FML/Src/EC2x.c **** }
 1193              		.loc 1 314 12 is_stmt 0 view .LVU285
 1194 005a 0020     		movs	r0, #0
 1195 005c EFE7     		b	.L86
 1196              	.L94:
 1197 005e 00BF     		.align	2
 1198              	.L93:
 1199 0060 00000000 		.word	.LANCHOR0
 1200 0064 00000000 		.word	.LC3
 1201 0068 00000000 		.word	shell
 1202 006c 00000000 		.word	.LANCHOR3
 1203              		.cfi_endproc
 1204              	.LFE298:
 1206              		.section	.rodata.ec2x_fms_proccess.str1.4,"aMS",%progbits,1
 1207              		.align	2
 1208              	.LC4:
 1209 0000 4375722D 		.ascii	"Cur->State:%d ,Evt:%d,\000"
 1209      3E537461 
 1209      74653A25 
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 33


 1209      64202C45 
 1209      76743A25 
 1210 0017 00       		.align	2
 1211              	.LC5:
 1212 0018 4E657874 		.ascii	"Next->State:%d\015\012\000"
 1212      2D3E5374 
 1212      6174653A 
 1212      25640D0A 
 1212      00
 1213              		.section	.text.ec2x_fms_proccess,"ax",%progbits
 1214              		.align	1
 1215              		.global	ec2x_fms_proccess
 1216              		.syntax unified
 1217              		.thumb
 1218              		.thumb_func
 1220              	ec2x_fms_proccess:
 1221              	.LFB304:
 355:FML/Src/EC2x.c **** 
 356:FML/Src/EC2x.c **** 
 357:FML/Src/EC2x.c **** void ec2x_fms_proccess(void){
 1222              		.loc 1 357 29 is_stmt 1 view -0
 1223              		.cfi_startproc
 1224              		@ args = 0, pretend = 0, frame = 8
 1225              		@ frame_needed = 0, uses_anonymous_args = 0
 1226 0000 30B5     		push	{r4, r5, lr}
 1227              	.LCFI23:
 1228              		.cfi_def_cfa_offset 12
 1229              		.cfi_offset 4, -12
 1230              		.cfi_offset 5, -8
 1231              		.cfi_offset 14, -4
 1232 0002 83B0     		sub	sp, sp, #12
 1233              	.LCFI24:
 1234              		.cfi_def_cfa_offset 24
 358:FML/Src/EC2x.c ****     if(queue_is_empty(&ec2x_event_queue) == 0){
 1235              		.loc 1 358 5 view .LVU287
 1236              		.loc 1 358 8 is_stmt 0 view .LVU288
 1237 0004 1148     		ldr	r0, .L99
 1238 0006 FFF7FEFF 		bl	queue_is_empty
 1239              	.LVL95:
 1240              		.loc 1 358 7 view .LVU289
 1241 000a 08B1     		cbz	r0, .L98
 1242              	.L95:
 359:FML/Src/EC2x.c ****         EC2x_Event_T evt = 0x00;
 360:FML/Src/EC2x.c ****         queue_pop(&ec2x_event_queue,&evt,1);
 361:FML/Src/EC2x.c ****         shellPrint(&shell,"Cur->State:%d ,Evt:%d,",(&ec2x_fsm)->state,evt);
 362:FML/Src/EC2x.c ****         FSM_EventHandle(&ec2x_fsm,evt);
 363:FML/Src/EC2x.c ****         shellPrint(&shell,"Next->State:%d\r\n",(&ec2x_fsm)->state);
 364:FML/Src/EC2x.c ****     }
 365:FML/Src/EC2x.c **** }
 1243              		.loc 1 365 1 view .LVU290
 1244 000c 03B0     		add	sp, sp, #12
 1245              	.LCFI25:
 1246              		.cfi_remember_state
 1247              		.cfi_def_cfa_offset 12
 1248              		@ sp needed
 1249 000e 30BD     		pop	{r4, r5, pc}
 1250              	.L98:
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 34


 1251              	.LCFI26:
 1252              		.cfi_restore_state
 1253              	.LBB11:
 359:FML/Src/EC2x.c ****         EC2x_Event_T evt = 0x00;
 1254              		.loc 1 359 9 is_stmt 1 view .LVU291
 359:FML/Src/EC2x.c ****         EC2x_Event_T evt = 0x00;
 1255              		.loc 1 359 22 is_stmt 0 view .LVU292
 1256 0010 0023     		movs	r3, #0
 1257 0012 8DF80730 		strb	r3, [sp, #7]
 360:FML/Src/EC2x.c ****         shellPrint(&shell,"Cur->State:%d ,Evt:%d,",(&ec2x_fsm)->state,evt);
 1258              		.loc 1 360 9 is_stmt 1 view .LVU293
 1259 0016 0122     		movs	r2, #1
 1260 0018 0DF10701 		add	r1, sp, #7
 1261 001c 0B48     		ldr	r0, .L99
 1262 001e FFF7FEFF 		bl	queue_pop
 1263              	.LVL96:
 361:FML/Src/EC2x.c ****         FSM_EventHandle(&ec2x_fsm,evt);
 1264              		.loc 1 361 9 view .LVU294
 361:FML/Src/EC2x.c ****         FSM_EventHandle(&ec2x_fsm,evt);
 1265              		.loc 1 361 63 is_stmt 0 view .LVU295
 1266 0022 0B4C     		ldr	r4, .L99+4
 361:FML/Src/EC2x.c ****         FSM_EventHandle(&ec2x_fsm,evt);
 1267              		.loc 1 361 9 view .LVU296
 1268 0024 0B4D     		ldr	r5, .L99+8
 1269 0026 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1270 002a 2278     		ldrb	r2, [r4]	@ zero_extendqisi2
 1271 002c 0A49     		ldr	r1, .L99+12
 1272 002e 2846     		mov	r0, r5
 1273 0030 FFF7FEFF 		bl	shellPrint
 1274              	.LVL97:
 362:FML/Src/EC2x.c ****         shellPrint(&shell,"Next->State:%d\r\n",(&ec2x_fsm)->state);
 1275              		.loc 1 362 9 is_stmt 1 view .LVU297
 1276 0034 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
 1277 0038 2046     		mov	r0, r4
 1278 003a FFF7FEFF 		bl	FSM_EventHandle
 1279              	.LVL98:
 363:FML/Src/EC2x.c ****     }
 1280              		.loc 1 363 9 view .LVU298
 1281 003e 2278     		ldrb	r2, [r4]	@ zero_extendqisi2
 1282 0040 0649     		ldr	r1, .L99+16
 1283 0042 2846     		mov	r0, r5
 1284 0044 FFF7FEFF 		bl	shellPrint
 1285              	.LVL99:
 1286              	.LBE11:
 1287              		.loc 1 365 1 is_stmt 0 view .LVU299
 1288 0048 E0E7     		b	.L95
 1289              	.L100:
 1290 004a 00BF     		.align	2
 1291              	.L99:
 1292 004c 00000000 		.word	.LANCHOR3
 1293 0050 00000000 		.word	.LANCHOR8
 1294 0054 00000000 		.word	shell
 1295 0058 00000000 		.word	.LC4
 1296 005c 18000000 		.word	.LC5
 1297              		.cfi_endproc
 1298              	.LFE304:
 1300              		.section	.text.ec2x_tcp_connect,"ax",%progbits
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 35


 1301              		.align	1
 1302              		.global	ec2x_tcp_connect
 1303              		.syntax unified
 1304              		.thumb
 1305              		.thumb_func
 1307              	ec2x_tcp_connect:
 1308              	.LVL100:
 1309              	.LFB305:
 366:FML/Src/EC2x.c **** 
 367:FML/Src/EC2x.c **** uint8_t ec2x_tcp_connect(int fd){
 1310              		.loc 1 367 33 is_stmt 1 view -0
 1311              		.cfi_startproc
 1312              		@ args = 0, pretend = 0, frame = 0
 1313              		@ frame_needed = 0, uses_anonymous_args = 0
 1314              		.loc 1 367 33 is_stmt 0 view .LVU301
 1315 0000 10B5     		push	{r4, lr}
 1316              	.LCFI27:
 1317              		.cfi_def_cfa_offset 8
 1318              		.cfi_offset 4, -8
 1319              		.cfi_offset 14, -4
 368:FML/Src/EC2x.c ****     uint8_t err_code = 0;
 1320              		.loc 1 368 5 is_stmt 1 view .LVU302
 1321              	.LVL101:
 369:FML/Src/EC2x.c ****     uint8_t i = 0;
 1322              		.loc 1 369 5 view .LVU303
 370:FML/Src/EC2x.c ****     for(i = 0; i < sizeof(connectmsg_queue)/sizeof(ATMsg_TypeDef); ++i)
 1323              		.loc 1 370 5 view .LVU304
 1324              		.loc 1 370 11 is_stmt 0 view .LVU305
 1325 0002 0024     		movs	r4, #0
 1326              		.loc 1 370 5 view .LVU306
 1327 0004 09E0     		b	.L102
 1328              	.LVL102:
 1329              	.L103:
 371:FML/Src/EC2x.c ****     {
 372:FML/Src/EC2x.c ****         queue_insert(&ec2x_txmsg_queue,(int *)&connectmsg_queue[i]);
 1330              		.loc 1 372 9 is_stmt 1 discriminator 3 view .LVU307
 1331              		.loc 1 372 47 is_stmt 0 discriminator 3 view .LVU308
 1332 0006 04EB4402 		add	r2, r4, r4, lsl #1
 1333 000a 9300     		lsls	r3, r2, #2
 1334              		.loc 1 372 9 discriminator 3 view .LVU309
 1335 000c 0649     		ldr	r1, .L105
 1336 000e 1944     		add	r1, r1, r3
 1337 0010 0648     		ldr	r0, .L105+4
 1338 0012 FFF7FEFF 		bl	queue_insert
 1339              	.LVL103:
 370:FML/Src/EC2x.c ****     for(i = 0; i < sizeof(connectmsg_queue)/sizeof(ATMsg_TypeDef); ++i)
 1340              		.loc 1 370 68 is_stmt 1 discriminator 3 view .LVU310
 1341 0016 0134     		adds	r4, r4, #1
 1342              	.LVL104:
 370:FML/Src/EC2x.c ****     for(i = 0; i < sizeof(connectmsg_queue)/sizeof(ATMsg_TypeDef); ++i)
 1343              		.loc 1 370 68 is_stmt 0 discriminator 3 view .LVU311
 1344 0018 E4B2     		uxtb	r4, r4
 1345              	.LVL105:
 1346              	.L102:
 370:FML/Src/EC2x.c ****     for(i = 0; i < sizeof(connectmsg_queue)/sizeof(ATMsg_TypeDef); ++i)
 1347              		.loc 1 370 16 is_stmt 1 discriminator 1 view .LVU312
 370:FML/Src/EC2x.c ****     for(i = 0; i < sizeof(connectmsg_queue)/sizeof(ATMsg_TypeDef); ++i)
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 36


 1348              		.loc 1 370 5 is_stmt 0 discriminator 1 view .LVU313
 1349 001a 072C     		cmp	r4, #7
 1350 001c F3D9     		bls	.L103
 373:FML/Src/EC2x.c ****     }
 374:FML/Src/EC2x.c ****     queue_insert(&ec2x_event_queue,(uint8_t)CMDSend_Event);
 1351              		.loc 1 374 5 is_stmt 1 view .LVU314
 1352 001e 0321     		movs	r1, #3
 1353 0020 0348     		ldr	r0, .L105+8
 1354 0022 FFF7FEFF 		bl	queue_insert
 1355              	.LVL106:
 375:FML/Src/EC2x.c **** 
 376:FML/Src/EC2x.c **** }
 1356              		.loc 1 376 1 is_stmt 0 view .LVU315
 1357 0026 10BD     		pop	{r4, pc}
 1358              	.LVL107:
 1359              	.L106:
 1360              		.loc 1 376 1 view .LVU316
 1361              		.align	2
 1362              	.L105:
 1363 0028 00000000 		.word	.LANCHOR9
 1364 002c 00000000 		.word	.LANCHOR1
 1365 0030 00000000 		.word	.LANCHOR3
 1366              		.cfi_endproc
 1367              	.LFE305:
 1369              		.section	.rodata.EC2x_Test.str1.4,"aMS",%progbits,1
 1370              		.align	2
 1371              	.LC6:
 1372 0000 7463705F 		.ascii	"tcp_connect\000"
 1372      636F6E6E 
 1372      65637400 
 1373              		.section	.text.EC2x_Test,"ax",%progbits
 1374              		.align	1
 1375              		.global	EC2x_Test
 1376              		.syntax unified
 1377              		.thumb
 1378              		.thumb_func
 1380              	EC2x_Test:
 1381              	.LVL108:
 1382              	.LFB306:
 377:FML/Src/EC2x.c **** /*------------------------------------test------------------------------------*/
 378:FML/Src/EC2x.c **** 
 379:FML/Src/EC2x.c **** /**
 380:FML/Src/EC2x.c ****  * @brief 
 381:FML/Src/EC2x.c ****  * 
 382:FML/Src/EC2x.c ****  * @param fd 
 383:FML/Src/EC2x.c ****  * @param tx_buff 
 384:FML/Src/EC2x.c ****  * @param expect_reply 
 385:FML/Src/EC2x.c ****  * @param timeout 
 386:FML/Src/EC2x.c ****  */
 387:FML/Src/EC2x.c **** void EC2x_Test(int fd,char *tx_buff,char *expect_reply,uint16_t timeout)
 388:FML/Src/EC2x.c **** {
 1383              		.loc 1 388 1 is_stmt 1 view -0
 1384              		.cfi_startproc
 1385              		@ args = 0, pretend = 0, frame = 0
 1386              		@ frame_needed = 0, uses_anonymous_args = 0
 1387              		.loc 1 388 1 is_stmt 0 view .LVU318
 1388 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 37


 1389              	.LCFI28:
 1390              		.cfi_def_cfa_offset 32
 1391              		.cfi_offset 4, -32
 1392              		.cfi_offset 5, -28
 1393              		.cfi_offset 6, -24
 1394              		.cfi_offset 7, -20
 1395              		.cfi_offset 8, -16
 1396              		.cfi_offset 9, -12
 1397              		.cfi_offset 10, -8
 1398              		.cfi_offset 14, -4
 1399 0004 82B0     		sub	sp, sp, #8
 1400              	.LCFI29:
 1401              		.cfi_def_cfa_offset 40
 1402 0006 0646     		mov	r6, r0
 1403 0008 0D46     		mov	r5, r1
 1404 000a 1746     		mov	r7, r2
 1405 000c 9846     		mov	r8, r3
 389:FML/Src/EC2x.c ****     uint8_t *tx_data,len=0;
 1406              		.loc 1 389 5 is_stmt 1 view .LVU319
 1407              	.LVL109:
 390:FML/Src/EC2x.c ****     len = strlen(tx_buff);
 1408              		.loc 1 390 5 view .LVU320
 1409              		.loc 1 390 11 is_stmt 0 view .LVU321
 1410 000e 0846     		mov	r0, r1
 1411              	.LVL110:
 1412              		.loc 1 390 11 view .LVU322
 1413 0010 FFF7FEFF 		bl	strlen
 1414              	.LVL111:
 1415              		.loc 1 390 11 view .LVU323
 1416 0014 0446     		mov	r4, r0
 1417              		.loc 1 390 9 view .LVU324
 1418 0016 5FFA80F9 		uxtb	r9, r0
 1419              	.LVL112:
 391:FML/Src/EC2x.c ****     if(strcmp(tx_buff,"tcp_connect")==0){
 1420              		.loc 1 391 5 is_stmt 1 view .LVU325
 1421              	.LBB12:
 1422              		.loc 1 391 8 is_stmt 0 view .LVU326
 1423 001a 1649     		ldr	r1, .L111
 1424 001c 2846     		mov	r0, r5
 1425 001e FFF7FEFF 		bl	strcmp
 1426              	.LVL113:
 1427              		.loc 1 391 7 view .LVU327
 1428 0022 28B9     		cbnz	r0, .L108
 392:FML/Src/EC2x.c ****         ec2x_tcp_connect(fd);
 1429              		.loc 1 392 9 is_stmt 1 view .LVU328
 1430 0024 3046     		mov	r0, r6
 1431 0026 FFF7FEFF 		bl	ec2x_tcp_connect
 1432              	.LVL114:
 1433              	.L107:
 1434              	.LBE12:
 393:FML/Src/EC2x.c ****     }
 394:FML/Src/EC2x.c ****     else{
 395:FML/Src/EC2x.c ****         tx_data = (char *)malloc((len+2)*sizeof(uint8_t));
 396:FML/Src/EC2x.c ****         memcpy(tx_data,tx_buff,len);
 397:FML/Src/EC2x.c ****     
 398:FML/Src/EC2x.c ****         tx_data[len] = 0x0D;
 399:FML/Src/EC2x.c ****         tx_data[len+1] = 0x0A;
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 38


 400:FML/Src/EC2x.c ****         ec2x_cmd_send(fd, tx_data,len+2, expect_reply,timeout);
 401:FML/Src/EC2x.c ****         queue_insert(&ec2x_event_queue,(uint8_t)CMDSend_Event);
 402:FML/Src/EC2x.c ****         free(tx_data);
 403:FML/Src/EC2x.c ****         tx_data = NULL;
 404:FML/Src/EC2x.c ****     }
 405:FML/Src/EC2x.c **** }
 1435              		.loc 1 405 1 is_stmt 0 view .LVU329
 1436 002a 02B0     		add	sp, sp, #8
 1437              	.LCFI30:
 1438              		.cfi_remember_state
 1439              		.cfi_def_cfa_offset 32
 1440              		@ sp needed
 1441 002c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1442              	.LVL115:
 1443              	.L108:
 1444              	.LCFI31:
 1445              		.cfi_restore_state
 1446              	.LBB14:
 1447              	.LBB13:
 395:FML/Src/EC2x.c ****         memcpy(tx_data,tx_buff,len);
 1448              		.loc 1 395 9 is_stmt 1 view .LVU330
 1449 0030 E4B2     		uxtb	r4, r4
 395:FML/Src/EC2x.c ****         memcpy(tx_data,tx_buff,len);
 1450              		.loc 1 395 27 is_stmt 0 view .LVU331
 1451 0032 A01C     		adds	r0, r4, #2
 1452 0034 FFF7FEFF 		bl	malloc
 1453              	.LVL116:
 1454 0038 8246     		mov	r10, r0
 1455              	.LVL117:
 396:FML/Src/EC2x.c ****     
 1456              		.loc 1 396 9 is_stmt 1 view .LVU332
 1457 003a 2246     		mov	r2, r4
 1458 003c 2946     		mov	r1, r5
 1459 003e FFF7FEFF 		bl	memcpy
 1460              	.LVL118:
 398:FML/Src/EC2x.c ****         tx_data[len+1] = 0x0A;
 1461              		.loc 1 398 9 view .LVU333
 398:FML/Src/EC2x.c ****         tx_data[len+1] = 0x0A;
 1462              		.loc 1 398 22 is_stmt 0 view .LVU334
 1463 0042 0D23     		movs	r3, #13
 1464 0044 0AF80430 		strb	r3, [r10, r4]
 399:FML/Src/EC2x.c ****         ec2x_cmd_send(fd, tx_data,len+2, expect_reply,timeout);
 1465              		.loc 1 399 9 is_stmt 1 view .LVU335
 399:FML/Src/EC2x.c ****         ec2x_cmd_send(fd, tx_data,len+2, expect_reply,timeout);
 1466              		.loc 1 399 16 is_stmt 0 view .LVU336
 1467 0048 0134     		adds	r4, r4, #1
 399:FML/Src/EC2x.c ****         ec2x_cmd_send(fd, tx_data,len+2, expect_reply,timeout);
 1468              		.loc 1 399 24 view .LVU337
 1469 004a 0A23     		movs	r3, #10
 1470 004c 0AF80430 		strb	r3, [r10, r4]
 400:FML/Src/EC2x.c ****         queue_insert(&ec2x_event_queue,(uint8_t)CMDSend_Event);
 1471              		.loc 1 400 9 is_stmt 1 view .LVU338
 1472 0050 CDF80080 		str	r8, [sp]
 1473 0054 3B46     		mov	r3, r7
 1474 0056 09F10202 		add	r2, r9, #2
 1475 005a 5146     		mov	r1, r10
 1476 005c 3046     		mov	r0, r6
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 39


 1477 005e FFF7FEFF 		bl	ec2x_cmd_send
 1478              	.LVL119:
 401:FML/Src/EC2x.c ****         free(tx_data);
 1479              		.loc 1 401 9 view .LVU339
 1480 0062 0321     		movs	r1, #3
 1481 0064 0448     		ldr	r0, .L111+4
 1482 0066 FFF7FEFF 		bl	queue_insert
 1483              	.LVL120:
 402:FML/Src/EC2x.c ****         tx_data = NULL;
 1484              		.loc 1 402 9 view .LVU340
 1485 006a 5046     		mov	r0, r10
 1486 006c FFF7FEFF 		bl	free
 1487              	.LVL121:
 403:FML/Src/EC2x.c ****     }
 1488              		.loc 1 403 9 view .LVU341
 403:FML/Src/EC2x.c ****     }
 1489              		.loc 1 403 9 is_stmt 0 view .LVU342
 1490              	.LBE13:
 1491              	.LBE14:
 1492              		.loc 1 405 1 view .LVU343
 1493 0070 DBE7     		b	.L107
 1494              	.L112:
 1495 0072 00BF     		.align	2
 1496              	.L111:
 1497 0074 00000000 		.word	.LC6
 1498 0078 00000000 		.word	.LANCHOR3
 1499              		.cfi_endproc
 1500              	.LFE306:
 1502              		.global	shellCommandec2x_send
 1503              		.global	shellDescec2x_send
 1504              		.global	shellCmdec2x_send
 1505              		.global	ec2x_dev
 1506              		.global	ec2x_txmsg_queue
 1507              		.global	cur_msg
 1508              		.global	ec2x_txmsg_buff
 1509              		.global	connectmsg_queue
 1510              		.section	.rodata.str1.4,"aMS",%progbits,1
 1511              		.align	2
 1512              	.LC7:
 1513 0000 41540D0A 		.ascii	"AT\015\012\000"
 1513      00
 1514 0005 000000   		.align	2
 1515              	.LC8:
 1516 0008 4F4B00   		.ascii	"OK\000"
 1517 000b 00       		.align	2
 1518              	.LC9:
 1519 000c 41542B43 		.ascii	"AT+CPIN?\015\012\000"
 1519      50494E3F 
 1519      0D0A00
 1520 0017 00       		.align	2
 1521              	.LC10:
 1522 0018 2B435049 		.ascii	"+CPIN: READY\000"
 1522      4E3A2052 
 1522      45414459 
 1522      00
 1523 0025 000000   		.align	2
 1524              	.LC11:
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 40


 1525 0028 41542B43 		.ascii	"AT+CREG?\015\012\000"
 1525      5245473F 
 1525      0D0A00
 1526 0033 00       		.align	2
 1527              	.LC12:
 1528 0034 2B435245 		.ascii	"+CREG: 0,1\000"
 1528      473A2030 
 1528      2C3100
 1529 003f 00       		.align	2
 1530              	.LC13:
 1531 0040 41542B43 		.ascii	"AT+CGREG?\015\012\000"
 1531      47524547 
 1531      3F0D0A00 
 1532              		.align	2
 1533              	.LC14:
 1534 004c 2B434752 		.ascii	"+CGREG: 0,1\000"
 1534      45473A20 
 1534      302C3100 
 1535              		.align	2
 1536              	.LC15:
 1537 0058 41542B51 		.ascii	"AT+QICSGP=1,1,\"CMNET\",\"\",\"\",1\015\012\000"
 1537      49435347 
 1537      503D312C 
 1537      312C2243 
 1537      4D4E4554 
 1538              		.align	2
 1539              	.LC16:
 1540 0078 41542B51 		.ascii	"AT+QIDEACT=1\015\012\000"
 1540      49444541 
 1540      43543D31 
 1540      0D0A00
 1541 0087 00       		.align	2
 1542              	.LC17:
 1543 0088 41542B51 		.ascii	"AT+QIACT=1\015\012\000"
 1543      49414354 
 1543      3D310D0A 
 1543      00
 1544 0095 000000   		.align	2
 1545              	.LC18:
 1546 0098 2B51494F 		.ascii	"+QIOPEN:\000"
 1546      50454E3A 
 1546      00
 1547              		.global	tcpconnct_step
 1548              		.global	tcp_connect
 1549              		.global	ec2x_event_queue
 1550              		.global	event_buff
 1551              		.global	ec2x_transtable
 1552              		.global	ec2x_fsm
 1553              		.global	ec2x_buff
 1554              		.section	.bss.cur_msg,"aw",%nobits
 1555              		.align	2
 1556              		.set	.LANCHOR2,. + 0
 1559              	cur_msg:
 1560 0000 00000000 		.space	4
 1561              		.section	.bss.ec2x_event_queue,"aw",%nobits
 1562              		.align	2
 1563              		.set	.LANCHOR3,. + 0
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 41


 1566              	ec2x_event_queue:
 1567 0000 00000000 		.space	16
 1567      00000000 
 1567      00000000 
 1567      00000000 
 1568              		.section	.bss.ec2x_fsm,"aw",%nobits
 1569              		.align	2
 1570              		.set	.LANCHOR8,. + 0
 1573              	ec2x_fsm:
 1574 0000 00000000 		.space	12
 1574      00000000 
 1574      00000000 
 1575              		.section	.bss.ec2x_txmsg_buff,"aw",%nobits
 1576              		.align	2
 1577              		.set	.LANCHOR6,. + 0
 1580              	ec2x_txmsg_buff:
 1581 0000 00000000 		.space	40
 1581      00000000 
 1581      00000000 
 1581      00000000 
 1581      00000000 
 1582              		.section	.bss.ec2x_txmsg_queue,"aw",%nobits
 1583              		.align	2
 1584              		.set	.LANCHOR1,. + 0
 1587              	ec2x_txmsg_queue:
 1588 0000 00000000 		.space	16
 1588      00000000 
 1588      00000000 
 1588      00000000 
 1589              		.section	.bss.event_buff,"aw",%nobits
 1590              		.align	2
 1591              		.set	.LANCHOR5,. + 0
 1594              	event_buff:
 1595 0000 00000000 		.space	10
 1595      00000000 
 1595      0000
 1596              		.section	.bss.tcpconnct_step,"aw",%nobits
 1599              	tcpconnct_step:
 1600 0000 00       		.space	1
 1601              		.section	.bss.timeout_cnt,"aw",%nobits
 1602              		.set	.LANCHOR0,. + 0
 1605              	timeout_cnt:
 1606 0000 00       		.space	1
 1607              		.section	.data.connectmsg_queue,"aw"
 1608              		.align	2
 1609              		.set	.LANCHOR9,. + 0
 1612              	connectmsg_queue:
 1613 0000 00000000 		.word	.LC7
 1614 0004 08000000 		.word	.LC8
 1615 0008 F401     		.short	500
 1616 000a 05       		.byte	5
 1617 000b 00       		.space	1
 1618 000c 0C000000 		.word	.LC9
 1619 0010 18000000 		.word	.LC10
 1620 0014 F401     		.short	500
 1621 0016 02       		.byte	2
 1622 0017 00       		.space	1
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 42


 1623 0018 28000000 		.word	.LC11
 1624 001c 34000000 		.word	.LC12
 1625 0020 F401     		.short	500
 1626 0022 02       		.byte	2
 1627 0023 00       		.space	1
 1628 0024 40000000 		.word	.LC13
 1629 0028 4C000000 		.word	.LC14
 1630 002c F401     		.short	500
 1631 002e 02       		.byte	2
 1632 002f 00       		.space	1
 1633 0030 58000000 		.word	.LC15
 1634 0034 08000000 		.word	.LC8
 1635 0038 F401     		.short	500
 1636 003a 03       		.byte	3
 1637 003b 00       		.space	1
 1638 003c 78000000 		.word	.LC16
 1639 0040 08000000 		.word	.LC8
 1640 0044 2800     		.short	40
 1641 0046 01       		.byte	1
 1642 0047 00       		.space	1
 1643 0048 88000000 		.word	.LC17
 1644 004c 08000000 		.word	.LC8
 1645 0050 9600     		.short	150
 1646 0052 01       		.byte	1
 1647 0053 00       		.space	1
 1648 0054 00000000 		.word	tcp_connect
 1649 0058 98000000 		.word	.LC18
 1650 005c 9600     		.short	150
 1651 005e 05       		.byte	5
 1652 005f 00       		.space	1
 1653              		.section	.data.ec2x_buff,"aw"
 1654              		.align	2
 1657              	ec2x_buff:
 1658 0000 FF00     		.ascii	"\377\000"
 1659 0002 00000000 		.space	298
 1659      00000000 
 1659      00000000 
 1659      00000000 
 1659      00000000 
 1660              		.section	.data.ec2x_dev,"aw"
 1661              		.align	2
 1662              		.set	.LANCHOR4,. + 0
 1665              	ec2x_dev:
 1666 0000 75617274 		.ascii	"uart1/ec200s\000"
 1666      312F6563 
 1666      32303073 
 1666      00
 1667 000d 0000     		.space	2
 1668 000f 00       		.space	1
 1669 0010 00000000 		.word	huart1
 1670 0014 00000048 		.word	1207959552
 1671 0018 0010     		.short	4096
 1672 001a 0000     		.space	2
 1673 001c 00000048 		.word	1207959552
 1674 0020 0001     		.short	256
 1675 0022 0000     		.space	2
 1676 0024 00000048 		.word	1207959552
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 43


 1677 0028 0008     		.short	2048
 1678 002a 0000     		.space	2
 1679 002c 00       		.byte	0
 1680 002d 000000   		.space	3
 1681 0030 00000000 		.word	ec2x_buff
 1682 0034 0000     		.short	0
 1683 0036 0000     		.short	0
 1684 0038 0000     		.short	0
 1685 003a 2C01     		.short	300
 1686              		.section	.data.ec2x_transtable,"aw"
 1687              		.align	2
 1688              		.set	.LANCHOR7,. + 0
 1691              	ec2x_transtable:
 1692 0000 00       		.byte	0
 1693 0001 01       		.byte	1
 1694 0002 00       		.byte	0
 1695 0003 00       		.space	1
 1696 0004 00000000 		.word	ec2x_reset
 1697 0008 00       		.byte	0
 1698 0009 02       		.byte	2
 1699 000a 01       		.byte	1
 1700 000b 00       		.space	1
 1701 000c 00000000 		.word	0
 1702 0010 01       		.byte	1
 1703 0011 03       		.byte	3
 1704 0012 02       		.byte	2
 1705 0013 00       		.space	1
 1706 0014 00000000 		.word	ec2x_queue_send
 1707 0018 02       		.byte	2
 1708 0019 02       		.byte	2
 1709 001a 01       		.byte	1
 1710 001b 00       		.space	1
 1711 001c 00000000 		.word	ec2x_reply_handler
 1712 0020 02       		.byte	2
 1713 0021 01       		.byte	1
 1714 0022 01       		.byte	1
 1715 0023 00       		.space	1
 1716 0024 00000000 		.word	ex2x_timeout_handler
 1717 0028 03       		.byte	3
 1718 0029 04       		.byte	4
 1719 002a 03       		.byte	3
 1720 002b 00       		.space	1
 1721 002c 00000000 		.word	0
 1722              		.section	.data.tcp_connect,"aw"
 1723              		.align	2
 1726              	tcp_connect:
 1727 0000 41542B51 		.ascii	"AT+QIOPEN=1,0,\"TCP\",\"115.236.153.170\",52894,0,2"
 1727      494F5045 
 1727      4E3D312C 
 1727      302C2254 
 1727      4350222C 
 1728 002f 00       		.ascii	"\000"
 1729              		.section	.rodata.shellCmdec2x_send,"a"
 1730              		.align	2
 1733              	shellCmdec2x_send:
 1734 0000 65633278 		.ascii	"ec2x_send\000"
 1734      5F73656E 
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 44


 1734      6400
 1735              		.section	.rodata.shellDescec2x_send,"a"
 1736              		.align	2
 1739              	shellDescec2x_send:
 1740 0000 65633278 		.ascii	"ec2x test\000"
 1740      20746573 
 1740      7400
 1741              		.section	shellCommand,"a"
 1744              	shellCommandec2x_send:
 1745 0000 00210000 		.4byte	8448
 1746 0004 00000000 		.4byte	shellCmdec2x_send
 1747 0008 00000000 		.4byte	EC2x_Test
 1748 000c 00000000 		.4byte	shellDescec2x_send
 1749              		.text
 1750              	.Letext0:
 1751              		.file 2 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\
 1752              		.file 3 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\
 1753              		.file 4 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l431xx.h"
 1754              		.file 5 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 1755              		.file 6 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_gpio.h"
 1756              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 1757              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_uart.h"
 1758              		.file 9 "FML/Inc/EC2x.h"
 1759              		.file 10 "ThirdParty/Letter-shell/Inc/shell.h"
 1760              		.file 11 "HAL/Inc/usart.h"
 1761              		.file 12 "ThirdParty/Letter-shell/Inc/shell_port.h"
 1762              		.file 13 "ThirdParty/FSM/fsm.h"
 1763              		.file 14 "HAL/Inc/queue.h"
 1764              		.file 15 "<built-in>"
 1765              		.file 16 "HAL/Inc/timer.h"
 1766              		.file 17 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 45


DEFINED SYMBOLS
                            *ABS*:00000000 EC2x.c
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:20     .text.ec2x_waitreply:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:25     .text.ec2x_waitreply:00000000 ec2x_waitreply
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:62     .text.ec2x_waitreply:00000020 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1094   .text.ec2x_replymatch:00000000 ec2x_replymatch
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:69     .rodata.ec2x_reset.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:73     .text.ec2x_reset:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:78     .text.ec2x_reset:00000000 ec2x_reset
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:104    .text.ec2x_reset:00000010 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:109    .text.ec2x_reply_handler:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:115    .text.ec2x_reply_handler:00000000 ec2x_reply_handler
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:163    .text.ec2x_reply_handler:0000002c $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:170    .text.ex2x_timeout_handler:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:176    .text.ex2x_timeout_handler:00000000 ex2x_timeout_handler
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:225    .text.ex2x_timeout_handler:00000030 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:232    .text.ec2x_io_init:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:238    .text.ec2x_io_init:00000000 ec2x_io_init
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:376    .text.ec2x_io_init:00000090 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:381    .text.ec2x_open:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:387    .text.ec2x_open:00000000 ec2x_open
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:488    .text.ec2x_open:00000064 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:501    .text.ec2x_write:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:507    .text.ec2x_write:00000000 ec2x_write
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:552    .text.ec2x_write:00000024 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:557    .text.ec2x_cmd_send:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:562    .text.ec2x_cmd_send:00000000 ec2x_cmd_send
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:591    .text.ec2x_queue_send:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:597    .text.ec2x_queue_send:00000000 ec2x_queue_send
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:656    .text.ec2x_queue_send:00000038 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:662    .text.ec2x_read:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:668    .text.ec2x_read:00000000 ec2x_read
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:832    .text.ec2x_read:000000a8 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:838    .rodata.ec2x_handler.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:842    .text.ec2x_handler:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:848    .text.ec2x_handler:00000000 ec2x_handler
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1033   .text.ec2x_handler:000000e0 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1041   .rodata.ec2x_timeout_handle.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1045   .text.ec2x_timeout_handle:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1051   .text.ec2x_timeout_handle:00000000 ec2x_timeout_handle
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1077   .text.ec2x_timeout_handle:00000014 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1084   .rodata.ec2x_replymatch.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1088   .text.ec2x_replymatch:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1199   .text.ec2x_replymatch:00000060 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1207   .rodata.ec2x_fms_proccess.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1214   .text.ec2x_fms_proccess:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1220   .text.ec2x_fms_proccess:00000000 ec2x_fms_proccess
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1292   .text.ec2x_fms_proccess:0000004c $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1301   .text.ec2x_tcp_connect:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1307   .text.ec2x_tcp_connect:00000000 ec2x_tcp_connect
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1363   .text.ec2x_tcp_connect:00000028 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1370   .rodata.EC2x_Test.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1374   .text.EC2x_Test:00000000 $t
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1380   .text.EC2x_Test:00000000 EC2x_Test
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1497   .text.EC2x_Test:00000074 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1744   shellCommand:00000000 shellCommandec2x_send
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1739   .rodata.shellDescec2x_send:00000000 shellDescec2x_send
ARM GAS  C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s 			page 46


C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1733   .rodata.shellCmdec2x_send:00000000 shellCmdec2x_send
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1665   .data.ec2x_dev:00000000 ec2x_dev
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1587   .bss.ec2x_txmsg_queue:00000000 ec2x_txmsg_queue
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1559   .bss.cur_msg:00000000 cur_msg
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1580   .bss.ec2x_txmsg_buff:00000000 ec2x_txmsg_buff
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1612   .data.connectmsg_queue:00000000 connectmsg_queue
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1511   .rodata.str1.4:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1599   .bss.tcpconnct_step:00000000 tcpconnct_step
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1726   .data.tcp_connect:00000000 tcp_connect
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1566   .bss.ec2x_event_queue:00000000 ec2x_event_queue
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1594   .bss.event_buff:00000000 event_buff
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1691   .data.ec2x_transtable:00000000 ec2x_transtable
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1573   .bss.ec2x_fsm:00000000 ec2x_fsm
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1657   .data.ec2x_buff:00000000 ec2x_buff
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1555   .bss.cur_msg:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1562   .bss.ec2x_event_queue:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1569   .bss.ec2x_fsm:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1576   .bss.ec2x_txmsg_buff:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1583   .bss.ec2x_txmsg_queue:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1590   .bss.event_buff:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1600   .bss.tcpconnct_step:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1605   .bss.timeout_cnt:00000000 timeout_cnt
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1606   .bss.timeout_cnt:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1608   .data.connectmsg_queue:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1654   .data.ec2x_buff:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1661   .data.ec2x_dev:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1687   .data.ec2x_transtable:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1723   .data.tcp_connect:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1730   .rodata.shellCmdec2x_send:00000000 $d
C:\Users\CL\AppData\Local\Temp\ccOnvJnR.s:1736   .rodata.shellDescec2x_send:00000000 $d

UNDEFINED SYMBOLS
timer_insert
queue_is_empty
queue_pop
queue_insert
HAL_GPIO_Init
HAL_GPIO_WritePin
HAL_Delay
strcmp
queue_init
FSM_Regist
HAL_UART_Transmit_IT
queue_pull
shellPrint
shell
memset
strstr
FSM_EventHandle
strlen
malloc
memcpy
free
huart1
