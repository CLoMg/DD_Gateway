ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"EC2x.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.global	ec2x_buff
  20              		.section	.data.ec2x_buff,"aw"
  21              		.align	2
  24              	ec2x_buff:
  25 0000 FF00     		.ascii	"\377\000"
  26 0002 00000000 		.space	198
  26      00000000 
  26      00000000 
  26      00000000 
  26      00000000 
  27              		.global	tcp_connect
  28              		.section	.data.tcp_connect,"aw"
  29              		.align	2
  32              	tcp_connect:
  33 0000 41542B51 		.ascii	"AT+QIOPEN=1,0,\"TCP\",\"115.236.153.170\",52894,0,2"
  33      494F5045 
  33      4E3D312C 
  33      302C2254 
  33      4350222C 
  34 002f 0D0A00   		.ascii	"\015\012\000"
  35              		.global	tcpconnct_step
  36              		.section	.bss.tcpconnct_step,"aw",%nobits
  39              	tcpconnct_step:
  40 0000 00       		.space	1
  41              		.global	connectmsg_queue
  42              		.section	.rodata
  43              		.align	2
  44              	.LC0:
  45 0000 41540D0A 		.ascii	"AT\015\012\000"
  45      00
  46 0005 000000   		.align	2
  47              	.LC1:
  48 0008 4F4B00   		.ascii	"OK\000"
  49 000b 00       		.align	2
  50              	.LC2:
  51 000c 41542B43 		.ascii	"AT+CPIN?\015\012\000"
  51      50494E3F 
  51      0D0A00
  52 0017 00       		.align	2
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 2


  53              	.LC3:
  54 0018 52454144 		.ascii	"READY\000"
  54      5900
  55 001e 0000     		.align	2
  56              	.LC4:
  57 0020 41542B43 		.ascii	"AT+CREG?\015\012\000"
  57      5245473F 
  57      0D0A00
  58 002b 00       		.align	2
  59              	.LC5:
  60 002c 2B435245 		.ascii	"+CREG: 0,1\000"
  60      473A2030 
  60      2C3100
  61 0037 00       		.align	2
  62              	.LC6:
  63 0038 41542B43 		.ascii	"AT+CGREG?\015\012\000"
  63      47524547 
  63      3F0D0A00 
  64              		.align	2
  65              	.LC7:
  66 0044 2B434752 		.ascii	"+CGREG: 0,1\000"
  66      45473A20 
  66      302C3100 
  67              		.align	2
  68              	.LC8:
  69 0050 41542B51 		.ascii	"AT+QICSGP=1,1,\"CMNET\",\"\",\"\",1\015\012\000"
  69      49435347 
  69      503D312C 
  69      312C2243 
  69      4D4E4554 
  70              		.align	2
  71              	.LC9:
  72 0070 41542B51 		.ascii	"AT+QIDEACT=1\015\012\000"
  72      49444541 
  72      43543D31 
  72      0D0A00
  73 007f 00       		.align	2
  74              	.LC10:
  75 0080 41542B51 		.ascii	"AT+QIACT=1\015\012\000"
  75      49414354 
  75      3D310D0A 
  75      00
  76 008d 000000   		.align	2
  77              	.LC11:
  78 0090 434F4E4E 		.ascii	"CONNECT\000"
  78      45435400 
  79              		.section	.data.connectmsg_queue,"aw"
  80              		.align	2
  83              	connectmsg_queue:
  84 0000 00000000 		.word	.LC0
  85 0004 08000000 		.word	.LC1
  86 0008 6400     		.short	100
  87 000a 05       		.byte	5
  88 000b 00       		.space	1
  89 000c 0C000000 		.word	.LC2
  90 0010 18000000 		.word	.LC3
  91 0014 6400     		.short	100
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 3


  92 0016 05       		.byte	5
  93 0017 00       		.space	1
  94 0018 20000000 		.word	.LC4
  95 001c 2C000000 		.word	.LC5
  96 0020 6400     		.short	100
  97 0022 05       		.byte	5
  98 0023 00       		.space	1
  99 0024 38000000 		.word	.LC6
 100 0028 44000000 		.word	.LC7
 101 002c 6400     		.short	100
 102 002e 05       		.byte	5
 103 002f 00       		.space	1
 104 0030 50000000 		.word	.LC8
 105 0034 08000000 		.word	.LC1
 106 0038 C800     		.short	200
 107 003a 05       		.byte	5
 108 003b 00       		.space	1
 109 003c 70000000 		.word	.LC9
 110 0040 08000000 		.word	.LC1
 111 0044 6400     		.short	100
 112 0046 05       		.byte	5
 113 0047 00       		.space	1
 114 0048 80000000 		.word	.LC10
 115 004c 08000000 		.word	.LC1
 116 0050 6400     		.short	100
 117 0052 05       		.byte	5
 118 0053 00       		.space	1
 119 0054 00000000 		.word	tcp_connect
 120 0058 90000000 		.word	.LC11
 121 005c 6400     		.short	100
 122 005e 05       		.byte	5
 123 005f 00       		.space	1
 124              		.global	ec2x_dev
 125              		.section	.data.ec2x_dev,"aw"
 126              		.align	2
 129              	ec2x_dev:
 130 0000 75617274 		.ascii	"uart1/ec200s\000"
 130      312F6563 
 130      32303073 
 130      00
 131 000d 0000     		.space	2
 132 000f 00       		.space	1
 133 0010 00000000 		.word	huart1
 134 0014 00000048 		.word	1207959552
 135 0018 0010     		.short	4096
 136 001a 0000     		.space	2
 137 001c 00000048 		.word	1207959552
 138 0020 0001     		.short	256
 139 0022 0000     		.space	2
 140 0024 00000048 		.word	1207959552
 141 0028 0008     		.short	2048
 142 002a 0000     		.space	2
 143 002c 00       		.byte	0
 144 002d 000000   		.space	3
 145 0030 00000000 		.word	ec2x_buff
 146 0034 0000     		.short	0
 147 0036 0000     		.short	0
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 4


 148 0038 0000     		.short	0
 149 003a C800     		.short	200
 150              		.section	.text.ec2x_io_init,"ax",%progbits
 151              		.align	1
 152              		.global	ec2x_io_init
 153              		.syntax unified
 154              		.thumb
 155              		.thumb_func
 157              	ec2x_io_init:
 158              	.LFB291:
 159              		.file 1 "FML/Src/EC2x.c"
   1:FML/Src/EC2x.c **** /**
   2:FML/Src/EC2x.c ****  ******************************************************************************
   3:FML/Src/EC2x.c **** *
   4:FML/Src/EC2x.c **** * @file   
   5:FML/Src/EC2x.c **** *
   6:FML/Src/EC2x.c **** * @brief   
   7:FML/Src/EC2x.c **** *
   8:FML/Src/EC2x.c **** * @attention
   9:FML/Src/EC2x.c **** *
  10:FML/Src/EC2x.c **** *Copyright (c) 2023 STMicroelectronics.
  11:FML/Src/EC2x.c **** *
  12:FML/Src/EC2x.c **** *All rights reserved.
  13:FML/Src/EC2x.c ****  ******************************************************************************
  14:FML/Src/EC2x.c **** */
  15:FML/Src/EC2x.c **** 
  16:FML/Src/EC2x.c **** 
  17:FML/Src/EC2x.c **** /*----------------------------------include-----------------------------------*/
  18:FML/Src/EC2x.c **** #include "EC2x.h"
  19:FML/Src/EC2x.c **** #include "usart.h"
  20:FML/Src/EC2x.c **** #include "timer.h"
  21:FML/Src/EC2x.c **** #include "shell_port.h"
  22:FML/Src/EC2x.c **** #include <stdio.h>
  23:FML/Src/EC2x.c **** #include <string.h>
  24:FML/Src/EC2x.c **** #include <stdlib.h>
  25:FML/Src/EC2x.c **** #include "fsm.h"
  26:FML/Src/EC2x.c **** #include "queue.h"
  27:FML/Src/EC2x.c **** /*-----------------------------------macro------------------------------------*/
  28:FML/Src/EC2x.c **** #define BUFF_LEN 200
  29:FML/Src/EC2x.c **** /*----------------------------------typedef-----------------------------------*/
  30:FML/Src/EC2x.c **** 
  31:FML/Src/EC2x.c **** 
  32:FML/Src/EC2x.c **** /*----------------------------------variable----------------------------------*/
  33:FML/Src/EC2x.c **** uint8_t ec2x_buff[BUFF_LEN]={0xff,};
  34:FML/Src/EC2x.c **** 
  35:FML/Src/EC2x.c **** //定义tcp连接字符串
  36:FML/Src/EC2x.c **** uint8_t tcp_connect[]="AT+QIOPEN=1,0,\"TCP\",\"115.236.153.170\",52894,0,2\r\n";
  37:FML/Src/EC2x.c **** 
  38:FML/Src/EC2x.c **** //定义tcp连接指令队列
  39:FML/Src/EC2x.c **** uint8_t tcpconnct_step = 0;
  40:FML/Src/EC2x.c **** ATMsg_TypeDef connectmsg_queue[] = {
  41:FML/Src/EC2x.c ****     {"AT\r\n","OK",100,5},
  42:FML/Src/EC2x.c ****     {"AT+CPIN?\r\n","READY",100,5},
  43:FML/Src/EC2x.c ****     {"AT+CREG?\r\n","+CREG: 0,1", 100, 5},
  44:FML/Src/EC2x.c ****     {"AT+CGREG?\r\n","+CGREG: 0,1", 100, 5},
  45:FML/Src/EC2x.c ****     {"AT+QICSGP=1,1,\"CMNET\",\"\",\"\",1\r\n","OK", 200, 5},
  46:FML/Src/EC2x.c ****     {"AT+QIDEACT=1\r\n", "OK", 100, 5},
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 5


  47:FML/Src/EC2x.c ****     {"AT+QIACT=1\r\n", "OK", 100, 5},
  48:FML/Src/EC2x.c ****     {tcp_connect, "CONNECT", 100, 5},
  49:FML/Src/EC2x.c **** };
  50:FML/Src/EC2x.c **** 
  51:FML/Src/EC2x.c **** 
  52:FML/Src/EC2x.c **** /*----------------------------------typedef-----------------------------------*/
  53:FML/Src/EC2x.c **** 
  54:FML/Src/EC2x.c **** EC2x_HandleTypeDef ec2x_dev[]=
  55:FML/Src/EC2x.c **** {
  56:FML/Src/EC2x.c ****     {
  57:FML/Src/EC2x.c ****         "uart1/ec200s",
  58:FML/Src/EC2x.c ****         &huart1,
  59:FML/Src/EC2x.c ****         GPIOA,
  60:FML/Src/EC2x.c ****         GPIO_PIN_12,
  61:FML/Src/EC2x.c ****         GPIOA,
  62:FML/Src/EC2x.c ****         GPIO_PIN_8,
  63:FML/Src/EC2x.c ****         GPIOA,
  64:FML/Src/EC2x.c ****         GPIO_PIN_11,
  65:FML/Src/EC2x.c ****         {
  66:FML/Src/EC2x.c ****             0,
  67:FML/Src/EC2x.c ****            ec2x_buff,
  68:FML/Src/EC2x.c ****             0,
  69:FML/Src/EC2x.c ****             0,
  70:FML/Src/EC2x.c ****             0,
  71:FML/Src/EC2x.c ****             BUFF_LEN 
  72:FML/Src/EC2x.c ****         }
  73:FML/Src/EC2x.c ****     }
  74:FML/Src/EC2x.c **** };
  75:FML/Src/EC2x.c **** /*-------------------------------------os-------------------------------------*/
  76:FML/Src/EC2x.c **** 
  77:FML/Src/EC2x.c **** /*----------------------------------function----------------------------------*/
  78:FML/Src/EC2x.c **** 
  79:FML/Src/EC2x.c **** /**
  80:FML/Src/EC2x.c ****  * @brief 设备初始化函数
  81:FML/Src/EC2x.c ****  * 
  82:FML/Src/EC2x.c ****  */
  83:FML/Src/EC2x.c **** void ec2x_io_init(EC2x_HandleTypeDef *device)
  84:FML/Src/EC2x.c **** {
 160              		.loc 1 84 1
 161              		.cfi_startproc
 162              		@ args = 0, pretend = 0, frame = 32
 163              		@ frame_needed = 1, uses_anonymous_args = 0
 164 0000 80B5     		push	{r7, lr}
 165              	.LCFI0:
 166              		.cfi_def_cfa_offset 8
 167              		.cfi_offset 7, -8
 168              		.cfi_offset 14, -4
 169 0002 88B0     		sub	sp, sp, #32
 170              	.LCFI1:
 171              		.cfi_def_cfa_offset 40
 172 0004 00AF     		add	r7, sp, #0
 173              	.LCFI2:
 174              		.cfi_def_cfa_register 7
 175 0006 7860     		str	r0, [r7, #4]
  85:FML/Src/EC2x.c ****      GPIO_InitTypeDef GPIO_InitStruct = {0};
 176              		.loc 1 85 23
 177 0008 07F10C03 		add	r3, r7, #12
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 6


 178 000c 0022     		movs	r2, #0
 179 000e 1A60     		str	r2, [r3]
 180 0010 5A60     		str	r2, [r3, #4]
 181 0012 9A60     		str	r2, [r3, #8]
 182 0014 DA60     		str	r2, [r3, #12]
 183 0016 1A61     		str	r2, [r3, #16]
 184              	.LBB2:
  86:FML/Src/EC2x.c ****     
  87:FML/Src/EC2x.c ****     // 使能UART和GPIO时钟
  88:FML/Src/EC2x.c ****     //__HAL_RCC_UARTX_CLK_ENABLE(); // 替换为实际的UART时钟
  89:FML/Src/EC2x.c ****     __HAL_RCC_GPIOA_CLK_ENABLE(); // 替换为实际的GPIO时钟
 185              		.loc 1 89 5
 186 0018 334B     		ldr	r3, .L2
 187 001a DB6C     		ldr	r3, [r3, #76]
 188 001c 324A     		ldr	r2, .L2
 189 001e 43F00103 		orr	r3, r3, #1
 190 0022 D364     		str	r3, [r2, #76]
 191 0024 304B     		ldr	r3, .L2
 192 0026 DB6C     		ldr	r3, [r3, #76]
 193 0028 03F00103 		and	r3, r3, #1
 194 002c BB60     		str	r3, [r7, #8]
 195 002e BB68     		ldr	r3, [r7, #8]
 196              	.LBE2:
  90:FML/Src/EC2x.c ****     
  91:FML/Src/EC2x.c ****     // 配置GPIO引脚
  92:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->reset_pin;
 197              		.loc 1 92 33
 198 0030 7B68     		ldr	r3, [r7, #4]
 199 0032 1B8C     		ldrh	r3, [r3, #32]
 200              		.loc 1 92 25
 201 0034 FB60     		str	r3, [r7, #12]
  93:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 202              		.loc 1 93 26
 203 0036 0123     		movs	r3, #1
 204 0038 3B61     		str	r3, [r7, #16]
  94:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 205              		.loc 1 94 26
 206 003a 0023     		movs	r3, #0
 207 003c 7B61     		str	r3, [r7, #20]
  95:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 208              		.loc 1 95 27
 209 003e 0023     		movs	r3, #0
 210 0040 BB61     		str	r3, [r7, #24]
  96:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->reset_port, &GPIO_InitStruct);
 211              		.loc 1 96 5
 212 0042 7B68     		ldr	r3, [r7, #4]
 213 0044 DB69     		ldr	r3, [r3, #28]
 214 0046 07F10C02 		add	r2, r7, #12
 215 004a 1146     		mov	r1, r2
 216 004c 1846     		mov	r0, r3
 217 004e FFF7FEFF 		bl	HAL_GPIO_Init
  97:FML/Src/EC2x.c **** 
  98:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->wake_pin;
 218              		.loc 1 98 33
 219 0052 7B68     		ldr	r3, [r7, #4]
 220 0054 1B8D     		ldrh	r3, [r3, #40]
 221              		.loc 1 98 25
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 7


 222 0056 FB60     		str	r3, [r7, #12]
  99:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 223              		.loc 1 99 26
 224 0058 0123     		movs	r3, #1
 225 005a 3B61     		str	r3, [r7, #16]
 100:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 226              		.loc 1 100 26
 227 005c 0023     		movs	r3, #0
 228 005e 7B61     		str	r3, [r7, #20]
 101:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 229              		.loc 1 101 27
 230 0060 0023     		movs	r3, #0
 231 0062 BB61     		str	r3, [r7, #24]
 102:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->wake_port, &GPIO_InitStruct);
 232              		.loc 1 102 5
 233 0064 7B68     		ldr	r3, [r7, #4]
 234 0066 5B6A     		ldr	r3, [r3, #36]
 235 0068 07F10C02 		add	r2, r7, #12
 236 006c 1146     		mov	r1, r2
 237 006e 1846     		mov	r0, r3
 238 0070 FFF7FEFF 		bl	HAL_GPIO_Init
 103:FML/Src/EC2x.c **** 
 104:FML/Src/EC2x.c ****     GPIO_InitStruct.Pin = device->pwren_pin;
 239              		.loc 1 104 33
 240 0074 7B68     		ldr	r3, [r7, #4]
 241 0076 1B8B     		ldrh	r3, [r3, #24]
 242              		.loc 1 104 25
 243 0078 FB60     		str	r3, [r7, #12]
 105:FML/Src/EC2x.c ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 244              		.loc 1 105 26
 245 007a 0123     		movs	r3, #1
 246 007c 3B61     		str	r3, [r7, #16]
 106:FML/Src/EC2x.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 247              		.loc 1 106 26
 248 007e 0023     		movs	r3, #0
 249 0080 7B61     		str	r3, [r7, #20]
 107:FML/Src/EC2x.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 250              		.loc 1 107 27
 251 0082 0023     		movs	r3, #0
 252 0084 BB61     		str	r3, [r7, #24]
 108:FML/Src/EC2x.c ****     HAL_GPIO_Init(device->pwren_port, &GPIO_InitStruct);
 253              		.loc 1 108 5
 254 0086 7B68     		ldr	r3, [r7, #4]
 255 0088 5B69     		ldr	r3, [r3, #20]
 256 008a 07F10C02 		add	r2, r7, #12
 257 008e 1146     		mov	r1, r2
 258 0090 1846     		mov	r0, r3
 259 0092 FFF7FEFF 		bl	HAL_GPIO_Init
 109:FML/Src/EC2x.c ****     
 110:FML/Src/EC2x.c ****     
 111:FML/Src/EC2x.c ****     // 初始化复位引脚为高电平
 112:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->reset_port, device->reset_pin, GPIO_PIN_SET);
 260              		.loc 1 112 5
 261 0096 7B68     		ldr	r3, [r7, #4]
 262 0098 D869     		ldr	r0, [r3, #28]
 263 009a 7B68     		ldr	r3, [r7, #4]
 264 009c 1B8C     		ldrh	r3, [r3, #32]
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 8


 265 009e 0122     		movs	r2, #1
 266 00a0 1946     		mov	r1, r3
 267 00a2 FFF7FEFF 		bl	HAL_GPIO_WritePin
 113:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->wake_port, device->wake_pin, GPIO_PIN_SET);
 268              		.loc 1 113 5
 269 00a6 7B68     		ldr	r3, [r7, #4]
 270 00a8 586A     		ldr	r0, [r3, #36]
 271 00aa 7B68     		ldr	r3, [r7, #4]
 272 00ac 1B8D     		ldrh	r3, [r3, #40]
 273 00ae 0122     		movs	r2, #1
 274 00b0 1946     		mov	r1, r3
 275 00b2 FFF7FEFF 		bl	HAL_GPIO_WritePin
 114:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_SET);
 276              		.loc 1 114 5
 277 00b6 7B68     		ldr	r3, [r7, #4]
 278 00b8 5869     		ldr	r0, [r3, #20]
 279 00ba 7B68     		ldr	r3, [r7, #4]
 280 00bc 1B8B     		ldrh	r3, [r3, #24]
 281 00be 0122     		movs	r2, #1
 282 00c0 1946     		mov	r1, r3
 283 00c2 FFF7FEFF 		bl	HAL_GPIO_WritePin
 115:FML/Src/EC2x.c ****     Delay_ms(1000);
 284              		.loc 1 115 5
 285 00c6 4FF47A70 		mov	r0, #1000
 286 00ca FFF7FEFF 		bl	Delay_ms
 116:FML/Src/EC2x.c ****     HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_RESET);
 287              		.loc 1 116 5
 288 00ce 7B68     		ldr	r3, [r7, #4]
 289 00d0 5869     		ldr	r0, [r3, #20]
 290 00d2 7B68     		ldr	r3, [r7, #4]
 291 00d4 1B8B     		ldrh	r3, [r3, #24]
 292 00d6 0022     		movs	r2, #0
 293 00d8 1946     		mov	r1, r3
 294 00da FFF7FEFF 		bl	HAL_GPIO_WritePin
 117:FML/Src/EC2x.c **** }
 295              		.loc 1 117 1
 296 00de 00BF     		nop
 297 00e0 2037     		adds	r7, r7, #32
 298              	.LCFI3:
 299              		.cfi_def_cfa_offset 8
 300 00e2 BD46     		mov	sp, r7
 301              	.LCFI4:
 302              		.cfi_def_cfa_register 13
 303              		@ sp needed
 304 00e4 80BD     		pop	{r7, pc}
 305              	.L3:
 306 00e6 00BF     		.align	2
 307              	.L2:
 308 00e8 00100240 		.word	1073876992
 309              		.cfi_endproc
 310              	.LFE291:
 312              		.section	.rodata
 313              		.align	2
 314              	.LC12:
 315 0098 5244590D 		.ascii	"RDY\015\012\000"
 315      0A00
 316              		.section	.text.ec2x_reset,"ax",%progbits
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 9


 317              		.align	1
 318              		.syntax unified
 319              		.thumb
 320              		.thumb_func
 322              	ec2x_reset:
 323              	.LFB292:
 118:FML/Src/EC2x.c **** /**
 119:FML/Src/EC2x.c ****  * @brief 通过POWEREN引脚，对模块进行掉电复位
 120:FML/Src/EC2x.c ****  * 
 121:FML/Src/EC2x.c ****  * @param fd 
 122:FML/Src/EC2x.c ****  * @return int 
 123:FML/Src/EC2x.c ****  */
 124:FML/Src/EC2x.c **** int ec2x_reset(int fd){
 324              		.loc 1 124 23
 325              		.cfi_startproc
 326              		@ args = 0, pretend = 0, frame = 16
 327              		@ frame_needed = 1, uses_anonymous_args = 0
 328 0000 80B5     		push	{r7, lr}
 329              	.LCFI5:
 330              		.cfi_def_cfa_offset 8
 331              		.cfi_offset 7, -8
 332              		.cfi_offset 14, -4
 333 0002 86B0     		sub	sp, sp, #24
 334              	.LCFI6:
 335              		.cfi_def_cfa_offset 32
 336 0004 02AF     		add	r7, sp, #8
 337              	.LCFI7:
 338              		.cfi_def_cfa 7, 24
 339 0006 7860     		str	r0, [r7, #4]
 125:FML/Src/EC2x.c ****     fd = 0;
 340              		.loc 1 125 8
 341 0008 0023     		movs	r3, #0
 342 000a 7B60     		str	r3, [r7, #4]
 126:FML/Src/EC2x.c ****     int err_code = 0;
 343              		.loc 1 126 9
 344 000c 0023     		movs	r3, #0
 345 000e FB60     		str	r3, [r7, #12]
 127:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 346              		.loc 1 127 7
 347 0010 7B68     		ldr	r3, [r7, #4]
 348 0012 002B     		cmp	r3, #0
 349 0014 04D0     		beq	.L5
 128:FML/Src/EC2x.c ****         return (err_code = -1);
 350              		.loc 1 128 26
 351 0016 4FF0FF33 		mov	r3, #-1
 352 001a FB60     		str	r3, [r7, #12]
 353 001c FB68     		ldr	r3, [r7, #12]
 354 001e 25E0     		b	.L6
 355              	.L5:
 356              	.LBB3:
 129:FML/Src/EC2x.c ****     else{
 130:FML/Src/EC2x.c ****         EC2x_HandleTypeDef *device = &ec2x_dev[fd];
 357              		.loc 1 130 29
 358 0020 7A68     		ldr	r2, [r7, #4]
 359 0022 1346     		mov	r3, r2
 360 0024 1B01     		lsls	r3, r3, #4
 361 0026 9B1A     		subs	r3, r3, r2
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 10


 362 0028 9B00     		lsls	r3, r3, #2
 363 002a 124A     		ldr	r2, .L7
 364 002c 1344     		add	r3, r3, r2
 365 002e BB60     		str	r3, [r7, #8]
 131:FML/Src/EC2x.c ****         HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_SET);
 366              		.loc 1 131 9
 367 0030 BB68     		ldr	r3, [r7, #8]
 368 0032 5869     		ldr	r0, [r3, #20]
 369 0034 BB68     		ldr	r3, [r7, #8]
 370 0036 1B8B     		ldrh	r3, [r3, #24]
 371 0038 0122     		movs	r2, #1
 372 003a 1946     		mov	r1, r3
 373 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 132:FML/Src/EC2x.c ****         Delay_ms(500);
 374              		.loc 1 132 9
 375 0040 4FF4FA70 		mov	r0, #500
 376 0044 FFF7FEFF 		bl	Delay_ms
 133:FML/Src/EC2x.c ****         HAL_GPIO_WritePin(device->pwren_port, device->pwren_pin, GPIO_PIN_RESET);
 377              		.loc 1 133 9
 378 0048 BB68     		ldr	r3, [r7, #8]
 379 004a 5869     		ldr	r0, [r3, #20]
 380 004c BB68     		ldr	r3, [r7, #8]
 381 004e 1B8B     		ldrh	r3, [r3, #24]
 382 0050 0022     		movs	r2, #0
 383 0052 1946     		mov	r1, r3
 384 0054 FFF7FEFF 		bl	HAL_GPIO_WritePin
 385              	.LBE3:
 134:FML/Src/EC2x.c ****     }
 135:FML/Src/EC2x.c ****     return(ec2x_cmd_send(fd,NULL,0,"RDY\r\n",20000));
 386              		.loc 1 135 12
 387 0058 44F62063 		movw	r3, #20000
 388 005c 0093     		str	r3, [sp]
 389 005e 064B     		ldr	r3, .L7+4
 390 0060 0022     		movs	r2, #0
 391 0062 0021     		movs	r1, #0
 392 0064 7868     		ldr	r0, [r7, #4]
 393 0066 FFF7FEFF 		bl	ec2x_cmd_send
 394 006a 0346     		mov	r3, r0
 395              	.L6:
 136:FML/Src/EC2x.c **** }
 396              		.loc 1 136 1
 397 006c 1846     		mov	r0, r3
 398 006e 1037     		adds	r7, r7, #16
 399              	.LCFI8:
 400              		.cfi_def_cfa_offset 8
 401 0070 BD46     		mov	sp, r7
 402              	.LCFI9:
 403              		.cfi_def_cfa_register 13
 404              		@ sp needed
 405 0072 80BD     		pop	{r7, pc}
 406              	.L8:
 407              		.align	2
 408              	.L7:
 409 0074 00000000 		.word	ec2x_dev
 410 0078 98000000 		.word	.LC12
 411              		.cfi_endproc
 412              	.LFE292:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 11


 414              		.section	.rodata
 415 009e 0000     		.align	2
 416              	.LC13:
 417 00a0 65633278 		.ascii	"ec2x initial ok\015\012\000"
 417      20696E69 
 417      7469616C 
 417      206F6B0D 
 417      0A00
 418 00b2 0000     		.align	2
 419              	.LC14:
 420 00b4 65633278 		.ascii	"ec2x initial not ok\015\012\000"
 420      20696E69 
 420      7469616C 
 420      206E6F74 
 420      206F6B0D 
 421              		.section	.text.ec2x_open,"ax",%progbits
 422              		.align	1
 423              		.global	ec2x_open
 424              		.syntax unified
 425              		.thumb
 426              		.thumb_func
 428              	ec2x_open:
 429              	.LFB293:
 137:FML/Src/EC2x.c **** 
 138:FML/Src/EC2x.c **** /**
 139:FML/Src/EC2x.c ****  * @brief 设备文件open函数
 140:FML/Src/EC2x.c ****  * 
 141:FML/Src/EC2x.c ****  * @param dev_name 
 142:FML/Src/EC2x.c ****  * @return int 
 143:FML/Src/EC2x.c ****  *         返回设备文件索引，未查找到则返回-1
 144:FML/Src/EC2x.c ****  */
 145:FML/Src/EC2x.c **** int ec2x_open(char *dev_name)
 146:FML/Src/EC2x.c **** {
 430              		.loc 1 146 1
 431              		.cfi_startproc
 432              		@ args = 0, pretend = 0, frame = 16
 433              		@ frame_needed = 1, uses_anonymous_args = 0
 434 0000 80B5     		push	{r7, lr}
 435              	.LCFI10:
 436              		.cfi_def_cfa_offset 8
 437              		.cfi_offset 7, -8
 438              		.cfi_offset 14, -4
 439 0002 84B0     		sub	sp, sp, #16
 440              	.LCFI11:
 441              		.cfi_def_cfa_offset 24
 442 0004 00AF     		add	r7, sp, #0
 443              	.LCFI12:
 444              		.cfi_def_cfa_register 7
 445 0006 7860     		str	r0, [r7, #4]
 147:FML/Src/EC2x.c ****     uint8_t i = 0;
 446              		.loc 1 147 13
 447 0008 0023     		movs	r3, #0
 448 000a FB73     		strb	r3, [r7, #15]
 148:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 449              		.loc 1 148 11
 450 000c 0023     		movs	r3, #0
 451 000e FB73     		strb	r3, [r7, #15]
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 12


 452              		.loc 1 148 5
 453 0010 2CE0     		b	.L10
 454              	.L15:
 149:FML/Src/EC2x.c ****     {
 150:FML/Src/EC2x.c ****         if(strcmp(dev_name,ec2x_dev[i].dev_name) == 0)
 455              		.loc 1 150 39
 456 0012 FA7B     		ldrb	r2, [r7, #15]	@ zero_extendqisi2
 457 0014 1346     		mov	r3, r2
 458 0016 1B01     		lsls	r3, r3, #4
 459 0018 9B1A     		subs	r3, r3, r2
 460 001a 9B00     		lsls	r3, r3, #2
 461 001c 184A     		ldr	r2, .L16
 462 001e 1344     		add	r3, r3, r2
 463              		.loc 1 150 12
 464 0020 1946     		mov	r1, r3
 465 0022 7868     		ldr	r0, [r7, #4]
 466 0024 FFF7FEFF 		bl	strcmp
 467 0028 0346     		mov	r3, r0
 468              		.loc 1 150 11
 469 002a 002B     		cmp	r3, #0
 470 002c 1BD1     		bne	.L11
 151:FML/Src/EC2x.c ****         {
 152:FML/Src/EC2x.c ****             ec2x_io_init(&ec2x_dev[i]);
 471              		.loc 1 152 35
 472 002e FA7B     		ldrb	r2, [r7, #15]	@ zero_extendqisi2
 473              		.loc 1 152 13
 474 0030 1346     		mov	r3, r2
 475 0032 1B01     		lsls	r3, r3, #4
 476 0034 9B1A     		subs	r3, r3, r2
 477 0036 9B00     		lsls	r3, r3, #2
 478 0038 114A     		ldr	r2, .L16
 479 003a 1344     		add	r3, r3, r2
 480 003c 1846     		mov	r0, r3
 481 003e FFF7FEFF 		bl	ec2x_io_init
 153:FML/Src/EC2x.c ****             if(ec2x_reset(i))
 482              		.loc 1 153 16
 483 0042 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 484 0044 1846     		mov	r0, r3
 485 0046 FFF7FEFF 		bl	ec2x_reset
 486 004a 0346     		mov	r3, r0
 487              		.loc 1 153 15
 488 004c 002B     		cmp	r3, #0
 489 004e 04D0     		beq	.L12
 154:FML/Src/EC2x.c ****                 shellPrint(&shell,"ec2x initial ok\r\n");
 490              		.loc 1 154 17
 491 0050 0C49     		ldr	r1, .L16+4
 492 0052 0D48     		ldr	r0, .L16+8
 493 0054 FFF7FEFF 		bl	shellPrint
 494 0058 03E0     		b	.L13
 495              	.L12:
 155:FML/Src/EC2x.c ****             else
 156:FML/Src/EC2x.c ****                 shellPrint(&shell,"ec2x initial not ok\r\n");
 496              		.loc 1 156 17
 497 005a 0C49     		ldr	r1, .L16+12
 498 005c 0A48     		ldr	r0, .L16+8
 499 005e FFF7FEFF 		bl	shellPrint
 500              	.L13:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 13


 157:FML/Src/EC2x.c ****             return i;
 501              		.loc 1 157 20
 502 0062 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 503 0064 07E0     		b	.L14
 504              	.L11:
 148:FML/Src/EC2x.c ****     {
 505              		.loc 1 148 65 discriminator 2
 506 0066 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 507 0068 0133     		adds	r3, r3, #1
 508 006a FB73     		strb	r3, [r7, #15]
 509              	.L10:
 148:FML/Src/EC2x.c ****     {
 510              		.loc 1 148 5 discriminator 1
 511 006c FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 512 006e 002B     		cmp	r3, #0
 513 0070 CFD0     		beq	.L15
 158:FML/Src/EC2x.c ****         }
 159:FML/Src/EC2x.c ****     }
 160:FML/Src/EC2x.c ****     return -1;
 514              		.loc 1 160 12
 515 0072 4FF0FF33 		mov	r3, #-1
 516              	.L14:
 161:FML/Src/EC2x.c **** };
 517              		.loc 1 161 1
 518 0076 1846     		mov	r0, r3
 519 0078 1037     		adds	r7, r7, #16
 520              	.LCFI13:
 521              		.cfi_def_cfa_offset 8
 522 007a BD46     		mov	sp, r7
 523              	.LCFI14:
 524              		.cfi_def_cfa_register 13
 525              		@ sp needed
 526 007c 80BD     		pop	{r7, pc}
 527              	.L17:
 528 007e 00BF     		.align	2
 529              	.L16:
 530 0080 00000000 		.word	ec2x_dev
 531 0084 A0000000 		.word	.LC13
 532 0088 00000000 		.word	shell
 533 008c B4000000 		.word	.LC14
 534              		.cfi_endproc
 535              	.LFE293:
 537              		.section	.text.ec2x_write,"ax",%progbits
 538              		.align	1
 539              		.global	ec2x_write
 540              		.syntax unified
 541              		.thumb
 542              		.thumb_func
 544              	ec2x_write:
 545              	.LFB294:
 162:FML/Src/EC2x.c **** 
 163:FML/Src/EC2x.c **** /**
 164:FML/Src/EC2x.c ****  * @brief 设备文件close函数
 165:FML/Src/EC2x.c ****  * 
 166:FML/Src/EC2x.c ****  * @param fd 
 167:FML/Src/EC2x.c ****  * @return int 
 168:FML/Src/EC2x.c ****  */
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 14


 169:FML/Src/EC2x.c **** int ec2x_close(int fd);
 170:FML/Src/EC2x.c **** 
 171:FML/Src/EC2x.c **** /**
 172:FML/Src/EC2x.c ****  * @brief 设备文件写入函数
 173:FML/Src/EC2x.c ****  * 
 174:FML/Src/EC2x.c ****  * @param fd 
 175:FML/Src/EC2x.c ****  * @param tx_buff 
 176:FML/Src/EC2x.c ****  * @param len 
 177:FML/Src/EC2x.c ****  * @return int 
 178:FML/Src/EC2x.c ****  *         设备号无效返回-1
 179:FML/Src/EC2x.c ****  *         写入失败返回 0
 180:FML/Src/EC2x.c ****  *          写入成功返回1
 181:FML/Src/EC2x.c ****  *         
 182:FML/Src/EC2x.c ****  */
 183:FML/Src/EC2x.c **** int ec2x_write(int fd,uint8_t *tx_buff,uint16_t len){
 546              		.loc 1 183 53
 547              		.cfi_startproc
 548              		@ args = 0, pretend = 0, frame = 24
 549              		@ frame_needed = 1, uses_anonymous_args = 0
 550 0000 80B5     		push	{r7, lr}
 551              	.LCFI15:
 552              		.cfi_def_cfa_offset 8
 553              		.cfi_offset 7, -8
 554              		.cfi_offset 14, -4
 555 0002 86B0     		sub	sp, sp, #24
 556              	.LCFI16:
 557              		.cfi_def_cfa_offset 32
 558 0004 00AF     		add	r7, sp, #0
 559              	.LCFI17:
 560              		.cfi_def_cfa_register 7
 561 0006 F860     		str	r0, [r7, #12]
 562 0008 B960     		str	r1, [r7, #8]
 563 000a 1346     		mov	r3, r2
 564 000c FB80     		strh	r3, [r7, #6]	@ movhi
 184:FML/Src/EC2x.c ****     int err_code = 0;
 565              		.loc 1 184 9
 566 000e 0023     		movs	r3, #0
 567 0010 7B61     		str	r3, [r7, #20]
 185:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 568              		.loc 1 185 7
 569 0012 FB68     		ldr	r3, [r7, #12]
 570 0014 002B     		cmp	r3, #0
 571 0016 04D0     		beq	.L19
 186:FML/Src/EC2x.c ****         return (err_code = -1);
 572              		.loc 1 186 26
 573 0018 4FF0FF33 		mov	r3, #-1
 574 001c 7B61     		str	r3, [r7, #20]
 575 001e 7B69     		ldr	r3, [r7, #20]
 576 0020 25E0     		b	.L20
 577              	.L19:
 187:FML/Src/EC2x.c ****     else{
 188:FML/Src/EC2x.c ****         err_code =  HAL_UART_Transmit_IT(ec2x_dev[fd].huart, tx_buff,len);
 578              		.loc 1 188 21
 579 0022 1549     		ldr	r1, .L22
 580 0024 FA68     		ldr	r2, [r7, #12]
 581 0026 1346     		mov	r3, r2
 582 0028 1B01     		lsls	r3, r3, #4
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 15


 583 002a 9B1A     		subs	r3, r3, r2
 584 002c 9B00     		lsls	r3, r3, #2
 585 002e 0B44     		add	r3, r3, r1
 586 0030 1033     		adds	r3, r3, #16
 587 0032 1B68     		ldr	r3, [r3]
 588 0034 FA88     		ldrh	r2, [r7, #6]
 589 0036 B968     		ldr	r1, [r7, #8]
 590 0038 1846     		mov	r0, r3
 591 003a FFF7FEFF 		bl	HAL_UART_Transmit_IT
 592 003e 0346     		mov	r3, r0
 593              		.loc 1 188 18
 594 0040 7B61     		str	r3, [r7, #20]
 189:FML/Src/EC2x.c ****         while(__HAL_UART_GET_FLAG(ec2x_dev[fd].huart,UART_FLAG_TC) != SET);
 595              		.loc 1 189 14
 596 0042 00BF     		nop
 597              	.L21:
 598              		.loc 1 189 15 discriminator 1
 599 0044 0C49     		ldr	r1, .L22
 600 0046 FA68     		ldr	r2, [r7, #12]
 601 0048 1346     		mov	r3, r2
 602 004a 1B01     		lsls	r3, r3, #4
 603 004c 9B1A     		subs	r3, r3, r2
 604 004e 9B00     		lsls	r3, r3, #2
 605 0050 0B44     		add	r3, r3, r1
 606 0052 1033     		adds	r3, r3, #16
 607 0054 1B68     		ldr	r3, [r3]
 608 0056 1B68     		ldr	r3, [r3]
 609 0058 DB69     		ldr	r3, [r3, #28]
 610 005a 03F04003 		and	r3, r3, #64
 611              		.loc 1 189 14 discriminator 1
 612 005e 402B     		cmp	r3, #64
 613 0060 F0D1     		bne	.L21
 190:FML/Src/EC2x.c ****         return(!err_code);
 614              		.loc 1 190 16
 615 0062 7B69     		ldr	r3, [r7, #20]
 616 0064 002B     		cmp	r3, #0
 617 0066 0CBF     		ite	eq
 618 0068 0123     		moveq	r3, #1
 619 006a 0023     		movne	r3, #0
 620 006c DBB2     		uxtb	r3, r3
 621              	.L20:
 191:FML/Src/EC2x.c ****     }
 192:FML/Src/EC2x.c **** };
 622              		.loc 1 192 1
 623 006e 1846     		mov	r0, r3
 624 0070 1837     		adds	r7, r7, #24
 625              	.LCFI18:
 626              		.cfi_def_cfa_offset 8
 627 0072 BD46     		mov	sp, r7
 628              	.LCFI19:
 629              		.cfi_def_cfa_register 13
 630              		@ sp needed
 631 0074 80BD     		pop	{r7, pc}
 632              	.L23:
 633 0076 00BF     		.align	2
 634              	.L22:
 635 0078 00000000 		.word	ec2x_dev
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 16


 636              		.cfi_endproc
 637              	.LFE294:
 639              		.section	.text.ec2x_read,"ax",%progbits
 640              		.align	1
 641              		.global	ec2x_read
 642              		.syntax unified
 643              		.thumb
 644              		.thumb_func
 646              	ec2x_read:
 647              	.LFB295:
 193:FML/Src/EC2x.c **** /**
 194:FML/Src/EC2x.c ****  * @brief 设备文件读取函数
 195:FML/Src/EC2x.c ****  *        读取环形缓冲区指定长度数据
 196:FML/Src/EC2x.c ****  * 
 197:FML/Src/EC2x.c ****  * @param fd 
 198:FML/Src/EC2x.c ****  * @param rx_buff 
 199:FML/Src/EC2x.c ****  * @param len 
 200:FML/Src/EC2x.c ****  * @return int 
 201:FML/Src/EC2x.c ****  *         -1 接口错误
 202:FML/Src/EC2x.c ****  *          0 读取失败
 203:FML/Src/EC2x.c ****  *          n 读取成功字节数
 204:FML/Src/EC2x.c ****  */
 205:FML/Src/EC2x.c **** int ec2x_read(int fd,uint8_t *rx_buff,uint16_t len){
 648              		.loc 1 205 52
 649              		.cfi_startproc
 650              		@ args = 0, pretend = 0, frame = 32
 651              		@ frame_needed = 1, uses_anonymous_args = 0
 652 0000 80B5     		push	{r7, lr}
 653              	.LCFI20:
 654              		.cfi_def_cfa_offset 8
 655              		.cfi_offset 7, -8
 656              		.cfi_offset 14, -4
 657 0002 88B0     		sub	sp, sp, #32
 658              	.LCFI21:
 659              		.cfi_def_cfa_offset 40
 660 0004 00AF     		add	r7, sp, #0
 661              	.LCFI22:
 662              		.cfi_def_cfa_register 7
 663 0006 F860     		str	r0, [r7, #12]
 664 0008 B960     		str	r1, [r7, #8]
 665 000a 1346     		mov	r3, r2
 666 000c FB80     		strh	r3, [r7, #6]	@ movhi
 206:FML/Src/EC2x.c ****     uint8_t *dest = rx_buff;
 667              		.loc 1 206 14
 668 000e BB68     		ldr	r3, [r7, #8]
 669 0010 BB61     		str	r3, [r7, #24]
 207:FML/Src/EC2x.c ****     if(fd >= sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef))
 670              		.loc 1 207 7
 671 0012 FB68     		ldr	r3, [r7, #12]
 672 0014 002B     		cmp	r3, #0
 673 0016 02D0     		beq	.L25
 208:FML/Src/EC2x.c ****         return -1;
 674              		.loc 1 208 16
 675 0018 4FF0FF33 		mov	r3, #-1
 676 001c 4EE0     		b	.L26
 677              	.L25:
 678              	.LBB4:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 17


 209:FML/Src/EC2x.c ****     else{
 210:FML/Src/EC2x.c ****         uint16_t j = 0;
 679              		.loc 1 210 18
 680 001e 0023     		movs	r3, #0
 681 0020 FB83     		strh	r3, [r7, #30]	@ movhi
 211:FML/Src/EC2x.c ****         
 212:FML/Src/EC2x.c ****         RingBuffer_TypeDef *src = &ec2x_dev[fd].msg;
 682              		.loc 1 212 29
 683 0022 FA68     		ldr	r2, [r7, #12]
 684 0024 1346     		mov	r3, r2
 685 0026 1B01     		lsls	r3, r3, #4
 686 0028 9B1A     		subs	r3, r3, r2
 687 002a 9B00     		lsls	r3, r3, #2
 688 002c 2833     		adds	r3, r3, #40
 689 002e 254A     		ldr	r2, .L32
 690 0030 1344     		add	r3, r3, r2
 691 0032 0433     		adds	r3, r3, #4
 692 0034 7B61     		str	r3, [r7, #20]
 213:FML/Src/EC2x.c ****         //如果队列被上锁了，则等待100ms
 214:FML/Src/EC2x.c ****         if(src->block == 1)
 693              		.loc 1 214 15
 694 0036 7B69     		ldr	r3, [r7, #20]
 695 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 696              		.loc 1 214 11
 697 003a 002B     		cmp	r3, #0
 698 003c 08D0     		beq	.L27
 215:FML/Src/EC2x.c ****         {
 216:FML/Src/EC2x.c ****             Delay_ms(100);
 699              		.loc 1 216 13
 700 003e 6420     		movs	r0, #100
 701 0040 FFF7FEFF 		bl	Delay_ms
 217:FML/Src/EC2x.c ****             if(src->block == 1)
 702              		.loc 1 217 19
 703 0044 7B69     		ldr	r3, [r7, #20]
 704 0046 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 705              		.loc 1 217 15
 706 0048 002B     		cmp	r3, #0
 707 004a 36D0     		beq	.L28
 218:FML/Src/EC2x.c ****                 return 0;
 708              		.loc 1 218 24
 709 004c 0023     		movs	r3, #0
 710 004e 35E0     		b	.L26
 711              	.L27:
 219:FML/Src/EC2x.c ****         }
 220:FML/Src/EC2x.c ****         else{
 221:FML/Src/EC2x.c ****             src->block = 1;
 712              		.loc 1 221 24
 713 0050 7B69     		ldr	r3, [r7, #20]
 714 0052 0122     		movs	r2, #1
 715 0054 1A70     		strb	r2, [r3]
 222:FML/Src/EC2x.c ****             if(len > src->size)
 716              		.loc 1 222 25
 717 0056 7B69     		ldr	r3, [r7, #20]
 718 0058 9B89     		ldrh	r3, [r3, #12]
 719              		.loc 1 222 15
 720 005a FA88     		ldrh	r2, [r7, #6]
 721 005c 9A42     		cmp	r2, r3
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 18


 722 005e 02D9     		bls	.L29
 223:FML/Src/EC2x.c ****                 len = src->size;
 723              		.loc 1 223 21
 724 0060 7B69     		ldr	r3, [r7, #20]
 725 0062 9B89     		ldrh	r3, [r3, #12]	@ movhi
 726 0064 FB80     		strh	r3, [r7, #6]	@ movhi
 727              	.L29:
 224:FML/Src/EC2x.c ****             for(j = 0 ; j < len; j++){
 728              		.loc 1 224 19
 729 0066 0023     		movs	r3, #0
 730 0068 FB83     		strh	r3, [r7, #30]	@ movhi
 731              		.loc 1 224 13
 732 006a 1FE0     		b	.L30
 733              	.L31:
 225:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 734              		.loc 1 225 30 discriminator 3
 735 006c 7B69     		ldr	r3, [r7, #20]
 736 006e 5B68     		ldr	r3, [r3, #4]
 737              		.loc 1 225 40 discriminator 3
 738 0070 7A69     		ldr	r2, [r7, #20]
 739 0072 1289     		ldrh	r2, [r2, #8]
 740              		.loc 1 225 36 discriminator 3
 741 0074 1A44     		add	r2, r2, r3
 742              		.loc 1 225 21 discriminator 3
 743 0076 FB8B     		ldrh	r3, [r7, #30]
 744 0078 B969     		ldr	r1, [r7, #24]
 745 007a 0B44     		add	r3, r3, r1
 746              		.loc 1 225 36 discriminator 3
 747 007c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 748              		.loc 1 225 25 discriminator 3
 749 007e 1A70     		strb	r2, [r3]
 226:FML/Src/EC2x.c ****                 src->head = (src->head + 1) % src->capacity;
 750              		.loc 1 226 33 discriminator 3
 751 0080 7B69     		ldr	r3, [r7, #20]
 752 0082 1B89     		ldrh	r3, [r3, #8]
 753              		.loc 1 226 40 discriminator 3
 754 0084 0133     		adds	r3, r3, #1
 755              		.loc 1 226 50 discriminator 3
 756 0086 7A69     		ldr	r2, [r7, #20]
 757 0088 D289     		ldrh	r2, [r2, #14]
 758              		.loc 1 226 45 discriminator 3
 759 008a 93FBF2F1 		sdiv	r1, r3, r2
 760 008e 01FB02F2 		mul	r2, r1, r2
 761 0092 9B1A     		subs	r3, r3, r2
 762              		.loc 1 226 27 discriminator 3
 763 0094 9AB2     		uxth	r2, r3
 764 0096 7B69     		ldr	r3, [r7, #20]
 765 0098 1A81     		strh	r2, [r3, #8]	@ movhi
 227:FML/Src/EC2x.c ****                 src->size--;
 766              		.loc 1 227 20 discriminator 3
 767 009a 7B69     		ldr	r3, [r7, #20]
 768 009c 9B89     		ldrh	r3, [r3, #12]
 769              		.loc 1 227 26 discriminator 3
 770 009e 013B     		subs	r3, r3, #1
 771 00a0 9AB2     		uxth	r2, r3
 772 00a2 7B69     		ldr	r3, [r7, #20]
 773 00a4 9A81     		strh	r2, [r3, #12]	@ movhi
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 19


 224:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 774              		.loc 1 224 35 discriminator 3
 775 00a6 FB8B     		ldrh	r3, [r7, #30]
 776 00a8 0133     		adds	r3, r3, #1
 777 00aa FB83     		strh	r3, [r7, #30]	@ movhi
 778              	.L30:
 224:FML/Src/EC2x.c ****                 dest[j] = src->data[src->head];
 779              		.loc 1 224 13 discriminator 1
 780 00ac FA8B     		ldrh	r2, [r7, #30]
 781 00ae FB88     		ldrh	r3, [r7, #6]
 782 00b0 9A42     		cmp	r2, r3
 783 00b2 DBD3     		bcc	.L31
 228:FML/Src/EC2x.c ****             }
 229:FML/Src/EC2x.c ****             src->block = 0;
 784              		.loc 1 229 24
 785 00b4 7B69     		ldr	r3, [r7, #20]
 786 00b6 0022     		movs	r2, #0
 787 00b8 1A70     		strb	r2, [r3]
 788              	.L28:
 230:FML/Src/EC2x.c ****         }
 231:FML/Src/EC2x.c ****         return len;
 789              		.loc 1 231 16
 790 00ba FB88     		ldrh	r3, [r7, #6]
 791              	.L26:
 792              	.LBE4:
 232:FML/Src/EC2x.c ****     }
 233:FML/Src/EC2x.c **** };
 793              		.loc 1 233 1
 794 00bc 1846     		mov	r0, r3
 795 00be 2037     		adds	r7, r7, #32
 796              	.LCFI23:
 797              		.cfi_def_cfa_offset 8
 798 00c0 BD46     		mov	sp, r7
 799              	.LCFI24:
 800              		.cfi_def_cfa_register 13
 801              		@ sp needed
 802 00c2 80BD     		pop	{r7, pc}
 803              	.L33:
 804              		.align	2
 805              	.L32:
 806 00c4 00000000 		.word	ec2x_dev
 807              		.cfi_endproc
 808              	.LFE295:
 810              		.section	.rodata
 811 00ca 0000     		.align	2
 812              	.LC15:
 813 00cc 257300   		.ascii	"%s\000"
 814              		.section	.text.ec2x_handler,"ax",%progbits
 815              		.align	1
 816              		.global	ec2x_handler
 817              		.syntax unified
 818              		.thumb
 819              		.thumb_func
 821              	ec2x_handler:
 822              	.LFB296:
 234:FML/Src/EC2x.c **** int ec2x_ioctl(int fd);
 235:FML/Src/EC2x.c **** 
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 20


 236:FML/Src/EC2x.c **** /**
 237:FML/Src/EC2x.c ****  * @brief 将串口接收数据copy到环形缓冲区，并更新缓冲区状态
 238:FML/Src/EC2x.c ****  * 
 239:FML/Src/EC2x.c ****  * @param huart 
 240:FML/Src/EC2x.c ****  * @param data 
 241:FML/Src/EC2x.c ****  * @param len 
 242:FML/Src/EC2x.c ****  */
 243:FML/Src/EC2x.c **** void ec2x_handler(UART_HandleTypeDef *huart,uint8_t *data,uint16_t len)
 244:FML/Src/EC2x.c **** {
 823              		.loc 1 244 1
 824              		.cfi_startproc
 825              		@ args = 0, pretend = 0, frame = 24
 826              		@ frame_needed = 1, uses_anonymous_args = 0
 827 0000 80B5     		push	{r7, lr}
 828              	.LCFI25:
 829              		.cfi_def_cfa_offset 8
 830              		.cfi_offset 7, -8
 831              		.cfi_offset 14, -4
 832 0002 86B0     		sub	sp, sp, #24
 833              	.LCFI26:
 834              		.cfi_def_cfa_offset 32
 835 0004 00AF     		add	r7, sp, #0
 836              	.LCFI27:
 837              		.cfi_def_cfa_register 7
 838 0006 F860     		str	r0, [r7, #12]
 839 0008 B960     		str	r1, [r7, #8]
 840 000a 1346     		mov	r3, r2
 841 000c FB80     		strh	r3, [r7, #6]	@ movhi
 245:FML/Src/EC2x.c ****     uint8_t i = 0,j = 0;
 842              		.loc 1 245 13
 843 000e 0023     		movs	r3, #0
 844 0010 FB75     		strb	r3, [r7, #23]
 845              		.loc 1 245 19
 846 0012 0023     		movs	r3, #0
 847 0014 BB75     		strb	r3, [r7, #22]
 246:FML/Src/EC2x.c ****     shellPrint(&shell,"%s",data);
 848              		.loc 1 246 5
 849 0016 BA68     		ldr	r2, [r7, #8]
 850 0018 3B49     		ldr	r1, .L41
 851 001a 3C48     		ldr	r0, .L41+4
 852 001c FFF7FEFF 		bl	shellPrint
 247:FML/Src/EC2x.c ****     for(i = 0;i < sizeof(ec2x_dev)/ sizeof(EC2x_HandleTypeDef);i++)
 853              		.loc 1 247 11
 854 0020 0023     		movs	r3, #0
 855 0022 FB75     		strb	r3, [r7, #23]
 856              		.loc 1 247 5
 857 0024 67E0     		b	.L35
 858              	.L40:
 248:FML/Src/EC2x.c ****     {
 249:FML/Src/EC2x.c ****         if(huart == ec2x_dev[i].huart)
 859              		.loc 1 249 32
 860 0026 FA7D     		ldrb	r2, [r7, #23]	@ zero_extendqisi2
 861 0028 3949     		ldr	r1, .L41+8
 862 002a 1346     		mov	r3, r2
 863 002c 1B01     		lsls	r3, r3, #4
 864 002e 9B1A     		subs	r3, r3, r2
 865 0030 9B00     		lsls	r3, r3, #2
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 21


 866 0032 0B44     		add	r3, r3, r1
 867 0034 1033     		adds	r3, r3, #16
 868 0036 1B68     		ldr	r3, [r3]
 869              		.loc 1 249 11
 870 0038 FA68     		ldr	r2, [r7, #12]
 871 003a 9A42     		cmp	r2, r3
 872 003c 58D1     		bne	.L36
 873              	.LBB5:
 250:FML/Src/EC2x.c ****         {
 251:FML/Src/EC2x.c ****             RingBuffer_TypeDef *dest = &ec2x_dev[i].msg;
 874              		.loc 1 251 52
 875 003e FA7D     		ldrb	r2, [r7, #23]	@ zero_extendqisi2
 876              		.loc 1 251 33
 877 0040 1346     		mov	r3, r2
 878 0042 1B01     		lsls	r3, r3, #4
 879 0044 9B1A     		subs	r3, r3, r2
 880 0046 9B00     		lsls	r3, r3, #2
 881 0048 2833     		adds	r3, r3, #40
 882 004a 314A     		ldr	r2, .L41+8
 883 004c 1344     		add	r3, r3, r2
 884 004e 0433     		adds	r3, r3, #4
 885 0050 3B61     		str	r3, [r7, #16]
 252:FML/Src/EC2x.c ****             if(dest->block  == 0){
 886              		.loc 1 252 20
 887 0052 3B69     		ldr	r3, [r7, #16]
 888 0054 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 889              		.loc 1 252 29
 890 0056 83F00103 		eor	r3, r3, #1
 891 005a DBB2     		uxtb	r3, r3
 892              		.loc 1 252 15
 893 005c 002B     		cmp	r3, #0
 894 005e 47D0     		beq	.L36
 253:FML/Src/EC2x.c ****                 dest->block = 1;
 895              		.loc 1 253 29
 896 0060 3B69     		ldr	r3, [r7, #16]
 897 0062 0122     		movs	r2, #1
 898 0064 1A70     		strb	r2, [r3]
 254:FML/Src/EC2x.c ****                 for(j = 0 ; j < len; j++){
 899              		.loc 1 254 23
 900 0066 0023     		movs	r3, #0
 901 0068 BB75     		strb	r3, [r7, #22]
 902              		.loc 1 254 17
 903 006a 29E0     		b	.L37
 904              	.L38:
 255:FML/Src/EC2x.c ****                    
 256:FML/Src/EC2x.c ****                     dest->data[dest->tail] = data[j];
 905              		.loc 1 256 50 discriminator 3
 906 006c BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 907 006e BA68     		ldr	r2, [r7, #8]
 908 0070 1A44     		add	r2, r2, r3
 909              		.loc 1 256 25 discriminator 3
 910 0072 3B69     		ldr	r3, [r7, #16]
 911 0074 5B68     		ldr	r3, [r3, #4]
 912              		.loc 1 256 36 discriminator 3
 913 0076 3969     		ldr	r1, [r7, #16]
 914 0078 4989     		ldrh	r1, [r1, #10]
 915              		.loc 1 256 31 discriminator 3
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 22


 916 007a 0B44     		add	r3, r3, r1
 917              		.loc 1 256 50 discriminator 3
 918 007c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 919              		.loc 1 256 44 discriminator 3
 920 007e 1A70     		strb	r2, [r3]
 257:FML/Src/EC2x.c ****                     dest->tail = (dest->tail +1) % dest->capacity;
 921              		.loc 1 257 39 discriminator 3
 922 0080 3B69     		ldr	r3, [r7, #16]
 923 0082 5B89     		ldrh	r3, [r3, #10]
 924              		.loc 1 257 46 discriminator 3
 925 0084 0133     		adds	r3, r3, #1
 926              		.loc 1 257 56 discriminator 3
 927 0086 3A69     		ldr	r2, [r7, #16]
 928 0088 D289     		ldrh	r2, [r2, #14]
 929              		.loc 1 257 50 discriminator 3
 930 008a 93FBF2F1 		sdiv	r1, r3, r2
 931 008e 01FB02F2 		mul	r2, r1, r2
 932 0092 9B1A     		subs	r3, r3, r2
 933              		.loc 1 257 32 discriminator 3
 934 0094 9AB2     		uxth	r2, r3
 935 0096 3B69     		ldr	r3, [r7, #16]
 936 0098 5A81     		strh	r2, [r3, #10]	@ movhi
 258:FML/Src/EC2x.c ****                     dest->size++;
 937              		.loc 1 258 25 discriminator 3
 938 009a 3B69     		ldr	r3, [r7, #16]
 939 009c 9B89     		ldrh	r3, [r3, #12]
 940              		.loc 1 258 31 discriminator 3
 941 009e 0133     		adds	r3, r3, #1
 942 00a0 9AB2     		uxth	r2, r3
 943 00a2 3B69     		ldr	r3, [r7, #16]
 944 00a4 9A81     		strh	r2, [r3, #12]	@ movhi
 259:FML/Src/EC2x.c ****                     dest->size = dest->size > dest->capacity ? dest->capacity : dest->size;
 945              		.loc 1 259 38 discriminator 3
 946 00a6 3B69     		ldr	r3, [r7, #16]
 947 00a8 9A89     		ldrh	r2, [r3, #12]
 948              		.loc 1 259 51 discriminator 3
 949 00aa 3B69     		ldr	r3, [r7, #16]
 950 00ac DB89     		ldrh	r3, [r3, #14]
 951              		.loc 1 259 79 discriminator 3
 952 00ae 9342     		cmp	r3, r2
 953 00b0 28BF     		it	cs
 954 00b2 1346     		movcs	r3, r2
 955 00b4 9AB2     		uxth	r2, r3
 956              		.loc 1 259 32 discriminator 3
 957 00b6 3B69     		ldr	r3, [r7, #16]
 958 00b8 9A81     		strh	r2, [r3, #12]	@ movhi
 254:FML/Src/EC2x.c ****                    
 959              		.loc 1 254 39 discriminator 3
 960 00ba BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 961 00bc 0133     		adds	r3, r3, #1
 962 00be BB75     		strb	r3, [r7, #22]
 963              	.L37:
 254:FML/Src/EC2x.c ****                    
 964              		.loc 1 254 31 discriminator 1
 965 00c0 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 966 00c2 9BB2     		uxth	r3, r3
 254:FML/Src/EC2x.c ****                    
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 23


 967              		.loc 1 254 17 discriminator 1
 968 00c4 FA88     		ldrh	r2, [r7, #6]
 969 00c6 9A42     		cmp	r2, r3
 970 00c8 D0D8     		bhi	.L38
 260:FML/Src/EC2x.c ****                 }
 261:FML/Src/EC2x.c ****                 if((dest->tail > dest->head)&&(dest->size == dest->capacity))
 971              		.loc 1 261 25
 972 00ca 3B69     		ldr	r3, [r7, #16]
 973 00cc 5A89     		ldrh	r2, [r3, #10]
 974              		.loc 1 261 38
 975 00ce 3B69     		ldr	r3, [r7, #16]
 976 00d0 1B89     		ldrh	r3, [r3, #8]
 977              		.loc 1 261 19
 978 00d2 9A42     		cmp	r2, r3
 979 00d4 09D9     		bls	.L39
 980              		.loc 1 261 52 discriminator 1
 981 00d6 3B69     		ldr	r3, [r7, #16]
 982 00d8 9A89     		ldrh	r2, [r3, #12]
 983              		.loc 1 261 66 discriminator 1
 984 00da 3B69     		ldr	r3, [r7, #16]
 985 00dc DB89     		ldrh	r3, [r3, #14]
 986              		.loc 1 261 45 discriminator 1
 987 00de 9A42     		cmp	r2, r3
 988 00e0 03D1     		bne	.L39
 262:FML/Src/EC2x.c ****                     dest->head = dest->tail;
 989              		.loc 1 262 38
 990 00e2 3B69     		ldr	r3, [r7, #16]
 991 00e4 5A89     		ldrh	r2, [r3, #10]
 992              		.loc 1 262 32
 993 00e6 3B69     		ldr	r3, [r7, #16]
 994 00e8 1A81     		strh	r2, [r3, #8]	@ movhi
 995              	.L39:
 263:FML/Src/EC2x.c ****                 dest->block = 0;
 996              		.loc 1 263 29
 997 00ea 3B69     		ldr	r3, [r7, #16]
 998 00ec 0022     		movs	r2, #0
 999 00ee 1A70     		strb	r2, [r3]
 1000              	.L36:
 1001              	.LBE5:
 247:FML/Src/EC2x.c ****     {
 1002              		.loc 1 247 65 discriminator 2
 1003 00f0 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1004 00f2 0133     		adds	r3, r3, #1
 1005 00f4 FB75     		strb	r3, [r7, #23]
 1006              	.L35:
 247:FML/Src/EC2x.c ****     {
 1007              		.loc 1 247 5 discriminator 1
 1008 00f6 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1009 00f8 002B     		cmp	r3, #0
 1010 00fa 94D0     		beq	.L40
 264:FML/Src/EC2x.c ****             }
 265:FML/Src/EC2x.c ****         }
 266:FML/Src/EC2x.c ****     }
 267:FML/Src/EC2x.c **** }
 1011              		.loc 1 267 1
 1012 00fc 00BF     		nop
 1013 00fe 00BF     		nop
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 24


 1014 0100 1837     		adds	r7, r7, #24
 1015              	.LCFI28:
 1016              		.cfi_def_cfa_offset 8
 1017 0102 BD46     		mov	sp, r7
 1018              	.LCFI29:
 1019              		.cfi_def_cfa_register 13
 1020              		@ sp needed
 1021 0104 80BD     		pop	{r7, pc}
 1022              	.L42:
 1023 0106 00BF     		.align	2
 1024              	.L41:
 1025 0108 CC000000 		.word	.LC15
 1026 010c 00000000 		.word	shell
 1027 0110 00000000 		.word	ec2x_dev
 1028              		.cfi_endproc
 1029              	.LFE296:
 1031              		.section	.text.ec2x_replymatch,"ax",%progbits
 1032              		.align	1
 1033              		.global	ec2x_replymatch
 1034              		.syntax unified
 1035              		.thumb
 1036              		.thumb_func
 1038              	ec2x_replymatch:
 1039              	.LFB297:
 268:FML/Src/EC2x.c **** 
 269:FML/Src/EC2x.c **** 
 270:FML/Src/EC2x.c **** /**
 271:FML/Src/EC2x.c ****  * @brief 回复匹配函数
 272:FML/Src/EC2x.c ****  *        1）匹配成功，则插入回复成功事件
 273:FML/Src/EC2x.c ****  *        2.1）匹配失败，超时次数-1
 274:FML/Src/EC2x.c ****  *        2.2）匹配失败，超时次数=0，插入超时事件消息
 275:FML/Src/EC2x.c ****  * 
 276:FML/Src/EC2x.c ****  * @param expect 
 277:FML/Src/EC2x.c ****  * @return int 
 278:FML/Src/EC2x.c ****  */
 279:FML/Src/EC2x.c **** int ec2x_replymatch(uint8_t* expect){
 1040              		.loc 1 279 37
 1041              		.cfi_startproc
 1042              		@ args = 0, pretend = 0, frame = 216
 1043              		@ frame_needed = 1, uses_anonymous_args = 0
 1044 0000 80B5     		push	{r7, lr}
 1045              	.LCFI30:
 1046              		.cfi_def_cfa_offset 8
 1047              		.cfi_offset 7, -8
 1048              		.cfi_offset 14, -4
 1049 0002 B6B0     		sub	sp, sp, #216
 1050              	.LCFI31:
 1051              		.cfi_def_cfa_offset 224
 1052 0004 00AF     		add	r7, sp, #0
 1053              	.LCFI32:
 1054              		.cfi_def_cfa_register 7
 1055 0006 7860     		str	r0, [r7, #4]
 280:FML/Src/EC2x.c ****     uint8_t rx_buff[200]  = {0x00};
 1056              		.loc 1 280 13
 1057 0008 0023     		movs	r3, #0
 1058 000a FB60     		str	r3, [r7, #12]
 1059 000c 07F11003 		add	r3, r7, #16
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 25


 1060 0010 C422     		movs	r2, #196
 1061 0012 0021     		movs	r1, #0
 1062 0014 1846     		mov	r0, r3
 1063 0016 FFF7FEFF 		bl	memset
 281:FML/Src/EC2x.c ****     int bytes_num = 0;
 1064              		.loc 1 281 9
 1065 001a 0023     		movs	r3, #0
 1066 001c C7F8D430 		str	r3, [r7, #212]
 282:FML/Src/EC2x.c ****     bytes_num =  ec2x_read(0,rx_buff,200);
 1067              		.loc 1 282 18
 1068 0020 07F10C03 		add	r3, r7, #12
 1069 0024 C822     		movs	r2, #200
 1070 0026 1946     		mov	r1, r3
 1071 0028 0020     		movs	r0, #0
 1072 002a FFF7FEFF 		bl	ec2x_read
 1073 002e C7F8D400 		str	r0, [r7, #212]
 283:FML/Src/EC2x.c ****     if(bytes_num > 0)
 1074              		.loc 1 283 7
 1075 0032 D7F8D430 		ldr	r3, [r7, #212]
 1076 0036 002B     		cmp	r3, #0
 1077 0038 0ADD     		ble	.L44
 284:FML/Src/EC2x.c ****     {
 285:FML/Src/EC2x.c ****         if(strstr((const char*)rx_buff,(const char*)expect) != NULL){
 1078              		.loc 1 285 12
 1079 003a 07F10C03 		add	r3, r7, #12
 1080 003e 7968     		ldr	r1, [r7, #4]
 1081 0040 1846     		mov	r0, r3
 1082 0042 FFF7FEFF 		bl	strstr
 1083 0046 0346     		mov	r3, r0
 1084              		.loc 1 285 11
 1085 0048 002B     		cmp	r3, #0
 1086 004a 01D0     		beq	.L44
 286:FML/Src/EC2x.c ****             return 1;
 1087              		.loc 1 286 20
 1088 004c 0123     		movs	r3, #1
 1089 004e 00E0     		b	.L46
 1090              	.L44:
 287:FML/Src/EC2x.c ****         }
 288:FML/Src/EC2x.c ****     }
 289:FML/Src/EC2x.c ****     return 0;
 1091              		.loc 1 289 12
 1092 0050 0023     		movs	r3, #0
 1093              	.L46:
 290:FML/Src/EC2x.c **** }
 1094              		.loc 1 290 1 discriminator 1
 1095 0052 1846     		mov	r0, r3
 1096 0054 D837     		adds	r7, r7, #216
 1097              	.LCFI33:
 1098              		.cfi_def_cfa_offset 8
 1099 0056 BD46     		mov	sp, r7
 1100              	.LCFI34:
 1101              		.cfi_def_cfa_register 13
 1102              		@ sp needed
 1103 0058 80BD     		pop	{r7, pc}
 1104              		.cfi_endproc
 1105              	.LFE297:
 1107              		.section	.text.ec2x_cmd_send,"ax",%progbits
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 26


 1108              		.align	1
 1109              		.syntax unified
 1110              		.thumb
 1111              		.thumb_func
 1113              	ec2x_cmd_send:
 1114              	.LFB298:
 291:FML/Src/EC2x.c **** 
 292:FML/Src/EC2x.c **** 
 293:FML/Src/EC2x.c **** /**
 294:FML/Src/EC2x.c ****  * @brief ec2x指令发送函数
 295:FML/Src/EC2x.c ****  *        1）发送指令
 296:FML/Src/EC2x.c ****  *        2）进入等待回复状态
 297:FML/Src/EC2x.c ****  * @param fd 
 298:FML/Src/EC2x.c ****  * @param tx_buff 
 299:FML/Src/EC2x.c ****  * @param len 
 300:FML/Src/EC2x.c ****  * @param expect_reply 
 301:FML/Src/EC2x.c ****  * @param timeout 
 302:FML/Src/EC2x.c ****  */
 303:FML/Src/EC2x.c **** int ec2x_cmd_send(int fd,uint8_t *tx_buff,uint16_t len,uint8_t *expect_reply,uint16_t timeout)
 304:FML/Src/EC2x.c **** {
 1115              		.loc 1 304 1
 1116              		.cfi_startproc
 1117              		@ args = 4, pretend = 0, frame = 24
 1118              		@ frame_needed = 1, uses_anonymous_args = 0
 1119 0000 80B5     		push	{r7, lr}
 1120              	.LCFI35:
 1121              		.cfi_def_cfa_offset 8
 1122              		.cfi_offset 7, -8
 1123              		.cfi_offset 14, -4
 1124 0002 86B0     		sub	sp, sp, #24
 1125              	.LCFI36:
 1126              		.cfi_def_cfa_offset 32
 1127 0004 00AF     		add	r7, sp, #0
 1128              	.LCFI37:
 1129              		.cfi_def_cfa_register 7
 1130 0006 F860     		str	r0, [r7, #12]
 1131 0008 B960     		str	r1, [r7, #8]
 1132 000a 3B60     		str	r3, [r7]
 1133 000c 1346     		mov	r3, r2	@ movhi
 1134 000e FB80     		strh	r3, [r7, #6]	@ movhi
 305:FML/Src/EC2x.c ****     if(tx_buff !=NULL){
 1135              		.loc 1 305 7
 1136 0010 BB68     		ldr	r3, [r7, #8]
 1137 0012 002B     		cmp	r3, #0
 1138 0014 4FD0     		beq	.L48
 306:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.block = 1;
 1139              		.loc 1 306 32
 1140 0016 3749     		ldr	r1, .L53
 1141 0018 FA68     		ldr	r2, [r7, #12]
 1142 001a 1346     		mov	r3, r2
 1143 001c 1B01     		lsls	r3, r3, #4
 1144 001e 9B1A     		subs	r3, r3, r2
 1145 0020 9B00     		lsls	r3, r3, #2
 1146 0022 0B44     		add	r3, r3, r1
 1147 0024 2C33     		adds	r3, r3, #44
 1148 0026 0122     		movs	r2, #1
 1149 0028 1A70     		strb	r2, [r3]
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 27


 307:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.head = 0;
 1150              		.loc 1 307 31
 1151 002a 3249     		ldr	r1, .L53
 1152 002c FA68     		ldr	r2, [r7, #12]
 1153 002e 1346     		mov	r3, r2
 1154 0030 1B01     		lsls	r3, r3, #4
 1155 0032 9B1A     		subs	r3, r3, r2
 1156 0034 9B00     		lsls	r3, r3, #2
 1157 0036 0B44     		add	r3, r3, r1
 1158 0038 3433     		adds	r3, r3, #52
 1159 003a 0022     		movs	r2, #0
 1160 003c 1A80     		strh	r2, [r3]	@ movhi
 308:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.tail = 0;
 1161              		.loc 1 308 31
 1162 003e 2D49     		ldr	r1, .L53
 1163 0040 FA68     		ldr	r2, [r7, #12]
 1164 0042 1346     		mov	r3, r2
 1165 0044 1B01     		lsls	r3, r3, #4
 1166 0046 9B1A     		subs	r3, r3, r2
 1167 0048 9B00     		lsls	r3, r3, #2
 1168 004a 0B44     		add	r3, r3, r1
 1169 004c 3633     		adds	r3, r3, #54
 1170 004e 0022     		movs	r2, #0
 1171 0050 1A80     		strh	r2, [r3]	@ movhi
 309:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.size = 0;
 1172              		.loc 1 309 31
 1173 0052 2849     		ldr	r1, .L53
 1174 0054 FA68     		ldr	r2, [r7, #12]
 1175 0056 1346     		mov	r3, r2
 1176 0058 1B01     		lsls	r3, r3, #4
 1177 005a 9B1A     		subs	r3, r3, r2
 1178 005c 9B00     		lsls	r3, r3, #2
 1179 005e 0B44     		add	r3, r3, r1
 1180 0060 3833     		adds	r3, r3, #56
 1181 0062 0022     		movs	r2, #0
 1182 0064 1A80     		strh	r2, [r3]	@ movhi
 310:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.capacity = BUFF_LEN;
 1183              		.loc 1 310 35
 1184 0066 2349     		ldr	r1, .L53
 1185 0068 FA68     		ldr	r2, [r7, #12]
 1186 006a 1346     		mov	r3, r2
 1187 006c 1B01     		lsls	r3, r3, #4
 1188 006e 9B1A     		subs	r3, r3, r2
 1189 0070 9B00     		lsls	r3, r3, #2
 1190 0072 0B44     		add	r3, r3, r1
 1191 0074 3A33     		adds	r3, r3, #58
 1192 0076 C822     		movs	r2, #200
 1193 0078 1A80     		strh	r2, [r3]	@ movhi
 311:FML/Src/EC2x.c ****         memset(ec2x_dev[fd].msg.data,0x00,BUFF_LEN);
 1194              		.loc 1 311 32
 1195 007a 1E49     		ldr	r1, .L53
 1196 007c FA68     		ldr	r2, [r7, #12]
 1197 007e 1346     		mov	r3, r2
 1198 0080 1B01     		lsls	r3, r3, #4
 1199 0082 9B1A     		subs	r3, r3, r2
 1200 0084 9B00     		lsls	r3, r3, #2
 1201 0086 0B44     		add	r3, r3, r1
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 28


 1202 0088 3033     		adds	r3, r3, #48
 1203 008a 1B68     		ldr	r3, [r3]
 1204              		.loc 1 311 9
 1205 008c C822     		movs	r2, #200
 1206 008e 0021     		movs	r1, #0
 1207 0090 1846     		mov	r0, r3
 1208 0092 FFF7FEFF 		bl	memset
 312:FML/Src/EC2x.c ****         ec2x_dev[fd].msg.block = 0;
 1209              		.loc 1 312 32
 1210 0096 1749     		ldr	r1, .L53
 1211 0098 FA68     		ldr	r2, [r7, #12]
 1212 009a 1346     		mov	r3, r2
 1213 009c 1B01     		lsls	r3, r3, #4
 1214 009e 9B1A     		subs	r3, r3, r2
 1215 00a0 9B00     		lsls	r3, r3, #2
 1216 00a2 0B44     		add	r3, r3, r1
 1217 00a4 2C33     		adds	r3, r3, #44
 1218 00a6 0022     		movs	r2, #0
 1219 00a8 1A70     		strb	r2, [r3]
 313:FML/Src/EC2x.c ****         ec2x_write(fd,tx_buff,len);
 1220              		.loc 1 313 9
 1221 00aa FB88     		ldrh	r3, [r7, #6]
 1222 00ac 1A46     		mov	r2, r3
 1223 00ae B968     		ldr	r1, [r7, #8]
 1224 00b0 F868     		ldr	r0, [r7, #12]
 1225 00b2 FFF7FEFF 		bl	ec2x_write
 1226              	.L48:
 314:FML/Src/EC2x.c ****     }
 315:FML/Src/EC2x.c ****     if(expect_reply != NULL){
 1227              		.loc 1 315 7
 1228 00b6 3B68     		ldr	r3, [r7]
 1229 00b8 002B     		cmp	r3, #0
 1230 00ba 16D0     		beq	.L49
 1231              	.LBB6:
 316:FML/Src/EC2x.c ****         uint16_t retry_times = timeout / 100;
 1232              		.loc 1 316 18
 1233 00bc 3B8C     		ldrh	r3, [r7, #32]
 1234 00be 0E4A     		ldr	r2, .L53+4
 1235 00c0 A2FB0323 		umull	r2, r3, r2, r3
 1236 00c4 5B09     		lsrs	r3, r3, #5
 1237 00c6 FB82     		strh	r3, [r7, #22]	@ movhi
 317:FML/Src/EC2x.c ****         while(retry_times--){
 1238              		.loc 1 317 14
 1239 00c8 0AE0     		b	.L50
 1240              	.L52:
 318:FML/Src/EC2x.c ****             Delay_ms(100);
 1241              		.loc 1 318 13
 1242 00ca 6420     		movs	r0, #100
 1243 00cc FFF7FEFF 		bl	Delay_ms
 319:FML/Src/EC2x.c ****             if(ec2x_replymatch(expect_reply) == 1)
 1244              		.loc 1 319 16
 1245 00d0 3868     		ldr	r0, [r7]
 1246 00d2 FFF7FEFF 		bl	ec2x_replymatch
 1247 00d6 0346     		mov	r3, r0
 1248              		.loc 1 319 15
 1249 00d8 012B     		cmp	r3, #1
 1250 00da 01D1     		bne	.L50
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 29


 320:FML/Src/EC2x.c ****                 return  1;
 1251              		.loc 1 320 25
 1252 00dc 0123     		movs	r3, #1
 1253 00de 05E0     		b	.L51
 1254              	.L50:
 317:FML/Src/EC2x.c ****             Delay_ms(100);
 1255              		.loc 1 317 26
 1256 00e0 FB8A     		ldrh	r3, [r7, #22]
 1257 00e2 5A1E     		subs	r2, r3, #1
 1258 00e4 FA82     		strh	r2, [r7, #22]	@ movhi
 317:FML/Src/EC2x.c ****             Delay_ms(100);
 1259              		.loc 1 317 14
 1260 00e6 002B     		cmp	r3, #0
 1261 00e8 EFD1     		bne	.L52
 1262              	.L49:
 1263              	.LBE6:
 321:FML/Src/EC2x.c ****         }
 322:FML/Src/EC2x.c ****     }
 323:FML/Src/EC2x.c ****     return 0;
 1264              		.loc 1 323 12
 1265 00ea 0023     		movs	r3, #0
 1266              	.L51:
 324:FML/Src/EC2x.c **** }
 1267              		.loc 1 324 1
 1268 00ec 1846     		mov	r0, r3
 1269 00ee 1837     		adds	r7, r7, #24
 1270              	.LCFI38:
 1271              		.cfi_def_cfa_offset 8
 1272 00f0 BD46     		mov	sp, r7
 1273              	.LCFI39:
 1274              		.cfi_def_cfa_register 13
 1275              		@ sp needed
 1276 00f2 80BD     		pop	{r7, pc}
 1277              	.L54:
 1278              		.align	2
 1279              	.L53:
 1280 00f4 00000000 		.word	ec2x_dev
 1281 00f8 1F85EB51 		.word	1374389535
 1282              		.cfi_endproc
 1283              	.LFE298:
 1285              		.section	.rodata
 1286 00cf 00       		.align	2
 1287              	.LC16:
 1288 00d0 25732065 		.ascii	"%s err\015\012\000"
 1288      72720D0A 
 1288      00
 1289 00d9 000000   		.align	2
 1290              	.LC17:
 1291 00dc 74637020 		.ascii	"tcp is connected\015\012\000"
 1291      69732063 
 1291      6F6E6E65 
 1291      63746564 
 1291      0D0A00
 1292              		.section	.text.ec2x_tcp_connect,"ax",%progbits
 1293              		.align	1
 1294              		.global	ec2x_tcp_connect
 1295              		.syntax unified
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 30


 1296              		.thumb
 1297              		.thumb_func
 1299              	ec2x_tcp_connect:
 1300              	.LFB299:
 325:FML/Src/EC2x.c **** 
 326:FML/Src/EC2x.c **** /**
 327:FML/Src/EC2x.c ****  * @brief tcp 连接流程
 328:FML/Src/EC2x.c ****  * 
 329:FML/Src/EC2x.c ****  * @param fd 
 330:FML/Src/EC2x.c ****  * @return uint8_t 
 331:FML/Src/EC2x.c ****  */
 332:FML/Src/EC2x.c **** uint8_t ec2x_tcp_connect(int fd){
 1301              		.loc 1 332 33
 1302              		.cfi_startproc
 1303              		@ args = 0, pretend = 0, frame = 8
 1304              		@ frame_needed = 1, uses_anonymous_args = 0
 1305 0000 90B5     		push	{r4, r7, lr}
 1306              	.LCFI40:
 1307              		.cfi_def_cfa_offset 12
 1308              		.cfi_offset 4, -12
 1309              		.cfi_offset 7, -8
 1310              		.cfi_offset 14, -4
 1311 0002 85B0     		sub	sp, sp, #20
 1312              	.LCFI41:
 1313              		.cfi_def_cfa_offset 32
 1314 0004 02AF     		add	r7, sp, #8
 1315              	.LCFI42:
 1316              		.cfi_def_cfa 7, 24
 1317 0006 7860     		str	r0, [r7, #4]
 333:FML/Src/EC2x.c ****     static uint8_t step = 0,retry =0;
 334:FML/Src/EC2x.c ****     ec2x_reset(fd);
 1318              		.loc 1 334 5
 1319 0008 7868     		ldr	r0, [r7, #4]
 1320 000a FFF7FEFF 		bl	ec2x_reset
 335:FML/Src/EC2x.c ****     while(step < 9){
 1321              		.loc 1 335 10
 1322 000e 74E3     		b	.L56
 1323              	.L93:
 336:FML/Src/EC2x.c ****         switch (step)
 1324              		.loc 1 336 9
 1325 0010 A84B     		ldr	r3, .L95
 1326 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1327 0014 082B     		cmp	r3, #8
 1328 0016 00F26F83 		bhi	.L94
 1329 001a 01A2     		adr	r2, .L59
 1330 001c 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 1331              		.p2align 2
 1332              	.L59:
 1333 0020 45000000 		.word	.L67+1
 1334 0024 15010000 		.word	.L66+1
 1335 0028 E5010000 		.word	.L65+1
 1336 002c C9020000 		.word	.L64+1
 1337 0030 99030000 		.word	.L63+1
 1338 0034 69040000 		.word	.L62+1
 1339 0038 4D050000 		.word	.L61+1
 1340 003c 1D060000 		.word	.L60+1
 1341 0040 ED060000 		.word	.L58+1
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 31


 1342              		.p2align 1
 1343              	.L67:
 337:FML/Src/EC2x.c ****         {
 338:FML/Src/EC2x.c ****             case 0: 
 339:FML/Src/EC2x.c ****             {
 340:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1344              		.loc 1 340 20
 1345 0044 9B4B     		ldr	r3, .L95
 1346 0046 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1347 0048 1946     		mov	r1, r3
 1348 004a 9B4A     		ldr	r2, .L95+4
 1349 004c 0B46     		mov	r3, r1
 1350 004e 5B00     		lsls	r3, r3, #1
 1351 0050 0B44     		add	r3, r3, r1
 1352 0052 9B00     		lsls	r3, r3, #2
 1353 0054 1344     		add	r3, r3, r2
 1354 0056 1C68     		ldr	r4, [r3]
 1355              		.loc 1 340 66
 1356 0058 964B     		ldr	r3, .L95
 1357 005a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1358 005c 1946     		mov	r1, r3
 1359              		.loc 1 340 95
 1360 005e 964A     		ldr	r2, .L95+4
 1361 0060 0B46     		mov	r3, r1
 1362 0062 5B00     		lsls	r3, r3, #1
 1363 0064 0B44     		add	r3, r3, r1
 1364 0066 9B00     		lsls	r3, r3, #2
 1365 0068 1344     		add	r3, r3, r2
 1366 006a 1B68     		ldr	r3, [r3]
 1367              		.loc 1 340 66
 1368 006c 1846     		mov	r0, r3
 1369 006e FFF7FEFF 		bl	strlen
 1370 0072 0346     		mov	r3, r0
 1371              		.loc 1 340 20
 1372 0074 9AB2     		uxth	r2, r3
 1373 0076 8F4B     		ldr	r3, .L95
 1374 0078 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1375 007a 1846     		mov	r0, r3
 1376 007c 8E49     		ldr	r1, .L95+4
 1377 007e 0346     		mov	r3, r0
 1378 0080 5B00     		lsls	r3, r3, #1
 1379 0082 0344     		add	r3, r3, r0
 1380 0084 9B00     		lsls	r3, r3, #2
 1381 0086 0B44     		add	r3, r3, r1
 1382 0088 0433     		adds	r3, r3, #4
 1383 008a 1968     		ldr	r1, [r3]
 1384 008c 8A4B     		ldr	r3, .L95+4
 1385 008e 1B89     		ldrh	r3, [r3, #8]
 1386 0090 0093     		str	r3, [sp]
 1387 0092 0B46     		mov	r3, r1
 1388 0094 2146     		mov	r1, r4
 1389 0096 7868     		ldr	r0, [r7, #4]
 1390 0098 FFF7FEFF 		bl	ec2x_cmd_send
 1391 009c 0346     		mov	r3, r0
 1392              		.loc 1 340 19
 1393 009e 002B     		cmp	r3, #0
 1394 00a0 09D0     		beq	.L68
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 32


 341:FML/Src/EC2x.c ****                 {    
 342:FML/Src/EC2x.c ****                     step++;
 1395              		.loc 1 342 25
 1396 00a2 844B     		ldr	r3, .L95
 1397 00a4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1398 00a6 0133     		adds	r3, r3, #1
 1399 00a8 DAB2     		uxtb	r2, r3
 1400 00aa 824B     		ldr	r3, .L95
 1401 00ac 1A70     		strb	r2, [r3]
 343:FML/Src/EC2x.c ****                     retry = 0;
 1402              		.loc 1 343 27
 1403 00ae 834B     		ldr	r3, .L95+8
 1404 00b0 0022     		movs	r2, #0
 1405 00b2 1A70     		strb	r2, [r3]
 1406 00b4 2AE0     		b	.L69
 1407              	.L68:
 344:FML/Src/EC2x.c ****                 }
 345:FML/Src/EC2x.c ****                 else
 346:FML/Src/EC2x.c ****                 {
 347:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry)
 1408              		.loc 1 347 46
 1409 00b6 7F4B     		ldr	r3, .L95
 1410 00b8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1411 00ba 1946     		mov	r1, r3
 1412 00bc 7E4A     		ldr	r2, .L95+4
 1413 00be 0B46     		mov	r3, r1
 1414 00c0 5B00     		lsls	r3, r3, #1
 1415 00c2 0B44     		add	r3, r3, r1
 1416 00c4 9B00     		lsls	r3, r3, #2
 1417 00c6 1344     		add	r3, r3, r2
 1418 00c8 0A33     		adds	r3, r3, #10
 1419 00ca 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1420              		.loc 1 347 59
 1421 00cc 7B4B     		ldr	r3, .L95+8
 1422 00ce 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1423              		.loc 1 347 23
 1424 00d0 9A42     		cmp	r2, r3
 1425 00d2 15D2     		bcs	.L70
 348:FML/Src/EC2x.c ****                     {
 349:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1426              		.loc 1 349 25
 1427 00d4 774B     		ldr	r3, .L95
 1428 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1429 00d8 1946     		mov	r1, r3
 1430 00da 774A     		ldr	r2, .L95+4
 1431 00dc 0B46     		mov	r3, r1
 1432 00de 5B00     		lsls	r3, r3, #1
 1433 00e0 0B44     		add	r3, r3, r1
 1434 00e2 9B00     		lsls	r3, r3, #2
 1435 00e4 1344     		add	r3, r3, r2
 1436 00e6 1B68     		ldr	r3, [r3]
 1437 00e8 1A46     		mov	r2, r3
 1438 00ea 7549     		ldr	r1, .L95+12
 1439 00ec 7548     		ldr	r0, .L95+16
 1440 00ee FFF7FEFF 		bl	shellPrint
 350:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 1441              		.loc 1 350 25
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 33


 1442 00f2 7868     		ldr	r0, [r7, #4]
 1443 00f4 FFF7FEFF 		bl	ec2x_reset
 351:FML/Src/EC2x.c ****                         step = 0;
 1444              		.loc 1 351 30
 1445 00f8 6E4B     		ldr	r3, .L95
 1446 00fa 0022     		movs	r2, #0
 1447 00fc 1A70     		strb	r2, [r3]
 1448 00fe 05E0     		b	.L69
 1449              	.L70:
 352:FML/Src/EC2x.c ****                     }
 353:FML/Src/EC2x.c ****                     else
 354:FML/Src/EC2x.c ****                         retry++;
 1450              		.loc 1 354 30
 1451 0100 6E4B     		ldr	r3, .L95+8
 1452 0102 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1453 0104 0133     		adds	r3, r3, #1
 1454 0106 DAB2     		uxtb	r2, r3
 1455 0108 6C4B     		ldr	r3, .L95+8
 1456 010a 1A70     		strb	r2, [r3]
 1457              	.L69:
 355:FML/Src/EC2x.c ****                 }
 356:FML/Src/EC2x.c ****                 Delay_ms(100);
 1458              		.loc 1 356 17
 1459 010c 6420     		movs	r0, #100
 1460 010e FFF7FEFF 		bl	Delay_ms
 357:FML/Src/EC2x.c ****             }
 358:FML/Src/EC2x.c ****             break;
 1461              		.loc 1 358 13
 1462 0112 F2E2     		b	.L56
 1463              	.L66:
 359:FML/Src/EC2x.c ****             case 1:
 360:FML/Src/EC2x.c ****             {
 361:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1464              		.loc 1 361 20
 1465 0114 674B     		ldr	r3, .L95
 1466 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1467 0118 1946     		mov	r1, r3
 1468 011a 674A     		ldr	r2, .L95+4
 1469 011c 0B46     		mov	r3, r1
 1470 011e 5B00     		lsls	r3, r3, #1
 1471 0120 0B44     		add	r3, r3, r1
 1472 0122 9B00     		lsls	r3, r3, #2
 1473 0124 1344     		add	r3, r3, r2
 1474 0126 1C68     		ldr	r4, [r3]
 1475              		.loc 1 361 66
 1476 0128 624B     		ldr	r3, .L95
 1477 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1478 012c 1946     		mov	r1, r3
 1479              		.loc 1 361 95
 1480 012e 624A     		ldr	r2, .L95+4
 1481 0130 0B46     		mov	r3, r1
 1482 0132 5B00     		lsls	r3, r3, #1
 1483 0134 0B44     		add	r3, r3, r1
 1484 0136 9B00     		lsls	r3, r3, #2
 1485 0138 1344     		add	r3, r3, r2
 1486 013a 1B68     		ldr	r3, [r3]
 1487              		.loc 1 361 66
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 34


 1488 013c 1846     		mov	r0, r3
 1489 013e FFF7FEFF 		bl	strlen
 1490 0142 0346     		mov	r3, r0
 1491              		.loc 1 361 20
 1492 0144 9AB2     		uxth	r2, r3
 1493 0146 5B4B     		ldr	r3, .L95
 1494 0148 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1495 014a 1846     		mov	r0, r3
 1496 014c 5A49     		ldr	r1, .L95+4
 1497 014e 0346     		mov	r3, r0
 1498 0150 5B00     		lsls	r3, r3, #1
 1499 0152 0344     		add	r3, r3, r0
 1500 0154 9B00     		lsls	r3, r3, #2
 1501 0156 0B44     		add	r3, r3, r1
 1502 0158 0433     		adds	r3, r3, #4
 1503 015a 1968     		ldr	r1, [r3]
 1504 015c 564B     		ldr	r3, .L95+4
 1505 015e 1B89     		ldrh	r3, [r3, #8]
 1506 0160 0093     		str	r3, [sp]
 1507 0162 0B46     		mov	r3, r1
 1508 0164 2146     		mov	r1, r4
 1509 0166 7868     		ldr	r0, [r7, #4]
 1510 0168 FFF7FEFF 		bl	ec2x_cmd_send
 1511 016c 0346     		mov	r3, r0
 1512              		.loc 1 361 19
 1513 016e 002B     		cmp	r3, #0
 1514 0170 09D0     		beq	.L71
 362:FML/Src/EC2x.c ****                 {    
 363:FML/Src/EC2x.c ****                     step++;
 1515              		.loc 1 363 25
 1516 0172 504B     		ldr	r3, .L95
 1517 0174 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1518 0176 0133     		adds	r3, r3, #1
 1519 0178 DAB2     		uxtb	r2, r3
 1520 017a 4E4B     		ldr	r3, .L95
 1521 017c 1A70     		strb	r2, [r3]
 364:FML/Src/EC2x.c ****                     retry = 0;
 1522              		.loc 1 364 27
 1523 017e 4F4B     		ldr	r3, .L95+8
 1524 0180 0022     		movs	r2, #0
 1525 0182 1A70     		strb	r2, [r3]
 1526 0184 2AE0     		b	.L72
 1527              	.L71:
 365:FML/Src/EC2x.c ****                 }
 366:FML/Src/EC2x.c ****                 else
 367:FML/Src/EC2x.c ****                 {
 368:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 1528              		.loc 1 368 46
 1529 0186 4B4B     		ldr	r3, .L95
 1530 0188 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1531 018a 1946     		mov	r1, r3
 1532 018c 4A4A     		ldr	r2, .L95+4
 1533 018e 0B46     		mov	r3, r1
 1534 0190 5B00     		lsls	r3, r3, #1
 1535 0192 0B44     		add	r3, r3, r1
 1536 0194 9B00     		lsls	r3, r3, #2
 1537 0196 1344     		add	r3, r3, r2
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 35


 1538 0198 0A33     		adds	r3, r3, #10
 1539 019a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1540              		.loc 1 368 59
 1541 019c 474B     		ldr	r3, .L95+8
 1542 019e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1543              		.loc 1 368 23
 1544 01a0 9A42     		cmp	r2, r3
 1545 01a2 15D2     		bcs	.L73
 369:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1546              		.loc 1 369 25
 1547 01a4 434B     		ldr	r3, .L95
 1548 01a6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1549 01a8 1946     		mov	r1, r3
 1550 01aa 434A     		ldr	r2, .L95+4
 1551 01ac 0B46     		mov	r3, r1
 1552 01ae 5B00     		lsls	r3, r3, #1
 1553 01b0 0B44     		add	r3, r3, r1
 1554 01b2 9B00     		lsls	r3, r3, #2
 1555 01b4 1344     		add	r3, r3, r2
 1556 01b6 1B68     		ldr	r3, [r3]
 1557 01b8 1A46     		mov	r2, r3
 1558 01ba 4149     		ldr	r1, .L95+12
 1559 01bc 4148     		ldr	r0, .L95+16
 1560 01be FFF7FEFF 		bl	shellPrint
 370:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 1561              		.loc 1 370 25
 1562 01c2 7868     		ldr	r0, [r7, #4]
 1563 01c4 FFF7FEFF 		bl	ec2x_reset
 371:FML/Src/EC2x.c ****                         step = 0;
 1564              		.loc 1 371 30
 1565 01c8 3A4B     		ldr	r3, .L95
 1566 01ca 0022     		movs	r2, #0
 1567 01cc 1A70     		strb	r2, [r3]
 1568 01ce 05E0     		b	.L72
 1569              	.L73:
 372:FML/Src/EC2x.c ****                     }
 373:FML/Src/EC2x.c ****                     else
 374:FML/Src/EC2x.c ****                         retry++;
 1570              		.loc 1 374 30
 1571 01d0 3A4B     		ldr	r3, .L95+8
 1572 01d2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1573 01d4 0133     		adds	r3, r3, #1
 1574 01d6 DAB2     		uxtb	r2, r3
 1575 01d8 384B     		ldr	r3, .L95+8
 1576 01da 1A70     		strb	r2, [r3]
 1577              	.L72:
 375:FML/Src/EC2x.c ****                 }
 376:FML/Src/EC2x.c ****                 Delay_ms(100);
 1578              		.loc 1 376 17
 1579 01dc 6420     		movs	r0, #100
 1580 01de FFF7FEFF 		bl	Delay_ms
 377:FML/Src/EC2x.c ****             }
 378:FML/Src/EC2x.c ****             break;
 1581              		.loc 1 378 13
 1582 01e2 8AE2     		b	.L56
 1583              	.L65:
 379:FML/Src/EC2x.c ****             case 2:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 36


 380:FML/Src/EC2x.c ****             {
 381:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1584              		.loc 1 381 20
 1585 01e4 334B     		ldr	r3, .L95
 1586 01e6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1587 01e8 1946     		mov	r1, r3
 1588 01ea 334A     		ldr	r2, .L95+4
 1589 01ec 0B46     		mov	r3, r1
 1590 01ee 5B00     		lsls	r3, r3, #1
 1591 01f0 0B44     		add	r3, r3, r1
 1592 01f2 9B00     		lsls	r3, r3, #2
 1593 01f4 1344     		add	r3, r3, r2
 1594 01f6 1C68     		ldr	r4, [r3]
 1595              		.loc 1 381 66
 1596 01f8 2E4B     		ldr	r3, .L95
 1597 01fa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1598 01fc 1946     		mov	r1, r3
 1599              		.loc 1 381 95
 1600 01fe 2E4A     		ldr	r2, .L95+4
 1601 0200 0B46     		mov	r3, r1
 1602 0202 5B00     		lsls	r3, r3, #1
 1603 0204 0B44     		add	r3, r3, r1
 1604 0206 9B00     		lsls	r3, r3, #2
 1605 0208 1344     		add	r3, r3, r2
 1606 020a 1B68     		ldr	r3, [r3]
 1607              		.loc 1 381 66
 1608 020c 1846     		mov	r0, r3
 1609 020e FFF7FEFF 		bl	strlen
 1610 0212 0346     		mov	r3, r0
 1611              		.loc 1 381 20
 1612 0214 9AB2     		uxth	r2, r3
 1613 0216 274B     		ldr	r3, .L95
 1614 0218 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1615 021a 1846     		mov	r0, r3
 1616 021c 2649     		ldr	r1, .L95+4
 1617 021e 0346     		mov	r3, r0
 1618 0220 5B00     		lsls	r3, r3, #1
 1619 0222 0344     		add	r3, r3, r0
 1620 0224 9B00     		lsls	r3, r3, #2
 1621 0226 0B44     		add	r3, r3, r1
 1622 0228 0433     		adds	r3, r3, #4
 1623 022a 1968     		ldr	r1, [r3]
 1624 022c 224B     		ldr	r3, .L95+4
 1625 022e 1B89     		ldrh	r3, [r3, #8]
 1626 0230 0093     		str	r3, [sp]
 1627 0232 0B46     		mov	r3, r1
 1628 0234 2146     		mov	r1, r4
 1629 0236 7868     		ldr	r0, [r7, #4]
 1630 0238 FFF7FEFF 		bl	ec2x_cmd_send
 1631 023c 0346     		mov	r3, r0
 1632              		.loc 1 381 19
 1633 023e 002B     		cmp	r3, #0
 1634 0240 09D0     		beq	.L74
 382:FML/Src/EC2x.c ****                 {    
 383:FML/Src/EC2x.c ****                     step++;
 1635              		.loc 1 383 25
 1636 0242 1C4B     		ldr	r3, .L95
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 37


 1637 0244 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1638 0246 0133     		adds	r3, r3, #1
 1639 0248 DAB2     		uxtb	r2, r3
 1640 024a 1A4B     		ldr	r3, .L95
 1641 024c 1A70     		strb	r2, [r3]
 384:FML/Src/EC2x.c ****                     retry = 0;
 1642              		.loc 1 384 27
 1643 024e 1B4B     		ldr	r3, .L95+8
 1644 0250 0022     		movs	r2, #0
 1645 0252 1A70     		strb	r2, [r3]
 1646 0254 2AE0     		b	.L75
 1647              	.L74:
 385:FML/Src/EC2x.c ****                 }
 386:FML/Src/EC2x.c ****                 else
 387:FML/Src/EC2x.c ****                 {
 388:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 1648              		.loc 1 388 46
 1649 0256 174B     		ldr	r3, .L95
 1650 0258 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1651 025a 1946     		mov	r1, r3
 1652 025c 164A     		ldr	r2, .L95+4
 1653 025e 0B46     		mov	r3, r1
 1654 0260 5B00     		lsls	r3, r3, #1
 1655 0262 0B44     		add	r3, r3, r1
 1656 0264 9B00     		lsls	r3, r3, #2
 1657 0266 1344     		add	r3, r3, r2
 1658 0268 0A33     		adds	r3, r3, #10
 1659 026a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1660              		.loc 1 388 59
 1661 026c 134B     		ldr	r3, .L95+8
 1662 026e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1663              		.loc 1 388 23
 1664 0270 9A42     		cmp	r2, r3
 1665 0272 15D2     		bcs	.L76
 389:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1666              		.loc 1 389 25
 1667 0274 0F4B     		ldr	r3, .L95
 1668 0276 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1669 0278 1946     		mov	r1, r3
 1670 027a 0F4A     		ldr	r2, .L95+4
 1671 027c 0B46     		mov	r3, r1
 1672 027e 5B00     		lsls	r3, r3, #1
 1673 0280 0B44     		add	r3, r3, r1
 1674 0282 9B00     		lsls	r3, r3, #2
 1675 0284 1344     		add	r3, r3, r2
 1676 0286 1B68     		ldr	r3, [r3]
 1677 0288 1A46     		mov	r2, r3
 1678 028a 0D49     		ldr	r1, .L95+12
 1679 028c 0D48     		ldr	r0, .L95+16
 1680 028e FFF7FEFF 		bl	shellPrint
 390:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 1681              		.loc 1 390 25
 1682 0292 7868     		ldr	r0, [r7, #4]
 1683 0294 FFF7FEFF 		bl	ec2x_reset
 391:FML/Src/EC2x.c ****                         step = 0;
 1684              		.loc 1 391 30
 1685 0298 064B     		ldr	r3, .L95
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 38


 1686 029a 0022     		movs	r2, #0
 1687 029c 1A70     		strb	r2, [r3]
 1688 029e 05E0     		b	.L75
 1689              	.L76:
 392:FML/Src/EC2x.c ****                     }
 393:FML/Src/EC2x.c ****                     else
 394:FML/Src/EC2x.c ****                         retry++;
 1690              		.loc 1 394 30
 1691 02a0 064B     		ldr	r3, .L95+8
 1692 02a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1693 02a4 0133     		adds	r3, r3, #1
 1694 02a6 DAB2     		uxtb	r2, r3
 1695 02a8 044B     		ldr	r3, .L95+8
 1696 02aa 1A70     		strb	r2, [r3]
 1697              	.L75:
 395:FML/Src/EC2x.c ****                 }
 396:FML/Src/EC2x.c ****                 Delay_ms(100);
 1698              		.loc 1 396 17
 1699 02ac 6420     		movs	r0, #100
 1700 02ae FFF7FEFF 		bl	Delay_ms
 397:FML/Src/EC2x.c ****             }
 398:FML/Src/EC2x.c ****             break;
 1701              		.loc 1 398 13
 1702 02b2 22E2     		b	.L56
 1703              	.L96:
 1704              		.align	2
 1705              	.L95:
 1706 02b4 00000000 		.word	step.1
 1707 02b8 00000000 		.word	connectmsg_queue
 1708 02bc 00000000 		.word	retry.0
 1709 02c0 D0000000 		.word	.LC16
 1710 02c4 00000000 		.word	shell
 1711              	.L64:
 399:FML/Src/EC2x.c ****             case 3:
 400:FML/Src/EC2x.c ****             {
 401:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1712              		.loc 1 401 20
 1713 02c8 9B4B     		ldr	r3, .L97
 1714 02ca 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1715 02cc 1946     		mov	r1, r3
 1716 02ce 9B4A     		ldr	r2, .L97+4
 1717 02d0 0B46     		mov	r3, r1
 1718 02d2 5B00     		lsls	r3, r3, #1
 1719 02d4 0B44     		add	r3, r3, r1
 1720 02d6 9B00     		lsls	r3, r3, #2
 1721 02d8 1344     		add	r3, r3, r2
 1722 02da 1C68     		ldr	r4, [r3]
 1723              		.loc 1 401 66
 1724 02dc 964B     		ldr	r3, .L97
 1725 02de 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1726 02e0 1946     		mov	r1, r3
 1727              		.loc 1 401 95
 1728 02e2 964A     		ldr	r2, .L97+4
 1729 02e4 0B46     		mov	r3, r1
 1730 02e6 5B00     		lsls	r3, r3, #1
 1731 02e8 0B44     		add	r3, r3, r1
 1732 02ea 9B00     		lsls	r3, r3, #2
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 39


 1733 02ec 1344     		add	r3, r3, r2
 1734 02ee 1B68     		ldr	r3, [r3]
 1735              		.loc 1 401 66
 1736 02f0 1846     		mov	r0, r3
 1737 02f2 FFF7FEFF 		bl	strlen
 1738 02f6 0346     		mov	r3, r0
 1739              		.loc 1 401 20
 1740 02f8 9AB2     		uxth	r2, r3
 1741 02fa 8F4B     		ldr	r3, .L97
 1742 02fc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1743 02fe 1846     		mov	r0, r3
 1744 0300 8E49     		ldr	r1, .L97+4
 1745 0302 0346     		mov	r3, r0
 1746 0304 5B00     		lsls	r3, r3, #1
 1747 0306 0344     		add	r3, r3, r0
 1748 0308 9B00     		lsls	r3, r3, #2
 1749 030a 0B44     		add	r3, r3, r1
 1750 030c 0433     		adds	r3, r3, #4
 1751 030e 1968     		ldr	r1, [r3]
 1752 0310 8A4B     		ldr	r3, .L97+4
 1753 0312 1B89     		ldrh	r3, [r3, #8]
 1754 0314 0093     		str	r3, [sp]
 1755 0316 0B46     		mov	r3, r1
 1756 0318 2146     		mov	r1, r4
 1757 031a 7868     		ldr	r0, [r7, #4]
 1758 031c FFF7FEFF 		bl	ec2x_cmd_send
 1759 0320 0346     		mov	r3, r0
 1760              		.loc 1 401 19
 1761 0322 002B     		cmp	r3, #0
 1762 0324 09D0     		beq	.L77
 402:FML/Src/EC2x.c ****                 {    
 403:FML/Src/EC2x.c ****                     step += 2;
 1763              		.loc 1 403 26
 1764 0326 844B     		ldr	r3, .L97
 1765 0328 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1766 032a 0233     		adds	r3, r3, #2
 1767 032c DAB2     		uxtb	r2, r3
 1768 032e 824B     		ldr	r3, .L97
 1769 0330 1A70     		strb	r2, [r3]
 404:FML/Src/EC2x.c ****                     retry = 0;
 1770              		.loc 1 404 27
 1771 0332 834B     		ldr	r3, .L97+8
 1772 0334 0022     		movs	r2, #0
 1773 0336 1A70     		strb	r2, [r3]
 1774 0338 2AE0     		b	.L78
 1775              	.L77:
 405:FML/Src/EC2x.c ****                 }
 406:FML/Src/EC2x.c ****                 else
 407:FML/Src/EC2x.c ****                 {
 408:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 1776              		.loc 1 408 46
 1777 033a 7F4B     		ldr	r3, .L97
 1778 033c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1779 033e 1946     		mov	r1, r3
 1780 0340 7E4A     		ldr	r2, .L97+4
 1781 0342 0B46     		mov	r3, r1
 1782 0344 5B00     		lsls	r3, r3, #1
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 40


 1783 0346 0B44     		add	r3, r3, r1
 1784 0348 9B00     		lsls	r3, r3, #2
 1785 034a 1344     		add	r3, r3, r2
 1786 034c 0A33     		adds	r3, r3, #10
 1787 034e 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1788              		.loc 1 408 59
 1789 0350 7B4B     		ldr	r3, .L97+8
 1790 0352 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1791              		.loc 1 408 23
 1792 0354 9A42     		cmp	r2, r3
 1793 0356 15D2     		bcs	.L79
 409:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1794              		.loc 1 409 25
 1795 0358 774B     		ldr	r3, .L97
 1796 035a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1797 035c 1946     		mov	r1, r3
 1798 035e 774A     		ldr	r2, .L97+4
 1799 0360 0B46     		mov	r3, r1
 1800 0362 5B00     		lsls	r3, r3, #1
 1801 0364 0B44     		add	r3, r3, r1
 1802 0366 9B00     		lsls	r3, r3, #2
 1803 0368 1344     		add	r3, r3, r2
 1804 036a 1B68     		ldr	r3, [r3]
 1805 036c 1A46     		mov	r2, r3
 1806 036e 7549     		ldr	r1, .L97+12
 1807 0370 7548     		ldr	r0, .L97+16
 1808 0372 FFF7FEFF 		bl	shellPrint
 410:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 1809              		.loc 1 410 25
 1810 0376 7868     		ldr	r0, [r7, #4]
 1811 0378 FFF7FEFF 		bl	ec2x_reset
 411:FML/Src/EC2x.c ****                         step = 0;
 1812              		.loc 1 411 30
 1813 037c 6E4B     		ldr	r3, .L97
 1814 037e 0022     		movs	r2, #0
 1815 0380 1A70     		strb	r2, [r3]
 1816 0382 05E0     		b	.L78
 1817              	.L79:
 412:FML/Src/EC2x.c ****                     }
 413:FML/Src/EC2x.c ****                     else
 414:FML/Src/EC2x.c ****                         retry++;
 1818              		.loc 1 414 30
 1819 0384 6E4B     		ldr	r3, .L97+8
 1820 0386 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1821 0388 0133     		adds	r3, r3, #1
 1822 038a DAB2     		uxtb	r2, r3
 1823 038c 6C4B     		ldr	r3, .L97+8
 1824 038e 1A70     		strb	r2, [r3]
 1825              	.L78:
 415:FML/Src/EC2x.c ****                 }
 416:FML/Src/EC2x.c ****                 Delay_ms(100);                
 1826              		.loc 1 416 17
 1827 0390 6420     		movs	r0, #100
 1828 0392 FFF7FEFF 		bl	Delay_ms
 417:FML/Src/EC2x.c ****             }
 418:FML/Src/EC2x.c ****             break;
 1829              		.loc 1 418 13
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 41


 1830 0396 B0E1     		b	.L56
 1831              	.L63:
 419:FML/Src/EC2x.c ****             case 4:
 420:FML/Src/EC2x.c ****             {
 421:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1832              		.loc 1 421 20
 1833 0398 674B     		ldr	r3, .L97
 1834 039a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1835 039c 1946     		mov	r1, r3
 1836 039e 674A     		ldr	r2, .L97+4
 1837 03a0 0B46     		mov	r3, r1
 1838 03a2 5B00     		lsls	r3, r3, #1
 1839 03a4 0B44     		add	r3, r3, r1
 1840 03a6 9B00     		lsls	r3, r3, #2
 1841 03a8 1344     		add	r3, r3, r2
 1842 03aa 1C68     		ldr	r4, [r3]
 1843              		.loc 1 421 66
 1844 03ac 624B     		ldr	r3, .L97
 1845 03ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1846 03b0 1946     		mov	r1, r3
 1847              		.loc 1 421 95
 1848 03b2 624A     		ldr	r2, .L97+4
 1849 03b4 0B46     		mov	r3, r1
 1850 03b6 5B00     		lsls	r3, r3, #1
 1851 03b8 0B44     		add	r3, r3, r1
 1852 03ba 9B00     		lsls	r3, r3, #2
 1853 03bc 1344     		add	r3, r3, r2
 1854 03be 1B68     		ldr	r3, [r3]
 1855              		.loc 1 421 66
 1856 03c0 1846     		mov	r0, r3
 1857 03c2 FFF7FEFF 		bl	strlen
 1858 03c6 0346     		mov	r3, r0
 1859              		.loc 1 421 20
 1860 03c8 9AB2     		uxth	r2, r3
 1861 03ca 5B4B     		ldr	r3, .L97
 1862 03cc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1863 03ce 1846     		mov	r0, r3
 1864 03d0 5A49     		ldr	r1, .L97+4
 1865 03d2 0346     		mov	r3, r0
 1866 03d4 5B00     		lsls	r3, r3, #1
 1867 03d6 0344     		add	r3, r3, r0
 1868 03d8 9B00     		lsls	r3, r3, #2
 1869 03da 0B44     		add	r3, r3, r1
 1870 03dc 0433     		adds	r3, r3, #4
 1871 03de 1968     		ldr	r1, [r3]
 1872 03e0 564B     		ldr	r3, .L97+4
 1873 03e2 1B89     		ldrh	r3, [r3, #8]
 1874 03e4 0093     		str	r3, [sp]
 1875 03e6 0B46     		mov	r3, r1
 1876 03e8 2146     		mov	r1, r4
 1877 03ea 7868     		ldr	r0, [r7, #4]
 1878 03ec FFF7FEFF 		bl	ec2x_cmd_send
 1879 03f0 0346     		mov	r3, r0
 1880              		.loc 1 421 19
 1881 03f2 002B     		cmp	r3, #0
 1882 03f4 09D0     		beq	.L80
 422:FML/Src/EC2x.c ****                 {    
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 42


 423:FML/Src/EC2x.c ****                     step++;
 1883              		.loc 1 423 25
 1884 03f6 504B     		ldr	r3, .L97
 1885 03f8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1886 03fa 0133     		adds	r3, r3, #1
 1887 03fc DAB2     		uxtb	r2, r3
 1888 03fe 4E4B     		ldr	r3, .L97
 1889 0400 1A70     		strb	r2, [r3]
 424:FML/Src/EC2x.c ****                     retry = 0;
 1890              		.loc 1 424 27
 1891 0402 4F4B     		ldr	r3, .L97+8
 1892 0404 0022     		movs	r2, #0
 1893 0406 1A70     		strb	r2, [r3]
 1894 0408 2AE0     		b	.L81
 1895              	.L80:
 425:FML/Src/EC2x.c ****                 }
 426:FML/Src/EC2x.c ****                 else
 427:FML/Src/EC2x.c ****                 {
 428:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 1896              		.loc 1 428 46
 1897 040a 4B4B     		ldr	r3, .L97
 1898 040c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1899 040e 1946     		mov	r1, r3
 1900 0410 4A4A     		ldr	r2, .L97+4
 1901 0412 0B46     		mov	r3, r1
 1902 0414 5B00     		lsls	r3, r3, #1
 1903 0416 0B44     		add	r3, r3, r1
 1904 0418 9B00     		lsls	r3, r3, #2
 1905 041a 1344     		add	r3, r3, r2
 1906 041c 0A33     		adds	r3, r3, #10
 1907 041e 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1908              		.loc 1 428 59
 1909 0420 474B     		ldr	r3, .L97+8
 1910 0422 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1911              		.loc 1 428 23
 1912 0424 9A42     		cmp	r2, r3
 1913 0426 15D2     		bcs	.L82
 429:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 1914              		.loc 1 429 25
 1915 0428 434B     		ldr	r3, .L97
 1916 042a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1917 042c 1946     		mov	r1, r3
 1918 042e 434A     		ldr	r2, .L97+4
 1919 0430 0B46     		mov	r3, r1
 1920 0432 5B00     		lsls	r3, r3, #1
 1921 0434 0B44     		add	r3, r3, r1
 1922 0436 9B00     		lsls	r3, r3, #2
 1923 0438 1344     		add	r3, r3, r2
 1924 043a 1B68     		ldr	r3, [r3]
 1925 043c 1A46     		mov	r2, r3
 1926 043e 4149     		ldr	r1, .L97+12
 1927 0440 4148     		ldr	r0, .L97+16
 1928 0442 FFF7FEFF 		bl	shellPrint
 430:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 1929              		.loc 1 430 25
 1930 0446 7868     		ldr	r0, [r7, #4]
 1931 0448 FFF7FEFF 		bl	ec2x_reset
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 43


 431:FML/Src/EC2x.c ****                         step = 0;
 1932              		.loc 1 431 30
 1933 044c 3A4B     		ldr	r3, .L97
 1934 044e 0022     		movs	r2, #0
 1935 0450 1A70     		strb	r2, [r3]
 1936 0452 05E0     		b	.L81
 1937              	.L82:
 432:FML/Src/EC2x.c ****                     }
 433:FML/Src/EC2x.c ****                     else
 434:FML/Src/EC2x.c ****                         retry++;
 1938              		.loc 1 434 30
 1939 0454 3A4B     		ldr	r3, .L97+8
 1940 0456 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1941 0458 0133     		adds	r3, r3, #1
 1942 045a DAB2     		uxtb	r2, r3
 1943 045c 384B     		ldr	r3, .L97+8
 1944 045e 1A70     		strb	r2, [r3]
 1945              	.L81:
 435:FML/Src/EC2x.c ****                 }
 436:FML/Src/EC2x.c ****                 Delay_ms(100);               
 1946              		.loc 1 436 17
 1947 0460 6420     		movs	r0, #100
 1948 0462 FFF7FEFF 		bl	Delay_ms
 437:FML/Src/EC2x.c ****             }
 438:FML/Src/EC2x.c ****             break;
 1949              		.loc 1 438 13
 1950 0466 48E1     		b	.L56
 1951              	.L62:
 439:FML/Src/EC2x.c ****             case 5:
 440:FML/Src/EC2x.c ****             {
 441:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 1952              		.loc 1 441 20
 1953 0468 334B     		ldr	r3, .L97
 1954 046a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1955 046c 1946     		mov	r1, r3
 1956 046e 334A     		ldr	r2, .L97+4
 1957 0470 0B46     		mov	r3, r1
 1958 0472 5B00     		lsls	r3, r3, #1
 1959 0474 0B44     		add	r3, r3, r1
 1960 0476 9B00     		lsls	r3, r3, #2
 1961 0478 1344     		add	r3, r3, r2
 1962 047a 1C68     		ldr	r4, [r3]
 1963              		.loc 1 441 66
 1964 047c 2E4B     		ldr	r3, .L97
 1965 047e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1966 0480 1946     		mov	r1, r3
 1967              		.loc 1 441 95
 1968 0482 2E4A     		ldr	r2, .L97+4
 1969 0484 0B46     		mov	r3, r1
 1970 0486 5B00     		lsls	r3, r3, #1
 1971 0488 0B44     		add	r3, r3, r1
 1972 048a 9B00     		lsls	r3, r3, #2
 1973 048c 1344     		add	r3, r3, r2
 1974 048e 1B68     		ldr	r3, [r3]
 1975              		.loc 1 441 66
 1976 0490 1846     		mov	r0, r3
 1977 0492 FFF7FEFF 		bl	strlen
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 44


 1978 0496 0346     		mov	r3, r0
 1979              		.loc 1 441 20
 1980 0498 9AB2     		uxth	r2, r3
 1981 049a 274B     		ldr	r3, .L97
 1982 049c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1983 049e 1846     		mov	r0, r3
 1984 04a0 2649     		ldr	r1, .L97+4
 1985 04a2 0346     		mov	r3, r0
 1986 04a4 5B00     		lsls	r3, r3, #1
 1987 04a6 0344     		add	r3, r3, r0
 1988 04a8 9B00     		lsls	r3, r3, #2
 1989 04aa 0B44     		add	r3, r3, r1
 1990 04ac 0433     		adds	r3, r3, #4
 1991 04ae 1968     		ldr	r1, [r3]
 1992 04b0 224B     		ldr	r3, .L97+4
 1993 04b2 1B89     		ldrh	r3, [r3, #8]
 1994 04b4 0093     		str	r3, [sp]
 1995 04b6 0B46     		mov	r3, r1
 1996 04b8 2146     		mov	r1, r4
 1997 04ba 7868     		ldr	r0, [r7, #4]
 1998 04bc FFF7FEFF 		bl	ec2x_cmd_send
 1999 04c0 0346     		mov	r3, r0
 2000              		.loc 1 441 19
 2001 04c2 002B     		cmp	r3, #0
 2002 04c4 09D0     		beq	.L83
 442:FML/Src/EC2x.c ****                 {    
 443:FML/Src/EC2x.c ****                     step++;
 2003              		.loc 1 443 25
 2004 04c6 1C4B     		ldr	r3, .L97
 2005 04c8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2006 04ca 0133     		adds	r3, r3, #1
 2007 04cc DAB2     		uxtb	r2, r3
 2008 04ce 1A4B     		ldr	r3, .L97
 2009 04d0 1A70     		strb	r2, [r3]
 444:FML/Src/EC2x.c ****                     retry = 0;
 2010              		.loc 1 444 27
 2011 04d2 1B4B     		ldr	r3, .L97+8
 2012 04d4 0022     		movs	r2, #0
 2013 04d6 1A70     		strb	r2, [r3]
 2014 04d8 2AE0     		b	.L84
 2015              	.L83:
 445:FML/Src/EC2x.c ****                 }
 446:FML/Src/EC2x.c ****                 else
 447:FML/Src/EC2x.c ****                 {
 448:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 2016              		.loc 1 448 46
 2017 04da 174B     		ldr	r3, .L97
 2018 04dc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2019 04de 1946     		mov	r1, r3
 2020 04e0 164A     		ldr	r2, .L97+4
 2021 04e2 0B46     		mov	r3, r1
 2022 04e4 5B00     		lsls	r3, r3, #1
 2023 04e6 0B44     		add	r3, r3, r1
 2024 04e8 9B00     		lsls	r3, r3, #2
 2025 04ea 1344     		add	r3, r3, r2
 2026 04ec 0A33     		adds	r3, r3, #10
 2027 04ee 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 45


 2028              		.loc 1 448 59
 2029 04f0 134B     		ldr	r3, .L97+8
 2030 04f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2031              		.loc 1 448 23
 2032 04f4 9A42     		cmp	r2, r3
 2033 04f6 15D2     		bcs	.L85
 449:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 2034              		.loc 1 449 25
 2035 04f8 0F4B     		ldr	r3, .L97
 2036 04fa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2037 04fc 1946     		mov	r1, r3
 2038 04fe 0F4A     		ldr	r2, .L97+4
 2039 0500 0B46     		mov	r3, r1
 2040 0502 5B00     		lsls	r3, r3, #1
 2041 0504 0B44     		add	r3, r3, r1
 2042 0506 9B00     		lsls	r3, r3, #2
 2043 0508 1344     		add	r3, r3, r2
 2044 050a 1B68     		ldr	r3, [r3]
 2045 050c 1A46     		mov	r2, r3
 2046 050e 0D49     		ldr	r1, .L97+12
 2047 0510 0D48     		ldr	r0, .L97+16
 2048 0512 FFF7FEFF 		bl	shellPrint
 450:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 2049              		.loc 1 450 25
 2050 0516 7868     		ldr	r0, [r7, #4]
 2051 0518 FFF7FEFF 		bl	ec2x_reset
 451:FML/Src/EC2x.c ****                         step = 0;
 2052              		.loc 1 451 30
 2053 051c 064B     		ldr	r3, .L97
 2054 051e 0022     		movs	r2, #0
 2055 0520 1A70     		strb	r2, [r3]
 2056 0522 05E0     		b	.L84
 2057              	.L85:
 452:FML/Src/EC2x.c ****                     }
 453:FML/Src/EC2x.c ****                     else
 454:FML/Src/EC2x.c ****                         retry++;
 2058              		.loc 1 454 30
 2059 0524 064B     		ldr	r3, .L97+8
 2060 0526 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2061 0528 0133     		adds	r3, r3, #1
 2062 052a DAB2     		uxtb	r2, r3
 2063 052c 044B     		ldr	r3, .L97+8
 2064 052e 1A70     		strb	r2, [r3]
 2065              	.L84:
 455:FML/Src/EC2x.c ****                 }
 456:FML/Src/EC2x.c ****                 Delay_ms(100);                
 2066              		.loc 1 456 17
 2067 0530 6420     		movs	r0, #100
 2068 0532 FFF7FEFF 		bl	Delay_ms
 457:FML/Src/EC2x.c ****             }
 458:FML/Src/EC2x.c ****             break; 
 2069              		.loc 1 458 13
 2070 0536 E0E0     		b	.L56
 2071              	.L98:
 2072              		.align	2
 2073              	.L97:
 2074 0538 00000000 		.word	step.1
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 46


 2075 053c 00000000 		.word	connectmsg_queue
 2076 0540 00000000 		.word	retry.0
 2077 0544 D0000000 		.word	.LC16
 2078 0548 00000000 		.word	shell
 2079              	.L61:
 459:FML/Src/EC2x.c ****             case 6:
 460:FML/Src/EC2x.c ****             {
 461:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 2080              		.loc 1 461 20
 2081 054c 6F4B     		ldr	r3, .L99
 2082 054e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2083 0550 1946     		mov	r1, r3
 2084 0552 6F4A     		ldr	r2, .L99+4
 2085 0554 0B46     		mov	r3, r1
 2086 0556 5B00     		lsls	r3, r3, #1
 2087 0558 0B44     		add	r3, r3, r1
 2088 055a 9B00     		lsls	r3, r3, #2
 2089 055c 1344     		add	r3, r3, r2
 2090 055e 1C68     		ldr	r4, [r3]
 2091              		.loc 1 461 66
 2092 0560 6A4B     		ldr	r3, .L99
 2093 0562 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2094 0564 1946     		mov	r1, r3
 2095              		.loc 1 461 95
 2096 0566 6A4A     		ldr	r2, .L99+4
 2097 0568 0B46     		mov	r3, r1
 2098 056a 5B00     		lsls	r3, r3, #1
 2099 056c 0B44     		add	r3, r3, r1
 2100 056e 9B00     		lsls	r3, r3, #2
 2101 0570 1344     		add	r3, r3, r2
 2102 0572 1B68     		ldr	r3, [r3]
 2103              		.loc 1 461 66
 2104 0574 1846     		mov	r0, r3
 2105 0576 FFF7FEFF 		bl	strlen
 2106 057a 0346     		mov	r3, r0
 2107              		.loc 1 461 20
 2108 057c 9AB2     		uxth	r2, r3
 2109 057e 634B     		ldr	r3, .L99
 2110 0580 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2111 0582 1846     		mov	r0, r3
 2112 0584 6249     		ldr	r1, .L99+4
 2113 0586 0346     		mov	r3, r0
 2114 0588 5B00     		lsls	r3, r3, #1
 2115 058a 0344     		add	r3, r3, r0
 2116 058c 9B00     		lsls	r3, r3, #2
 2117 058e 0B44     		add	r3, r3, r1
 2118 0590 0433     		adds	r3, r3, #4
 2119 0592 1968     		ldr	r1, [r3]
 2120 0594 5E4B     		ldr	r3, .L99+4
 2121 0596 1B89     		ldrh	r3, [r3, #8]
 2122 0598 0093     		str	r3, [sp]
 2123 059a 0B46     		mov	r3, r1
 2124 059c 2146     		mov	r1, r4
 2125 059e 7868     		ldr	r0, [r7, #4]
 2126 05a0 FFF7FEFF 		bl	ec2x_cmd_send
 2127 05a4 0346     		mov	r3, r0
 2128              		.loc 1 461 19
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 47


 2129 05a6 002B     		cmp	r3, #0
 2130 05a8 09D0     		beq	.L86
 462:FML/Src/EC2x.c ****                 {    
 463:FML/Src/EC2x.c ****                     step++;
 2131              		.loc 1 463 25
 2132 05aa 584B     		ldr	r3, .L99
 2133 05ac 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2134 05ae 0133     		adds	r3, r3, #1
 2135 05b0 DAB2     		uxtb	r2, r3
 2136 05b2 564B     		ldr	r3, .L99
 2137 05b4 1A70     		strb	r2, [r3]
 464:FML/Src/EC2x.c ****                     retry = 0;
 2138              		.loc 1 464 27
 2139 05b6 574B     		ldr	r3, .L99+8
 2140 05b8 0022     		movs	r2, #0
 2141 05ba 1A70     		strb	r2, [r3]
 2142 05bc 2AE0     		b	.L87
 2143              	.L86:
 465:FML/Src/EC2x.c ****                 }
 466:FML/Src/EC2x.c ****                 else
 467:FML/Src/EC2x.c ****                 {
 468:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 2144              		.loc 1 468 46
 2145 05be 534B     		ldr	r3, .L99
 2146 05c0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2147 05c2 1946     		mov	r1, r3
 2148 05c4 524A     		ldr	r2, .L99+4
 2149 05c6 0B46     		mov	r3, r1
 2150 05c8 5B00     		lsls	r3, r3, #1
 2151 05ca 0B44     		add	r3, r3, r1
 2152 05cc 9B00     		lsls	r3, r3, #2
 2153 05ce 1344     		add	r3, r3, r2
 2154 05d0 0A33     		adds	r3, r3, #10
 2155 05d2 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2156              		.loc 1 468 59
 2157 05d4 4F4B     		ldr	r3, .L99+8
 2158 05d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2159              		.loc 1 468 23
 2160 05d8 9A42     		cmp	r2, r3
 2161 05da 15D2     		bcs	.L88
 469:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 2162              		.loc 1 469 25
 2163 05dc 4B4B     		ldr	r3, .L99
 2164 05de 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2165 05e0 1946     		mov	r1, r3
 2166 05e2 4B4A     		ldr	r2, .L99+4
 2167 05e4 0B46     		mov	r3, r1
 2168 05e6 5B00     		lsls	r3, r3, #1
 2169 05e8 0B44     		add	r3, r3, r1
 2170 05ea 9B00     		lsls	r3, r3, #2
 2171 05ec 1344     		add	r3, r3, r2
 2172 05ee 1B68     		ldr	r3, [r3]
 2173 05f0 1A46     		mov	r2, r3
 2174 05f2 4949     		ldr	r1, .L99+12
 2175 05f4 4948     		ldr	r0, .L99+16
 2176 05f6 FFF7FEFF 		bl	shellPrint
 470:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 48


 2177              		.loc 1 470 25
 2178 05fa 7868     		ldr	r0, [r7, #4]
 2179 05fc FFF7FEFF 		bl	ec2x_reset
 471:FML/Src/EC2x.c ****                         step = 0;
 2180              		.loc 1 471 30
 2181 0600 424B     		ldr	r3, .L99
 2182 0602 0022     		movs	r2, #0
 2183 0604 1A70     		strb	r2, [r3]
 2184 0606 05E0     		b	.L87
 2185              	.L88:
 472:FML/Src/EC2x.c ****                     }
 473:FML/Src/EC2x.c ****                     else
 474:FML/Src/EC2x.c ****                         retry++;
 2186              		.loc 1 474 30
 2187 0608 424B     		ldr	r3, .L99+8
 2188 060a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2189 060c 0133     		adds	r3, r3, #1
 2190 060e DAB2     		uxtb	r2, r3
 2191 0610 404B     		ldr	r3, .L99+8
 2192 0612 1A70     		strb	r2, [r3]
 2193              	.L87:
 475:FML/Src/EC2x.c ****                 }
 476:FML/Src/EC2x.c ****                 Delay_ms(100);
 2194              		.loc 1 476 17
 2195 0614 6420     		movs	r0, #100
 2196 0616 FFF7FEFF 		bl	Delay_ms
 477:FML/Src/EC2x.c ****             }
 478:FML/Src/EC2x.c ****             break; 
 2197              		.loc 1 478 13
 2198 061a 6EE0     		b	.L56
 2199              	.L60:
 479:FML/Src/EC2x.c ****             case 7:
 480:FML/Src/EC2x.c ****             {
 481:FML/Src/EC2x.c ****                 if(ec2x_cmd_send(fd,connectmsg_queue[step].txmsg,strlen(connectmsg_queue[step].txms
 2200              		.loc 1 481 20
 2201 061c 3B4B     		ldr	r3, .L99
 2202 061e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2203 0620 1946     		mov	r1, r3
 2204 0622 3B4A     		ldr	r2, .L99+4
 2205 0624 0B46     		mov	r3, r1
 2206 0626 5B00     		lsls	r3, r3, #1
 2207 0628 0B44     		add	r3, r3, r1
 2208 062a 9B00     		lsls	r3, r3, #2
 2209 062c 1344     		add	r3, r3, r2
 2210 062e 1C68     		ldr	r4, [r3]
 2211              		.loc 1 481 66
 2212 0630 364B     		ldr	r3, .L99
 2213 0632 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2214 0634 1946     		mov	r1, r3
 2215              		.loc 1 481 95
 2216 0636 364A     		ldr	r2, .L99+4
 2217 0638 0B46     		mov	r3, r1
 2218 063a 5B00     		lsls	r3, r3, #1
 2219 063c 0B44     		add	r3, r3, r1
 2220 063e 9B00     		lsls	r3, r3, #2
 2221 0640 1344     		add	r3, r3, r2
 2222 0642 1B68     		ldr	r3, [r3]
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 49


 2223              		.loc 1 481 66
 2224 0644 1846     		mov	r0, r3
 2225 0646 FFF7FEFF 		bl	strlen
 2226 064a 0346     		mov	r3, r0
 2227              		.loc 1 481 20
 2228 064c 9AB2     		uxth	r2, r3
 2229 064e 2F4B     		ldr	r3, .L99
 2230 0650 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2231 0652 1846     		mov	r0, r3
 2232 0654 2E49     		ldr	r1, .L99+4
 2233 0656 0346     		mov	r3, r0
 2234 0658 5B00     		lsls	r3, r3, #1
 2235 065a 0344     		add	r3, r3, r0
 2236 065c 9B00     		lsls	r3, r3, #2
 2237 065e 0B44     		add	r3, r3, r1
 2238 0660 0433     		adds	r3, r3, #4
 2239 0662 1968     		ldr	r1, [r3]
 2240 0664 2A4B     		ldr	r3, .L99+4
 2241 0666 1B89     		ldrh	r3, [r3, #8]
 2242 0668 0093     		str	r3, [sp]
 2243 066a 0B46     		mov	r3, r1
 2244 066c 2146     		mov	r1, r4
 2245 066e 7868     		ldr	r0, [r7, #4]
 2246 0670 FFF7FEFF 		bl	ec2x_cmd_send
 2247 0674 0346     		mov	r3, r0
 2248              		.loc 1 481 19
 2249 0676 002B     		cmp	r3, #0
 2250 0678 09D0     		beq	.L89
 482:FML/Src/EC2x.c ****                 {    
 483:FML/Src/EC2x.c ****                     step++;
 2251              		.loc 1 483 25
 2252 067a 244B     		ldr	r3, .L99
 2253 067c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2254 067e 0133     		adds	r3, r3, #1
 2255 0680 DAB2     		uxtb	r2, r3
 2256 0682 224B     		ldr	r3, .L99
 2257 0684 1A70     		strb	r2, [r3]
 484:FML/Src/EC2x.c ****                     retry = 0;
 2258              		.loc 1 484 27
 2259 0686 234B     		ldr	r3, .L99+8
 2260 0688 0022     		movs	r2, #0
 2261 068a 1A70     		strb	r2, [r3]
 2262 068c 2AE0     		b	.L90
 2263              	.L89:
 485:FML/Src/EC2x.c ****                 }
 486:FML/Src/EC2x.c ****                 else
 487:FML/Src/EC2x.c ****                 {
 488:FML/Src/EC2x.c ****                     if(connectmsg_queue[step].retry_times < retry){
 2264              		.loc 1 488 46
 2265 068e 1F4B     		ldr	r3, .L99
 2266 0690 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2267 0692 1946     		mov	r1, r3
 2268 0694 1E4A     		ldr	r2, .L99+4
 2269 0696 0B46     		mov	r3, r1
 2270 0698 5B00     		lsls	r3, r3, #1
 2271 069a 0B44     		add	r3, r3, r1
 2272 069c 9B00     		lsls	r3, r3, #2
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 50


 2273 069e 1344     		add	r3, r3, r2
 2274 06a0 0A33     		adds	r3, r3, #10
 2275 06a2 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2276              		.loc 1 488 59
 2277 06a4 1B4B     		ldr	r3, .L99+8
 2278 06a6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2279              		.loc 1 488 23
 2280 06a8 9A42     		cmp	r2, r3
 2281 06aa 15D2     		bcs	.L91
 489:FML/Src/EC2x.c ****                         shellPrint(&shell,"%s err\r\n",connectmsg_queue[step].txmsg);
 2282              		.loc 1 489 25
 2283 06ac 174B     		ldr	r3, .L99
 2284 06ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2285 06b0 1946     		mov	r1, r3
 2286 06b2 174A     		ldr	r2, .L99+4
 2287 06b4 0B46     		mov	r3, r1
 2288 06b6 5B00     		lsls	r3, r3, #1
 2289 06b8 0B44     		add	r3, r3, r1
 2290 06ba 9B00     		lsls	r3, r3, #2
 2291 06bc 1344     		add	r3, r3, r2
 2292 06be 1B68     		ldr	r3, [r3]
 2293 06c0 1A46     		mov	r2, r3
 2294 06c2 1549     		ldr	r1, .L99+12
 2295 06c4 1548     		ldr	r0, .L99+16
 2296 06c6 FFF7FEFF 		bl	shellPrint
 490:FML/Src/EC2x.c ****                         ec2x_reset(fd); 
 2297              		.loc 1 490 25
 2298 06ca 7868     		ldr	r0, [r7, #4]
 2299 06cc FFF7FEFF 		bl	ec2x_reset
 491:FML/Src/EC2x.c ****                         step = 0;
 2300              		.loc 1 491 30
 2301 06d0 0E4B     		ldr	r3, .L99
 2302 06d2 0022     		movs	r2, #0
 2303 06d4 1A70     		strb	r2, [r3]
 2304 06d6 05E0     		b	.L90
 2305              	.L91:
 492:FML/Src/EC2x.c ****                     }
 493:FML/Src/EC2x.c ****                     else
 494:FML/Src/EC2x.c ****                         retry++;
 2306              		.loc 1 494 30
 2307 06d8 0E4B     		ldr	r3, .L99+8
 2308 06da 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2309 06dc 0133     		adds	r3, r3, #1
 2310 06de DAB2     		uxtb	r2, r3
 2311 06e0 0C4B     		ldr	r3, .L99+8
 2312 06e2 1A70     		strb	r2, [r3]
 2313              	.L90:
 495:FML/Src/EC2x.c ****                 }
 496:FML/Src/EC2x.c ****                 Delay_ms(200);
 2314              		.loc 1 496 17
 2315 06e4 C820     		movs	r0, #200
 2316 06e6 FFF7FEFF 		bl	Delay_ms
 497:FML/Src/EC2x.c ****             }
 498:FML/Src/EC2x.c ****             break;  
 2317              		.loc 1 498 13
 2318 06ea 06E0     		b	.L56
 2319              	.L58:
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 51


 499:FML/Src/EC2x.c ****             case 8:
 500:FML/Src/EC2x.c ****             {
 501:FML/Src/EC2x.c ****                 shellPrint(&shell,"tcp is connected\r\n");
 2320              		.loc 1 501 17
 2321 06ec 0C49     		ldr	r1, .L99+20
 2322 06ee 0B48     		ldr	r0, .L99+16
 2323 06f0 FFF7FEFF 		bl	shellPrint
 502:FML/Src/EC2x.c ****                 return 0;
 2324              		.loc 1 502 24
 2325 06f4 0023     		movs	r3, #0
 2326 06f6 05E0     		b	.L55
 2327              	.L94:
 503:FML/Src/EC2x.c ****             }
 504:FML/Src/EC2x.c ****             break; 
 505:FML/Src/EC2x.c ****             default:
 506:FML/Src/EC2x.c ****                 break;
 2328              		.loc 1 506 17
 2329 06f8 00BF     		nop
 2330              	.L56:
 335:FML/Src/EC2x.c ****         switch (step)
 2331              		.loc 1 335 16
 2332 06fa 044B     		ldr	r3, .L99
 2333 06fc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 335:FML/Src/EC2x.c ****         switch (step)
 2334              		.loc 1 335 10
 2335 06fe 082B     		cmp	r3, #8
 2336 0700 7FF686AC 		bls	.L93
 2337              	.L55:
 507:FML/Src/EC2x.c ****         }
 508:FML/Src/EC2x.c ****     }
 509:FML/Src/EC2x.c **** }
 2338              		.loc 1 509 1
 2339 0704 1846     		mov	r0, r3
 2340 0706 0C37     		adds	r7, r7, #12
 2341              	.LCFI43:
 2342              		.cfi_def_cfa_offset 12
 2343 0708 BD46     		mov	sp, r7
 2344              	.LCFI44:
 2345              		.cfi_def_cfa_register 13
 2346              		@ sp needed
 2347 070a 90BD     		pop	{r4, r7, pc}
 2348              	.L100:
 2349              		.align	2
 2350              	.L99:
 2351 070c 00000000 		.word	step.1
 2352 0710 00000000 		.word	connectmsg_queue
 2353 0714 00000000 		.word	retry.0
 2354 0718 D0000000 		.word	.LC16
 2355 071c 00000000 		.word	shell
 2356 0720 DC000000 		.word	.LC17
 2357              		.cfi_endproc
 2358              	.LFE299:
 2360              		.section	.rodata
 2361 00ef 00       		.align	2
 2362              	.LC18:
 2363 00f0 7463705F 		.ascii	"tcp_connect\000"
 2363      636F6E6E 
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 52


 2363      65637400 
 2364              		.align	2
 2365              	.LC19:
 2366 00fc 45433278 		.ascii	"EC2x CMD Test OK\015\012\000"
 2366      20434D44 
 2366      20546573 
 2366      74204F4B 
 2366      0D0A00
 2367 010f 00       		.align	2
 2368              	.LC20:
 2369 0110 45433278 		.ascii	"EC2x CMD Test Failed\015\012\000"
 2369      20434D44 
 2369      20546573 
 2369      74204661 
 2369      696C6564 
 2370              		.section	.text.EC2x_Test,"ax",%progbits
 2371              		.align	1
 2372              		.global	EC2x_Test
 2373              		.syntax unified
 2374              		.thumb
 2375              		.thumb_func
 2377              	EC2x_Test:
 2378              	.LFB300:
 510:FML/Src/EC2x.c **** /*------------------------------------test------------------------------------*/
 511:FML/Src/EC2x.c **** 
 512:FML/Src/EC2x.c **** /**
 513:FML/Src/EC2x.c ****  * @brief 
 514:FML/Src/EC2x.c ****  * 
 515:FML/Src/EC2x.c ****  * @param fd 
 516:FML/Src/EC2x.c ****  * @param tx_buff 
 517:FML/Src/EC2x.c ****  * @param expect_reply 
 518:FML/Src/EC2x.c ****  * @param timeout 
 519:FML/Src/EC2x.c ****  */
 520:FML/Src/EC2x.c **** void EC2x_Test(int fd,char *tx_buff,char *expect_reply,uint16_t timeout)
 521:FML/Src/EC2x.c **** {
 2379              		.loc 1 521 1
 2380              		.cfi_startproc
 2381              		@ args = 0, pretend = 0, frame = 64
 2382              		@ frame_needed = 1, uses_anonymous_args = 0
 2383 0000 80B5     		push	{r7, lr}
 2384              	.LCFI45:
 2385              		.cfi_def_cfa_offset 8
 2386              		.cfi_offset 7, -8
 2387              		.cfi_offset 14, -4
 2388 0002 92B0     		sub	sp, sp, #72
 2389              	.LCFI46:
 2390              		.cfi_def_cfa_offset 80
 2391 0004 02AF     		add	r7, sp, #8
 2392              	.LCFI47:
 2393              		.cfi_def_cfa 7, 72
 2394 0006 F860     		str	r0, [r7, #12]
 2395 0008 B960     		str	r1, [r7, #8]
 2396 000a 7A60     		str	r2, [r7, #4]
 2397 000c 7B80     		strh	r3, [r7, #2]	@ movhi
 522:FML/Src/EC2x.c ****     uint8_t tx_data[20] = {0xff,};
 2398              		.loc 1 522 13
 2399 000e FF23     		movs	r3, #255
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 53


 2400 0010 BB62     		str	r3, [r7, #40]
 2401 0012 07F12C03 		add	r3, r7, #44
 2402 0016 0022     		movs	r2, #0
 2403 0018 1A60     		str	r2, [r3]
 2404 001a 5A60     		str	r2, [r3, #4]
 2405 001c 9A60     		str	r2, [r3, #8]
 2406 001e DA60     		str	r2, [r3, #12]
 523:FML/Src/EC2x.c ****     uint8_t reply_data[20] = {0xff,};
 2407              		.loc 1 523 13
 2408 0020 FF23     		movs	r3, #255
 2409 0022 7B61     		str	r3, [r7, #20]
 2410 0024 07F11803 		add	r3, r7, #24
 2411 0028 0022     		movs	r2, #0
 2412 002a 1A60     		str	r2, [r3]
 2413 002c 5A60     		str	r2, [r3, #4]
 2414 002e 9A60     		str	r2, [r3, #8]
 2415 0030 DA60     		str	r2, [r3, #12]
 524:FML/Src/EC2x.c ****     uint8_t tx_len = 0,reply_len = 0;
 2416              		.loc 1 524 13
 2417 0032 0023     		movs	r3, #0
 2418 0034 87F83F30 		strb	r3, [r7, #63]
 2419              		.loc 1 524 24
 2420 0038 0023     		movs	r3, #0
 2421 003a 87F83E30 		strb	r3, [r7, #62]
 525:FML/Src/EC2x.c ****     tx_len = strlen(tx_buff);
 2422              		.loc 1 525 14
 2423 003e B868     		ldr	r0, [r7, #8]
 2424 0040 FFF7FEFF 		bl	strlen
 2425 0044 0346     		mov	r3, r0
 2426              		.loc 1 525 12
 2427 0046 87F83F30 		strb	r3, [r7, #63]
 526:FML/Src/EC2x.c ****     reply_len = strlen(expect_reply);
 2428              		.loc 1 526 17
 2429 004a 7868     		ldr	r0, [r7, #4]
 2430 004c FFF7FEFF 		bl	strlen
 2431 0050 0346     		mov	r3, r0
 2432              		.loc 1 526 15
 2433 0052 87F83E30 		strb	r3, [r7, #62]
 527:FML/Src/EC2x.c ****     if(strcmp(tx_buff,"tcp_connect")==0){
 2434              		.loc 1 527 8
 2435 0056 2649     		ldr	r1, .L106
 2436 0058 B868     		ldr	r0, [r7, #8]
 2437 005a FFF7FEFF 		bl	strcmp
 2438 005e 0346     		mov	r3, r0
 2439              		.loc 1 527 7
 2440 0060 002B     		cmp	r3, #0
 2441 0062 03D1     		bne	.L102
 528:FML/Src/EC2x.c ****         ec2x_tcp_connect(fd);
 2442              		.loc 1 528 9
 2443 0064 F868     		ldr	r0, [r7, #12]
 2444 0066 FFF7FEFF 		bl	ec2x_tcp_connect
 529:FML/Src/EC2x.c ****     }
 530:FML/Src/EC2x.c ****     else{
 531:FML/Src/EC2x.c ****         memcpy(tx_data,tx_buff,tx_len);
 532:FML/Src/EC2x.c ****         tx_data[tx_len] = 0x0D;
 533:FML/Src/EC2x.c ****         tx_data[tx_len+1] = 0x0A;
 534:FML/Src/EC2x.c ****         tx_len += 2;
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 54


 535:FML/Src/EC2x.c ****         memcpy(reply_data,expect_reply,reply_len);
 536:FML/Src/EC2x.c **** 
 537:FML/Src/EC2x.c ****         if(ec2x_cmd_send(fd,tx_data,tx_len,reply_data,timeout))
 538:FML/Src/EC2x.c ****             shellPrint(&shell,"EC2x CMD Test OK\r\n");
 539:FML/Src/EC2x.c ****         else
 540:FML/Src/EC2x.c ****             shellPrint(&shell,"EC2x CMD Test Failed\r\n");
 541:FML/Src/EC2x.c ****     }
 542:FML/Src/EC2x.c **** }
 2445              		.loc 1 542 1
 2446 006a 3CE0     		b	.L105
 2447              	.L102:
 531:FML/Src/EC2x.c ****         tx_data[tx_len] = 0x0D;
 2448              		.loc 1 531 9
 2449 006c 97F83F20 		ldrb	r2, [r7, #63]	@ zero_extendqisi2
 2450 0070 07F12803 		add	r3, r7, #40
 2451 0074 B968     		ldr	r1, [r7, #8]
 2452 0076 1846     		mov	r0, r3
 2453 0078 FFF7FEFF 		bl	memcpy
 532:FML/Src/EC2x.c ****         tx_data[tx_len+1] = 0x0A;
 2454              		.loc 1 532 16
 2455 007c 97F83F30 		ldrb	r3, [r7, #63]	@ zero_extendqisi2
 532:FML/Src/EC2x.c ****         tx_data[tx_len+1] = 0x0A;
 2456              		.loc 1 532 25
 2457 0080 4033     		adds	r3, r3, #64
 2458 0082 3B44     		add	r3, r3, r7
 2459 0084 0D22     		movs	r2, #13
 2460 0086 03F8182C 		strb	r2, [r3, #-24]
 533:FML/Src/EC2x.c ****         tx_len += 2;
 2461              		.loc 1 533 23
 2462 008a 97F83F30 		ldrb	r3, [r7, #63]	@ zero_extendqisi2
 2463 008e 0133     		adds	r3, r3, #1
 533:FML/Src/EC2x.c ****         tx_len += 2;
 2464              		.loc 1 533 27
 2465 0090 4033     		adds	r3, r3, #64
 2466 0092 3B44     		add	r3, r3, r7
 2467 0094 0A22     		movs	r2, #10
 2468 0096 03F8182C 		strb	r2, [r3, #-24]
 534:FML/Src/EC2x.c ****         memcpy(reply_data,expect_reply,reply_len);
 2469              		.loc 1 534 16
 2470 009a 97F83F30 		ldrb	r3, [r7, #63]
 2471 009e 0233     		adds	r3, r3, #2
 2472 00a0 87F83F30 		strb	r3, [r7, #63]
 535:FML/Src/EC2x.c **** 
 2473              		.loc 1 535 9
 2474 00a4 97F83E20 		ldrb	r2, [r7, #62]	@ zero_extendqisi2
 2475 00a8 07F11403 		add	r3, r7, #20
 2476 00ac 7968     		ldr	r1, [r7, #4]
 2477 00ae 1846     		mov	r0, r3
 2478 00b0 FFF7FEFF 		bl	memcpy
 537:FML/Src/EC2x.c ****             shellPrint(&shell,"EC2x CMD Test OK\r\n");
 2479              		.loc 1 537 12
 2480 00b4 97F83F30 		ldrb	r3, [r7, #63]	@ zero_extendqisi2
 2481 00b8 9AB2     		uxth	r2, r3
 2482 00ba 07F11400 		add	r0, r7, #20
 2483 00be 07F12801 		add	r1, r7, #40
 2484 00c2 7B88     		ldrh	r3, [r7, #2]
 2485 00c4 0093     		str	r3, [sp]
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 55


 2486 00c6 0346     		mov	r3, r0
 2487 00c8 F868     		ldr	r0, [r7, #12]
 2488 00ca FFF7FEFF 		bl	ec2x_cmd_send
 2489 00ce 0346     		mov	r3, r0
 537:FML/Src/EC2x.c ****             shellPrint(&shell,"EC2x CMD Test OK\r\n");
 2490              		.loc 1 537 11
 2491 00d0 002B     		cmp	r3, #0
 2492 00d2 04D0     		beq	.L104
 538:FML/Src/EC2x.c ****         else
 2493              		.loc 1 538 13
 2494 00d4 0749     		ldr	r1, .L106+4
 2495 00d6 0848     		ldr	r0, .L106+8
 2496 00d8 FFF7FEFF 		bl	shellPrint
 2497              		.loc 1 542 1
 2498 00dc 03E0     		b	.L105
 2499              	.L104:
 540:FML/Src/EC2x.c ****     }
 2500              		.loc 1 540 13
 2501 00de 0749     		ldr	r1, .L106+12
 2502 00e0 0548     		ldr	r0, .L106+8
 2503 00e2 FFF7FEFF 		bl	shellPrint
 2504              	.L105:
 2505              		.loc 1 542 1
 2506 00e6 00BF     		nop
 2507 00e8 4037     		adds	r7, r7, #64
 2508              	.LCFI48:
 2509              		.cfi_def_cfa_offset 8
 2510 00ea BD46     		mov	sp, r7
 2511              	.LCFI49:
 2512              		.cfi_def_cfa_register 13
 2513              		@ sp needed
 2514 00ec 80BD     		pop	{r7, pc}
 2515              	.L107:
 2516 00ee 00BF     		.align	2
 2517              	.L106:
 2518 00f0 F0000000 		.word	.LC18
 2519 00f4 FC000000 		.word	.LC19
 2520 00f8 00000000 		.word	shell
 2521 00fc 10010000 		.word	.LC20
 2522              		.cfi_endproc
 2523              	.LFE300:
 2525              		.global	shellCmdec2x_send
 2526              		.section	.rodata.shellCmdec2x_send,"a"
 2527              		.align	2
 2530              	shellCmdec2x_send:
 2531 0000 65633278 		.ascii	"ec2x_send\000"
 2531      5F73656E 
 2531      6400
 2532              		.global	shellDescec2x_send
 2533              		.section	.rodata.shellDescec2x_send,"a"
 2534              		.align	2
 2537              	shellDescec2x_send:
 2538 0000 65633278 		.ascii	"ec2x test\000"
 2538      20746573 
 2538      7400
 2539              		.global	shellCommandec2x_send
 2540              		.section	shellCommand,"a"
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 56


 2543              	shellCommandec2x_send:
 2544 0000 00210000 		.4byte	8448
 2545 0004 00000000 		.4byte	shellCmdec2x_send
 2546 0008 00000000 		.4byte	EC2x_Test
 2547 000c 00000000 		.4byte	shellDescec2x_send
 2548              		.section	.bss.step.1,"aw",%nobits
 2551              	step.1:
 2552 0000 00       		.space	1
 2553              		.section	.bss.retry.0,"aw",%nobits
 2556              	retry.0:
 2557 0000 00       		.space	1
 2558              		.text
 2559              	.Letext0:
 2560              		.file 2 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\
 2561              		.file 3 "e:\\gcc-arm-none-eabi-10.3-2021.10-win32\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\
 2562              		.file 4 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l431xx.h"
 2563              		.file 5 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l4xx.h"
 2564              		.file 6 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 2565              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_gpio.h"
 2566              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 2567              		.file 9 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_uart.h"
 2568              		.file 10 "FML/Inc/EC2x.h"
 2569              		.file 11 "ThirdParty/Letter-shell/Inc/shell.h"
 2570              		.file 12 "HAL/Inc/usart.h"
 2571              		.file 13 "ThirdParty/Letter-shell/Inc/shell_port.h"
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 57


DEFINED SYMBOLS
                            *ABS*:00000000 EC2x.c
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:24     .data.ec2x_buff:00000000 ec2x_buff
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:21     .data.ec2x_buff:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:32     .data.tcp_connect:00000000 tcp_connect
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:29     .data.tcp_connect:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:39     .bss.tcpconnct_step:00000000 tcpconnct_step
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:40     .bss.tcpconnct_step:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:83     .data.connectmsg_queue:00000000 connectmsg_queue
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:43     .rodata:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:80     .data.connectmsg_queue:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:129    .data.ec2x_dev:00000000 ec2x_dev
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:126    .data.ec2x_dev:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:151    .text.ec2x_io_init:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:157    .text.ec2x_io_init:00000000 ec2x_io_init
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:308    .text.ec2x_io_init:000000e8 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:317    .text.ec2x_reset:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:322    .text.ec2x_reset:00000000 ec2x_reset
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1113   .text.ec2x_cmd_send:00000000 ec2x_cmd_send
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:409    .text.ec2x_reset:00000074 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:422    .text.ec2x_open:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:428    .text.ec2x_open:00000000 ec2x_open
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:530    .text.ec2x_open:00000080 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:538    .text.ec2x_write:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:544    .text.ec2x_write:00000000 ec2x_write
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:635    .text.ec2x_write:00000078 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:640    .text.ec2x_read:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:646    .text.ec2x_read:00000000 ec2x_read
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:806    .text.ec2x_read:000000c4 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:815    .text.ec2x_handler:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:821    .text.ec2x_handler:00000000 ec2x_handler
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1025   .text.ec2x_handler:00000108 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1032   .text.ec2x_replymatch:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1038   .text.ec2x_replymatch:00000000 ec2x_replymatch
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1108   .text.ec2x_cmd_send:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1280   .text.ec2x_cmd_send:000000f4 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1293   .text.ec2x_tcp_connect:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1299   .text.ec2x_tcp_connect:00000000 ec2x_tcp_connect
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1333   .text.ec2x_tcp_connect:00000020 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1342   .text.ec2x_tcp_connect:00000044 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1706   .text.ec2x_tcp_connect:000002b4 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2551   .bss.step.1:00000000 step.1
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2556   .bss.retry.0:00000000 retry.0
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:1713   .text.ec2x_tcp_connect:000002c8 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2074   .text.ec2x_tcp_connect:00000538 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2081   .text.ec2x_tcp_connect:0000054c $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2351   .text.ec2x_tcp_connect:0000070c $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2371   .text.EC2x_Test:00000000 $t
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2377   .text.EC2x_Test:00000000 EC2x_Test
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2518   .text.EC2x_Test:000000f0 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2530   .rodata.shellCmdec2x_send:00000000 shellCmdec2x_send
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2527   .rodata.shellCmdec2x_send:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2537   .rodata.shellDescec2x_send:00000000 shellDescec2x_send
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2534   .rodata.shellDescec2x_send:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2543   shellCommand:00000000 shellCommandec2x_send
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2552   .bss.step.1:00000000 $d
C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s:2557   .bss.retry.0:00000000 $d
ARM GAS  C:\Users\CL\AppData\Local\Temp\cc3nLm7T.s 			page 58



UNDEFINED SYMBOLS
huart1
HAL_GPIO_Init
HAL_GPIO_WritePin
Delay_ms
strcmp
shellPrint
shell
HAL_UART_Transmit_IT
memset
strstr
strlen
memcpy
